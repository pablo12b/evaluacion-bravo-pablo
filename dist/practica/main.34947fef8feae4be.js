"use strict";(self.webpackChunkPractica=self.webpackChunkPractica||[]).push([[179],{562:(Ri,Tn,Me)=>{Me.d(Tn,{$:()=>tg,A:()=>ie,G:()=>pt,K:()=>Sv,L:()=>ks,N:()=>Lr,P:()=>vc,R:()=>Dg,U:()=>ve,V:()=>Md,W:()=>tc,X:()=>mi,Y:()=>Fi,Z:()=>Ur,_:()=>Us,a:()=>$i,a0:()=>Od,a1:()=>sc,a2:()=>Bd,a3:()=>og,a4:()=>Nv,a5:()=>$n,a6:()=>$s,a7:()=>sg,a8:()=>ja,a9:()=>Ov,aA:()=>Ge,aB:()=>Et,aC:()=>te,aD:()=>Hi,aE:()=>W,aF:()=>Oe,aG:()=>Xa,aH:()=>Pg,aI:()=>Qs,aJ:()=>Yt,aN:()=>gn,aQ:()=>eo,aa:()=>fe,ab:()=>jt,ac:()=>_i,ad:()=>Xn,ae:()=>js,af:()=>Ue,ag:()=>ag,ah:()=>pn,ak:()=>Ha,al:()=>Do,am:()=>to,ap:()=>ng,aq:()=>Wa,as:()=>pA,at:()=>vA,au:()=>Lt,av:()=>we,aw:()=>k,ax:()=>et,ay:()=>Js,az:()=>Og,b:()=>Vv,c:()=>bo,d:()=>Rg,e:()=>Kv,f:()=>Yv,g:()=>zn,h:()=>dt,i:()=>mc,j:()=>ji,k:()=>zg,l:()=>qv,m:()=>lI,p:()=>Ot,r:()=>Gv,s:()=>Ag,u:()=>kt});var C=Me(861),q=Me(58),N=Me(534),Te=Me(879),ft=Me(582),Gt=Me(537);const Ot={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},ie={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const pt=function Ce(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},Dn=function je(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},nt=new q.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Fe=new Te.Yd("@firebase/auth");function Zt(f,...c){Fe.logLevel<=Te.in.ERROR&&Fe.error(`Auth (${N.SDK_VERSION}): ${f}`,...c)}function et(f,...c){throw qe(f,...c)}function Et(f,...c){return qe(f,...c)}function Pr(f,c,d){const p=Object.assign(Object.assign({},Dn()),{[c]:d});return new q.LL("auth","Firebase",p).create(c,{appName:f.name})}function mn(f,c,d){if(!(c instanceof d))throw d.name!==c.constructor.name&&et(f,"argument-error"),Pr(f,"argument-error",`Type of ${c.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function qe(f,...c){if("string"!=typeof f){const d=c[0],p=[...c.slice(1)];return p[0]&&(p[0].appName=f.name),f._errorFactory.create(d,...p)}return nt.create(f,...c)}function te(f,c,...d){if(!f)throw qe(c,...d)}function ot(f){const c="INTERNAL ASSERTION FAILED: "+f;throw Zt(c),new Error(c)}function Lt(f,c){f||ot(c)}function on(){var f;return typeof self<"u"&&(null===(f=self.location)||void 0===f?void 0:f.href)||""}function ln(){return"http:"===li()||"https:"===li()}function li(){var f;return typeof self<"u"&&(null===(f=self.location)||void 0===f?void 0:f.protocol)||null}class Mr{constructor(c,d){this.shortDelay=c,this.longDelay=d,Lt(d>c,"Short delay should be less than long delay!"),this.isMobile=(0,q.uI)()||(0,q.b$)()}get(){return function di(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ln()||(0,q.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Pi(f,c){Lt(f.emulator,"Emulator should always be set here");const{url:d}=f.emulator;return c?`${d}${c.startsWith("/")?c.slice(1):c}`:d}class L{static initialize(c,d,p){this.fetchImpl=c,d&&(this.headersImpl=d),p&&(this.responseImpl=p)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void ot("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void ot("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void ot("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const $={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},H=new Mr(3e4,6e4);function V(f,c){return f.tenantId&&!c.tenantId?Object.assign(Object.assign({},c),{tenantId:f.tenantId}):c}function Q(f,c,d,p){return K.apply(this,arguments)}function K(){return(K=(0,C.Z)(function*(f,c,d,p,_={}){return ue(f,_,(0,C.Z)(function*(){let E={},R={};p&&("GET"===c?R=p:E={body:JSON.stringify(p)});const F=(0,q.xO)(Object.assign({key:f.config.apiKey},R)).slice(1),X=yield f._getAdditionalHeaders();return X["Content-Type"]="application/json",f.languageCode&&(X["X-Firebase-Locale"]=f.languageCode),L.fetch()(ut(f,f.config.apiHost,d,F),Object.assign({method:c,headers:X,referrerPolicy:"no-referrer"},E))}))})).apply(this,arguments)}function ue(f,c,d){return Je.apply(this,arguments)}function Je(){return(Je=(0,C.Z)(function*(f,c,d){f._canInitEmulator=!1;const p=Object.assign(Object.assign({},$),c);try{const _=new St(f),E=yield Promise.race([d(),_.promise]);_.clearNetworkTimeout();const R=yield E.json();if("needConfirmation"in R)throw Kt(f,"account-exists-with-different-credential",R);if(E.ok&&!("errorMessage"in R))return R;{const F=E.ok?R.errorMessage:R.error.message,[X,me]=F.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===X)throw Kt(f,"credential-already-in-use",R);if("EMAIL_EXISTS"===X)throw Kt(f,"email-already-in-use",R);if("USER_DISABLED"===X)throw Kt(f,"user-disabled",R);const Pe=p[X]||X.toLowerCase().replace(/[_\s]+/g,"-");if(me)throw Pr(f,Pe,me);et(f,Pe)}}catch(_){if(_ instanceof q.ZR)throw _;et(f,"network-request-failed",{message:String(_)})}})).apply(this,arguments)}function ge(f,c,d,p){return Re.apply(this,arguments)}function Re(){return(Re=(0,C.Z)(function*(f,c,d,p,_={}){const E=yield Q(f,c,d,p,_);return"mfaPendingCredential"in E&&et(f,"multi-factor-auth-required",{_serverResponse:E}),E})).apply(this,arguments)}function ut(f,c,d,p){const _=`${c}${d}?${p}`;return f.config.emulator?Pi(f.config,_):`${f.config.apiScheme}://${_}`}function Bt(f){switch(f){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class St{constructor(c){this.auth=c,this.timer=null,this.promise=new Promise((d,p)=>{this.timer=setTimeout(()=>p(Et(this.auth,"network-request-failed")),H.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Kt(f,c,d){const p={appName:f.name};d.email&&(p.email=d.email),d.phoneNumber&&(p.phoneNumber=d.phoneNumber);const _=Et(f,c,p);return _.customData._tokenResponse=d,_}function An(f){return void 0!==f&&void 0!==f.getResponse}function bn(f){return void 0!==f&&void 0!==f.enterprise}class Ln{constructor(c){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===c.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=c.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=c.recaptchaEnforcementState}getProviderEnforcementState(c){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const d of this.recaptchaEnforcementState)if(d.provider&&d.provider===c)return Bt(d.enforcementState);return null}isProviderEnabled(c){return"ENFORCE"===this.getProviderEnforcementState(c)||"AUDIT"===this.getProviderEnforcementState(c)}}function hi(){return(hi=(0,C.Z)(function*(f){return(yield Q(f,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Mi(f,c){return ct.apply(this,arguments)}function ct(){return(ct=(0,C.Z)(function*(f,c){return Q(f,"GET","/v2/recaptchaConfig",V(f,c))})).apply(this,arguments)}function Ni(){return(Ni=(0,C.Z)(function*(f,c){return Q(f,"POST","/v1/accounts:delete",c)})).apply(this,arguments)}function pi(){return(pi=(0,C.Z)(function*(f,c){return Q(f,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function xr(){return(xr=(0,C.Z)(function*(f,c){return Q(f,"POST","/v1/accounts:lookup",c)})).apply(this,arguments)}function Nr(f){if(f)try{const c=new Date(Number(f));if(!isNaN(c.getTime()))return c.toUTCString()}catch{}}function wt(){return(wt=(0,C.Z)(function*(f,c=!1){const d=(0,q.m9)(f),p=yield d.getIdToken(c),_=dn(p);te(_&&_.exp&&_.auth_time&&_.iat,d.auth,"internal-error");const E="object"==typeof _.firebase?_.firebase:void 0,R=E?.sign_in_provider;return{claims:_,token:p,authTime:Nr(kr(_.auth_time)),issuedAtTime:Nr(kr(_.iat)),expirationTime:Nr(kr(_.exp)),signInProvider:R||null,signInSecondFactor:E?.sign_in_second_factor||null}})).apply(this,arguments)}function kr(f){return 1e3*Number(f)}function dn(f){const[c,d,p]=f.split(".");if(void 0===c||void 0===d||void 0===p)return Zt("JWT malformed, contained fewer than 3 sections"),null;try{const _=(0,q.tV)(d);return _?JSON.parse(_):(Zt("Failed to decode base64 JWT payload"),null)}catch(_){return Zt("Caught error parsing JWT payload as JSON",_?.toString()),null}}function Qt(f,c){return hn.apply(this,arguments)}function hn(){return(hn=(0,C.Z)(function*(f,c,d=!1){if(d)return c;try{return yield c}catch(p){throw p instanceof q.ZR&&function Oi({code:f}){return"auth/user-disabled"===f||"auth/user-token-expired"===f}(p)&&f.auth.currentUser===f&&(yield f.auth.signOut()),p}})).apply(this,arguments)}class ki{constructor(c){this.user=c,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(c){var d;if(c){const p=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),p}{this.errorBackoff=3e4;const _=(null!==(d=this.user.stsTokenManager.expirationTime)&&void 0!==d?d:0)-Date.now()-3e5;return Math.max(0,_)}}schedule(c=!1){var d=this;if(!this.isRunning)return;const p=this.getInterval(c);this.timerId=setTimeout((0,C.Z)(function*(){yield d.iteration()}),p)}iteration(){var c=this;return(0,C.Z)(function*(){try{yield c.user.getIdToken(!0)}catch(d){return void("auth/network-request-failed"===d?.code&&c.schedule(!0))}c.schedule()})()}}class gi{constructor(c,d){this.createdAt=c,this.lastLoginAt=d,this._initializeTime()}_initializeTime(){this.lastSignInTime=Nr(this.lastLoginAt),this.creationTime=Nr(this.createdAt)}_copy(c){this.createdAt=c.createdAt,this.lastLoginAt=c.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Sn(f){return _n.apply(this,arguments)}function _n(){return _n=(0,C.Z)(function*(f){var c;const d=f.auth,p=yield f.getIdToken(),_=yield Qt(f,function Kn(f,c){return xr.apply(this,arguments)}(d,{idToken:p}));te(_?.users.length,d,"internal-error");const E=_.users[0];f._notifyReloadListener(E);const R=null!==(c=E.providerUserInfo)&&void 0!==c&&c.length?function _o(f){return f.map(c=>{var{providerId:d}=c,p=(0,ft._T)(c,["providerId"]);return{providerId:d,uid:p.rawId||"",displayName:p.displayName||null,email:p.email||null,phoneNumber:p.phoneNumber||null,photoURL:p.photoUrl||null}})}(E.providerUserInfo):[],F=function Os(f,c){return[...f.filter(p=>!c.some(_=>_.providerId===p.providerId)),...c]}(f.providerData,R),Pe=!!f.isAnonymous&&!(f.email&&E.passwordHash||F?.length),it={uid:E.localId,displayName:E.displayName||null,photoURL:E.photoUrl||null,email:E.email||null,emailVerified:E.emailVerified||!1,phoneNumber:E.phoneNumber||null,tenantId:E.tenantId||null,providerData:F,metadata:new gi(E.createdAt,E.lastLoginAt),isAnonymous:Pe};Object.assign(f,it)}),_n.apply(this,arguments)}function Vr(){return(Vr=(0,C.Z)(function*(f){const c=(0,q.m9)(f);yield Sn(c),yield c.auth._persistUserIfCurrent(c),c.auth._notifyListenersIfCurrent(c)})).apply(this,arguments)}function Vi(){return(Vi=(0,C.Z)(function*(f,c){const d=yield ue(f,{},(0,C.Z)(function*(){const p=(0,q.xO)({grant_type:"refresh_token",refresh_token:c}).slice(1),{tokenApiHost:_,apiKey:E}=f.config,R=ut(f,_,"/v1/token",`key=${E}`),F=yield f._getAdditionalHeaders();return F["Content-Type"]="application/x-www-form-urlencoded",L.fetch()(R,{method:"POST",headers:F,body:p})}));return{accessToken:d.access_token,expiresIn:d.expires_in,refreshToken:d.refresh_token}})).apply(this,arguments)}function D(){return(D=(0,C.Z)(function*(f,c){return Q(f,"POST","/v2/accounts:revokeToken",V(f,c))})).apply(this,arguments)}class I{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(c){te(c.idToken,"internal-error"),te(typeof c.idToken<"u","internal-error"),te(typeof c.refreshToken<"u","internal-error");const d="expiresIn"in c&&typeof c.expiresIn<"u"?Number(c.expiresIn):function Fa(f){const c=dn(f);return te(c,"internal-error"),te(typeof c.exp<"u","internal-error"),te(typeof c.iat<"u","internal-error"),Number(c.exp)-Number(c.iat)}(c.idToken);this.updateTokensAndExpiration(c.idToken,c.refreshToken,d)}getToken(c,d=!1){var p=this;return(0,C.Z)(function*(){return te(!p.accessToken||p.refreshToken,c,"user-token-expired"),d||!p.accessToken||p.isExpired?p.refreshToken?(yield p.refresh(c,p.refreshToken),p.accessToken):null:p.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(c,d){var p=this;return(0,C.Z)(function*(){const{accessToken:_,refreshToken:E,expiresIn:R}=yield function Ko(f,c){return Vi.apply(this,arguments)}(c,d);p.updateTokensAndExpiration(_,E,Number(R))})()}updateTokensAndExpiration(c,d,p){this.refreshToken=d||null,this.accessToken=c||null,this.expirationTime=Date.now()+1e3*p}static fromJSON(c,d){const{refreshToken:p,accessToken:_,expirationTime:E}=d,R=new I;return p&&(te("string"==typeof p,"internal-error",{appName:c}),R.refreshToken=p),_&&(te("string"==typeof _,"internal-error",{appName:c}),R.accessToken=_),E&&(te("number"==typeof E,"internal-error",{appName:c}),R.expirationTime=E),R}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(c){this.accessToken=c.accessToken,this.refreshToken=c.refreshToken,this.expirationTime=c.expirationTime}_clone(){return Object.assign(new I,this.toJSON())}_performRefresh(){return ot("not implemented")}}function w(f,c){te("string"==typeof f||typeof f>"u","internal-error",{appName:c})}class v{constructor(c){var{uid:d,auth:p,stsTokenManager:_}=c,E=(0,ft._T)(c,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ki(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=d,this.auth=p,this.stsTokenManager=_,this.accessToken=_.accessToken,this.displayName=E.displayName||null,this.email=E.email||null,this.emailVerified=E.emailVerified||!1,this.phoneNumber=E.phoneNumber||null,this.photoURL=E.photoURL||null,this.isAnonymous=E.isAnonymous||!1,this.tenantId=E.tenantId||null,this.providerData=E.providerData?[...E.providerData]:[],this.metadata=new gi(E.createdAt||void 0,E.lastLoginAt||void 0)}getIdToken(c){var d=this;return(0,C.Z)(function*(){const p=yield Qt(d,d.stsTokenManager.getToken(d.auth,c));return te(p,d.auth,"internal-error"),d.accessToken!==p&&(d.accessToken=p,yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)),p})()}getIdTokenResult(c){return function Un(f){return wt.apply(this,arguments)}(this,c)}reload(){return function Qn(f){return Vr.apply(this,arguments)}(this)}_assign(c){this!==c&&(te(this.uid===c.uid,this.auth,"internal-error"),this.displayName=c.displayName,this.photoURL=c.photoURL,this.email=c.email,this.emailVerified=c.emailVerified,this.phoneNumber=c.phoneNumber,this.isAnonymous=c.isAnonymous,this.tenantId=c.tenantId,this.providerData=c.providerData.map(d=>Object.assign({},d)),this.metadata._copy(c.metadata),this.stsTokenManager._assign(c.stsTokenManager))}_clone(c){const d=new v(Object.assign(Object.assign({},this),{auth:c,stsTokenManager:this.stsTokenManager._clone()}));return d.metadata._copy(this.metadata),d}_onReload(c){te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=c,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(c){this.reloadListener?this.reloadListener(c):this.reloadUserInfo=c}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(c,d=!1){var p=this;return(0,C.Z)(function*(){let _=!1;c.idToken&&c.idToken!==p.stsTokenManager.accessToken&&(p.stsTokenManager.updateFromServerResponse(c),_=!0),d&&(yield Sn(p)),yield p.auth._persistUserIfCurrent(p),_&&p.auth._notifyListenersIfCurrent(p)})()}delete(){var c=this;return(0,C.Z)(function*(){const d=yield c.getIdToken();return yield Qt(c,function xi(f,c){return Ni.apply(this,arguments)}(c.auth,{idToken:d})),c.stsTokenManager.clearRefreshToken(),c.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(c=>Object.assign({},c)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(c,d){var p,_,E,R,F,X,me,Pe;const it=null!==(p=d.displayName)&&void 0!==p?p:void 0,dr=null!==(_=d.email)&&void 0!==_?_:void 0,io=null!==(E=d.phoneNumber)&&void 0!==E?E:void 0,iu=null!==(R=d.photoURL)&&void 0!==R?R:void 0,qg=null!==(F=d.tenantId)&&void 0!==F?F:void 0,ta=null!==(X=d._redirectEventId)&&void 0!==X?X:void 0,Ro=null!==(me=d.createdAt)&&void 0!==me?me:void 0,Gg=null!==(Pe=d.lastLoginAt)&&void 0!==Pe?Pe:void 0,{uid:xc,emailVerified:yh,isAnonymous:na,providerData:vh,stsTokenManager:tr}=d;te(xc&&tr,c,"internal-error");const pI=I.fromJSON(this.name,tr);te("string"==typeof xc,c,"internal-error"),w(it,c.name),w(dr,c.name),te("boolean"==typeof yh,c,"internal-error"),te("boolean"==typeof na,c,"internal-error"),w(io,c.name),w(iu,c.name),w(qg,c.name),w(ta,c.name),w(Ro,c.name),w(Gg,c.name);const Rn=new v({uid:xc,auth:c,email:dr,emailVerified:yh,displayName:it,isAnonymous:na,photoURL:iu,phoneNumber:io,tenantId:qg,stsTokenManager:pI,createdAt:Ro,lastLoginAt:Gg});return vh&&Array.isArray(vh)&&(Rn.providerData=vh.map(Ih=>Object.assign({},Ih))),ta&&(Rn._redirectEventId=ta),Rn}static _fromIdTokenResponse(c,d,p=!1){return(0,C.Z)(function*(){const _=new I;_.updateFromServerResponse(d);const E=new v({uid:d.localId,auth:c,stsTokenManager:_,isAnonymous:p});return yield Sn(E),E})()}}const A=new Map;function W(f){Lt(f instanceof Function,"Expected a class definition");let c=A.get(f);return c?(Lt(c instanceof f,"Instance stored in cache mismatched with class"),c):(c=new f,A.set(f,c),c)}const ve=(()=>{class f{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,C.Z)(function*(){return!0})()}_set(d,p){var _=this;return(0,C.Z)(function*(){_.storage[d]=p})()}_get(d){var p=this;return(0,C.Z)(function*(){const _=p.storage[d];return void 0===_?null:_})()}_remove(d){var p=this;return(0,C.Z)(function*(){delete p.storage[d]})()}_addListener(d,p){}_removeListener(d,p){}}return f.type="NONE",f})();function Oe(f,c,d){return`firebase:${f}:${c}:${d}`}class lt{constructor(c,d,p){this.persistence=c,this.auth=d,this.userKey=p;const{config:_,name:E}=this.auth;this.fullUserKey=Oe(this.userKey,_.apiKey,E),this.fullPersistenceKey=Oe("persistence",_.apiKey,E),this.boundEventHandler=d._onStorageEvent.bind(d),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(c){return this.persistence._set(this.fullUserKey,c.toJSON())}getCurrentUser(){var c=this;return(0,C.Z)(function*(){const d=yield c.persistence._get(c.fullUserKey);return d?v._fromJSON(c.auth,d):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(c){var d=this;return(0,C.Z)(function*(){if(d.persistence===c)return;const p=yield d.getCurrentUser();return yield d.removeCurrentUser(),d.persistence=c,p?d.setCurrentUser(p):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(c,d,p="authUser"){return(0,C.Z)(function*(){if(!d.length)return new lt(W(ve),c,p);const _=(yield Promise.all(d.map(function(){var me=(0,C.Z)(function*(Pe){if(yield Pe._isAvailable())return Pe});return function(Pe){return me.apply(this,arguments)}}()))).filter(me=>me);let E=_[0]||W(ve);const R=Oe(p,c.config.apiKey,c.name);let F=null;for(const me of d)try{const Pe=yield me._get(R);if(Pe){const it=v._fromJSON(c,Pe);me!==E&&(F=it),E=me;break}}catch{}const X=_.filter(me=>me._shouldAllowMigration);return E._shouldAllowMigration&&X.length?(E=X[0],F&&(yield E._set(R,F.toJSON())),yield Promise.all(d.map(function(){var me=(0,C.Z)(function*(Pe){if(Pe!==E)try{yield Pe._remove(R)}catch{}});return function(Pe){return me.apply(this,arguments)}}())),new lt(E,c,p)):new lt(E,c,p)})()}}function he(f){const c=f.toLowerCase();if(c.includes("opera/")||c.includes("opr/")||c.includes("opios/"))return"Opera";if(Qo(c))return"IEMobile";if(c.includes("msie")||c.includes("trident/"))return"IE";if(c.includes("edge/"))return"Edge";if(Dt(c))return"Firefox";if(c.includes("silk/"))return"Silk";if(P(c))return"Blackberry";if(ee(c))return"Webos";if(De(c))return"Safari";if((c.includes("chrome/")||kn(c))&&!c.includes("edge/"))return"Chrome";if(k(c))return"Android";{const p=f.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===p?.length)return p[1]}return"Other"}function Dt(f=(0,q.z$)()){return/firefox\//i.test(f)}function De(f=(0,q.z$)()){const c=f.toLowerCase();return c.includes("safari/")&&!c.includes("chrome/")&&!c.includes("crios/")&&!c.includes("android")}function kn(f=(0,q.z$)()){return/crios\//i.test(f)}function Qo(f=(0,q.z$)()){return/iemobile/i.test(f)}function k(f=(0,q.z$)()){return/android/i.test(f)}function P(f=(0,q.z$)()){return/blackberry/i.test(f)}function ee(f=(0,q.z$)()){return/webos/i.test(f)}function we(f=(0,q.z$)()){return/iphone|ipad|ipod/i.test(f)||/macintosh/i.test(f)&&/mobile/i.test(f)}function Ge(f=(0,q.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(f)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(f)}function fn(f=(0,q.z$)()){return we(f)||k(f)||ee(f)||P(f)||/windows phone/i.test(f)||Qo(f)}function Xe(f,c=[]){let d;switch(f){case"Browser":d=he((0,q.z$)());break;case"Worker":d=`${he((0,q.z$)())}-${f}`;break;default:d=f}const p=c.length?c.join(","):"FirebaseCore-web";return`${d}/JsCore/${N.SDK_VERSION}/${p}`}class La{constructor(c){this.auth=c,this.queue=[]}pushCallback(c,d){const p=E=>new Promise((R,F)=>{try{R(c(E))}catch(X){F(X)}});p.onAbort=d,this.queue.push(p);const _=this.queue.length-1;return()=>{this.queue[_]=()=>Promise.resolve()}}runMiddleware(c){var d=this;return(0,C.Z)(function*(){if(d.auth.currentUser===c)return;const p=[];try{for(const _ of d.queue)yield _(c),_.onAbort&&p.push(_.onAbort)}catch(_){p.reverse();for(const E of p)try{E()}catch{}throw d.auth._errorFactory.create("login-blocked",{originalMessage:_?.message})}})()}}function vd(){return(vd=(0,C.Z)(function*(f,c={}){return Q(f,"GET","/v2/passwordPolicy",V(f,c))})).apply(this,arguments)}class Fr{constructor(c){var d,p,_,E;const R=c.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(d=R.minPasswordLength)&&void 0!==d?d:6,R.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=R.maxPasswordLength),void 0!==R.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=R.containsLowercaseCharacter),void 0!==R.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=R.containsUppercaseCharacter),void 0!==R.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=R.containsNumericCharacter),void 0!==R.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=R.containsNonAlphanumericCharacter),this.enforcementState=c.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(_=null===(p=c.allowedNonAlphanumericCharacters)||void 0===p?void 0:p.join(""))&&void 0!==_?_:"",this.forceUpgradeOnSignin=null!==(E=c.forceUpgradeOnSignin)&&void 0!==E&&E,this.schemaVersion=c.schemaVersion}validatePassword(c){var d,p,_,E,R,F;const X={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(c,X),this.validatePasswordCharacterOptions(c,X),X.isValid&&(X.isValid=null===(d=X.meetsMinPasswordLength)||void 0===d||d),X.isValid&&(X.isValid=null===(p=X.meetsMaxPasswordLength)||void 0===p||p),X.isValid&&(X.isValid=null===(_=X.containsLowercaseLetter)||void 0===_||_),X.isValid&&(X.isValid=null===(E=X.containsUppercaseLetter)||void 0===E||E),X.isValid&&(X.isValid=null===(R=X.containsNumericCharacter)||void 0===R||R),X.isValid&&(X.isValid=null===(F=X.containsNonAlphanumericCharacter)||void 0===F||F),X}validatePasswordLengthOptions(c,d){const p=this.customStrengthOptions.minPasswordLength,_=this.customStrengthOptions.maxPasswordLength;p&&(d.meetsMinPasswordLength=c.length>=p),_&&(d.meetsMaxPasswordLength=c.length<=_)}validatePasswordCharacterOptions(c,d){let p;this.updatePasswordCharacterOptionsStatuses(d,!1,!1,!1,!1);for(let _=0;_<c.length;_++)p=c.charAt(_),this.updatePasswordCharacterOptionsStatuses(d,p>="a"&&p<="z",p>="A"&&p<="Z",p>="0"&&p<="9",this.allowedNonAlphanumericCharacters.includes(p))}updatePasswordCharacterOptionsStatuses(c,d,p,_,E){this.customStrengthOptions.containsLowercaseLetter&&(c.containsLowercaseLetter||(c.containsLowercaseLetter=d)),this.customStrengthOptions.containsUppercaseLetter&&(c.containsUppercaseLetter||(c.containsUppercaseLetter=p)),this.customStrengthOptions.containsNumericCharacter&&(c.containsNumericCharacter||(c.containsNumericCharacter=_)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(c.containsNonAlphanumericCharacter||(c.containsNonAlphanumericCharacter=E))}}class oA{constructor(c,d,p,_){this.app=c,this.heartbeatServiceProvider=d,this.appCheckServiceProvider=p,this.config=_,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Tv(this),this.idTokenSubscription=new Tv(this),this.beforeStateQueue=new La(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=nt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=c.name,this.clientVersion=_.sdkClientVersion}_initializeWithPersistence(c,d){var p=this;return d&&(this._popupRedirectResolver=W(d)),this._initializationPromise=this.queue((0,C.Z)(function*(){var _,E;if(!p._deleted&&(p.persistenceManager=yield lt.create(p,c),!p._deleted)){if(null!==(_=p._popupRedirectResolver)&&void 0!==_&&_._shouldInitProactively)try{yield p._popupRedirectResolver._initialize(p)}catch{}yield p.initializeCurrentUser(d),p.lastNotifiedUid=(null===(E=p.currentUser)||void 0===E?void 0:E.uid)||null,!p._deleted&&(p._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var c=this;return(0,C.Z)(function*(){if(c._deleted)return;const d=yield c.assertedPersistence.getCurrentUser();if(c.currentUser||d){if(c.currentUser&&d&&c.currentUser.uid===d.uid)return c._currentUser._assign(d),void(yield c.currentUser.getIdToken());yield c._updateCurrentUser(d,!0)}})()}initializeCurrentUser(c){var d=this;return(0,C.Z)(function*(){var p;const _=yield d.assertedPersistence.getCurrentUser();let E=_,R=!1;if(c&&d.config.authDomain){yield d.getOrInitRedirectPersistenceManager();const F=null===(p=d.redirectUser)||void 0===p?void 0:p._redirectEventId,X=E?._redirectEventId,me=yield d.tryRedirectSignIn(c);(!F||F===X)&&me?.user&&(E=me.user,R=!0)}if(!E)return d.directlySetCurrentUser(null);if(!E._redirectEventId){if(R)try{yield d.beforeStateQueue.runMiddleware(E)}catch(F){E=_,d._popupRedirectResolver._overrideRedirectResult(d,()=>Promise.reject(F))}return E?d.reloadAndSetCurrentUserOrClear(E):d.directlySetCurrentUser(null)}return te(d._popupRedirectResolver,d,"argument-error"),yield d.getOrInitRedirectPersistenceManager(),d.redirectUser&&d.redirectUser._redirectEventId===E._redirectEventId?d.directlySetCurrentUser(E):d.reloadAndSetCurrentUserOrClear(E)})()}tryRedirectSignIn(c){var d=this;return(0,C.Z)(function*(){let p=null;try{p=yield d._popupRedirectResolver._completeRedirectFn(d,c,!0)}catch{yield d._setRedirectUser(null)}return p})()}reloadAndSetCurrentUserOrClear(c){var d=this;return(0,C.Z)(function*(){try{yield Sn(c)}catch(p){if("auth/network-request-failed"!==p?.code)return d.directlySetCurrentUser(null)}return d.directlySetCurrentUser(c)})()}useDeviceLanguage(){this.languageCode=function We(){if(typeof navigator>"u")return null;const f=navigator;return f.languages&&f.languages[0]||f.language||null}()}_delete(){var c=this;return(0,C.Z)(function*(){c._deleted=!0})()}updateCurrentUser(c){var d=this;return(0,C.Z)(function*(){const p=c?(0,q.m9)(c):null;return p&&te(p.auth.config.apiKey===d.config.apiKey,d,"invalid-user-token"),d._updateCurrentUser(p&&p._clone(d))})()}_updateCurrentUser(c,d=!1){var p=this;return(0,C.Z)(function*(){if(!p._deleted)return c&&te(p.tenantId===c.tenantId,p,"tenant-id-mismatch"),d||(yield p.beforeStateQueue.runMiddleware(c)),p.queue((0,C.Z)(function*(){yield p.directlySetCurrentUser(c),p.notifyAuthListeners()}))})()}signOut(){var c=this;return(0,C.Z)(function*(){return yield c.beforeStateQueue.runMiddleware(null),(c.redirectPersistenceManager||c._popupRedirectResolver)&&(yield c._setRedirectUser(null)),c._updateCurrentUser(null,!0)})()}setPersistence(c){var d=this;return this.queue((0,C.Z)(function*(){yield d.assertedPersistence.setPersistence(W(c))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(c){var d=this;return(0,C.Z)(function*(){d._getPasswordPolicyInternal()||(yield d._updatePasswordPolicy());const p=d._getPasswordPolicyInternal();return p.schemaVersion!==d.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(d._errorFactory.create("unsupported-password-policy-schema-version",{})):p.validatePassword(c)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var c=this;return(0,C.Z)(function*(){const d=yield function iA(f){return vd.apply(this,arguments)}(c),p=new Fr(d);null===c.tenantId?c._projectPasswordPolicy=p:c._tenantPasswordPolicies[c.tenantId]=p})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(c){this._errorFactory=new q.LL("auth","Firebase",c())}onAuthStateChanged(c,d,p){return this.registerStateListener(this.authStateSubscription,c,d,p)}beforeAuthStateChanged(c,d){return this.beforeStateQueue.pushCallback(c,d)}onIdTokenChanged(c,d,p){return this.registerStateListener(this.idTokenSubscription,c,d,p)}authStateReady(){return new Promise((c,d)=>{if(this.currentUser)c();else{const p=this.onAuthStateChanged(()=>{p(),c()},d)}})}revokeAccessToken(c){var d=this;return(0,C.Z)(function*(){if(d.currentUser){const p=yield d.currentUser.getIdToken(),_={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:c,idToken:p};null!=d.tenantId&&(_.tenantId=d.tenantId),yield function S(f,c){return D.apply(this,arguments)}(d,_)}})()}toJSON(){var c;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(c=this._currentUser)||void 0===c?void 0:c.toJSON()}}_setRedirectUser(c,d){var p=this;return(0,C.Z)(function*(){const _=yield p.getOrInitRedirectPersistenceManager(d);return null===c?_.removeCurrentUser():_.setCurrentUser(c)})()}getOrInitRedirectPersistenceManager(c){var d=this;return(0,C.Z)(function*(){if(!d.redirectPersistenceManager){const p=c&&W(c)||d._popupRedirectResolver;te(p,d,"argument-error"),d.redirectPersistenceManager=yield lt.create(d,[W(p._redirectPersistence)],"redirectUser"),d.redirectUser=yield d.redirectPersistenceManager.getCurrentUser()}return d.redirectPersistenceManager})()}_redirectUserForId(c){var d=this;return(0,C.Z)(function*(){var p,_;return d._isInitialized&&(yield d.queue((0,C.Z)(function*(){}))),(null===(p=d._currentUser)||void 0===p?void 0:p._redirectEventId)===c?d._currentUser:(null===(_=d.redirectUser)||void 0===_?void 0:_._redirectEventId)===c?d.redirectUser:null})()}_persistUserIfCurrent(c){var d=this;return(0,C.Z)(function*(){if(c===d.currentUser)return d.queue((0,C.Z)(function*(){return d.directlySetCurrentUser(c)}))})()}_notifyListenersIfCurrent(c){c===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var c,d;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const p=null!==(d=null===(c=this.currentUser)||void 0===c?void 0:c.uid)&&void 0!==d?d:null;this.lastNotifiedUid!==p&&(this.lastNotifiedUid=p,this.authStateSubscription.next(this.currentUser))}registerStateListener(c,d,p,_){if(this._deleted)return()=>{};const E="function"==typeof d?d:d.next.bind(d);let R=!1;const F=this._isInitialized?Promise.resolve():this._initializationPromise;if(te(F,this,"internal-error"),F.then(()=>{R||E(this.currentUser)}),"function"==typeof d){const X=c.addObserver(d,p,_);return()=>{R=!0,X()}}{const X=c.addObserver(d);return()=>{R=!0,X()}}}directlySetCurrentUser(c){var d=this;return(0,C.Z)(function*(){d.currentUser&&d.currentUser!==c&&d._currentUser._stopProactiveRefresh(),c&&d.isProactiveRefreshEnabled&&c._startProactiveRefresh(),d.currentUser=c,c?yield d.assertedPersistence.setCurrentUser(c):yield d.assertedPersistence.removeCurrentUser()})()}queue(c){return this.operations=this.operations.then(c,c),this.operations}get assertedPersistence(){return te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(c){!c||this.frameworks.includes(c)||(this.frameworks.push(c),this.frameworks.sort(),this.clientVersion=Xe(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var c=this;return(0,C.Z)(function*(){var d;const p={"X-Client-Version":c.clientVersion};c.app.options.appId&&(p["X-Firebase-gmpid"]=c.app.options.appId);const _=yield null===(d=c.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===d?void 0:d.getHeartbeatsHeader();_&&(p["X-Firebase-Client"]=_);const E=yield c._getAppCheckToken();return E&&(p["X-Firebase-AppCheck"]=E),p})()}_getAppCheckToken(){var c=this;return(0,C.Z)(function*(){var d;const p=yield null===(d=c.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===d?void 0:d.getToken();return p?.error&&function On(f,...c){Fe.logLevel<=Te.in.WARN&&Fe.warn(`Auth (${N.SDK_VERSION}): ${f}`,...c)}(`Error while retrieving App Check token: ${p.error}`),p?.token})()}}function Yt(f){return(0,q.m9)(f)}class Tv{constructor(c){this.auth=c,this.observer=null,this.addObserver=(0,q.ne)(d=>this.observer=d)}get next(){return te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function qp(f){return new Promise((c,d)=>{const p=document.createElement("script");p.setAttribute("src",f),p.onload=c,p.onerror=_=>{const E=Et("internal-error");E.customData=_,d(E)},p.type="text/javascript",p.charset="UTF-8",function Yo(){var f,c;return null!==(c=null===(f=document.getElementsByTagName("head"))||void 0===f?void 0:f[0])&&void 0!==c?c:document}().appendChild(p)})}function Dv(f){return`__${f}${Math.floor(1e6*Math.random())}`}class bv{constructor(c){this.type="recaptcha-enterprise",this.auth=Yt(c)}verify(c="verify",d=!1){var p=this;return(0,C.Z)(function*(){function E(){return E=(0,C.Z)(function*(F){if(!d){if(null==F.tenantId&&null!=F._agentRecaptchaConfig)return F._agentRecaptchaConfig.siteKey;if(null!=F.tenantId&&void 0!==F._tenantRecaptchaConfigs[F.tenantId])return F._tenantRecaptchaConfigs[F.tenantId].siteKey}return new Promise(function(){var X=(0,C.Z)(function*(me,Pe){Mi(F,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(it=>{if(void 0!==it.recaptchaKey){const dr=new Ln(it);return null==F.tenantId?F._agentRecaptchaConfig=dr:F._tenantRecaptchaConfigs[F.tenantId]=dr,me(dr.siteKey)}Pe(new Error("recaptcha Enterprise site key undefined"))}).catch(it=>{Pe(it)})});return function(me,Pe){return X.apply(this,arguments)}}())}),E.apply(this,arguments)}function R(F,X,me){const Pe=window.grecaptcha;bn(Pe)?Pe.enterprise.ready(()=>{Pe.enterprise.execute(F,{action:c}).then(it=>{X(it)}).catch(()=>{X("NO_RECAPTCHA")})}):me(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((F,X)=>{(function _(F){return E.apply(this,arguments)})(p.auth).then(me=>{if(!d&&bn(window.grecaptcha))R(me,F,X);else{if(typeof window>"u")return void X(new Error("RecaptchaVerifier is only supported in browser"));qp("https://www.google.com/recaptcha/enterprise.js?render="+me).then(()=>{R(me,F,X)}).catch(Pe=>{X(Pe)})}}).catch(me=>{X(me)})})})()}}function Gp(f,c,d){return Zp.apply(this,arguments)}function Zp(){return(Zp=(0,C.Z)(function*(f,c,d,p=!1){const _=new bv(f);let E;try{E=yield _.verify(d)}catch{E=yield _.verify(d,!0)}const R=Object.assign({},c);return Object.assign(R,p?{captchaResp:E}:{captchaResponse:E}),Object.assign(R,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(R,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),R})).apply(this,arguments)}function Yn(f,c,d,p){return xe.apply(this,arguments)}function xe(){return xe=(0,C.Z)(function*(f,c,d,p){var _;if(null!==(_=f._getRecaptchaConfig())&&void 0!==_&&_.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const E=yield Gp(f,c,d,"getOobCode"===d);return p(f,E)}return p(f,c).catch(function(){var E=(0,C.Z)(function*(R){if("auth/missing-recaptcha-token"===R.code){console.log(`${d} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const F=yield Gp(f,c,d,"getOobCode"===d);return p(f,F)}return Promise.reject(R)});return function(R){return E.apply(this,arguments)}}())}),xe.apply(this,arguments)}function Sv(f,c,d){const p=Yt(f);te(p._canInitEmulator,p,"emulator-config-failed"),te(/^https?:\/\//.test(c),p,"invalid-emulator-scheme");const _=!!d?.disableWarnings,E=ar(c),{host:R,port:F}=function qu(f){const c=ar(f),d=/(\/\/)?([^?#/]+)/.exec(f.substr(c.length));if(!d)return{host:"",port:null};const p=d[2].split("@").pop()||"",_=/^(\[[^\]]+\])(:|$)/.exec(p);if(_){const E=_[1];return{host:E,port:Qp(p.substr(E.length+1))}}{const[E,R]=p.split(":");return{host:E,port:Qp(R)}}}(c);p.config.emulator={url:`${E}//${R}${null===F?"":`:${F}`}/`},p.settings.appVerificationDisabledForTesting=!0,p.emulatorConfig=Object.freeze({host:R,port:F,protocol:E.replace(":",""),options:Object.freeze({disableWarnings:_})}),_||function Yp(){function f(){const c=document.createElement("p"),d=c.style;c.innerText="Running in emulator mode. Do not use with production credentials.",d.position="fixed",d.width="100%",d.backgroundColor="#ffffff",d.border=".1em solid #000000",d.color="#b50000",d.bottom="0px",d.left="0px",d.margin="0px",d.zIndex="10000",d.textAlign="center",c.classList.add("firebase-emulator-warning"),document.body.appendChild(c)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",f):f())}()}function ar(f){const c=f.indexOf(":");return c<0?"":f.substr(0,c+1)}function Qp(f){if(!f)return null;const c=Number(f);return isNaN(c)?null:c}class ks{constructor(c,d){this.providerId=c,this.signInMethod=d}toJSON(){return ot("not implemented")}_getIdTokenResponse(c){return ot("not implemented")}_linkToIdToken(c,d){return ot("not implemented")}_getReauthenticationResolver(c){return ot("not implemented")}}function Ua(f,c){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,C.Z)(function*(f,c){return Q(f,"POST","/v1/accounts:resetPassword",V(f,c))})).apply(this,arguments)}function Gu(){return(Gu=(0,C.Z)(function*(f,c){return Q(f,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Rv(f,c){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,C.Z)(function*(f,c){return Q(f,"POST","/v1/accounts:signUp",c)})).apply(this,arguments)}function Zu(){return(Zu=(0,C.Z)(function*(f,c){return Q(f,"POST","/v1/accounts:update",V(f,c))})).apply(this,arguments)}function Ir(f,c){return Ku.apply(this,arguments)}function Ku(){return(Ku=(0,C.Z)(function*(f,c){return ge(f,"POST","/v1/accounts:signInWithPassword",V(f,c))})).apply(this,arguments)}function Cd(f,c){return At.apply(this,arguments)}function At(){return(At=(0,C.Z)(function*(f,c){return Q(f,"POST","/v1/accounts:sendOobCode",V(f,c))})).apply(this,arguments)}function Jp(){return(Jp=(0,C.Z)(function*(f,c){return Cd(f,c)})).apply(this,arguments)}function ce(f,c){return Ba.apply(this,arguments)}function Ba(){return(Ba=(0,C.Z)(function*(f,c){return Cd(f,c)})).apply(this,arguments)}function Td(f,c){return Qu.apply(this,arguments)}function Qu(){return(Qu=(0,C.Z)(function*(f,c){return Cd(f,c)})).apply(this,arguments)}function Ad(){return(Ad=(0,C.Z)(function*(f,c){return Cd(f,c)})).apply(this,arguments)}function Xp(){return(Xp=(0,C.Z)(function*(f,c){return ge(f,"POST","/v1/accounts:signInWithEmailLink",V(f,c))})).apply(this,arguments)}function eg(){return(eg=(0,C.Z)(function*(f,c){return ge(f,"POST","/v1/accounts:signInWithEmailLink",V(f,c))})).apply(this,arguments)}class Yu extends ks{constructor(c,d,p,_=null){super("password",p),this._email=c,this._password=d,this._tenantId=_}static _fromEmailAndPassword(c,d){return new Yu(c,d,"password")}static _fromEmailAndCode(c,d,p=null){return new Yu(c,d,"emailLink",p)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(c){const d="string"==typeof c?JSON.parse(c):c;if(d?.email&&d?.password){if("password"===d.signInMethod)return this._fromEmailAndPassword(d.email,d.password);if("emailLink"===d.signInMethod)return this._fromEmailAndCode(d.email,d.password,d.tenantId)}return null}_getIdTokenResponse(c){var d=this;return(0,C.Z)(function*(){switch(d.signInMethod){case"password":return Yn(c,{returnSecureToken:!0,email:d._email,password:d._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Ir);case"emailLink":return function bd(f,c){return Xp.apply(this,arguments)}(c,{email:d._email,oobCode:d._password});default:et(c,"internal-error")}})()}_linkToIdToken(c,d){var p=this;return(0,C.Z)(function*(){switch(p.signInMethod){case"password":return Yn(c,{idToken:d,returnSecureToken:!0,email:p._email,password:p._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Rv);case"emailLink":return function dA(f,c){return eg.apply(this,arguments)}(c,{idToken:d,email:p._email,oobCode:p._password});default:et(c,"internal-error")}})()}_getReauthenticationResolver(c){return this._getIdTokenResponse(c)}}function yo(f,c){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,C.Z)(function*(f,c){return ge(f,"POST","/v1/accounts:signInWithIdp",V(f,c))})).apply(this,arguments)}class Lr extends ks{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(c){const d=new Lr(c.providerId,c.signInMethod);return c.idToken||c.accessToken?(c.idToken&&(d.idToken=c.idToken),c.accessToken&&(d.accessToken=c.accessToken),c.nonce&&!c.pendingToken&&(d.nonce=c.nonce),c.pendingToken&&(d.pendingToken=c.pendingToken)):c.oauthToken&&c.oauthTokenSecret?(d.accessToken=c.oauthToken,d.secret=c.oauthTokenSecret):et("argument-error"),d}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(c){const d="string"==typeof c?JSON.parse(c):c,{providerId:p,signInMethod:_}=d,E=(0,ft._T)(d,["providerId","signInMethod"]);if(!p||!_)return null;const R=new Lr(p,_);return R.idToken=E.idToken||void 0,R.accessToken=E.accessToken||void 0,R.secret=E.secret,R.nonce=E.nonce,R.pendingToken=E.pendingToken||null,R}_getIdTokenResponse(c){return yo(c,this.buildRequest())}_linkToIdToken(c,d){const p=this.buildRequest();return p.idToken=d,yo(c,p)}_getReauthenticationResolver(c){const d=this.buildRequest();return d.autoCreate=!1,yo(c,d)}buildRequest(){const c={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)c.pendingToken=this.pendingToken;else{const d={};this.idToken&&(d.id_token=this.idToken),this.accessToken&&(d.access_token=this.accessToken),this.secret&&(d.oauth_token_secret=this.secret),d.providerId=this.providerId,this.nonce&&!this.pendingToken&&(d.nonce=this.nonce),c.postBody=(0,q.xO)(d)}return c}}function Rd(){return(Rd=(0,C.Z)(function*(f,c){return Q(f,"POST","/v1/accounts:sendVerificationCode",V(f,c))})).apply(this,arguments)}function Ju(){return(Ju=(0,C.Z)(function*(f,c){return ge(f,"POST","/v1/accounts:signInWithPhoneNumber",V(f,c))})).apply(this,arguments)}function Pd(){return(Pd=(0,C.Z)(function*(f,c){const d=yield ge(f,"POST","/v1/accounts:signInWithPhoneNumber",V(f,c));if(d.temporaryProof)throw Kt(f,"account-exists-with-different-credential",d);return d})).apply(this,arguments)}const vo={USER_NOT_FOUND:"user-not-found"};function se(){return(se=(0,C.Z)(function*(f,c){return ge(f,"POST","/v1/accounts:signInWithPhoneNumber",V(f,Object.assign(Object.assign({},c),{operation:"REAUTH"})),vo)})).apply(this,arguments)}class Io extends ks{constructor(c){super("phone","phone"),this.params=c}static _fromVerification(c,d){return new Io({verificationId:c,verificationCode:d})}static _fromTokenResponse(c,d){return new Io({phoneNumber:c,temporaryProof:d})}_getIdTokenResponse(c){return function Mv(f,c){return Ju.apply(this,arguments)}(c,this._makeVerificationRequest())}_linkToIdToken(c,d){return function Fs(f,c){return Pd.apply(this,arguments)}(c,Object.assign({idToken:d},this._makeVerificationRequest()))}_getReauthenticationResolver(c){return function xv(f,c){return se.apply(this,arguments)}(c,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:c,phoneNumber:d,verificationId:p,verificationCode:_}=this.params;return c&&d?{temporaryProof:c,phoneNumber:d}:{sessionInfo:p,code:_}}toJSON(){const c={providerId:this.providerId};return this.params.phoneNumber&&(c.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(c.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(c.verificationCode=this.params.verificationCode),this.params.verificationId&&(c.verificationId=this.params.verificationId),c}static fromJSON(c){"string"==typeof c&&(c=JSON.parse(c));const{verificationId:d,verificationCode:p,phoneNumber:_,temporaryProof:E}=c;return p||d||_||E?new Io({verificationId:d,verificationCode:p,phoneNumber:_,temporaryProof:E}):null}}class Xo{constructor(c){var d,p,_,E,R,F;const X=(0,q.zd)((0,q.pd)(c)),me=null!==(d=X.apiKey)&&void 0!==d?d:null,Pe=null!==(p=X.oobCode)&&void 0!==p?p:null,it=function Ie(f){switch(f){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(_=X.mode)&&void 0!==_?_:null);te(me&&Pe&&it,"argument-error"),this.apiKey=me,this.operation=it,this.code=Pe,this.continueUrl=null!==(E=X.continueUrl)&&void 0!==E?E:null,this.languageCode=null!==(R=X.languageCode)&&void 0!==R?R:null,this.tenantId=null!==(F=X.tenantId)&&void 0!==F?F:null}static parseLink(c){const d=function Xu(f){const c=(0,q.zd)((0,q.pd)(f)).link,d=c?(0,q.zd)((0,q.pd)(c)).deep_link_id:null,p=(0,q.zd)((0,q.pd)(f)).deep_link_id;return(p?(0,q.zd)((0,q.pd)(p)).link:null)||p||d||c||f}(c);try{return new Xo(d)}catch{return null}}}let Md=(()=>{class f{constructor(){this.providerId=f.PROVIDER_ID}static credential(d,p){return Yu._fromEmailAndPassword(d,p)}static credentialWithLink(d,p){const _=Xo.parseLink(p);return te(_,"argument-error"),Yu._fromEmailAndCode(d,_.code,_.tenantId)}}return f.PROVIDER_ID="password",f.EMAIL_PASSWORD_SIGN_IN_METHOD="password",f.EMAIL_LINK_SIGN_IN_METHOD="emailLink",f})();class Xi{constructor(c){this.providerId=c,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(c){this.defaultLanguageCode=c}setCustomParameters(c){return this.customParameters=c,this}getCustomParameters(){return this.customParameters}}class Ls extends Xi{constructor(){super(...arguments),this.scopes=[]}addScope(c){return this.scopes.includes(c)||this.scopes.push(c),this}getScopes(){return[...this.scopes]}}class Ur extends Ls{static credentialFromJSON(c){const d="string"==typeof c?JSON.parse(c):c;return te("providerId"in d&&"signInMethod"in d,"argument-error"),Lr._fromParams(d)}credential(c){return this._credential(Object.assign(Object.assign({},c),{nonce:c.rawNonce}))}_credential(c){return te(c.idToken||c.accessToken,"argument-error"),Lr._fromParams(Object.assign(Object.assign({},c),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(c){return Ur.oauthCredentialFromTaggedObject(c)}static credentialFromError(c){return Ur.oauthCredentialFromTaggedObject(c.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{oauthIdToken:d,oauthAccessToken:p,oauthTokenSecret:_,pendingToken:E,nonce:R,providerId:F}=c;if(!p&&!_&&!d&&!E||!F)return null;try{return new Ur(F)._credential({idToken:d,accessToken:p,nonce:R,pendingToken:E})}catch{return null}}}let tc=(()=>{class f extends Ls{constructor(){super("facebook.com")}static credential(d){return Lr._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.FACEBOOK_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return f.credential(d.oauthAccessToken)}catch{return null}}}return f.FACEBOOK_SIGN_IN_METHOD="facebook.com",f.PROVIDER_ID="facebook.com",f})(),mi=(()=>{class f extends Ls{constructor(){super("google.com"),this.addScope("profile")}static credential(d,p){return Lr._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.GOOGLE_SIGN_IN_METHOD,idToken:d,accessToken:p})}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:p,oauthAccessToken:_}=d;if(!p&&!_)return null;try{return f.credential(p,_)}catch{return null}}}return f.GOOGLE_SIGN_IN_METHOD="google.com",f.PROVIDER_ID="google.com",f})(),Fi=(()=>{class f extends Ls{constructor(){super("github.com")}static credential(d){return Lr._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.GITHUB_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return f.credential(d.oauthAccessToken)}catch{return null}}}return f.GITHUB_SIGN_IN_METHOD="github.com",f.PROVIDER_ID="github.com",f})();class eo extends ks{constructor(c,d){super(c,c),this.pendingToken=d}_getIdTokenResponse(c){return yo(c,this.buildRequest())}_linkToIdToken(c,d){const p=this.buildRequest();return p.idToken=d,yo(c,p)}_getReauthenticationResolver(c){const d=this.buildRequest();return d.autoCreate=!1,yo(c,d)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(c){const d="string"==typeof c?JSON.parse(c):c,{providerId:p,signInMethod:_,pendingToken:E}=d;return p&&_&&E&&p===_?new eo(p,E):null}static _create(c,d){return new eo(c,d)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Us extends Xi{constructor(c){te(c.startsWith("saml."),"argument-error"),super(c)}static credentialFromResult(c){return Us.samlCredentialFromTaggedObject(c)}static credentialFromError(c){return Us.samlCredentialFromTaggedObject(c.customData||{})}static credentialFromJSON(c){const d=eo.fromJSON(c);return te(d,"argument-error"),d}static samlCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{pendingToken:d,providerId:p}=c;if(!d||!p)return null;try{return eo._create(p,d)}catch{return null}}}let tg=(()=>{class f extends Ls{constructor(){super("twitter.com")}static credential(d,p){return Lr._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.TWITTER_SIGN_IN_METHOD,oauthToken:d,oauthTokenSecret:p})}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthAccessToken:p,oauthTokenSecret:_}=d;if(!p||!_)return null;try{return f.credential(p,_)}catch{return null}}}return f.TWITTER_SIGN_IN_METHOD="twitter.com",f.PROVIDER_ID="twitter.com",f})();function Li(f,c){return es.apply(this,arguments)}function es(){return(es=(0,C.Z)(function*(f,c){return ge(f,"POST","/v1/accounts:signUp",V(f,c))})).apply(this,arguments)}class Br{constructor(c){this.user=c.user,this.providerId=c.providerId,this._tokenResponse=c._tokenResponse,this.operationType=c.operationType}static _fromIdTokenResponse(c,d,p,_=!1){return(0,C.Z)(function*(){const E=yield v._fromIdTokenResponse(c,p,_),R=Nd(p);return new Br({user:E,providerId:R,_tokenResponse:p,operationType:d})})()}static _forOperation(c,d,p){return(0,C.Z)(function*(){yield c._updateTokensIfNecessary(p,!0);const _=Nd(p);return new Br({user:c,providerId:_,_tokenResponse:p,operationType:d})})()}}function Nd(f){return f.providerId?f.providerId:"phoneNumber"in f?"phone":null}function Od(f){return nc.apply(this,arguments)}function nc(){return(nc=(0,C.Z)(function*(f){var c;const d=Yt(f);if(yield d._initializationPromise,null!==(c=d.currentUser)&&void 0!==c&&c.isAnonymous)return new Br({user:d.currentUser,providerId:null,operationType:"signIn"});const p=yield Li(d,{returnSecureToken:!0}),_=yield Br._fromIdTokenResponse(d,"signIn",p,!0);return yield d._updateCurrentUser(_.user),_})).apply(this,arguments)}class $a extends q.ZR{constructor(c,d,p,_){var E;super(d.code,d.message),this.operationType=p,this.user=_,Object.setPrototypeOf(this,$a.prototype),this.customData={appName:c.name,tenantId:null!==(E=c.tenantId)&&void 0!==E?E:void 0,_serverResponse:d.customData._serverResponse,operationType:p}}static _fromErrorAndOperation(c,d,p,_){return new $a(c,d,p,_)}}function Bs(f,c,d,p){return("reauthenticate"===c?d._getReauthenticationResolver(f):d._getIdTokenResponse(f)).catch(E=>{throw"auth/multi-factor-auth-required"===E.code?$a._fromErrorAndOperation(f,E,c,p):E})}function kd(f){return new Set(f.map(({providerId:c})=>c).filter(c=>!!c))}function ng(f,c){return Vd.apply(this,arguments)}function Vd(){return Vd=(0,C.Z)(function*(f,c){const d=(0,q.m9)(f);yield ic(!0,d,c);const{providerUserInfo:p}=yield function fi(f,c){return pi.apply(this,arguments)}(d.auth,{idToken:yield d.getIdToken(),deleteProvider:[c]}),_=kd(p||[]);return d.providerData=d.providerData.filter(E=>_.has(E.providerId)),_.has("phone")||(d.phoneNumber=null),yield d.auth._persistUserIfCurrent(d),d}),Vd.apply(this,arguments)}function rc(f,c){return Fd.apply(this,arguments)}function Fd(){return(Fd=(0,C.Z)(function*(f,c,d=!1){const p=yield Qt(f,c._linkToIdToken(f.auth,yield f.getIdToken()),d);return Br._forOperation(f,"link",p)})).apply(this,arguments)}function ic(f,c,d){return $r.apply(this,arguments)}function $r(){return($r=(0,C.Z)(function*(f,c,d){yield Sn(c);const _=!1===f?"provider-already-linked":"no-such-provider";te(kd(c.providerData).has(d)===f,c.auth,_)})).apply(this,arguments)}function rg(f,c){return oc.apply(this,arguments)}function oc(){return(oc=(0,C.Z)(function*(f,c,d=!1){const{auth:p}=f,_="reauthenticate";try{const E=yield Qt(f,Bs(p,_,c,f),d);te(E.idToken,p,"internal-error");const R=dn(E.idToken);te(R,p,"internal-error");const{sub:F}=R;return te(f.uid===F,p,"user-mismatch"),Br._forOperation(f,_,E)}catch(E){throw"auth/user-not-found"===E?.code&&et(p,"user-mismatch"),E}})).apply(this,arguments)}function ig(f,c){return Ld.apply(this,arguments)}function Ld(){return(Ld=(0,C.Z)(function*(f,c,d=!1){const p="signIn",_=yield Bs(f,p,c),E=yield Br._fromIdTokenResponse(f,p,_);return d||(yield f._updateCurrentUser(E.user)),E})).apply(this,arguments)}function sc(f,c){return Ud.apply(this,arguments)}function Ud(){return(Ud=(0,C.Z)(function*(f,c){return ig(Yt(f),c)})).apply(this,arguments)}function Bd(f,c){return $d.apply(this,arguments)}function $d(){return($d=(0,C.Z)(function*(f,c){const d=(0,q.m9)(f);return yield ic(!1,d,c.providerId),rc(d,c)})).apply(this,arguments)}function og(f,c){return jd.apply(this,arguments)}function jd(){return(jd=(0,C.Z)(function*(f,c){return rg((0,q.m9)(f),c)})).apply(this,arguments)}function Hd(){return(Hd=(0,C.Z)(function*(f,c){return ge(f,"POST","/v1/accounts:signInWithCustomToken",V(f,c))})).apply(this,arguments)}function Nv(f,c){return zd.apply(this,arguments)}function zd(){return zd=(0,C.Z)(function*(f,c){const d=Yt(f),p=yield function Eo(f,c){return Hd.apply(this,arguments)}(d,{token:c,returnSecureToken:!0}),_=yield Br._fromIdTokenResponse(d,"signIn",p);return yield d._updateCurrentUser(_.user),_}),zd.apply(this,arguments)}class Bn{constructor(c,d){this.factorId=c,this.uid=d.mfaEnrollmentId,this.enrollmentTime=new Date(d.enrolledAt).toUTCString(),this.displayName=d.displayName}static _fromServerResponse(c,d){return"phoneInfo"in d?Wd._fromServerResponse(c,d):"totpInfo"in d?ac._fromServerResponse(c,d):et(c,"internal-error")}}class Wd extends Bn{constructor(c){super("phone",c),this.phoneNumber=c.phoneInfo}static _fromServerResponse(c,d){return new Wd(d)}}class ac extends Bn{constructor(c){super("totp",c)}static _fromServerResponse(c,d){return new ac(d)}}function Ne(f,c,d){var p;te((null===(p=d.url)||void 0===p?void 0:p.length)>0,f,"invalid-continue-uri"),te(typeof d.dynamicLinkDomain>"u"||d.dynamicLinkDomain.length>0,f,"invalid-dynamic-link-domain"),c.continueUrl=d.url,c.dynamicLinkDomain=d.dynamicLinkDomain,c.canHandleCodeInApp=d.handleCodeInApp,d.iOS&&(te(d.iOS.bundleId.length>0,f,"missing-ios-bundle-id"),c.iOSBundleId=d.iOS.bundleId),d.android&&(te(d.android.packageName.length>0,f,"missing-android-pkg-name"),c.androidInstallApp=d.android.installApp,c.androidMinimumVersionCode=d.android.minimumVersion,c.androidPackageName=d.android.packageName)}function Jn(f){return rt.apply(this,arguments)}function rt(){return(rt=(0,C.Z)(function*(f){const c=Yt(f);c._getPasswordPolicyInternal()&&(yield c._updatePasswordPolicy())})).apply(this,arguments)}function $n(f,c,d){return jn.apply(this,arguments)}function jn(){return(jn=(0,C.Z)(function*(f,c,d){const p=Yt(f),_={requestType:"PASSWORD_RESET",email:c,clientType:"CLIENT_TYPE_WEB"};d&&Ne(p,_,d),yield Yn(p,_,"getOobCode",ce)})).apply(this,arguments)}function $s(f,c,d){return ur.apply(this,arguments)}function ur(){return ur=(0,C.Z)(function*(f,c,d){yield Ua((0,q.m9)(f),{oobCode:c,newPassword:d}).catch(function(){var p=(0,C.Z)(function*(_){throw"auth/password-does-not-meet-requirements"===_.code&&Jn(f),_});return function(_){return p.apply(this,arguments)}}())}),ur.apply(this,arguments)}function sg(f,c){return uc.apply(this,arguments)}function uc(){return uc=(0,C.Z)(function*(f,c){yield function wd(f,c){return Zu.apply(this,arguments)}((0,q.m9)(f),{oobCode:c})}),uc.apply(this,arguments)}function ja(f,c){return qd.apply(this,arguments)}function qd(){return(qd=(0,C.Z)(function*(f,c){const d=(0,q.m9)(f),p=yield Ua(d,{oobCode:c}),_=p.requestType;switch(te(_,d,"internal-error"),_){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":te(p.newEmail,d,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":te(p.mfaInfo,d,"internal-error");default:te(p.email,d,"internal-error")}let E=null;return p.mfaInfo&&(E=Bn._fromServerResponse(Yt(d),p.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===p.requestType?p.newEmail:p.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===p.requestType?p.email:p.newEmail)||null,multiFactorInfo:E},operation:_}})).apply(this,arguments)}function Ov(f,c){return $t.apply(this,arguments)}function $t(){return($t=(0,C.Z)(function*(f,c){const{data:d}=yield ja((0,q.m9)(f),c);return d.email})).apply(this,arguments)}function fe(f,c,d){return Le.apply(this,arguments)}function Le(){return(Le=(0,C.Z)(function*(f,c,d){const p=Yt(f),R=yield Yn(p,{returnSecureToken:!0,email:c,password:d,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Li).catch(X=>{throw"auth/password-does-not-meet-requirements"===X.code&&Jn(f),X}),F=yield Br._fromIdTokenResponse(p,"signIn",R);return yield p._updateCurrentUser(F.user),F})).apply(this,arguments)}function jt(f,c,d){return sc((0,q.m9)(f),Md.credential(c,d)).catch(function(){var p=(0,C.Z)(function*(_){throw"auth/password-does-not-meet-requirements"===_.code&&Jn(f),_});return function(_){return p.apply(this,arguments)}}())}function _i(f,c,d){return ts.apply(this,arguments)}function ts(){return(ts=(0,C.Z)(function*(f,c,d){const p=Yt(f),_={requestType:"EMAIL_SIGNIN",email:c,clientType:"CLIENT_TYPE_WEB"};(function E(R,F){te(F.handleCodeInApp,p,"argument-error"),F&&Ne(p,R,F)})(_,d),yield Yn(p,_,"getOobCode",Td)})).apply(this,arguments)}function Xn(f,c){const d=Xo.parseLink(c);return"EMAIL_SIGNIN"===d?.operation}function js(f,c,d){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,C.Z)(function*(f,c,d){const p=(0,q.m9)(f),_=Md.credentialWithLink(c,d||on());return te(_._tenantId===(p.tenantId||null),p,"tenant-id-mismatch"),sc(p,_)})).apply(this,arguments)}function Co(){return(Co=(0,C.Z)(function*(f,c){return Q(f,"POST","/v1/accounts:createAuthUri",V(f,c))})).apply(this,arguments)}function Ue(f,c){return ns.apply(this,arguments)}function ns(){return ns=(0,C.Z)(function*(f,c){const p={identifier:c,continueUri:ln()?on():"http://localhost"},{signinMethods:_}=yield function wo(f,c){return Co.apply(this,arguments)}((0,q.m9)(f),p);return _||[]}),ns.apply(this,arguments)}function ag(f,c){return To.apply(this,arguments)}function To(){return To=(0,C.Z)(function*(f,c){const d=(0,q.m9)(f),_={requestType:"VERIFY_EMAIL",idToken:yield f.getIdToken()};c&&Ne(d.auth,_,c);const{email:E}=yield function lA(f,c){return Jp.apply(this,arguments)}(d.auth,_);E!==f.email&&(yield f.reload())}),To.apply(this,arguments)}function pn(f,c,d){return rs.apply(this,arguments)}function rs(){return rs=(0,C.Z)(function*(f,c,d){const p=(0,q.m9)(f),E={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield f.getIdToken(),newEmail:c};d&&Ne(p.auth,E,d);const{email:R}=yield function Dd(f,c){return Ad.apply(this,arguments)}(p.auth,E);R!==f.email&&(yield f.reload())}),rs.apply(this,arguments)}function ei(){return(ei=(0,C.Z)(function*(f,c){return Q(f,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Ha(f,c){return cc.apply(this,arguments)}function cc(){return cc=(0,C.Z)(function*(f,{displayName:c,photoURL:d}){if(void 0===c&&void 0===d)return;const p=(0,q.m9)(f),E={idToken:yield p.getIdToken(),displayName:c,photoUrl:d,returnSecureToken:!0},R=yield Qt(p,function Hs(f,c){return ei.apply(this,arguments)}(p.auth,E));p.displayName=R.displayName||null,p.photoURL=R.photoUrl||null;const F=p.providerData.find(({providerId:X})=>"password"===X);F&&(F.displayName=p.displayName,F.photoURL=p.photoURL),yield p._updateTokensIfNecessary(R)}),cc.apply(this,arguments)}function Do(f,c){return zs((0,q.m9)(f),c,null)}function to(f,c){return zs((0,q.m9)(f),null,c)}function zs(f,c,d){return is.apply(this,arguments)}function is(){return is=(0,C.Z)(function*(f,c,d){const{auth:p}=f,E={idToken:yield f.getIdToken(),returnSecureToken:!0};c&&(E.email=c),d&&(E.password=d);const R=yield Qt(f,function Ed(f,c){return Gu.apply(this,arguments)}(p,E));yield f._updateTokensIfNecessary(R,!0)}),is.apply(this,arguments)}class za{constructor(c,d,p={}){this.isNewUser=c,this.providerId=d,this.profile=p}}class lc extends za{constructor(c,d,p,_){super(c,d,p),this.username=_}}class ug extends za{constructor(c,d){super(c,"facebook.com",d)}}class Ui extends lc{constructor(c,d){super(c,"github.com",d,"string"==typeof d?.login?d?.login:null)}}class dc extends za{constructor(c,d){super(c,"google.com",d)}}class Ws extends lc{constructor(c,d,p){super(c,"twitter.com",d,p)}}function Wa(f){const{user:c,_tokenResponse:d}=f;return c.isAnonymous&&!d?{providerId:null,isNewUser:!1,profile:null}:function tt(f){var c,d;if(!f)return null;const{providerId:p}=f,_=f.rawUserInfo?JSON.parse(f.rawUserInfo):{},E=f.isNewUser||"identitytoolkit#SignupNewUserResponse"===f.kind;if(!p&&f?.idToken){const R=null===(d=null===(c=dn(f.idToken))||void 0===c?void 0:c.firebase)||void 0===d?void 0:d.sign_in_provider;if(R)return new za(E,"anonymous"!==R&&"custom"!==R?R:null)}if(!p)return null;switch(p){case"facebook.com":return new ug(E,_);case"github.com":return new Ui(E,_);case"google.com":return new dc(E,_);case"twitter.com":return new Ws(E,_,f.screenName||null);case"custom":case"anonymous":return new za(E,null);default:return new za(E,p,_)}}(d)}class ss{constructor(c,d,p){this.type=c,this.credential=d,this.user=p}static _fromIdtoken(c,d){return new ss("enroll",c,d)}static _fromMfaPendingCredential(c){return new ss("signin",c)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(c){var d,p;if(c?.multiFactorSession){if(null!==(d=c.multiFactorSession)&&void 0!==d&&d.pendingCredential)return ss._fromMfaPendingCredential(c.multiFactorSession.pendingCredential);if(null!==(p=c.multiFactorSession)&&void 0!==p&&p.idToken)return ss._fromIdtoken(c.multiFactorSession.idToken)}return null}}class lg{constructor(c,d,p){this.session=c,this.hints=d,this.signInResolver=p}static _fromError(c,d){const p=Yt(c),_=d.customData._serverResponse,E=(_.mfaInfo||[]).map(F=>Bn._fromServerResponse(p,F));te(_.mfaPendingCredential,p,"internal-error");const R=ss._fromMfaPendingCredential(_.mfaPendingCredential);return new lg(R,E,function(){var F=(0,C.Z)(function*(X){const me=yield X._process(p,R);delete _.mfaInfo,delete _.mfaPendingCredential;const Pe=Object.assign(Object.assign({},_),{idToken:me.idToken,refreshToken:me.refreshToken});switch(d.operationType){case"signIn":const it=yield Br._fromIdTokenResponse(p,d.operationType,Pe);return yield p._updateCurrentUser(it.user),it;case"reauthenticate":return te(d.user,p,"internal-error"),Br._forOperation(d.user,d.operationType,Pe);default:et(p,"internal-error")}});return function(X){return F.apply(this,arguments)}}())}resolveSignIn(c){var d=this;return(0,C.Z)(function*(){return d.signInResolver(c)})()}}function pA(f,c){var d;const p=(0,q.m9)(f),_=c;return te(c.customData.operationType,p,"argument-error"),te(null===(d=_.customData._serverResponse)||void 0===d?void 0:d.mfaPendingCredential,p,"argument-error"),lg._fromError(p,_)}class dg{constructor(c){this.user=c,this.enrolledFactors=[],c._onReload(d=>{d.mfaInfo&&(this.enrolledFactors=d.mfaInfo.map(p=>Bn._fromServerResponse(c.auth,p)))})}static _fromUser(c){return new dg(c)}getSession(){var c=this;return(0,C.Z)(function*(){return ss._fromIdtoken(yield c.user.getIdToken(),c.user)})()}enroll(c,d){var p=this;return(0,C.Z)(function*(){const _=c,E=yield p.getSession(),R=yield Qt(p.user,_._process(p.user.auth,E,d));return yield p.user._updateTokensIfNecessary(R),p.user.reload()})()}unenroll(c){var d=this;return(0,C.Z)(function*(){const p="string"==typeof c?c:c.uid,_=yield d.user.getIdToken();try{const E=yield Qt(d.user,function yA(f,c){return Q(f,"POST","/v2/accounts/mfaEnrollment:withdraw",V(f,c))}(d.user.auth,{idToken:_,mfaEnrollmentId:p}));d.enrolledFactors=d.enrolledFactors.filter(({uid:R})=>R!==p),yield d.user._updateTokensIfNecessary(E),yield d.user.reload()}catch(E){throw E}})()}}const hg=new WeakMap;function vA(f){const c=(0,q.m9)(f);return hg.has(c)||hg.set(c,dg._fromUser(c)),hg.get(c)}const Qd="__sak";class kv{constructor(c,d){this.storageRetriever=c,this.type=d}_isAvailable(){try{return this.storage?(this.storage.setItem(Qd,"1"),this.storage.removeItem(Qd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(c,d){return this.storage.setItem(c,JSON.stringify(d)),Promise.resolve()}_get(c){const d=this.storage.getItem(c);return Promise.resolve(d?JSON.parse(d):null)}_remove(c){return this.storage.removeItem(c),Promise.resolve()}get storage(){return this.storageRetriever()}}const Vv=(()=>{class f extends kv{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(d,p)=>this.onStorageEvent(d,p),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function fg(){const f=(0,q.z$)();return De(f)||we(f)}()&&function Ee(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=fn(),this._shouldAllowMigration=!0}forAllChangedKeys(d){for(const p of Object.keys(this.listeners)){const _=this.storage.getItem(p),E=this.localCache[p];_!==E&&d(p,E,_)}}onStorageEvent(d,p=!1){if(!d.key)return void this.forAllChangedKeys((F,X,me)=>{this.notifyListeners(F,me)});const _=d.key;if(p?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const F=this.storage.getItem(_);if(d.newValue!==F)null!==d.newValue?this.storage.setItem(_,d.newValue):this.storage.removeItem(_);else if(this.localCache[_]===d.newValue&&!p)return}const E=()=>{const F=this.storage.getItem(_);!p&&this.localCache[_]===F||this.notifyListeners(_,F)},R=this.storage.getItem(_);!function j(){return(0,q.w1)()&&10===document.documentMode}()||R===d.newValue||d.newValue===d.oldValue?E():setTimeout(E,10)}notifyListeners(d,p){this.localCache[d]=p;const _=this.listeners[d];if(_)for(const E of Array.from(_))E(p&&JSON.parse(p))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((d,p,_)=>{this.onStorageEvent(new StorageEvent("storage",{key:d,oldValue:p,newValue:_}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(d,p){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[d]||(this.listeners[d]=new Set,this.localCache[d]=this.storage.getItem(d)),this.listeners[d].add(p)}_removeListener(d,p){this.listeners[d]&&(this.listeners[d].delete(p),0===this.listeners[d].size&&delete this.listeners[d]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(d,p){var _=()=>super._set,E=this;return(0,C.Z)(function*(){yield _().call(E,d,p),E.localCache[d]=JSON.stringify(p)})()}_get(d){var p=()=>super._get,_=this;return(0,C.Z)(function*(){const E=yield p().call(_,d);return _.localCache[d]=JSON.stringify(E),E})()}_remove(d){var p=()=>super._remove,_=this;return(0,C.Z)(function*(){yield p().call(_,d),delete _.localCache[d]})()}}return f.type="LOCAL",f})(),$i=(()=>{class f extends kv{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(d,p){}_removeListener(d,p){}}return f.type="SESSION",f})();let wA=(()=>{class f{constructor(d){this.eventTarget=d,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(d){const p=this.receivers.find(E=>E.isListeningto(d));if(p)return p;const _=new f(d);return this.receivers.push(_),_}isListeningto(d){return this.eventTarget===d}handleEvent(d){var p=this;return(0,C.Z)(function*(){const _=d,{eventId:E,eventType:R,data:F}=_.data,X=p.handlersMap[R];if(!X?.size)return;_.ports[0].postMessage({status:"ack",eventId:E,eventType:R});const me=Array.from(X).map(function(){var it=(0,C.Z)(function*(dr){return dr(_.origin,F)});return function(dr){return it.apply(this,arguments)}}()),Pe=yield function EA(f){return Promise.all(f.map(function(){var c=(0,C.Z)(function*(d){try{return{fulfilled:!0,value:yield d}}catch(p){return{fulfilled:!1,reason:p}}});return function(d){return c.apply(this,arguments)}}()))}(me);_.ports[0].postMessage({status:"done",eventId:E,eventType:R,response:Pe})})()}_subscribe(d,p){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[d]||(this.handlersMap[d]=new Set),this.handlersMap[d].add(p)}_unsubscribe(d,p){this.handlersMap[d]&&p&&this.handlersMap[d].delete(p),(!p||0===this.handlersMap[d].size)&&delete this.handlersMap[d],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return f.receivers=[],f})();function gn(f="",c=10){let d="";for(let p=0;p<c;p++)d+=Math.floor(10*Math.random());return f+d}class hc{constructor(c){this.target=c,this.handlers=new Set}removeMessageHandler(c){c.messageChannel&&(c.messageChannel.port1.removeEventListener("message",c.onMessage),c.messageChannel.port1.close()),this.handlers.delete(c)}_send(c,d,p=50){var _=this;return(0,C.Z)(function*(){const E=typeof MessageChannel<"u"?new MessageChannel:null;if(!E)throw new Error("connection_unavailable");let R,F;return new Promise((X,me)=>{const Pe=gn("",20);E.port1.start();const it=setTimeout(()=>{me(new Error("unsupported_event"))},p);F={messageChannel:E,onMessage(dr){const io=dr;if(io.data.eventId===Pe)switch(io.data.status){case"ack":clearTimeout(it),R=setTimeout(()=>{me(new Error("timeout"))},3e3);break;case"done":clearTimeout(R),X(io.data.response);break;default:clearTimeout(it),clearTimeout(R),me(new Error("invalid_response"))}}},_.handlers.add(F),E.port1.addEventListener("message",F.onMessage),_.target.postMessage({eventType:c,eventId:Pe,data:d},[E.port2])}).finally(()=>{F&&_.removeMessageHandler(F)})})()}}function vt(){return window}function fc(){return typeof vt().WorkerGlobalScope<"u"&&"function"==typeof vt().importScripts}function pc(){return(pc=(0,C.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const gc="firebaseLocalStorageDb",qa="firebaseLocalStorage",Xd="fbase_key";class Gs{constructor(c){this.request=c}toPromise(){return new Promise((c,d)=>{this.request.addEventListener("success",()=>{c(this.request.result)}),this.request.addEventListener("error",()=>{d(this.request.error)})})}}function as(f,c){return f.transaction([qa],c?"readwrite":"readonly").objectStore(qa)}function Ao(){const f=indexedDB.open(gc,1);return new Promise((c,d)=>{f.addEventListener("error",()=>{d(f.error)}),f.addEventListener("upgradeneeded",()=>{const p=f.result;try{p.createObjectStore(qa,{keyPath:Xd})}catch(_){d(_)}}),f.addEventListener("success",(0,C.Z)(function*(){const p=f.result;p.objectStoreNames.contains(qa)?c(p):(p.close(),yield function Ga(){const f=indexedDB.deleteDatabase(gc);return new Gs(f).toPromise()}(),c(yield Ao()))}))})}function eh(f,c,d){return yg.apply(this,arguments)}function yg(){return(yg=(0,C.Z)(function*(f,c,d){const p=as(f,!0).put({[Xd]:c,value:d});return new Gs(p).toPromise()})).apply(this,arguments)}function vg(){return(vg=(0,C.Z)(function*(f,c){const d=as(f,!1).get(c),p=yield new Gs(d).toPromise();return void 0===p?null:p.value})).apply(this,arguments)}function Ig(f,c){const d=as(f,!0).delete(c);return new Gs(d).toPromise()}const mc=(()=>{class f{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var d=this;return(0,C.Z)(function*(){return d.db||(d.db=yield Ao()),d.db})()}_withRetries(d){var p=this;return(0,C.Z)(function*(){let _=0;for(;;)try{const E=yield p._openDb();return yield d(E)}catch(E){if(_++>3)throw E;p.db&&(p.db.close(),p.db=void 0)}})()}initializeServiceWorkerMessaging(){var d=this;return(0,C.Z)(function*(){return fc()?d.initializeReceiver():d.initializeSender()})()}initializeReceiver(){var d=this;return(0,C.Z)(function*(){d.receiver=wA._getInstance(function _g(){return fc()?self:null}()),d.receiver._subscribe("keyChanged",function(){var p=(0,C.Z)(function*(_,E){return{keyProcessed:(yield d._poll()).includes(E.key)}});return function(_,E){return p.apply(this,arguments)}}()),d.receiver._subscribe("ping",function(){var p=(0,C.Z)(function*(_,E){return["keyChanged"]});return function(_,E){return p.apply(this,arguments)}}())})()}initializeSender(){var d=this;return(0,C.Z)(function*(){var p,_;if(d.activeServiceWorker=yield function mg(){return pc.apply(this,arguments)}(),!d.activeServiceWorker)return;d.sender=new hc(d.activeServiceWorker);const E=yield d.sender._send("ping",{},800);E&&null!==(p=E[0])&&void 0!==p&&p.fulfilled&&null!==(_=E[0])&&void 0!==_&&_.value.includes("keyChanged")&&(d.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(d){var p=this;return(0,C.Z)(function*(){if(p.sender&&p.activeServiceWorker&&function Yd(){var f;return(null===(f=navigator?.serviceWorker)||void 0===f?void 0:f.controller)||null}()===p.activeServiceWorker)try{yield p.sender._send("keyChanged",{key:d},p.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,C.Z)(function*(){try{if(!indexedDB)return!1;const d=yield Ao();return yield eh(d,Qd,"1"),yield Ig(d,Qd),!0}catch{}return!1})()}_withPendingWrite(d){var p=this;return(0,C.Z)(function*(){p.pendingWrites++;try{yield d()}finally{p.pendingWrites--}})()}_set(d,p){var _=this;return(0,C.Z)(function*(){return _._withPendingWrite((0,C.Z)(function*(){return yield _._withRetries(E=>eh(E,d,p)),_.localCache[d]=p,_.notifyServiceWorker(d)}))})()}_get(d){var p=this;return(0,C.Z)(function*(){const _=yield p._withRetries(E=>function CA(f,c){return vg.apply(this,arguments)}(E,d));return p.localCache[d]=_,_})()}_remove(d){var p=this;return(0,C.Z)(function*(){return p._withPendingWrite((0,C.Z)(function*(){return yield p._withRetries(_=>Ig(_,d)),delete p.localCache[d],p.notifyServiceWorker(d)}))})()}_poll(){var d=this;return(0,C.Z)(function*(){const p=yield d._withRetries(R=>{const F=as(R,!1).getAll();return new Gs(F).toPromise()});if(!p)return[];if(0!==d.pendingWrites)return[];const _=[],E=new Set;for(const{fbase_key:R,value:F}of p)E.add(R),JSON.stringify(d.localCache[R])!==JSON.stringify(F)&&(d.notifyListeners(R,F),_.push(R));for(const R of Object.keys(d.localCache))d.localCache[R]&&!E.has(R)&&(d.notifyListeners(R,null),_.push(R));return _})()}notifyListeners(d,p){this.localCache[d]=p;const _=this.listeners[d];if(_)for(const E of Array.from(_))E(p)}startPolling(){var d=this;this.stopPolling(),this.pollTimer=setInterval((0,C.Z)(function*(){return d._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(d,p){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[d]||(this.listeners[d]=new Set,this._get(d)),this.listeners[d].add(p)}_removeListener(d,p){this.listeners[d]&&(this.listeners[d].delete(p),0===this.listeners[d].size&&delete this.listeners[d]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return f.type="LOCAL",f})(),Za=1e12;class Eg{constructor(c){this.auth=c,this.counter=Za,this._widgets=new Map}render(c,d){const p=this.counter;return this._widgets.set(p,new $v(c,this.auth.name,d||{})),this.counter++,p}reset(c){var d;const p=c||Za;null===(d=this._widgets.get(p))||void 0===d||d.delete(),this._widgets.delete(p)}getResponse(c){var d;return(null===(d=this._widgets.get(c||Za))||void 0===d?void 0:d.getResponse())||""}execute(c){var d=this;return(0,C.Z)(function*(){var p;return null===(p=d._widgets.get(c||Za))||void 0===p||p.execute(),""})()}}class $v{constructor(c,d,p){this.params=p,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const _="string"==typeof c?document.getElementById(c):c;te(_,"argument-error",{appName:d}),this.container=_,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function jv(f){const c=[],d="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<f;p++)c.push(d.charAt(Math.floor(62*Math.random())));return c.join("")}(50);const{callback:c,"expired-callback":d}=this.params;if(c)try{c(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,d)try{d()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const nh=Dv("rcb"),wg=new Mr(3e4,6e4);class Cg{constructor(){var c;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(c=vt().grecaptcha)||void 0===c||!c.render)}load(c,d=""){return te(function zv(f){return f.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(f)}(d),c,"argument-error"),this.shouldResolveImmediately(d)&&An(vt().grecaptcha)?Promise.resolve(vt().grecaptcha):new Promise((p,_)=>{const E=vt().setTimeout(()=>{_(Et(c,"network-request-failed"))},wg.get());vt()[nh]=()=>{vt().clearTimeout(E),delete vt()[nh];const F=vt().grecaptcha;if(!F||!An(F))return void _(Et(c,"internal-error"));const X=F.render;F.render=(me,Pe)=>{const it=X(me,Pe);return this.counter++,it},this.hostLanguage=d,p(F)},qp(`https://www.google.com/recaptcha/api.js??${(0,q.xO)({onload:nh,render:"explicit",hl:d})}`).catch(()=>{clearTimeout(E),_(Et(c,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(c){var d;return!(null===(d=vt().grecaptcha)||void 0===d||!d.render)&&(c===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class bA{load(c){return(0,C.Z)(function*(){return new Eg(c)})()}clearedOneInstance(){}}const Tg="recaptcha",ti={theme:"light",type:"image"};class Dg{constructor(c,d,p=Object.assign({},ti)){this.parameters=p,this.type=Tg,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Yt(c),this.isInvisible="invisible"===this.parameters.size,te(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const _="string"==typeof d?document.getElementById(d):d;te(_,this.auth,"argument-error"),this.container=_,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new bA:new Cg,this.validateStartingState()}verify(){var c=this;return(0,C.Z)(function*(){c.assertNotDestroyed();const d=yield c.render(),p=c.getAssertedRecaptcha();return p.getResponse(d)||new Promise(E=>{const R=F=>{F&&(c.tokenChangeListeners.delete(R),E(F))};c.tokenChangeListeners.add(R),c.isInvisible&&p.execute(d)})})()}render(){try{this.assertNotDestroyed()}catch(c){return Promise.reject(c)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(c=>{throw this.renderPromise=null,c})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(c=>{this.container.removeChild(c)})}validateStartingState(){te(!this.parameters.sitekey,this.auth,"argument-error"),te(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),te(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(c){return d=>{if(this.tokenChangeListeners.forEach(p=>p(d)),"function"==typeof c)c(d);else if("string"==typeof c){const p=vt()[c];"function"==typeof p&&p(d)}}}assertNotDestroyed(){te(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var c=this;return(0,C.Z)(function*(){if(yield c.init(),!c.widgetId){let d=c.container;if(!c.isInvisible){const p=document.createElement("div");d.appendChild(p),d=p}c.widgetId=c.getAssertedRecaptcha().render(d,c.parameters)}return c.widgetId})()}init(){var c=this;return(0,C.Z)(function*(){te(ln()&&!fc(),c.auth,"internal-error"),yield function Wv(){let f=null;return new Promise(c=>{"complete"!==document.readyState?(f=()=>c(),window.addEventListener("load",f)):c()}).catch(c=>{throw f&&window.removeEventListener("load",f),c})}(),c.recaptcha=yield c._recaptchaLoader.load(c.auth,c.auth.languageCode||void 0);const d=yield function vr(f){return hi.apply(this,arguments)}(c.auth);te(d,c.auth,"internal-error"),c.parameters.sitekey=d})()}getAssertedRecaptcha(){return te(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class rh{constructor(c,d){this.verificationId=c,this.onConfirmation=d}confirm(c){const d=Io._fromVerification(this.verificationId,c);return this.onConfirmation(d)}}function Ag(f,c,d){return _c.apply(this,arguments)}function _c(){return(_c=(0,C.Z)(function*(f,c,d){const p=Yt(f),_=yield Qa(p,c,(0,q.m9)(d));return new rh(_,E=>sc(p,E))})).apply(this,arguments)}function qv(f,c,d){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,C.Z)(function*(f,c,d){const p=(0,q.m9)(f);yield ic(!1,p,"phone");const _=yield Qa(p.auth,c,(0,q.m9)(d));return new rh(_,E=>Bd(p,E))})).apply(this,arguments)}function Gv(f,c,d){return ni.apply(this,arguments)}function ni(){return(ni=(0,C.Z)(function*(f,c,d){const p=(0,q.m9)(f),_=yield Qa(p.auth,c,(0,q.m9)(d));return new rh(_,E=>og(p,E))})).apply(this,arguments)}function Qa(f,c,d){return yc.apply(this,arguments)}function yc(){return yc=(0,C.Z)(function*(f,c,d){var p;const _=yield d.verify();try{let E;if(te("string"==typeof _,f,"argument-error"),te(d.type===Tg,f,"argument-error"),E="string"==typeof c?{phoneNumber:c}:c,"session"in E){const R=E.session;if("phoneNumber"in E)return te("enroll"===R.type,f,"internal-error"),(yield function gA(f,c){return Q(f,"POST","/v2/accounts/mfaEnrollment:start",V(f,c))}(f,{idToken:R.credential,phoneEnrollmentInfo:{phoneNumber:E.phoneNumber,recaptchaToken:_}})).phoneSessionInfo.sessionInfo;{te("signin"===R.type,f,"internal-error");const F=(null===(p=E.multiFactorHint)||void 0===p?void 0:p.uid)||E.multiFactorUid;return te(F,f,"missing-multi-factor-info"),(yield function Uv(f,c){return Q(f,"POST","/v2/accounts/mfaSignIn:start",V(f,c))}(f,{mfaPendingCredential:R.credential,mfaEnrollmentId:F,phoneSignInInfo:{recaptchaToken:_}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:R}=yield function Pv(f,c){return Rd.apply(this,arguments)}(f,{phoneNumber:E.phoneNumber,recaptchaToken:_});return R}}finally{d._reset()}}),yc.apply(this,arguments)}function kt(f,c){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,C.Z)(function*(f,c){yield rc((0,q.m9)(f),c)})).apply(this,arguments)}let vc=(()=>{class f{constructor(d){this.providerId=f.PROVIDER_ID,this.auth=Yt(d)}verifyPhoneNumber(d,p){return Qa(this.auth,d,(0,q.m9)(p))}static credential(d,p){return Io._fromVerification(d,p)}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{phoneNumber:p,temporaryProof:_}=d;return p&&_?Io._fromTokenResponse(p,_):null}}return f.PROVIDER_ID="phone",f.PHONE_SIGN_IN_METHOD="phone",f})();function yn(f,c){return c?W(c):(te(f._popupRedirectResolver,f,"argument-error"),f._popupRedirectResolver)}class ih extends ks{constructor(c){super("custom","custom"),this.params=c}_getIdTokenResponse(c){return yo(c,this._buildIdpRequest())}_linkToIdToken(c,d){return yo(c,this._buildIdpRequest(d))}_getReauthenticationResolver(c){return yo(c,this._buildIdpRequest())}_buildIdpRequest(c){const d={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return c&&(d.idToken=c),d}}function bg(f){return ig(f.auth,new ih(f),f.bypassAuthState)}function Zs(f){const{auth:c,user:d}=f;return te(d,c,"internal-error"),rg(d,new ih(f),f.bypassAuthState)}function Hr(f){return oh.apply(this,arguments)}function oh(){return(oh=(0,C.Z)(function*(f){const{auth:c,user:d}=f;return te(d,c,"internal-error"),rc(d,new ih(f),f.bypassAuthState)})).apply(this,arguments)}class Sg{constructor(c,d,p,_,E=!1){this.auth=c,this.resolver=p,this.user=_,this.bypassAuthState=E,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(d)?d:[d]}execute(){var c=this;return new Promise(function(){var d=(0,C.Z)(function*(p,_){c.pendingPromise={resolve:p,reject:_};try{c.eventManager=yield c.resolver._initialize(c.auth),yield c.onExecution(),c.eventManager.registerConsumer(c)}catch(E){c.reject(E)}});return function(p,_){return d.apply(this,arguments)}}())}onAuthEvent(c){var d=this;return(0,C.Z)(function*(){const{urlResponse:p,sessionId:_,postBody:E,tenantId:R,error:F,type:X}=c;if(F)return void d.reject(F);const me={auth:d.auth,requestUri:p,sessionId:_,tenantId:R||void 0,postBody:E||void 0,user:d.user,bypassAuthState:d.bypassAuthState};try{d.resolve(yield d.getIdpTask(X)(me))}catch(Pe){d.reject(Pe)}})()}onError(c){this.reject(c)}getIdpTask(c){switch(c){case"signInViaPopup":case"signInViaRedirect":return bg;case"linkViaPopup":case"linkViaRedirect":return Hr;case"reauthViaPopup":case"reauthViaRedirect":return Zs;default:et(this.auth,"internal-error")}}resolve(c){Lt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(c),this.unregisterAndCleanUp()}reject(c){Lt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(c),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Zv=new Mr(2e3,1e4);function bo(f,c,d){return Ic.apply(this,arguments)}function Ic(){return(Ic=(0,C.Z)(function*(f,c,d){const p=Yt(f);mn(f,c,Xi);const _=yn(p,d);return new sh(p,"signInViaPopup",c,_).executeNotNull()})).apply(this,arguments)}function Kv(f,c,d){return Ec.apply(this,arguments)}function Ec(){return(Ec=(0,C.Z)(function*(f,c,d){const p=(0,q.m9)(f);mn(p.auth,c,Xi);const _=yn(p.auth,d);return new sh(p.auth,"reauthViaPopup",c,_,p).executeNotNull()})).apply(this,arguments)}function Rg(f,c,d){return wc.apply(this,arguments)}function wc(){return(wc=(0,C.Z)(function*(f,c,d){const p=(0,q.m9)(f);mn(p.auth,c,Xi);const _=yn(p.auth,d);return new sh(p.auth,"linkViaPopup",c,_,p).executeNotNull()})).apply(this,arguments)}let sh=(()=>{class f extends Sg{constructor(d,p,_,E,R){super(d,p,E,R),this.provider=_,this.authWindow=null,this.pollId=null,f.currentPopupAction&&f.currentPopupAction.cancel(),f.currentPopupAction=this}executeNotNull(){var d=this;return(0,C.Z)(function*(){const p=yield d.execute();return te(p,d.auth,"internal-error"),p})()}onExecution(){var d=this;return(0,C.Z)(function*(){Lt(1===d.filter.length,"Popup operations only handle one event");const p=gn();d.authWindow=yield d.resolver._openPopup(d.auth,d.provider,d.filter[0],p),d.authWindow.associatedEvent=p,d.resolver._originValidation(d.auth).catch(_=>{d.reject(_)}),d.resolver._isIframeWebStorageSupported(d.auth,_=>{_||d.reject(Et(d.auth,"web-storage-unsupported"))}),d.pollUserCancellation()})()}get eventId(){var d;return(null===(d=this.authWindow)||void 0===d?void 0:d.associatedEvent)||null}cancel(){this.reject(Et(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,f.currentPopupAction=null}pollUserCancellation(){const d=()=>{var p,_;this.pollId=null!==(_=null===(p=this.authWindow)||void 0===p?void 0:p.window)&&void 0!==_&&_.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Et(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(d,Zv.get())};d()}}return f.currentPopupAction=null,f})();const ke="pendingRedirect",Ks=new Map;class SA extends Sg{constructor(c,d,p=!1){super(c,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],d,void 0,p),this.eventId=null}execute(){var c=()=>super.execute,d=this;return(0,C.Z)(function*(){let p=Ks.get(d.auth._key());if(!p){try{const E=(yield function Qv(f,c){return ah.apply(this,arguments)}(d.resolver,d.auth))?yield c().call(d):null;p=()=>Promise.resolve(E)}catch(_){p=()=>Promise.reject(_)}Ks.set(d.auth._key(),p)}return d.bypassAuthState||Ks.set(d.auth._key(),()=>Promise.resolve(null)),p()})()}onAuthEvent(c){var d=()=>super.onAuthEvent,p=this;return(0,C.Z)(function*(){if("signInViaRedirect"===c.type)return d().call(p,c);if("unknown"!==c.type){if(c.eventId){const _=yield p.auth._redirectUserForId(c.eventId);if(_)return p.user=_,d().call(p,c);p.resolve(null)}}else p.resolve(null)})()}onExecution(){return(0,C.Z)(function*(){})()}cleanUp(){}}function ah(){return(ah=(0,C.Z)(function*(f,c){const d=xg(c),p=Mg(f);if(!(yield p._isAvailable()))return!1;const _="true"===(yield p._get(d));return yield p._remove(d),_})).apply(this,arguments)}function uh(f,c){return Cc.apply(this,arguments)}function Cc(){return(Cc=(0,C.Z)(function*(f,c){return Mg(f)._set(xg(c),"true")})).apply(this,arguments)}function Qs(){Ks.clear()}function Pg(f,c){Ks.set(f._key(),c)}function Mg(f){return W(f._redirectPersistence)}function xg(f){return Oe(ke,f.config.apiKey,f.name)}function Yv(f,c,d){return function Jv(f,c,d){return Y.apply(this,arguments)}(f,c,d)}function Y(){return(Y=(0,C.Z)(function*(f,c,d){const p=Yt(f);mn(f,c,Xi),yield p._initializationPromise;const _=yn(p,d);return yield uh(_,p),_._openRedirect(p,c,"signInViaRedirect")})).apply(this,arguments)}function dt(f,c,d){return function Xv(f,c,d){return ch.apply(this,arguments)}(f,c,d)}function ch(){return(ch=(0,C.Z)(function*(f,c,d){const p=(0,q.m9)(f);mn(p.auth,c,Xi),yield p.auth._initializationPromise;const _=yn(p.auth,d);yield uh(_,p.auth);const E=yield eI(p);return _._openRedirect(p.auth,c,"reauthViaRedirect",E)})).apply(this,arguments)}function zn(f,c,d){return function Ng(f,c,d){return us.apply(this,arguments)}(f,c,d)}function us(){return(us=(0,C.Z)(function*(f,c,d){const p=(0,q.m9)(f);mn(p.auth,c,Xi),yield p.auth._initializationPromise;const _=yn(p.auth,d);yield ic(!1,p,c.providerId),yield uh(_,p.auth);const E=yield eI(p);return _._openRedirect(p.auth,c,"linkViaRedirect",E)})).apply(this,arguments)}function ji(f,c){return Ja.apply(this,arguments)}function Ja(){return(Ja=(0,C.Z)(function*(f,c){return yield Yt(f)._initializationPromise,Xa(f,c,!1)})).apply(this,arguments)}function Xa(f,c){return lh.apply(this,arguments)}function lh(){return(lh=(0,C.Z)(function*(f,c,d=!1){const p=Yt(f),_=yn(p,c),R=yield new SA(p,_,d).execute();return R&&!d&&(delete R.user._redirectEventId,yield p._persistUserIfCurrent(R.user),yield p._setRedirectUser(null,c)),R})).apply(this,arguments)}function eI(f){return Tc.apply(this,arguments)}function Tc(){return(Tc=(0,C.Z)(function*(f){const c=gn(`${f.uid}:::`);return f._redirectEventId=c,yield f.auth._setRedirectUser(f),yield f.auth._persistUserIfCurrent(f),c})).apply(this,arguments)}class Hi{constructor(c){this.auth=c,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(c){this.consumers.add(c),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,c)&&(this.sendToConsumer(this.queuedRedirectEvent,c),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(c){this.consumers.delete(c)}onEvent(c){if(this.hasEventBeenHandled(c))return!1;let d=!1;return this.consumers.forEach(p=>{this.isEventForConsumer(c,p)&&(d=!0,this.sendToConsumer(c,p),this.saveEventToCache(c))}),this.hasHandledPotentialRedirect||!function no(f){switch(f.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return cs(f);default:return!1}}(c)||(this.hasHandledPotentialRedirect=!0,d||(this.queuedRedirectEvent=c,d=!0)),d}sendToConsumer(c,d){var p;if(c.error&&!cs(c)){const _=(null===(p=c.error.code)||void 0===p?void 0:p.split("auth/")[1])||"internal-error";d.onError(Et(this.auth,_))}else d.onAuthEvent(c)}isEventForConsumer(c,d){const p=null===d.eventId||!!c.eventId&&c.eventId===d.eventId;return d.filter.includes(c.type)&&p}hasEventBeenHandled(c){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(dh(c))}saveEventToCache(c){this.cachedEventUids.add(dh(c)),this.lastProcessedEventTime=Date.now()}}function dh(f){return[f.type,f.eventId,f.sessionId,f.tenantId].filter(c=>c).join("-")}function cs({type:f,error:c}){return"unknown"===f&&"auth/no-auth-event"===c?.code}function Og(f){return Dc.apply(this,arguments)}function Dc(){return(Dc=(0,C.Z)(function*(f,c={}){return Q(f,"GET","/v1/projects",c)})).apply(this,arguments)}const tI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,nI=/^https?/;function eu(){return(eu=(0,C.Z)(function*(f){if(f.config.emulator)return;const{authorizedDomains:c}=yield Og(f);for(const d of c)try{if(kg(d))return}catch{}et(f,"unauthorized-domain")})).apply(this,arguments)}function kg(f){const c=on(),{protocol:d,hostname:p}=new URL(c);if(f.startsWith("chrome-extension://")){const R=new URL(f);return""===R.hostname&&""===p?"chrome-extension:"===d&&f.replace("chrome-extension://","")===c.replace("chrome-extension://",""):"chrome-extension:"===d&&R.hostname===p}if(!nI.test(d))return!1;if(tI.test(f))return p===f;const _=f.replace(/\./g,"\\.");return new RegExp("^(.+\\."+_+"|"+_+")$","i").test(p)}const fh=new Mr(3e4,6e4);function Vg(){const f=vt().___jsl;if(f?.H)for(const c of Object.keys(f.H))if(f.H[c].r=f.H[c].r||[],f.H[c].L=f.H[c].L||[],f.H[c].r=[...f.H[c].L],f.CP)for(let d=0;d<f.CP.length;d++)f.CP[d]=null}let Ys=null;const Ug=new Mr(5e3,15e3),Bg="__/auth/iframe",$g="emulator/auth/iframe",ph={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},rI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function iI(f){const c=f.config;te(c.authDomain,f,"auth-domain-config-required");const d=c.emulator?Pi(c,$g):`https://${f.config.authDomain}/${Bg}`,p={apiKey:c.apiKey,appName:f.name,v:N.SDK_VERSION},_=rI.get(f.config.apiHost);_&&(p.eid=_);const E=f._getFrameworks();return E.length&&(p.fw=E.join(",")),`${d}?${(0,q.xO)(p).slice(1)}`}function ro(){return ro=(0,C.Z)(function*(f){const c=yield function Lg(f){return Ys=Ys||function Fg(f){return new Promise((c,d)=>{var p,_,E;function R(){Vg(),gapi.load("gapi.iframes",{callback:()=>{c(gapi.iframes.getContext())},ontimeout:()=>{Vg(),d(Et(f,"network-request-failed"))},timeout:fh.get()})}if(null!==(_=null===(p=vt().gapi)||void 0===p?void 0:p.iframes)&&void 0!==_&&_.Iframe)c(gapi.iframes.getContext());else{if(null===(E=vt().gapi)||void 0===E||!E.load){const F=Dv("iframefcb");return vt()[F]=()=>{gapi.load?R():d(Et(f,"network-request-failed"))},qp(`https://apis.google.com/js/api.js?onload=${F}`).catch(X=>d(X))}R()}}).catch(c=>{throw Ys=null,c})}(f),Ys}(f),d=vt().gapi;return te(d,f,"internal-error"),c.open({where:document.body,url:iI(f),messageHandlersFilter:d.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ph,dontclear:!0},p=>new Promise(function(){var _=(0,C.Z)(function*(E,R){yield p.restyle({setHideOnLeave:!1});const F=Et(f,"network-request-failed"),X=vt().setTimeout(()=>{R(F)},Ug.get());function me(){vt().clearTimeout(X),E(p)}p.ping(me).then(me,()=>{R(F)})});return function(E,R){return _.apply(this,arguments)}}()))}),ro.apply(this,arguments)}const Xt={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class gh{constructor(c){this.window=c,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const So="__/auth/handler",cI="emulator/auth/handler",bc=encodeURIComponent("fac");function Js(f,c,d,p,_,E){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,C.Z)(function*(f,c,d,p,_,E){te(f.config.authDomain,f,"auth-domain-config-required"),te(f.config.apiKey,f,"invalid-api-key");const R={apiKey:f.config.apiKey,appName:f.name,authType:d,redirectUrl:p,v:N.SDK_VERSION,eventId:_};if(c instanceof Xi){c.setDefaultLanguage(f.languageCode),R.providerId=c.providerId||"",(0,q.xb)(c.getCustomParameters())||(R.customParameters=JSON.stringify(c.getCustomParameters()));for(const[Pe,it]of Object.entries(E||{}))R[Pe]=it}if(c instanceof Ls){const Pe=c.getScopes().filter(it=>""!==it);Pe.length>0&&(R.scopes=Pe.join(","))}f.tenantId&&(R.tid=f.tenantId);const F=R;for(const Pe of Object.keys(F))void 0===F[Pe]&&delete F[Pe];const X=yield f._getAppCheckToken(),me=X?`#${bc}=${encodeURIComponent(X)}`:"";return`${function mh({config:f}){return f.emulator?Pi(f,cI):`https://${f.authDomain}/${So}`}(f)}?${(0,q.xO)(F).slice(1)}${me}`})).apply(this,arguments)}const Sc="webStorageSupport",zg=class Hg{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=$i,this._completeRedirectFn=Xa,this._overrideRedirectResult=Pg}_openPopup(c,d,p,_){var E=this;return(0,C.Z)(function*(){var R;Lt(null===(R=E.eventManagers[c._key()])||void 0===R?void 0:R.manager,"_initialize() not called before _openPopup()");const F=yield Js(c,d,p,on(),_);return function jg(f,c,d,p=500,_=600){const E=Math.max((window.screen.availHeight-_)/2,0).toString(),R=Math.max((window.screen.availWidth-p)/2,0).toString();let F="";const X=Object.assign(Object.assign({},Xt),{width:p.toString(),height:_.toString(),top:E,left:R}),me=(0,q.z$)().toLowerCase();d&&(F=kn(me)?"_blank":d),Dt(me)&&(c=c||"http://localhost",X.scrollbars="yes");const Pe=Object.entries(X).reduce((dr,[io,iu])=>`${dr}${io}=${iu},`,"");if(function Qe(f=(0,q.z$)()){var c;return we(f)&&!(null===(c=window.navigator)||void 0===c||!c.standalone)}(me)&&"_self"!==F)return function Ac(f,c){const d=document.createElement("a");d.href=f,d.target=c;const p=document.createEvent("MouseEvent");p.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),d.dispatchEvent(p)}(c||"",F),new gh(null);const it=window.open(c||"",F,Pe);te(it,f,"popup-blocked");try{it.focus()}catch{}return new gh(it)}(c,F,gn())})()}_openRedirect(c,d,p,_){var E=this;return(0,C.Z)(function*(){return yield E._originValidation(c),function gg(f){vt().location.href=f}(yield Js(c,d,p,on(),_)),new Promise(()=>{})})()}_initialize(c){const d=c._key();if(this.eventManagers[d]){const{manager:_,promise:E}=this.eventManagers[d];return _?Promise.resolve(_):(Lt(E,"If manager is not set, promise should be"),E)}const p=this.initAndGetManager(c);return this.eventManagers[d]={promise:p},p.catch(()=>{delete this.eventManagers[d]}),p}initAndGetManager(c){var d=this;return(0,C.Z)(function*(){const p=yield function lr(f){return ro.apply(this,arguments)}(c),_=new Hi(c);return p.register("authEvent",E=>(te(E?.authEvent,c,"invalid-auth-event"),{status:_.onEvent(E.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),d.eventManagers[c._key()]={manager:_},d.iframes[c._key()]=p,_})()}_isIframeWebStorageSupported(c,d){this.iframes[c._key()].send(Sc,{type:Sc},_=>{var E;const R=null===(E=_?.[0])||void 0===E?void 0:E[Sc];void 0!==R&&d(!!R),et(c,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(c){const d=c._key();return this.originValidationPromises[d]||(this.originValidationPromises[d]=function hh(f){return eu.apply(this,arguments)}(c)),this.originValidationPromises[d]}get _shouldInitProactively(){return fn()||De()||we()}};class ea{constructor(c){this.factorId=c}_process(c,d,p){switch(d.type){case"enroll":return this._finalizeEnroll(c,d.credential,p);case"signin":return this._finalizeSignIn(c,d.credential);default:return ot("unexpected MultiFactorSessionType")}}}class ls extends ea{constructor(c){super("phone"),this.credential=c}static _fromCredential(c){return new ls(c)}_finalizeEnroll(c,d,p){return function mA(f,c){return Q(f,"POST","/v2/accounts/mfaEnrollment:finalize",V(f,c))}(c,{idToken:d,displayName:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(c,d){return function th(f,c){return Q(f,"POST","/v2/accounts/mfaSignIn:finalize",V(f,c))}(c,{mfaPendingCredential:d,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let lI=(()=>{class f{constructor(){}static assertion(d){return ls._fromCredential(d)}}return f.FACTOR_ID="phone",f})();var Wg="@firebase/auth";class RA{constructor(c){this.auth=c,this.internalListeners=new Map}getUid(){var c;return this.assertAuthConfigured(),(null===(c=this.auth.currentUser)||void 0===c?void 0:c.uid)||null}getToken(c){var d=this;return(0,C.Z)(function*(){return d.assertAuthConfigured(),yield d.auth._initializationPromise,d.auth.currentUser?{accessToken:yield d.auth.currentUser.getIdToken(c)}:null})()}addAuthTokenListener(c){if(this.assertAuthConfigured(),this.internalListeners.has(c))return;const d=this.auth.onIdTokenChanged(p=>{c(p?.stsTokenManager.accessToken||null)});this.internalListeners.set(c,d),this.updateProactiveRefresh()}removeAuthTokenListener(c){this.assertAuthConfigured();const d=this.internalListeners.get(c);d&&(this.internalListeners.delete(c),d(),this.updateProactiveRefresh())}assertAuthConfigured(){te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,q.Pz)("authIdTokenMaxAge"),function nu(f){(0,N._registerComponent)(new Gt.wA("auth",(c,{options:d})=>{const p=c.getProvider("app").getImmediate(),_=c.getProvider("heartbeat"),E=c.getProvider("app-check-internal"),{apiKey:R,authDomain:F}=p.options;te(R&&!R.includes(":"),"invalid-api-key",{appName:p.name});const X={apiKey:R,authDomain:F,clientPlatform:f,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Xe(f)},me=new oA(p,_,E,X);return function Ae(f,c){const d=c?.persistence||[],p=(Array.isArray(d)?d:[d]).map(W);c?.errorMap&&f._updateErrorMap(c.errorMap),f._initializeWithPersistence(p,c?.popupRedirectResolver)}(me,d),me},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((c,d,p)=>{c.getProvider("auth-internal").initialize()})),(0,N._registerComponent)(new Gt.wA("auth-internal",c=>{const d=Yt(c.getProvider("auth").getImmediate());return new RA(d)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,N.registerVersion)(Wg,"1.4.0",function _h(f){switch(f){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(f)),(0,N.registerVersion)(Wg,"1.4.0","esm2017")}("Browser")},58:(Ri,Tn,Me)=>{Me.d(Tn,{BH:()=>Pr,G6:()=>Pi,L:()=>at,LL:()=>K,P0:()=>Zt,Pz:()=>Et,Sg:()=>mn,UG:()=>ot,ZB:()=>Ce,ZR:()=>Q,aH:()=>et,b$:()=>ln,eu:()=>$,hl:()=>L,jU:()=>Lt,m9:()=>Vi,ne:()=>xr,pd:()=>pi,r3:()=>bn,ru:()=>on,tV:()=>Z,uI:()=>te,vZ:()=>Mi,w1:()=>di,xO:()=>Ni,xb:()=>vr,z$:()=>qe,zd:()=>fi});const Te=function(S){const D=[];let I=0;for(let w=0;w<S.length;w++){let v=S.charCodeAt(w);v<128?D[I++]=v:v<2048?(D[I++]=v>>6|192,D[I++]=63&v|128):55296==(64512&v)&&w+1<S.length&&56320==(64512&S.charCodeAt(w+1))?(v=65536+((1023&v)<<10)+(1023&S.charCodeAt(++w)),D[I++]=v>>18|240,D[I++]=v>>12&63|128,D[I++]=v>>6&63|128,D[I++]=63&v|128):(D[I++]=v>>12|224,D[I++]=v>>6&63|128,D[I++]=63&v|128)}return D},Gt={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(S,D){if(!Array.isArray(S))throw Error("encodeByteArray takes an array as a parameter");this.init_();const I=D?this.byteToCharMapWebSafe_:this.byteToCharMap_,w=[];for(let v=0;v<S.length;v+=3){const A=S[v],W=v+1<S.length,_e=W?S[v+1]:0,ve=v+2<S.length,Oe=ve?S[v+2]:0;let Dt=(15&_e)<<2|Oe>>6,De=63&Oe;ve||(De=64,W||(Dt=64)),w.push(I[A>>2],I[(3&A)<<4|_e>>4],I[Dt],I[De])}return w.join("")},encodeString(S,D){return this.HAS_NATIVE_SUPPORT&&!D?btoa(S):this.encodeByteArray(Te(S),D)},decodeString(S,D){return this.HAS_NATIVE_SUPPORT&&!D?atob(S):function(S){const D=[];let I=0,w=0;for(;I<S.length;){const v=S[I++];if(v<128)D[w++]=String.fromCharCode(v);else if(v>191&&v<224){const A=S[I++];D[w++]=String.fromCharCode((31&v)<<6|63&A)}else if(v>239&&v<365){const ve=((7&v)<<18|(63&S[I++])<<12|(63&S[I++])<<6|63&S[I++])-65536;D[w++]=String.fromCharCode(55296+(ve>>10)),D[w++]=String.fromCharCode(56320+(1023&ve))}else{const A=S[I++],W=S[I++];D[w++]=String.fromCharCode((15&v)<<12|(63&A)<<6|63&W)}}return D.join("")}(this.decodeStringToByteArray(S,D))},decodeStringToByteArray(S,D){this.init_();const I=D?this.charToByteMapWebSafe_:this.charToByteMap_,w=[];for(let v=0;v<S.length;){const A=I[S.charAt(v++)],_e=v<S.length?I[S.charAt(v)]:0;++v;const Oe=v<S.length?I[S.charAt(v)]:64;++v;const he=v<S.length?I[S.charAt(v)]:64;if(++v,null==A||null==_e||null==Oe||null==he)throw new cn;w.push(A<<2|_e>>4),64!==Oe&&(w.push(_e<<4&240|Oe>>2),64!==he&&w.push(Oe<<6&192|he))}return w},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let S=0;S<this.ENCODED_VALS.length;S++)this.byteToCharMap_[S]=this.ENCODED_VALS.charAt(S),this.charToByteMap_[this.byteToCharMap_[S]]=S,this.byteToCharMapWebSafe_[S]=this.ENCODED_VALS_WEBSAFE.charAt(S),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[S]]=S,S>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(S)]=S,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(S)]=S)}}};class cn extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const at=function(S){return function(S){const D=Te(S);return Gt.encodeByteArray(D,!0)}(S).replace(/\./g,"")},Z=function(S){try{return Gt.decodeString(S,!0)}catch(D){console.error("base64Decode failed: ",D)}return null};function Ce(S,D){if(!(D instanceof Object))return D;switch(D.constructor){case Date:return new Date(D.getTime());case Object:void 0===S&&(S={});break;case Array:S=[];break;default:return D}for(const I in D)!D.hasOwnProperty(I)||!je(I)||(S[I]=Ce(S[I],D[I]));return S}function je(S){return"__proto__"!==S}const Fe=()=>{try{return function pt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const S=process.env.__FIREBASE_DEFAULTS__;return S?JSON.parse(S):void 0})()||(()=>{if(typeof document>"u")return;let S;try{S=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const D=S&&Z(S[1]);return D&&JSON.parse(D)})()}catch(S){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${S}`)}},Zt=S=>{const D=(S=>{var D,I;return null===(I=null===(D=Fe())||void 0===D?void 0:D.emulatorHosts)||void 0===I?void 0:I[S]})(S);if(!D)return;const I=D.lastIndexOf(":");if(I<=0||I+1===D.length)throw new Error(`Invalid host ${D} with no separate hostname and port!`);const w=parseInt(D.substring(I+1),10);return"["===D[0]?[D.substring(1,I-1),w]:[D.substring(0,I),w]},et=()=>{var S;return null===(S=Fe())||void 0===S?void 0:S.config},Et=S=>{var D;return null===(D=Fe())||void 0===D?void 0:D[`_${S}`]};class Pr{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((D,I)=>{this.resolve=D,this.reject=I})}wrapCallback(D){return(I,w)=>{I?this.reject(I):this.resolve(w),"function"==typeof D&&(this.promise.catch(()=>{}),1===D.length?D(I):D(I,w))}}}function mn(S,D){if(S.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const w=D||"demo-project",v=S.iat||0,A=S.sub||S.user_id;if(!A)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const W=Object.assign({iss:`https://securetoken.google.com/${w}`,aud:w,iat:v,exp:v+3600,auth_time:v,sub:A,user_id:A,firebase:{sign_in_provider:"custom",identities:{}}},S);return[at(JSON.stringify({alg:"none",type:"JWT"})),at(JSON.stringify(W)),""].join(".")}function qe(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function te(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qe())}function ot(){var S;const D=null===(S=Fe())||void 0===S?void 0:S.forceEnvironment;if("node"===D)return!0;if("browser"===D)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Lt(){return"object"==typeof self&&self.self===self}function on(){const S="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof S&&void 0!==S.id}function ln(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function di(){const S=qe();return S.indexOf("MSIE ")>=0||S.indexOf("Trident/")>=0}function Pi(){return!ot()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function L(){try{return"object"==typeof indexedDB}catch{return!1}}function $(){return new Promise((S,D)=>{try{let I=!0;const w="validate-browser-context-for-indexeddb-analytics-module",v=self.indexedDB.open(w);v.onsuccess=()=>{v.result.close(),I||self.indexedDB.deleteDatabase(w),S(!0)},v.onupgradeneeded=()=>{I=!1},v.onerror=()=>{var A;D((null===(A=v.error)||void 0===A?void 0:A.message)||"")}}catch(I){D(I)}})}class Q extends Error{constructor(D,I,w){super(I),this.code=D,this.customData=w,this.name="FirebaseError",Object.setPrototypeOf(this,Q.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,K.prototype.create)}}class K{constructor(D,I,w){this.service=D,this.serviceName=I,this.errors=w}create(D,...I){const w=I[0]||{},v=`${this.service}/${D}`,A=this.errors[D],W=A?function ue(S,D){return S.replace(Je,(I,w)=>{const v=D[w];return null!=v?String(v):`<${w}?>`})}(A,w):"Error";return new Q(v,`${this.serviceName}: ${W} (${v}).`,w)}}const Je=/\{\$([^}]+)}/g;function bn(S,D){return Object.prototype.hasOwnProperty.call(S,D)}function vr(S){for(const D in S)if(Object.prototype.hasOwnProperty.call(S,D))return!1;return!0}function Mi(S,D){if(S===D)return!0;const I=Object.keys(S),w=Object.keys(D);for(const v of I){if(!w.includes(v))return!1;const A=S[v],W=D[v];if(ct(A)&&ct(W)){if(!Mi(A,W))return!1}else if(A!==W)return!1}for(const v of w)if(!I.includes(v))return!1;return!0}function ct(S){return null!==S&&"object"==typeof S}function Ni(S){const D=[];for(const[I,w]of Object.entries(S))Array.isArray(w)?w.forEach(v=>{D.push(encodeURIComponent(I)+"="+encodeURIComponent(v))}):D.push(encodeURIComponent(I)+"="+encodeURIComponent(w));return D.length?"&"+D.join("&"):""}function fi(S){const D={};return S.replace(/^\?/,"").split("&").forEach(w=>{if(w){const[v,A]=w.split("=");D[decodeURIComponent(v)]=decodeURIComponent(A)}}),D}function pi(S){const D=S.indexOf("?");if(!D)return"";const I=S.indexOf("#",D);return S.substring(D,I>0?I:void 0)}function xr(S,D){const I=new Nr(S,D);return I.subscribe.bind(I)}class Nr{constructor(D,I){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=I,this.task.then(()=>{D(this)}).catch(w=>{this.error(w)})}next(D){this.forEachObserver(I=>{I.next(D)})}error(D){this.forEachObserver(I=>{I.error(D)}),this.close(D)}complete(){this.forEachObserver(D=>{D.complete()}),this.close()}subscribe(D,I,w){let v;if(void 0===D&&void 0===I&&void 0===w)throw new Error("Missing Observer.");v=function Un(S,D){if("object"!=typeof S||null===S)return!1;for(const I of D)if(I in S&&"function"==typeof S[I])return!0;return!1}(D,["next","error","complete"])?D:{next:D,error:I,complete:w},void 0===v.next&&(v.next=wt),void 0===v.error&&(v.error=wt),void 0===v.complete&&(v.complete=wt);const A=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?v.error(this.finalError):v.complete()}catch{}}),this.observers.push(v),A}unsubscribeOne(D){void 0===this.observers||void 0===this.observers[D]||(delete this.observers[D],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(D){if(!this.finalized)for(let I=0;I<this.observers.length;I++)this.sendOne(I,D)}sendOne(D,I){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[D])try{I(this.observers[D])}catch(w){typeof console<"u"&&console.error&&console.error(w)}})}close(D){this.finalized||(this.finalized=!0,void 0!==D&&(this.finalError=D),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function wt(){}function Vi(S){return S&&S._delegate?S._delegate:S}},178:(Ri,Tn,Me)=>{function C(t){return"function"==typeof t}function q(t){const n=t(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const N=q(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function Te(t,e){if(t){const n=t.indexOf(e);0<=n&&t.splice(n,1)}}class ft{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const o of n)o.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(C(r))try{r()}catch(o){e=o instanceof N?o.errors:[o]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const o of i)try{Ot(o)}catch(s){e=e??[],s instanceof N?e=[...e,...s.errors]:e.push(s)}}if(e)throw new N(e)}}add(e){var n;if(e&&e!==this)if(this.closed)Ot(e);else{if(e instanceof ft){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}}_hasParent(e){const{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){const{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Te(n,e)}remove(e){const{_finalizers:n}=this;n&&Te(n,e),e instanceof ft&&e._removeParent(this)}}ft.EMPTY=(()=>{const t=new ft;return t.closed=!0,t})();const Gt=ft.EMPTY;function cn(t){return t instanceof ft||t&&"closed"in t&&C(t.remove)&&C(t.add)&&C(t.unsubscribe)}function Ot(t){C(t)?t():t.unsubscribe()}const at={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Z={setTimeout(t,e,...n){const{delegate:r}=Z;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){const{delegate:e}=Z;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function ie(t){Z.setTimeout(()=>{const{onUnhandledError:e}=at;if(!e)throw t;e(t)})}function Ce(){}const je=nt("C",void 0,void 0);function nt(t,e,n){return{kind:t,value:e,error:n}}let Ve=null;function Fe(t){if(at.useDeprecatedSynchronousErrorHandling){const e=!Ve;if(e&&(Ve={errorThrown:!1,error:null}),t(),e){const{errorThrown:n,error:r}=Ve;if(Ve=null,n)throw r}}else t()}class Zt extends ft{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,cn(e)&&e.add(this)):this.destination=Lt}static create(e,n,r){return new mn(e,n,r)}next(e){this.isStopped?ot(function Dn(t){return nt("N",t,void 0)}(e),this):this._next(e)}error(e){this.isStopped?ot(function pt(t){return nt("E",void 0,t)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?ot(je,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const et=Function.prototype.bind;function Et(t,e){return et.call(t,e)}class Pr{constructor(e){this.partialObserver=e}next(e){const{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){qe(r)}}error(e){const{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){qe(r)}else qe(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){qe(n)}}}class mn extends Zt{constructor(e,n,r){let i;if(super(),C(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&at.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Et(e.next,o),error:e.error&&Et(e.error,o),complete:e.complete&&Et(e.complete,o)}):i=e}this.destination=new Pr(i)}}function qe(t){at.useDeprecatedSynchronousErrorHandling?function On(t){at.useDeprecatedSynchronousErrorHandling&&Ve&&(Ve.errorThrown=!0,Ve.error=t)}(t):ie(t)}function ot(t,e){const{onStoppedNotification:n}=at;n&&Z.setTimeout(()=>n(t,e))}const Lt={closed:!0,next:Ce,error:function te(t){throw t},complete:Ce},on="function"==typeof Symbol&&Symbol.observable||"@@observable";function ln(t){return t}function di(t){return 0===t.length?ln:1===t.length?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}let We=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){const o=function L(t){return t&&t instanceof Zt||function Pi(t){return t&&C(t.next)&&C(t.error)&&C(t.complete)}(t)&&cn(t)}(n)?n:new mn(n,r,i);return Fe(()=>{const{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=Mr(r))((i,o)=>{const s=new mn({next:a=>{try{n(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[on](){return this}pipe(...n){return di(n)(this)}toPromise(n){return new(n=Mr(n))((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function Mr(t){var e;return null!==(e=t??at.Promise)&&void 0!==e?e:Promise}const $=q(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let H=(()=>{class t extends We{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new V(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new $}next(n){Fe(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){Fe(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Fe(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:i,observers:o}=this;return r||i?Gt:(this.currentObservers=null,o.push(n),new ft(()=>{this.currentObservers=null,Te(o,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){const n=new We;return n.source=this,n}}return t.create=(e,n)=>new V(e,n),t})();class V extends H{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,e)}error(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,e)}complete(){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===n||n.call(e)}_subscribe(e){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(e))&&void 0!==r?r:Gt}}function Q(t){return C(t?.lift)}function K(t){return e=>{if(Q(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ue(t,e,n,r,i){return new Je(t,e,n,r,i)}class Je extends Zt{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function ge(t,e){return K((n,r)=>{let i=0;n.subscribe(ue(r,o=>{r.next(t.call(e,o,i++))}))})}var Re=Me(582);const ut=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function Bt(t){return C(t?.then)}function St(t){return C(t[on])}function Kt(t){return Symbol.asyncIterator&&C(t?.[Symbol.asyncIterator])}function An(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Ln=function bn(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function vr(t){return C(t?.[Ln])}function hi(t){return(0,Re.FC)(this,arguments,function*(){const n=t.getReader();try{for(;;){const{value:r,done:i}=yield(0,Re.qq)(n.read());if(i)return yield(0,Re.qq)(void 0);yield yield(0,Re.qq)(r)}}finally{n.releaseLock()}})}function Mi(t){return C(t?.getReader)}function ct(t){if(t instanceof We)return t;if(null!=t){if(St(t))return function xi(t){return new We(e=>{const n=t[on]();if(C(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(ut(t))return function Ni(t){return new We(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}(t);if(Bt(t))return function fi(t){return new We(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,ie)})}(t);if(Kt(t))return Kn(t);if(vr(t))return function pi(t){return new We(e=>{for(const n of t)if(e.next(n),e.closed)return;e.complete()})}(t);if(Mi(t))return function xr(t){return Kn(hi(t))}(t)}throw An(t)}function Kn(t){return new We(e=>{(function Nr(t,e){var n,r,i,o;return(0,Re.mG)(this,void 0,void 0,function*(){try{for(n=(0,Re.KL)(t);!(r=yield n.next()).done;)if(e.next(r.value),e.closed)return}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})})(t,e).catch(n=>e.error(n))})}function Or(t,e,n,r=0,i=!1){const o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function wt(t,e,n=1/0){return C(e)?wt((r,i)=>ge((o,s)=>e(r,o,i,s))(ct(t(r,i))),n):("number"==typeof e&&(n=e),K((r,i)=>function Un(t,e,n,r,i,o,s,a){const u=[];let l=0,h=0,g=!1;const m=()=>{g&&!u.length&&!l&&e.complete()},y=b=>l<r?T(b):u.push(b),T=b=>{o&&e.next(b),l++;let M=!1;ct(n(b,h++)).subscribe(ue(e,U=>{i?.(U),o?y(U):e.next(U)},()=>{M=!0},void 0,()=>{if(M)try{for(l--;u.length&&l<r;){const U=u.shift();s?Or(e,s,()=>T(U)):T(U)}m()}catch(U){e.error(U)}}))};return t.subscribe(ue(e,y,()=>{g=!0,m()})),()=>{a?.()}}(r,i,t,n)))}function kr(t=1/0){return wt(ln,t)}const dn=new We(t=>t.complete());function Oi(t){return t[t.length-1]}function ki(t){return C(Oi(t))?t.pop():void 0}function gi(t){return function hn(t){return t&&C(t.schedule)}(Oi(t))?t.pop():void 0}function _n(t,e=0){return K((n,r)=>{n.subscribe(ue(r,i=>Or(r,t,()=>r.next(i),e),()=>Or(r,t,()=>r.complete(),e),i=>Or(r,t,()=>r.error(i),e)))})}function Qn(t,e=0){return K((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function Vi(t,e){if(!t)throw new Error("Iterable cannot be null");return new We(n=>{Or(n,e,()=>{const r=t[Symbol.asyncIterator]();Or(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function I(t,e){return e?function D(t,e){if(null!=t){if(St(t))return function Vr(t,e){return ct(t).pipe(Qn(e),_n(e))}(t,e);if(ut(t))return function _o(t,e){return new We(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}(t,e);if(Bt(t))return function Os(t,e){return ct(t).pipe(Qn(e),_n(e))}(t,e);if(Kt(t))return Vi(t,e);if(vr(t))return function Ko(t,e){return new We(n=>{let r;return Or(n,e,()=>{r=t[Ln](),Or(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){return void n.error(s)}o?n.complete():n.next(i)},0,!0)}),()=>C(r?.return)&&r.return()})}(t,e);if(Mi(t))return function S(t,e){return Vi(hi(t),e)}(t,e)}throw An(t)}(t,e):ct(t)}function w(...t){const e=gi(t),n=function Sn(t,e){return"number"==typeof Oi(t)?t.pop():e}(t,1/0),r=t;return r.length?1===r.length?ct(r[0]):kr(n)(I(r,e)):dn}class v extends H{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){const{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function A(...t){return I(t,gi(t))}function W(t={}){const{connector:e=(()=>new H),resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return o=>{let s,a,u,l=0,h=!1,g=!1;const m=()=>{a?.unsubscribe(),a=void 0},y=()=>{m(),s=u=void 0,h=g=!1},T=()=>{const b=s;y(),b?.unsubscribe()};return K((b,M)=>{l++,!g&&!h&&m();const U=u=u??e();M.add(()=>{l--,0===l&&!g&&!h&&(a=_e(T,i))}),U.subscribe(M),!s&&l>0&&(s=new mn({next:x=>U.next(x),error:x=>{g=!0,m(),a=_e(y,n,x),U.error(x)},complete:()=>{h=!0,m(),a=_e(y,r),U.complete()}}),ct(b).subscribe(s))})(o)}}function _e(t,e,...n){if(!0===e)return void t();if(!1===e)return;const r=new mn({next:()=>{r.unsubscribe(),t()}});return ct(e(...n)).subscribe(r)}function ve(t,e){return K((n,r)=>{let i=null,o=0,s=!1;const a=()=>s&&!i&&r.complete();n.subscribe(ue(r,u=>{i?.unsubscribe();let l=0;const h=o++;ct(t(u,h)).subscribe(i=ue(r,g=>r.next(e?e(u,g,h,l++):g),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Oe(t,e=ln){return t=t??lt,K((n,r)=>{let i,o=!0;n.subscribe(ue(r,s=>{const a=e(s);(o||!t(i,a))&&(o=!1,i=a,r.next(s))}))})}function lt(t,e){return t===e}function he(t){for(let e in t)if(t[e]===he)return e;throw Error("Could not find renamed property on target object.")}function Dt(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function De(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(De).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function kn(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const Qo=he({__forward_ref__:he});function k(t){return t.__forward_ref__=k,t.toString=function(){return De(this())},t}function P(t){return ee(t)?t():t}function ee(t){return"function"==typeof t&&t.hasOwnProperty(Qo)&&t.__forward_ref__===k}function we(t){return t&&!!t.\u0275providers}const Qe="https://g.co/ng/security#xss";class j extends Error{constructor(e,n){super(function fn(t,e){return`NG0${Math.abs(t)}${e?": "+e:""}`}(e,n)),this.code=e}}function Ee(t){return"string"==typeof t?t:null==t?"":String(t)}function Id(t,e){throw new j(-201,!1)}function Yn(t,e){null==t&&function xe(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(null==r?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}(e,t,null,"!=")}function Ae(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function ar(t){return{providers:t.providers||[],imports:t.imports||[]}}function qu(t){return Yp(t,Vs)||Yp(t,Gu)}function Yp(t,e){return t.hasOwnProperty(e)?t[e]:null}function Ua(t){return t&&(t.hasOwnProperty(Ed)||t.hasOwnProperty(Rv))?t[Ed]:null}const Vs=he({\u0275prov:he}),Ed=he({\u0275inj:he}),Gu=he({ngInjectableDef:he}),Rv=he({ngInjectorDef:he});var Ye=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(Ye||{});let wd;function Ir(t){const e=wd;return wd=t,e}function Ku(t,e,n){const r=qu(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&Ye.Optional?null:void 0!==e?e:void Id(De(t))}const At=globalThis;class ce{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=Ae({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Jo={},Sd="__NG_DI_FLAG__",Lr="ngTempTokenPath",Rd=/\n/gm,Ju="__source";let Fs;function vo(t){const e=Fs;return Fs=t,e}function xv(t,e=Ye.Default){if(void 0===Fs)throw new j(-203,!1);return null===Fs?Ku(t,void 0,e):Fs.get(t,e&Ye.Optional?null:void 0,e)}function se(t,e=Ye.Default){return(function Zu(){return wd}()||xv)(P(t),e)}function Ie(t,e=Ye.Default){return se(t,Xu(e))}function Xu(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Xo(t){const e=[];for(let n=0;n<t.length;n++){const r=P(t[n]);if(Array.isArray(r)){if(0===r.length)throw new j(900,!1);let i,o=Ye.Default;for(let s=0;s<r.length;s++){const a=r[s],u=Md(a);"number"==typeof u?-1===u?i=a.token:o|=u:i=a}e.push(se(i,o))}else e.push(se(r))}return e}function ec(t,e){return t[Sd]=e,t.prototype[Sd]=e,t}function Md(t){return t[Sd]}function Ur(t){return{toString:t}.toString()}var tc=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(tc||{}),mi=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(mi||{});const Fi={},mt=[],eo=he({\u0275cmp:he}),xd=he({\u0275dir:he}),Us=he({\u0275pipe:he}),tg=he({\u0275mod:he}),Li=he({\u0275fac:he}),es=he({__NG_ELEMENT_ID__:he}),Br=he({__NG_ENV_ID__:he});function Nd(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}function Od(t,e,n){let r=0;for(;r<n.length;){const i=n[r];if("number"==typeof i){if(0!==i)break;r++;const o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{const o=i,s=n[++r];$a(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function nc(t){return 3===t||4===t||6===t}function $a(t){return 64===t.charCodeAt(0)}function Bs(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||kd(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function kd(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const a=t[o++];if("number"==typeof a){if(a===e){s=-1;break}if(a>e){s=o-1;break}}}for(;o<t.length;){const a=t[o];if("number"==typeof a)break;if(a===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}const ng="ng-template";function Vd(t,e,n){let r=0,i=!0;for(;r<t.length;){let o=t[r++];if("string"==typeof o&&i){const s=t[r++];if(n&&"class"===o&&-1!==Nd(s.toLowerCase(),e,0))return!0}else{if(1===o){for(;r<t.length&&"string"==typeof(o=t[r++]);)if(o.toLowerCase()===e)return!0;return!1}"number"==typeof o&&(i=!1)}}return!1}function rc(t){return 4===t.type&&t.value!==ng}function Fd(t,e,n){return e===(4!==t.type||n?t.value:ng)}function ic(t,e,n){let r=4;const i=t.attrs||[],o=function Ld(t){for(let e=0;e<t.length;e++)if(nc(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!Fd(t,u,n)||""===u&&1===e.length){if($r(r))return!1;s=!0}}else{const l=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!Vd(t.attrs,l,n)){if($r(r))return!1;s=!0}continue}const g=rg(8&r?"class":u,i,rc(t),n);if(-1===g){if($r(r))return!1;s=!0;continue}if(""!==l){let m;m=g>o?"":i[g+1].toLowerCase();const y=8&r?m:null;if(y&&-1!==Nd(y,l,0)||2&r&&l!==m){if($r(r))return!1;s=!0}}}}else{if(!s&&!$r(r)&&!$r(u))return!1;if(s&&$r(u))continue;s=!1,r=u|1&r}}return $r(r)||s}function $r(t){return 0==(1&t)}function rg(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){const s=e[i];if(s===t)return i;if(3===s||6===s)o=!0;else{if(1===s||2===s){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===s)break;if(0===s){i+=4;continue}}i+=o?1:2}return-1}return function sc(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function oc(t,e,n=!1){for(let r=0;r<e.length;r++)if(ic(t,e[r],n))return!0;return!1}function Bd(t,e){return t?":not("+e.trim()+")":e}function $d(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""!==i&&!$r(s)&&(e+=Bd(o,i),i=""),r=s,o=o||!$r(r);n++}return""!==i&&(e+=Bd(o,i)),e}function Eo(t){return Ur(()=>{const e=sg(t),n={...e,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===tc.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||mi.Emulated,styles:t.styles||mt,_:null,schemas:t.schemas||null,tView:null,id:""};uc(n);const r=t.dependencies;return n.directiveDefs=ja(r,!1),n.pipeDefs=ja(r,!0),n.id=function Ov(t){let e=0;const n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(n),n})}function Nv(t){return rt(t)||$n(t)}function zd(t){return null!==t}function Bn(t){return Ur(()=>({type:t.type,bootstrap:t.bootstrap||mt,declarations:t.declarations||mt,imports:t.imports||mt,exports:t.exports||mt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function ac(t,e){if(null==t)return Fi;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}function Ne(t){return Ur(()=>{const e=sg(t);return uc(e),e})}function rt(t){return t[eo]||null}function $n(t){return t[xd]||null}function jn(t){return t[Us]||null}function ur(t,e){const n=t[tg]||null;if(!n&&!0===e)throw new Error(`Type ${De(t)} does not have '\u0275mod' property.`);return n}function sg(t){const e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Fi,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||mt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:ac(t.inputs,e),outputs:ac(t.outputs)}}function uc(t){t.features?.forEach(e=>e(t))}function ja(t,e){if(!t)return null;const n=e?jn:Nv;return()=>("function"==typeof t?t():t).map(r=>n(r)).filter(zd)}const $t=0,fe=1,Le=2,jt=3,_i=4,ts=5,Xn=6,js=7,Jt=8,wo=9,Co=10,Ue=11,ns=12,ag=13,To=14,pn=15,rs=16,Hs=17,ei=18,Ha=19,cc=20,Do=21,to=22,zs=23,is=24,tt=25,lc=1,ug=2,Ui=7,Ws=9,er=11;function jr(t){return Array.isArray(t)&&"object"==typeof t[lc]}function Hn(t){return Array.isArray(t)&&!0===t[lc]}function Gd(t){return 0!=(4&t.flags)}function os(t){return t.componentOffset>-1}function Zd(t){return 1==(1&t.flags)}function Bi(t){return!!t.template}function cg(t){return 0!=(512&t[Le])}function qs(t,e){return t.hasOwnProperty(Li)?t[Li]:null}let gn=null,hc=!1;function vt(t){const e=gn;return gn=t,e}const gg={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function mg(t){if(!Ga(t)||t.dirty){if(!t.producerMustRecompute(t)&&!qa(t))return void(t.dirty=!1);t.producerRecomputeValue(t),t.dirty=!1}}function _g(t){t.dirty=!0,function pc(t){if(void 0===t.liveConsumerNode)return;const e=hc;hc=!0;try{for(const n of t.liveConsumerNode)n.dirty||_g(n)}finally{hc=e}}(t),t.consumerMarkedDirty?.(t)}function gc(t){return t&&(t.nextProducerIndex=0),vt(t)}function Jd(t,e){if(vt(e),t&&void 0!==t.producerNode&&void 0!==t.producerIndexOfThis&&void 0!==t.producerLastReadVersion){if(Ga(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)as(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function qa(t){Ao(t);for(let e=0;e<t.producerNode.length;e++){const n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(mg(n),r!==n.version))return!0}return!1}function Xd(t){if(Ao(t),Ga(t))for(let e=0;e<t.producerNode.length;e++)as(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function as(t,e){if(function eh(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}(t),Ao(t),1===t.liveConsumerNode.length)for(let r=0;r<t.producerNode.length;r++)as(t.producerNode[r],t.producerIndexOfThis[r]);const n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){const r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Ao(i),i.producerIndexOfThis[r]=e}}function Ga(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Ao(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}let Lv=null;const Cg=()=>{},zv=(()=>({...gg,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:t=>{t.schedule(t.ref)},hasRun:!1,cleanupFn:Cg}))();class Tg{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function ti(){return Dg}function Dg(t){return t.type.prototype.ngOnChanges&&(t.setInput=rh),Wv}function Wv(){const t=_c(this),e=t?.current;if(e){const n=t.previous;if(n===Fi)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function rh(t,e,n,r){const i=this.declaredInputs[n],o=_c(t)||function qv(t,e){return t[Ag]=e}(t,{previous:Fi,current:null}),s=o.current||(o.current={}),a=o.previous,u=a[i];s[i]=new Tg(u&&u.currentValue,e,a===Fi),t[r]=e}ti.ngInherit=!0;const Ag="__ngSimpleChanges__";function _c(t){return t[Ag]||null}const ni=function(t,e,n){};function kt(t){for(;Array.isArray(t);)t=t[$t];return t}function vc(t,e){return kt(e[t])}function yn(t,e){return kt(e[t.index])}function bg(t,e){return t.data[e]}function Hr(t,e){const n=e[t];return jr(n)?n:n[$t]}function bo(t,e){return null==e?null:t[e]}function Ic(t){t[Hs]=0}function Kv(t){1024&t[Le]||(t[Le]|=1024,Rg(t,1))}function Ec(t){1024&t[Le]&&(t[Le]&=-1025,Rg(t,-1))}function Rg(t,e){let n=t[jt];if(null===n)return;n[ts]+=e;let r=n;for(n=n[jt];null!==n&&(1===e&&1===r[ts]||-1===e&&0===r[ts]);)n[ts]+=e,r=n,n=n[jt]}const ke={lFrame:Ug(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Cc(){return ke.bindingsEnabled}function Y(){return ke.lFrame.lView}function dt(){return ke.lFrame.tView}function zn(){let t=Ng();for(;null!==t&&64===t.type;)t=t.parent;return t}function Ng(){return ke.lFrame.currentTNode}function ji(t,e){const n=ke.lFrame;n.currentTNode=t,n.isParent=e}function Ja(){return ke.lFrame.isParent}function cs(){return ke.lFrame.bindingIndex++}function tI(t,e){const n=ke.lFrame;n.bindingIndex=n.bindingRootIndex=t,hh(e)}function hh(t){ke.lFrame.currentDirectiveIndex=t}function fh(t){ke.lFrame.currentQueryIndex=t}function Vg(t){const e=t[fe];return 2===e.type?e.declTNode:1===e.type?t[Xn]:null}function Fg(t,e,n){if(n&Ye.SkipSelf){let i=e,o=t;for(;!(i=i.parent,null!==i||n&Ye.Host||(i=Vg(o),null===i||(o=o[To],10&i.type))););if(null===i)return!1;e=i,t=o}const r=ke.lFrame=Lg();return r.currentTNode=e,r.lView=t,!0}function Ys(t){const e=Lg(),n=t[fe];ke.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function Lg(){const t=ke.lFrame,e=null===t?null:t.child;return null===e?Ug(t):e}function Ug(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function Bg(){const t=ke.lFrame;return ke.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const $g=Bg;function ph(){const t=Bg();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function lr(){return ke.lFrame.selectedIndex}function ro(t){ke.lFrame.selectedIndex=t}function Xt(){const t=ke.lFrame;return bg(t.tView,t.selectedIndex)}let jg=!0;function Ac(){return jg}function So(t){jg=t}function bc(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),null!=h&&(t.destroyHooks??=[]).push(n,h)}}function Js(t,e,n){Sc(t,e,3,n)}function Xs(t,e,n,r){(3&t[Le])===n&&Sc(t,e,n,r)}function mh(t,e){let n=t[Le];(3&n)===e&&(n&=8191,n+=1,t[Le]=n)}function Sc(t,e,n,r){const o=r??-1,s=e.length-1;let a=0;for(let u=void 0!==r?65535&t[Hs]:0;u<s;u++)if("number"==typeof e[u+1]){if(a=e[u],null!=r&&a>=r)break}else e[u]<0&&(t[Hs]+=65536),(a<o||-1==o)&&(zg(t,n,e,u),t[Hs]=(4294901760&t[Hs])+u+2),u++}function Hg(t,e){ni(4,t,e);const n=vt(null);try{e.call(t)}finally{vt(n),ni(5,t,e)}}function zg(t,e,n,r){const i=n[r]<0,o=n[r+1],a=t[i?-n[r]:n[r]];i?t[Le]>>13<t[Hs]>>16&&(3&t[Le])===e&&(t[Le]+=8192,Hg(a,o)):Hg(a,o)}const ea=-1;class ls{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function _h(t){return t!==ea}function nu(t){return 32767&t}function ru(t,e){let n=function fI(t){return t>>16}(t),r=e;for(;n>0;)r=r[To],n--;return r}let Pc=!0;function Mc(t){const e=Pc;return Pc=t,e}const f=255,c=5;let d=0;const p={};function E(t,e){const n=F(t,e);if(-1!==n)return n;const r=e[fe];r.firstCreatePass&&(t.injectorIndex=e.length,R(r.data,t),R(e,null),R(r.blueprint,null));const i=X(t,e),o=t.injectorIndex;if(_h(i)){const s=nu(i),a=ru(i,e),u=a[fe].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function R(t,e){t.push(0,0,0,0,0,0,0,0,e)}function F(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function X(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){if(r=PA(i),null===r)return ea;if(n++,i=i[To],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return ea}function me(t,e,n){!function _(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(es)&&(r=n[es]),null==r&&(r=n[es]=d++);const i=r&f;e.data[t+(i>>c)]|=1<<i}(t,e,n)}function it(t,e,n){if(n&Ye.Optional||void 0!==t)return t;Id()}function dr(t,e,n,r){if(n&Ye.Optional&&void 0===r&&(r=null),!(n&(Ye.Self|Ye.Host))){const i=t[wo],o=Ir(void 0);try{return i?i.get(e,r,n&Ye.Optional):Ku(e,r,n&Ye.Optional)}finally{Ir(o)}}return it(r,0,n)}function io(t,e,n,r=Ye.Default,i){if(null!==t){if(2048&e[Le]&&!(r&Ye.Self)){const s=function B2(t,e,n,r,i){let o=t,s=e;for(;null!==o&&null!==s&&2048&s[Le]&&!(512&s[Le]);){const a=iu(o,s,n,r|Ye.Self,p);if(a!==p)return a;let u=o.parent;if(!u){const l=s[cc];if(l){const h=l.get(n,p,r);if(h!==p)return h}u=PA(s),s=s[To]}o=u}return i}(t,e,n,r,p);if(s!==p)return s}const o=iu(t,e,n,r,p);if(o!==p)return o}return dr(e,n,r,i)}function iu(t,e,n,r,i){const o=function Gg(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(es)?t[es]:void 0;return"number"==typeof e?e>=0?e&f:pI:e}(n);if("function"==typeof o){if(!Fg(e,t,r))return r&Ye.Host?it(i,0,r):dr(e,n,r,i);try{let s;if(s=o(r),null!=s||r&Ye.Optional)return s;Id()}finally{$g()}}else if("number"==typeof o){let s=null,a=F(t,e),u=ea,l=r&Ye.Host?e[pn][Xn]:null;for((-1===a||r&Ye.SkipSelf)&&(u=-1===a?X(t,e):e[a+8],u!==ea&&yh(r,!1)?(s=e[fe],a=nu(u),e=ru(u,e)):a=-1);-1!==a;){const h=e[fe];if(xc(o,a,h.data)){const g=qg(a,e,n,s,r,l);if(g!==p)return g}u=e[a+8],u!==ea&&yh(r,e[fe].data[a+8]===l)&&xc(o,a,e)?(s=h,a=nu(u),e=ru(u,e)):a=-1}}return i}function qg(t,e,n,r,i,o){const s=e[fe],a=s.data[t+8],h=function ta(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,u=t.directiveStart,h=o>>20,m=i?a+h:t.directiveEnd;for(let y=r?a:a+h;y<m;y++){const T=s[y];if(y<u&&n===T||y>=u&&T.type===n)return y}if(i){const y=s[u];if(y&&Bi(y)&&y.type===n)return u}return null}(a,s,n,null==r?os(a)&&Pc:r!=s&&0!=(3&a.type),i&Ye.Host&&o===a);return null!==h?Ro(e,s,h,a):p}function Ro(t,e,n,r){let i=t[n];const o=e.data;if(function lI(t){return t instanceof ls}(i)){const s=i;s.resolving&&function La(t,e){const n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new j(-200,`Circular dependency in DI detected for ${t}${n}`)}(function Xe(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Ee(t)}(o[n]));const a=Mc(s.canSeeViewProviders);s.resolving=!0;const l=s.injectImpl?Ir(s.injectImpl):null;Fg(t,r,Ye.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function cI(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const s=Dg(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}(n,o[n],e)}finally{null!==l&&Ir(l),Mc(a),s.resolving=!1,$g()}}return i}function xc(t,e,n){return!!(n[e+(t>>c)]&1<<t)}function yh(t,e){return!(t&Ye.Self||t&Ye.Host&&e)}class tr{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return io(this._tNode,this._lView,e,Xu(r),n)}}function pI(){return new tr(zn(),Y())}function Rn(t){return Ur(()=>{const e=t.prototype.constructor,n=e[Li]||Ih(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const o=i[Li]||Ih(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Ih(t){return ee(t)?()=>{const e=Ih(P(t));return e&&e()}:qs(t)}function PA(t){const e=t[fe],n=e.type;return 2===n?e.declTNode:1===n?t[Xn]:null}const Oc="__parameters__";function Vc(t,e,n){return Ur(()=>{const r=function gI(t){return function(...n){if(t){const r=t(...n);for(const i in r)this[i]=r[i]}}}(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;const s=new i(...o);return a.annotation=s,a;function a(u,l,h){const g=u.hasOwnProperty(Oc)?u[Oc]:Object.defineProperty(u,Oc,{value:[]})[Oc];for(;g.length<=h;)g.push(null);return(g[h]=g[h]||[]).push(s),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}function Lc(t,e){t.forEach(n=>Array.isArray(n)?Lc(n,e):e(n))}function xA(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Kg(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function yi(t,e,n){let r=Uc(t,e);return r>=0?t[1|r]=n:(r=~r,function G2(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function mI(t,e){const n=Uc(t,e);if(n>=0)return t[1|n]}function Uc(t,e){return function NA(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){const o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}(t,e,1)}const vi=ec(Vc("Optional"),8),Yg=ec(Vc("SkipSelf"),4);function nm(t){return 128==(128&t.flags)}var ra=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(ra||{});const EI=new Map;let _U=0;const CI="__ngContext__";function Er(t,e){jr(e)?(t[CI]=e[Ha],function vU(t){EI.set(t[Ha],t)}(e)):t[CI]=e}let TI;function DI(t,e){return TI(t,e)}function Dh(t){const e=t[jt];return Hn(e)?e[jt]:e}function XA(t){return tb(t[ns])}function eb(t){return tb(t[_i])}function tb(t){for(;null!==t&&!Hn(t);)t=t[_i];return t}function jc(t,e,n,r,i){if(null!=r){let o,s=!1;Hn(r)?o=r:jr(r)&&(s=!0,r=r[$t]);const a=kt(r);0===t&&null!==n?null==i?ob(e,n,a):ou(e,n,a,i||null,!0):1===t&&null!==n?ou(e,n,a,i||null,!0):2===t?function cm(t,e,n){const r=am(t,e);r&&function LU(t,e,n,r){t.removeChild(e,n,r)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function $U(t,e,n,r,i){const o=n[Ui];o!==kt(n)&&jc(e,t,r,o,i);for(let a=er;a<n.length;a++){const u=n[a];bh(u[fe],u,t,e,r,o)}}(e,t,o,n,i)}}function om(t,e,n){return t.createElement(e,n)}function rb(t,e){const n=t[Ws],r=n.indexOf(e);Ec(e),n.splice(r,1)}function sm(t,e){if(t.length<=er)return;const n=er+e,r=t[n];if(r){const i=r[rs];null!==i&&i!==t&&rb(i,r),e>0&&(t[n-1][_i]=r[_i]);const o=Kg(t,er+e);!function PU(t,e){bh(t,e,e[Ue],2,null,null),e[$t]=null,e[Xn]=null}(r[fe],r);const s=o[ei];null!==s&&s.detachView(o[fe]),r[jt]=null,r[_i]=null,r[Le]&=-129}return r}function bI(t,e){if(!(256&e[Le])){const n=e[Ue];e[zs]&&Xd(e[zs]),e[is]&&Xd(e[is]),n.destroyNode&&bh(t,e,n,3,null,null),function NU(t){let e=t[ns];if(!e)return SI(t[fe],t);for(;e;){let n=null;if(jr(e))n=e[ns];else{const r=e[er];r&&(n=r)}if(!n){for(;e&&!e[_i]&&e!==t;)jr(e)&&SI(e[fe],e),e=e[jt];null===e&&(e=t),jr(e)&&SI(e[fe],e),n=e&&e[_i]}e=n}}(e)}}function SI(t,e){if(!(256&e[Le])){e[Le]&=-129,e[Le]|=256,function FU(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const i=e[n[r]];if(!(i instanceof ls)){const o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const a=i[o[s]],u=o[s+1];ni(4,a,u);try{u.call(a)}finally{ni(5,a,u)}}else{ni(4,i,o);try{o.call(i)}finally{ni(5,i,o)}}}}}(t,e),function VU(t,e){const n=t.cleanup,r=e[js];if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const s=n[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else n[o].call(r[n[o+1]]);null!==r&&(e[js]=null);const i=e[Do];if(null!==i){e[Do]=null;for(let o=0;o<i.length;o++)(0,i[o])()}}(t,e),1===e[fe].type&&e[Ue].destroy();const n=e[rs];if(null!==n&&Hn(e[jt])){n!==e[jt]&&rb(n,e);const r=e[ei];null!==r&&r.detachView(t)}!function IU(t){EI.delete(t[Ha])}(e)}}function RI(t,e,n){return function ib(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[$t];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:o}=t.data[r.directiveStart+i];if(o===mi.None||o===mi.Emulated)return null}return yn(r,n)}}(t,e.parent,n)}function ou(t,e,n,r,i){t.insertBefore(e,n,r,i)}function ob(t,e,n){t.appendChild(e,n)}function sb(t,e,n,r,i){null!==r?ou(t,e,n,r,i):ob(t,e,n)}function am(t,e){return t.parentNode(e)}let PI,lm,OI,dm,cb=function ub(t,e,n){return 40&t.type?yn(t,n):null};function um(t,e,n,r){const i=RI(t,r,e),o=e[Ue],a=function ab(t,e,n){return cb(t,e,n)}(r.parent||e[Xn],r,e);if(null!=i)if(Array.isArray(n))for(let u=0;u<n.length;u++)sb(o,i,n[u],a,!1);else sb(o,i,n,a,!1);void 0!==PI&&PI(o,r,e,n,i)}function Ah(t,e){if(null!==e){const n=e.type;if(3&n)return yn(e,t);if(4&n)return MI(-1,t[e.index]);if(8&n){const r=e.child;if(null!==r)return Ah(t,r);{const i=t[e.index];return Hn(i)?MI(-1,i):kt(i)}}if(32&n)return DI(e,t)()||kt(t[e.index]);{const r=db(t,e);return null!==r?Array.isArray(r)?r[0]:Ah(Dh(t[pn]),r):Ah(t,e.next)}}return null}function db(t,e){return null!==e?t[pn][Xn].projection[e.projection]:null}function MI(t,e){const n=er+t+1;if(n<e.length){const r=e[n],i=r[fe].firstChild;if(null!==i)return Ah(r,i)}return e[Ui]}function xI(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],u=n.type;if(s&&0===e&&(a&&Er(kt(a),r),n.flags|=2),32!=(32&n.flags))if(8&u)xI(t,e,n.child,r,i,o,!1),jc(e,t,i,a,o);else if(32&u){const l=DI(n,r);let h;for(;h=l();)jc(e,t,i,h,o);jc(e,t,i,a,o)}else 16&u?fb(t,e,r,n,i,o):jc(e,t,i,a,o);n=s?n.projectionNext:n.next}}function bh(t,e,n,r,i,o){xI(n,r,t.firstChild,e,i,o,!1)}function fb(t,e,n,r,i,o){const s=n[pn],u=s[Xn].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++)jc(e,t,i,u[l],o);else{let l=u;const h=s[jt];nm(r)&&(l.flags|=128),xI(t,e,l,h,i,o,!0)}}function pb(t,e,n){""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function gb(t,e,n){const{mergedAttrs:r,classes:i,styles:o}=n;null!==r&&Od(t,e,r),null!==i&&pb(t,e,i),null!==o&&function HU(t,e,n){t.setAttribute(e,"style",n)}(t,e,o)}function Hc(t){return function NI(){if(void 0===lm&&(lm=null,At.trustedTypes))try{lm=At.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return lm}()?.createHTML(t)||t}function yb(t){return function kI(){if(void 0===dm&&(dm=null,At.trustedTypes))try{dm=At.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return dm}()?.createScriptURL(t)||t}class su{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Qe})`}}class ZU extends su{getTypeName(){return"HTML"}}class KU extends su{getTypeName(){return"Style"}}class QU extends su{getTypeName(){return"Script"}}class YU extends su{getTypeName(){return"URL"}}class JU extends su{getTypeName(){return"ResourceURL"}}function Ii(t){return t instanceof su?t.changingThisBreaksApplicationSecurity:t}function Po(t,e){const n=function XU(t){return t instanceof su&&t.getTypeName()||null}(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${Qe})`)}return n===e}class oB{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const n=(new window.DOMParser).parseFromString(Hc(e),"text/html").body;return null===n?this.inertDocumentHelper.getInertBodyElement(e):(n.removeChild(n.firstChild),n)}catch{return null}}}class sB{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){const n=this.inertDocument.createElement("template");return n.innerHTML=Hc(e),n}}const uB=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function hm(t){return(t=String(t)).match(uB)?t:"unsafe:"+t}function ds(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function Sh(...t){const e={};for(const n of t)for(const r in n)n.hasOwnProperty(r)&&(e[r]=!0);return e}const Ib=ds("area,br,col,hr,img,wbr"),Eb=ds("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),wb=ds("rp,rt"),VI=Sh(Ib,Sh(Eb,ds("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Sh(wb,ds("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Sh(wb,Eb)),FI=ds("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Cb=Sh(FI,ds("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ds("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),cB=ds("script,style,template");class lB{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let n=e.firstChild,r=!0;for(;n;)if(n.nodeType===Node.ELEMENT_NODE?r=this.startElement(n):n.nodeType===Node.TEXT_NODE?this.chars(n.nodeValue):this.sanitizedSomething=!0,r&&n.firstChild)n=n.firstChild;else for(;n;){n.nodeType===Node.ELEMENT_NODE&&this.endElement(n);let i=this.checkClobberedElement(n,n.nextSibling);if(i){n=i;break}n=this.checkClobberedElement(n,n.parentNode)}return this.buf.join("")}startElement(e){const n=e.nodeName.toLowerCase();if(!VI.hasOwnProperty(n))return this.sanitizedSomething=!0,!cB.hasOwnProperty(n);this.buf.push("<"),this.buf.push(n);const r=e.attributes;for(let i=0;i<r.length;i++){const o=r.item(i),s=o.name,a=s.toLowerCase();if(!Cb.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let u=o.value;FI[a]&&(u=hm(u)),this.buf.push(" ",s,'="',Tb(u),'"')}return this.buf.push(">"),!0}endElement(e){const n=e.nodeName.toLowerCase();VI.hasOwnProperty(n)&&!Ib.hasOwnProperty(n)&&(this.buf.push("</"),this.buf.push(n),this.buf.push(">"))}chars(e){this.buf.push(Tb(e))}checkClobberedElement(e,n){if(n&&(e.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return n}}const dB=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,hB=/([^\#-~ |!])/g;function Tb(t){return t.replace(/&/g,"&amp;").replace(dB,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(hB,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let fm;function Db(t,e){let n=null;try{fm=fm||function vb(t){const e=new sB(t);return function aB(){try{return!!(new window.DOMParser).parseFromString(Hc(""),"text/html")}catch{return!1}}()?new oB(e):e}(t);let r=e?String(e):"";n=fm.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=fm.getInertBodyElement(r)}while(r!==o);return Hc((new lB).sanitizeChildren(LI(n)||n))}finally{if(n){const r=LI(n)||n;for(;r.firstChild;)r.removeChild(r.firstChild)}}}function LI(t){return"content"in t&&function fB(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var Wi=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Wi||{});function UI(t){const e=Rh();return e?e.sanitize(Wi.URL,t)||"":Po(t,"URL")?Ii(t):hm(Ee(t))}function Ab(t){const e=Rh();if(e)return yb(e.sanitize(Wi.RESOURCE_URL,t)||"");if(Po(t,"ResourceURL"))return yb(Ii(t));throw new j(904,!1)}function Rh(){const t=Y();return t&&t[Co].sanitizer}const Ph=new ce("ENVIRONMENT_INITIALIZER"),Sb=new ce("INJECTOR",-1),Rb=new ce("INJECTOR_DEF_TYPES");class BI{get(e,n=Jo){if(n===Jo){const r=new Error(`NullInjectorError: No provider for ${De(e)}!`);throw r.name="NullInjectorError",r}return n}}function IB(...t){return{\u0275providers:Mb(0,t),\u0275fromNgModule:!0}}function Mb(t,...e){const n=[],r=new Set;let i;const o=s=>{n.push(s)};return Lc(e,s=>{const a=s;pm(a,o,[],r)&&(i||=[],i.push(a))}),void 0!==i&&xb(i,o),n}function xb(t,e){for(let n=0;n<t.length;n++){const{ngModule:r,providers:i}=t[n];$I(i,o=>{e(o,r)})}}function pm(t,e,n,r){if(!(t=P(t)))return!1;let i=null,o=Ua(t);const s=!o&&rt(t);if(o||s){if(s&&!s.standalone)return!1;i=t}else{const u=t.ngModule;if(o=Ua(u),!o)return!1;i=u}const a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){const u="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const l of u)pm(l,e,n,r)}}else{if(!o)return!1;{if(null!=o.imports&&!a){let l;r.add(i);try{Lc(o.imports,h=>{pm(h,e,n,r)&&(l||=[],l.push(h))})}finally{}void 0!==l&&xb(l,e)}if(!a){const l=qs(i)||(()=>new i);e({provide:i,useFactory:l,deps:mt},i),e({provide:Rb,useValue:i,multi:!0},i),e({provide:Ph,useValue:()=>se(i),multi:!0},i)}const u=o.providers;if(null!=u&&!a){const l=t;$I(u,h=>{e(h,l)})}}}return i!==t&&void 0!==t.providers}function $I(t,e){for(let n of t)we(n)&&(n=n.\u0275providers),Array.isArray(n)?$I(n,e):e(n)}const EB=he({provide:String,useValue:he});function jI(t){return null!==t&&"object"==typeof t&&EB in t}function au(t){return"function"==typeof t}const HI=new ce("Set Injector scope."),gm={},CB={};let zI;function mm(){return void 0===zI&&(zI=new BI),zI}class qi{}class Wc extends qi{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,qI(e,s=>this.processProvider(s)),this.records.set(Sb,qc(void 0,this)),i.has("environment")&&this.records.set(qi,qc(void 0,this));const o=this.records.get(HI);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Rb.multi,mt,Ye.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const n of this._ngOnDestroyHooks)n.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const n of e)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const n=vo(this),r=Ir(void 0);try{return e()}finally{vo(n),Ir(r)}}get(e,n=Jo,r=Ye.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(Br))return e[Br](this);r=Xu(r);const o=vo(this),s=Ir(void 0);try{if(!(r&Ye.SkipSelf)){let u=this.records.get(e);if(void 0===u){const l=function SB(t){return"function"==typeof t||"object"==typeof t&&t instanceof ce}(e)&&qu(e);u=l&&this.injectableDefInScope(l)?qc(WI(e),gm):null,this.records.set(e,u)}if(null!=u)return this.hydrate(e,u)}return(r&Ye.Self?mm():this.parent).get(e,n=r&Ye.Optional&&n===Jo?null:n)}catch(a){if("NullInjectorError"===a.name){if((a[Lr]=a[Lr]||[]).unshift(De(e)),o)throw a;return function Xi(t,e,n,r){const i=t[Lr];throw e[Ju]&&i.unshift(e[Ju]),t.message=function Ls(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let i=De(e);if(Array.isArray(e))i=e.map(De).join(" -> ");else if("object"==typeof e){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+("string"==typeof a?JSON.stringify(a):De(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(Rd,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t[Lr]=null,t}(a,e,"R3InjectorError",this.source)}throw a}finally{Ir(s),vo(o)}}resolveInjectorInitializers(){const e=vo(this),n=Ir(void 0);try{const i=this.get(Ph.multi,mt,Ye.Self);for(const o of i)o()}finally{vo(e),Ir(n)}}toString(){const e=[],n=this.records;for(const r of n.keys())e.push(De(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new j(205,!1)}processProvider(e){let n=au(e=P(e))?e:P(e&&e.provide);const r=function DB(t){return jI(t)?qc(void 0,t.useValue):qc(kb(t),gm)}(e);if(au(e)||!0!==e.multi)this.records.get(n);else{let i=this.records.get(n);i||(i=qc(void 0,gm,!0),i.factory=()=>Xo(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){return n.value===gm&&(n.value=CB,n.value=n.factory()),"object"==typeof n.value&&n.value&&function bB(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;const n=P(e.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){const n=this._onDestroyHooks.indexOf(e);-1!==n&&this._onDestroyHooks.splice(n,1)}}function WI(t){const e=qu(t),n=null!==e?e.factory:qs(t);if(null!==n)return n;if(t instanceof ce)throw new j(204,!1);if(t instanceof Function)return function TB(t){const e=t.length;if(e>0)throw function wh(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}(e,"?"),new j(204,!1);const n=function ks(t){return t&&(t[Vs]||t[Gu])||null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new j(204,!1)}function kb(t,e,n){let r;if(au(t)){const i=P(t);return qs(i)||WI(i)}if(jI(t))r=()=>P(t.useValue);else if(function Ob(t){return!(!t||!t.useFactory)}(t))r=()=>t.useFactory(...Xo(t.deps||[]));else if(function Nb(t){return!(!t||!t.useExisting)}(t))r=()=>se(P(t.useExisting));else{const i=P(t&&(t.useClass||t.provide));if(!function AB(t){return!!t.deps}(t))return qs(i)||WI(i);r=()=>new i(...Xo(t.deps))}return r}function qc(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function qI(t,e){for(const n of t)Array.isArray(n)?qI(n,e):n&&we(n)?qI(n.\u0275providers,e):e(n)}const _m=new ce("AppId",{providedIn:"root",factory:()=>RB}),RB="ng",Vb=new ce("Platform Initializer"),hs=new ce("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Fb=new ce("CSP nonce",{providedIn:"root",factory:()=>function zc(){if(void 0!==OI)return OI;if(typeof document<"u")return document;throw new j(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let Lb=(t,e,n)=>null;function eE(t,e,n=!1){return Lb(t,e,n)}class UB{}class $b{}class $B{resolveComponentFactory(e){throw function BB(t){const e=Error(`No component factory found for ${De(t)}.`);return e.ngComponent=t,e}(e)}}let Cm=(()=>{class t{static#e=this.NULL=new $B}return t})();function jB(){return Kc(zn(),Y())}function Kc(t,e){return new Ei(yn(t,e))}let Ei=(()=>{class t{constructor(n){this.nativeElement=n}static#e=this.__NG_ELEMENT_ID__=jB}return t})();class Hb{}let fs=(()=>{class t{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function zB(){const t=Y(),n=Hr(zn().index,t);return(jr(n)?n:t)[Ue]}()}return t})(),WB=(()=>{class t{static#e=this.\u0275prov=Ae({token:t,providedIn:"root",factory:()=>null})}return t})();class Qc{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const zb=new Qc("16.2.11"),rE={};function Zb(t,e=null,n=null,r){const i=Kb(t,e,n,r);return i.resolveInjectorInitializers(),i}function Kb(t,e=null,n=null,r,i=new Set){const o=[n||mt,IB(t)];return r=r||("object"==typeof t?void 0:De(t)),new Wc(o,e||mm(),r||null,i)}let wr=(()=>{class t{static#e=this.THROW_IF_NOT_FOUND=Jo;static#t=this.NULL=new BI;static create(n,r){if(Array.isArray(n))return Zb({name:""},r,n,"");{const i=n.name??"";return Zb({name:i},n.parent,n.providers,i)}}static#n=this.\u0275prov=Ae({token:t,providedIn:"any",factory:()=>se(Sb)});static#r=this.__NG_ELEMENT_ID__=-1}return t})();function oE(t){return t.ngOriginalError}class ps{constructor(){this._console=console}handleError(e){const n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&oE(e);for(;n&&oE(n);)n=oE(n);return n||null}}function aE(t){return e=>{setTimeout(t,void 0,e)}}const vn=class JB extends H{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&"object"==typeof e){const u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=aE(o),i&&(i=aE(i)),s&&(s=aE(s)));const a=super.subscribe({next:i,error:o,complete:s});return e instanceof ft&&e.add(a),a}};function Yb(...t){}class It{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new vn(!1),this.onMicrotaskEmpty=new vn(!1),this.onStable=new vn(!1),this.onError=new vn(!1),typeof Zone>"u")throw new j(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function XB(){const t="function"==typeof At.requestAnimationFrame;let e=At[t?"requestAnimationFrame":"setTimeout"],n=At[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);const i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function n$(t){const e=()=>{!function t$(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(At,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,cE(t),t.isCheckStableRunning=!0,uE(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),cE(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{if(function i$(t){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0].data?.__ignore_ng_zone__}(a))return n.invokeTask(i,o,s,a);try{return Jb(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||t.shouldCoalesceRunChangeDetection)&&e(),Xb(t)}},onInvoke:(n,r,i,o,s,a,u)=>{try{return Jb(t),n.invoke(i,o,s,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),Xb(t)}},onHasTask:(n,r,i,o)=>{n.hasTask(i,o),r===i&&("microTask"==o.change?(t._hasPendingMicrotasks=o.microTask,cE(t),uE(t)):"macroTask"==o.change&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,i,o)=>(n.handleError(i,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!It.isInAngularZone())throw new j(909,!1)}static assertNotInAngularZone(){if(It.isInAngularZone())throw new j(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,e$,Yb,Yb);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}}const e$={};function uE(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function cE(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function Jb(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Xb(t){t._nesting--,uE(t)}class r${constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new vn,this.onMicrotaskEmpty=new vn,this.onStable=new vn,this.onError=new vn}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}}const eS=new ce("",{providedIn:"root",factory:tS});function tS(){const t=Ie(It);let e=!0;return w(new We(i=>{e=t.isStable&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks,t.runOutsideAngular(()=>{i.next(e),i.complete()})}),new We(i=>{let o;t.runOutsideAngular(()=>{o=t.onStable.subscribe(()=>{It.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks&&(e=!0,i.next(!0))})})});const s=t.onUnstable.subscribe(()=>{It.assertInAngularZone(),e&&(e=!1,t.runOutsideAngular(()=>{i.next(!1)}))});return()=>{o.unsubscribe(),s.unsubscribe()}}).pipe(W()))}function gs(t){return t instanceof Function?t():t}let lE=(()=>{class t{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=Ae({token:t,providedIn:"root",factory:()=>new t})}return t})();function Nh(t){for(;t;){t[Le]|=64;const e=Dh(t);if(cg(t)&&!e)return t;t=e}return null}const sS=new ce("",{providedIn:"root",factory:()=>!1});let Dm=null;function lS(t,e){return t[e]??fS()}function dS(t,e){const n=fS();n.producerNode?.length&&(t[e]=Dm,n.lView=t,Dm=hS())}const p$={...gg,consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Nh(t.lView)},lView:null};function hS(){return Object.create(p$)}function fS(){return Dm??=hS(),Dm}const ze={};function oo(t){pS(dt(),Y(),lr()+t,!1)}function pS(t,e,n,r){if(!r)if(3==(3&e[Le])){const o=t.preOrderCheckHooks;null!==o&&Js(e,o,n)}else{const o=t.preOrderHooks;null!==o&&Xs(e,o,0,n)}ro(n)}function re(t,e=Ye.Default){const n=Y();return null===n?se(t,e):io(zn(),n,P(t),e)}function Am(t,e,n,r,i,o,s,a,u,l,h){const g=e.blueprint.slice();return g[$t]=i,g[Le]=140|r,(null!==l||t&&2048&t[Le])&&(g[Le]|=2048),Ic(g),g[jt]=g[To]=t,g[Jt]=n,g[Co]=s||t&&t[Co],g[Ue]=a||t&&t[Ue],g[wo]=u||t&&t[wo]||null,g[Xn]=o,g[Ha]=function yU(){return _U++}(),g[to]=h,g[cc]=l,g[pn]=2==e.type?t[pn]:g,g}function Xc(t,e,n,r,i){let o=t.data[e];if(null===o)o=function dE(t,e,n,r,i){const o=Ng(),s=Ja(),u=t.data[e]=function w$(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return function Qs(){return null!==ke.skipHydrationRootTNode}()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=u),null!==o&&(s?null==o.child&&null!==u.parent&&(o.child=u):null===o.next&&(o.next=u,u.prev=o)),u}(t,e,n,r,i),function Og(){return ke.lFrame.inI18n}()&&(o.flags|=32);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const s=function us(){const t=ke.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();o.injectorIndex=null===s?-1:s.injectorIndex}return ji(o,!0),o}function Oh(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function mS(t,e,n,r,i){const o=lS(e,zs),s=lr(),a=2&r;try{ro(-1),a&&e.length>tt&&pS(t,e,tt,!1),ni(a?2:0,i);const l=a?o:null,h=gc(l);try{null!==l&&(l.dirty=!1),n(r,i)}finally{Jd(l,h)}}finally{a&&null===e[zs]&&dS(e,zs),ro(s),ni(a?3:1,i)}}function hE(t,e,n){if(Gd(e)){const r=vt(null);try{const o=e.directiveEnd;for(let s=e.directiveStart;s<o;s++){const a=t.data[s];a.contentQueries&&a.contentQueries(1,n[s],s)}}finally{vt(r)}}}function fE(t,e,n){Cc()&&(function R$(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;os(n)&&function V$(t,e,n){const r=yn(e,t),i=_S(n);let s=16;n.signals?s=4096:n.onPush&&(s=64);const a=bm(t,Am(t,i,null,s,r,e,null,t[Co].rendererFactory.createRenderer(r,n),null,null,null));t[e.index]=a}(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||E(n,e),Er(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const u=t.data[a],l=Ro(e,t,a,n);Er(l,e),null!==s&&F$(0,a-i,l,u,0,s),Bi(u)&&(Hr(n.index,e)[Jt]=Ro(e,t,a,n))}}(t,e,n,yn(n,e)),64==(64&n.flags)&&wS(t,e,n))}function pE(t,e,n=yn){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function _S(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=gE(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function gE(t,e,n,r,i,o,s,a,u,l,h){const g=tt+r,m=g+i,y=function m$(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:ze);return n}(g,m),T="function"==typeof l?l():l;return y[fe]={type:t,blueprint:y,template:n,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,g),bindingStartIndex:g,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:T,incompleteFirstPass:!1,ssrId:h}}let yS=t=>null;function vS(t,e,n,r){for(let i in t)if(t.hasOwnProperty(i)){n=null===n?{}:n;const o=t[i];null===r?IS(n,e,i,o):r.hasOwnProperty(i)&&IS(n,e,r[i],o)}return n}function IS(t,e,n,r){t.hasOwnProperty(n)?t[n].push(e,r):t[n]=[e,r]}function mE(t,e,n,r){if(Cc()){const i=null===r?null:{"":-1},o=function M$(t,e){const n=t.directiveRegistry;let r=null,i=null;if(n)for(let o=0;o<n.length;o++){const s=n[o];if(oc(e,s.selectors,!1))if(r||(r=[]),Bi(s))if(null!==s.findHostDirectiveDefs){const a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s),_E(t,e,a.length)}else r.unshift(s),_E(t,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return null===r?null:[r,i]}(t,n);let s,a;null===o?s=a=null:[s,a]=o,null!==s&&ES(t,e,n,s,i,a),i&&function x$(t,e,n){if(e){const r=t.localNames=[];for(let i=0;i<e.length;i+=2){const o=n[e[i+1]];if(null==o)throw new j(-301,!1);r.push(e[i],o)}}}(n,r,i)}n.mergedAttrs=Bs(n.mergedAttrs,n.attrs)}function ES(t,e,n,r,i,o){for(let l=0;l<r.length;l++)me(E(n,e),t,r[l].type);!function O$(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}(n,t.data.length,r.length);for(let l=0;l<r.length;l++){const h=r[l];h.providersResolver&&h.providersResolver(h)}let s=!1,a=!1,u=Oh(t,e,r.length,null);for(let l=0;l<r.length;l++){const h=r[l];n.mergedAttrs=Bs(n.mergedAttrs,h.hostAttrs),k$(t,n,e,u,h),N$(u,h,i),null!==h.contentQueries&&(n.flags|=4),(null!==h.hostBindings||null!==h.hostAttrs||0!==h.hostVars)&&(n.flags|=64);const g=h.type.prototype;!s&&(g.ngOnChanges||g.ngOnInit||g.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),s=!0),!a&&(g.ngOnChanges||g.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),u++}!function C$(t,e,n){const i=e.directiveEnd,o=t.data,s=e.attrs,a=[];let u=null,l=null;for(let h=e.directiveStart;h<i;h++){const g=o[h],m=n?n.get(g):null,T=m?m.outputs:null;u=vS(g.inputs,h,u,m?m.inputs:null),l=vS(g.outputs,h,l,T);const b=null===u||null===s||rc(e)?null:L$(u,h,s);a.push(b)}null!==u&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=l}(t,n,o)}function wS(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=function nI(){return ke.lFrame.currentDirectiveIndex}();try{ro(o);for(let a=r;a<i;a++){const u=t.data[a],l=e[a];hh(a),(null!==u.hostBindings||0!==u.hostVars||null!==u.hostAttrs)&&P$(u,l)}}finally{ro(-1),hh(s)}}function P$(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function _E(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function N$(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Bi(e)&&(n[""]=t)}}function k$(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=qs(i.type)),s=new ls(o,Bi(i),re);t.blueprint[r]=s,n[r]=s,function b$(t,e,n,r,i){const o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;null===s&&(s=t.hostBindingOpCodes=[]);const a=~e.index;(function S$(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(s)!=a&&s.push(a),s.push(n,r,o)}}(t,e,r,Oh(t,n,i.hostVars,ze),i)}function Mo(t,e,n,r,i,o){const s=yn(t,e);!function yE(t,e,n,r,i,o,s){if(null==o)t.removeAttribute(e,i,n);else{const a=null==s?Ee(o):s(o,r||"",i);t.setAttribute(e,i,a,n)}}(e[Ue],s,o,t.value,n,r,i)}function F$(t,e,n,r,i,o){const s=o[e];if(null!==s)for(let a=0;a<s.length;)CS(r,n,s[a++],s[a++],s[a++])}function CS(t,e,n,r,i){const o=vt(null);try{const s=t.inputTransforms;null!==s&&s.hasOwnProperty(r)&&(i=s[r].call(e,i)),null!==t.setInput?t.setInput(e,i,n,r):e[r]=i}finally{vt(o)}}function L$(t,e,n){let r=null,i=0;for(;i<n.length;){const o=n[i];if(0!==o)if(5!==o){if("number"==typeof o)break;if(t.hasOwnProperty(o)){null===r&&(r=[]);const s=t[o];for(let a=0;a<s.length;a+=2)if(s[a]===e){r.push(o,s[a+1],n[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function TS(t,e,n,r){return[t,!0,!1,e,null,0,r,n,null,null,null]}function DS(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const o=n[r+1];if(-1!==o){const s=t.data[o];fh(n[r]),s.contentQueries(2,e[o],o)}}}function bm(t,e){return t[ns]?t[ag][_i]=e:t[ns]=e,t[ag]=e,e}function vE(t,e,n){fh(0);const r=vt(null);try{e(t,n)}finally{vt(r)}}function RS(t,e){const n=t[wo],r=n?n.get(ps,null):null;r&&r.handleError(e)}function IE(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++];CS(t.data[s],e[s],r,a,i)}}function U$(t,e){const n=Hr(e,t),r=n[fe];!function B$(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n);const i=n[$t];null!==i&&null===n[to]&&(n[to]=eE(i,n[wo])),EE(r,n,n[Jt])}function EE(t,e,n){Ys(e);try{const r=t.viewQuery;null!==r&&vE(1,r,n);const i=t.template;null!==i&&mS(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&DS(t,e),t.staticViewQueries&&vE(2,t.viewQuery,n);const o=t.components;null!==o&&function $$(t,e){for(let n=0;n<e.length;n++)U$(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[Le]&=-5,ph()}}let PS=(()=>{class t{constructor(){this.all=new Set,this.queue=new Map}create(n,r,i){const o=typeof Zone>"u"?null:Zone.current,s=function Hv(t,e,n){const r=Object.create(zv);n&&(r.consumerAllowSignalWrites=!0),r.fn=t,r.schedule=e;const i=s=>{r.cleanupFn=s};return r.ref={notify:()=>_g(r),run:()=>{if(r.dirty=!1,r.hasRun&&!qa(r))return;r.hasRun=!0;const s=gc(r);try{r.cleanupFn(),r.cleanupFn=Cg,r.fn(i)}finally{Jd(r,s)}},cleanup:()=>r.cleanupFn()},r.ref}(n,l=>{this.all.has(l)&&this.queue.set(l,o)},i);let a;this.all.add(s),s.notify();const u=()=>{s.cleanup(),a?.(),this.all.delete(s),this.queue.delete(s)};return a=r?.onDestroy(u),{destroy:u}}flush(){if(0!==this.queue.size)for(const[n,r]of this.queue)this.queue.delete(n),r?r.run(()=>n.run()):n.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=Ae({token:t,providedIn:"root",factory:()=>new t})}return t})();function Sm(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const a=e[s];"number"==typeof a?o=a:1==o?i=kn(i,a):2==o&&(r=kn(r,a+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function kh(t,e,n,r,i=!1){for(;null!==n;){const o=e[n.index];null!==o&&r.push(kt(o)),Hn(o)&&MS(o,r);const s=n.type;if(8&s)kh(t,e,n.child,r);else if(32&s){const a=DI(n,e);let u;for(;u=a();)r.push(u)}else if(16&s){const a=db(e,n);if(Array.isArray(a))r.push(...a);else{const u=Dh(e[pn]);kh(u[fe],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function MS(t,e){for(let n=er;n<t.length;n++){const r=t[n],i=r[fe].firstChild;null!==i&&kh(r[fe],r,i,e)}t[Ui]!==t[$t]&&e.push(t[Ui])}function Rm(t,e,n,r=!0){const i=e[Co],o=i.rendererFactory,s=i.afterRenderEventManager;o.begin?.(),s?.begin();try{xS(t,e,t.template,n)}catch(u){throw r&&RS(e,u),u}finally{o.end?.(),i.effectManager?.flush(),s?.end()}}function xS(t,e,n,r){const i=e[Le];if(256!=(256&i)){e[Co].effectManager?.flush(),Ys(e);try{Ic(e),function dh(t){return ke.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&mS(t,e,n,2,r);const s=3==(3&i);if(s){const l=t.preOrderCheckHooks;null!==l&&Js(e,l,null)}else{const l=t.preOrderHooks;null!==l&&Xs(e,l,0,null),mh(e,0)}if(function z$(t){for(let e=XA(t);null!==e;e=eb(e)){if(!e[ug])continue;const n=e[Ws];for(let r=0;r<n.length;r++){Kv(n[r])}}}(e),NS(e,2),null!==t.contentQueries&&DS(t,e),s){const l=t.contentCheckHooks;null!==l&&Js(e,l)}else{const l=t.contentHooks;null!==l&&Xs(e,l,1),mh(e,1)}!function g$(t,e){const n=t.hostBindingOpCodes;if(null===n)return;const r=lS(e,is);try{for(let i=0;i<n.length;i++){const o=n[i];if(o<0)ro(~o);else{const s=o,a=n[++i],u=n[++i];tI(a,s),r.dirty=!1;const l=gc(r);try{u(2,e[s])}finally{Jd(r,l)}}}}finally{null===e[is]&&dS(e,is),ro(-1)}}(t,e);const a=t.components;null!==a&&kS(e,a,0);const u=t.viewQuery;if(null!==u&&vE(2,u,r),s){const l=t.viewCheckHooks;null!==l&&Js(e,l)}else{const l=t.viewHooks;null!==l&&Xs(e,l,2),mh(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),e[Le]&=-73,Ec(e)}finally{ph()}}}function NS(t,e){for(let n=XA(t);null!==n;n=eb(n))for(let r=er;r<n.length;r++)OS(n[r],e)}function W$(t,e,n){OS(Hr(e,t),n)}function OS(t,e){if(!function Sg(t){return 128==(128&t[Le])}(t))return;const n=t[fe],r=t[Le];if(80&r&&0===e||1024&r||2===e)xS(n,t,n.template,t[Jt]);else if(t[ts]>0){NS(t,1);const i=n.components;null!==i&&kS(t,i,1)}}function kS(t,e,n){for(let r=0;r<e.length;r++)W$(t,e[r],n)}class Vh{get rootNodes(){const e=this._lView,n=e[fe];return kh(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Jt]}set context(e){this._lView[Jt]=e}get destroyed(){return 256==(256&this._lView[Le])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[jt];if(Hn(e)){const n=e[8],r=n?n.indexOf(this):-1;r>-1&&(sm(e,r),Kg(n,r))}this._attachedToViewContainer=!1}bI(this._lView[fe],this._lView)}onDestroy(e){!function wc(t,e){if(256==(256&t[Le]))throw new j(911,!1);null===t[Do]&&(t[Do]=[]),t[Do].push(e)}(this._lView,e)}markForCheck(){Nh(this._cdRefInjectingView||this._lView)}detach(){this._lView[Le]&=-129}reattach(){this._lView[Le]|=128}detectChanges(){Rm(this._lView[fe],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new j(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function xU(t,e){bh(t,e,e[Ue],2,null,null)}(this._lView[fe],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new j(902,!1);this._appRef=e}}class q$ extends Vh{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;Rm(e[fe],e,e[Jt],!1)}checkNoChanges(){}get context(){return null}}class VS extends Cm{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=rt(e);return new Fh(n,this.ngModule)}}function FS(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}class Z${constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Xu(r);const i=this.injector.get(e,rE,r);return i!==rE||n===rE?i:this.parentInjector.get(e,n,r)}}class Fh extends $b{get inputs(){const e=this.componentDef,n=e.inputTransforms,r=FS(e.inputs);if(null!==n)for(const i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return FS(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function og(t){return t.map($d).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let o=(i=i||this.ngModule)instanceof qi?i:i?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const s=o?new Z$(e,o):e,a=s.get(Hb,null);if(null===a)throw new j(407,!1);const g={rendererFactory:a,sanitizer:s.get(WB,null),effectManager:s.get(PS,null),afterRenderEventManager:s.get(lE,null)},m=a.createRenderer(null,this.componentDef),y=this.componentDef.selectors[0][0]||"div",T=r?function _$(t,e,n,r){const o=r.get(sS,!1)||n===mi.ShadowDom,s=t.selectRootElement(e,o);return function y$(t){yS(t)}(s),s}(m,r,this.componentDef.encapsulation,s):om(m,y,function G$(t){const e=t.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(y)),U=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let x=null;null!==T&&(x=eE(T,s,!0));const z=gE(0,null,null,1,0,null,null,null,null,null,null),oe=Am(null,z,null,U,null,null,g,m,s,null,x);let de,Be;Ys(oe);try{const bt=this.componentDef;let yr,Wp=null;bt.findHostDirectiveDefs?(yr=[],Wp=new Map,bt.findHostDirectiveDefs(bt,yr,Wp),yr.push(bt)):yr=[bt];const Cv=function Q$(t,e){const n=t[fe],r=tt;return t[r]=e,Xc(n,r,2,"#host",null)}(oe,T),BJ=function Y$(t,e,n,r,i,o,s){const a=i[fe];!function J$(t,e,n,r){for(const i of t)e.mergedAttrs=Bs(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(Sm(e,e.mergedAttrs,!0),null!==n&&gb(r,n,e))}(r,t,e,s);let u=null;null!==e&&(u=eE(e,i[wo]));const l=o.rendererFactory.createRenderer(e,n);let h=16;n.signals?h=4096:n.onPush&&(h=64);const g=Am(i,_S(n),null,h,i[t.index],t,o,l,null,null,u);return a.firstCreatePass&&_E(a,t,r.length-1),bm(i,g),i[t.index]=g}(Cv,T,bt,yr,oe,g,m);Be=bg(z,tt),T&&function ej(t,e,n,r){if(r)Od(t,n,["ng-version",zb.full]);else{const{attrs:i,classes:o}=function jd(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!$r(i))break;i=o}r++}return{attrs:e,classes:n}}(e.selectors[0]);i&&Od(t,n,i),o&&o.length>0&&pb(t,n,o.join(" "))}}(m,bt,T,r),void 0!==n&&function tj(t,e,n){const r=t.projection=[];for(let i=0;i<e.length;i++){const o=n[i];r.push(null!=o?Array.from(o):null)}}(Be,this.ngContentSelectors,n),de=function X$(t,e,n,r,i,o){const s=zn(),a=i[fe],u=yn(s,i);ES(a,i,s,n,null,r);for(let h=0;h<n.length;h++)Er(Ro(i,a,s.directiveStart+h,s),i);wS(a,i,s),u&&Er(u,i);const l=Ro(i,a,s.directiveStart+s.componentOffset,s);if(t[Jt]=i[Jt]=l,null!==o)for(const h of o)h(l,e);return hE(a,s,t),l}(BJ,bt,yr,Wp,oe,[nj]),EE(z,oe,null)}finally{ph()}return new K$(this.componentType,de,Kc(Be,oe),oe,Be)}}class K$ extends UB{constructor(e,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new q$(i),this.componentType=e}setInput(e,n){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;const o=this._rootLView;IE(o[fe],o,i,e,n),this.previousInputValues.set(e,n),Nh(Hr(this._tNode.index,o))}}get injector(){return new tr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function nj(){const t=zn();bc(Y()[fe],t)}function Rt(t){let e=function LS(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),n=!0;const r=[t];for(;e;){let i;if(Bi(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new j(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);const s=t;s.inputs=Pm(t.inputs),s.inputTransforms=Pm(t.inputTransforms),s.declaredInputs=Pm(t.declaredInputs),s.outputs=Pm(t.outputs);const a=i.hostBindings;a&&sj(t,a);const u=i.viewQuery,l=i.contentQueries;if(u&&ij(t,u),l&&oj(t,l),Dt(t.inputs,i.inputs),Dt(t.declaredInputs,i.declaredInputs),Dt(t.outputs,i.outputs),null!==i.inputTransforms&&(null===s.inputTransforms&&(s.inputTransforms={}),Dt(s.inputTransforms,i.inputTransforms)),Bi(i)&&i.data.animation){const h=t.data;h.animation=(h.animation||[]).concat(i.data.animation)}}const o=i.features;if(o)for(let s=0;s<o.length;s++){const a=o[s];a&&a.ngInherit&&a(t),a===Rt&&(n=!1)}}e=Object.getPrototypeOf(e)}!function rj(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Bs(i.hostAttrs,n=Bs(n,i.hostAttrs))}}(r)}function Pm(t){return t===Fi?{}:t===mt?[]:t}function ij(t,e){const n=t.viewQuery;t.viewQuery=n?(r,i)=>{e(r,i),n(r,i)}:e}function oj(t,e){const n=t.contentQueries;t.contentQueries=n?(r,i,o)=>{e(r,i,o),n(r,i,o)}:e}function sj(t,e){const n=t.hostBindings;t.hostBindings=n?(r,i)=>{e(r,i),n(r,i)}:e}function jS(t){const e=t.inputConfig,n={};for(const r in e)if(e.hasOwnProperty(r)){const i=e[r];Array.isArray(i)&&i[2]&&(n[r]=i[2])}t.inputTransforms=n}function Mm(t){return!!function wE(t){return null!==t&&("function"==typeof t||"object"==typeof t)}(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function Cr(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function No(t,e,n,r){const i=Y();return Cr(i,cs(),e)&&(dt(),Mo(Xt(),i,t,e,n,r)),No}function SE(t,e,n,r,i,o,s,a){const u=Y(),l=dt(),h=t+tt,g=l.firstCreatePass?function Mj(t,e,n,r,i,o,s,a,u){const l=e.consts,h=Xc(e,t,4,s||null,bo(l,a));mE(e,n,h,bo(l,u)),bc(e,h);const g=h.tView=gE(2,h,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return null!==e.queries&&(e.queries.template(e,h),g.queries=e.queries.embeddedTView(h)),h}(h,l,u,e,n,r,i,o,s):l.data[h];ji(g,!1);const m=tR(l,u,g,t);Ac()&&um(l,u,m,g),Er(m,u),bm(u,u[h]=TS(m,u,m,g)),Zd(g)&&fE(l,u,g),null!=s&&pE(u,g,a)}let tR=function nR(t,e,n,r){return So(!0),e[Ue].createComment("")};function ia(t,e,n){const r=Y();return Cr(r,cs(),e)&&function wi(t,e,n,r,i,o,s,a){const u=yn(e,n);let h,l=e.inputs;!a&&null!=l&&(h=l[r])?(IE(t,n,h,r,i),os(e)&&function D$(t,e){const n=Hr(e,t);16&n[Le]||(n[Le]|=64)}(n,e.index)):3&e.type&&(r=function T$(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(r),i=null!=s?s(i,e.value||"",r):i,o.setProperty(u,r,i))}(dt(),Xt(),r,t,e,r[Ue],n,!1),ia}function RE(t,e,n,r,i){const s=i?"class":"style";IE(t,n,e.inputs[s],s,r)}function Pt(t,e,n,r){const i=Y(),o=dt(),s=tt+t,a=i[Ue],u=o.firstCreatePass?function Vj(t,e,n,r,i,o){const s=e.consts,u=Xc(e,t,2,r,bo(s,i));return mE(e,n,u,bo(s,o)),null!==u.attrs&&Sm(u,u.attrs,!1),null!==u.mergedAttrs&&Sm(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(s,o,i,e,n,r):o.data[s],l=rR(o,i,u,a,e,t);i[s]=l;const h=Zd(u);return ji(u,!0),gb(a,l,u),32!=(32&u.flags)&&Ac()&&um(o,i,l,u),0===function Qv(){return ke.lFrame.elementDepthCount}()&&Er(l,i),function ah(){ke.lFrame.elementDepthCount++}(),h&&(fE(o,i,u),hE(o,u,i)),null!==r&&pE(i,u),Pt}function gt(){let t=zn();Ja()?function Xa(){ke.lFrame.isParent=!1}():(t=t.parent,ji(t,!1));const e=t;(function Pg(t){return ke.skipHydrationRootTNode===t})(e)&&function Jv(){ke.skipHydrationRootTNode=null}(),function uh(){ke.lFrame.elementDepthCount--}();const n=dt();return n.firstCreatePass&&(bc(n,t),Gd(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function Rc(t){return 0!=(8&t.flags)}(e)&&RE(n,e,Y(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function Wg(t){return 0!=(16&t.flags)}(e)&&RE(n,e,Y(),e.stylesWithoutHost,!1),gt}function Ci(t,e,n,r){return Pt(t,e,n,r),gt(),Ci}let rR=(t,e,n,r,i,o)=>(So(!0),om(r,i,function gh(){return ke.lFrame.currentNamespace}()));function jh(t){return!!t&&"function"==typeof t.then}function sR(t){return!!t&&"function"==typeof t.subscribe}function zr(t,e,n,r){const i=Y(),o=dt(),s=zn();return function uR(t,e,n,r,i,o,s){const a=Zd(r),l=t.firstCreatePass&&function bS(t){return t.cleanup||(t.cleanup=[])}(t),h=e[Jt],g=function AS(t){return t[js]||(t[js]=[])}(e);let m=!0;if(3&r.type||s){const b=yn(r,e),M=s?s(b):b,U=g.length,x=s?oe=>s(kt(oe[r.index])):r.index;let z=null;if(!s&&a&&(z=function Hj(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const s=i[o];if(s===n&&i[o+1]===r){const a=e[js],u=i[o+2];return a.length>u?a[u]:null}"string"==typeof s&&(o+=2)}return null}(t,e,i,r.index)),null!==z)(z.__ngLastListenerFn__||z).__ngNextListenerFn__=o,z.__ngLastListenerFn__=o,m=!1;else{o=lR(r,e,h,o,!1);const oe=n.listen(M,i,o);g.push(o,oe),l&&l.push(i,x,U,U+1)}}else o=lR(r,e,h,o,!1);const y=r.outputs;let T;if(m&&null!==y&&(T=y[i])){const b=T.length;if(b)for(let M=0;M<b;M+=2){const de=e[T[M]][T[M+1]].subscribe(o),Be=g.length;g.push(o,de),l&&l.push(i,r.index,Be,-(Be+1))}}}(o,i,i[Ue],s,t,e,r),zr}function cR(t,e,n,r){try{return ni(6,e,n),!1!==n(r)}catch(i){return RS(t,i),!1}finally{ni(7,e,n)}}function lR(t,e,n,r,i){return function o(s){if(s===Function)return r;Nh(t.componentOffset>-1?Hr(t.index,e):e);let u=cR(e,n,r,s),l=o.__ngNextListenerFn__;for(;l;)u=cR(e,n,l,s)&&u,l=l.__ngNextListenerFn__;return i&&!1===u&&s.preventDefault(),u}}function Vm(t,e){return t<<17|e<<2}function oa(t){return t>>17&32767}function NE(t){return 2|t}function cu(t){return(131068&t)>>2}function OE(t,e){return-131069&t|e<<2}function kE(t){return 1|t}function IR(t,e,n,r,i){const o=t[n+1],s=null===e;let a=r?oa(o):cu(o),u=!1;for(;0!==a&&(!1===u||s);){const h=t[a+1];Xj(t[a],e)&&(u=!0,t[a+1]=r?kE(h):NE(h)),a=r?oa(h):cu(h)}u&&(t[n+1]=r?NE(o):kE(o))}function Xj(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&Uc(t,e)>=0}function Fm(t,e){return function so(t,e,n,r){const i=Y(),o=dt(),s=function no(t){const e=ke.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}(2);o.firstUpdatePass&&function RR(t,e,n,r){const i=t.data;if(null===i[n+1]){const o=i[lr()],s=function SR(t,e){return e>=t.expandoStartIndex}(t,n);(function NR(t,e){return 0!=(t.flags&(e?8:16))})(o,r)&&null===e&&!s&&(e=!1),e=function uH(t,e,n,r){const i=function eu(t){const e=ke.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=Hh(n=VE(null,t,e,n,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=VE(i,t,e,n,r),null===o){let u=function cH(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==cu(r))return t[oa(r)]}(t,e,r);void 0!==u&&Array.isArray(u)&&(u=VE(null,t,e,u[1],r),u=Hh(u,e.attrs,r),function lH(t,e,n,r){t[oa(n?e.classBindings:e.styleBindings)]=r}(t,e,r,u))}else o=function dH(t,e,n){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=Hh(r,t[o].hostAttrs,n);return Hh(r,e.attrs,n)}(t,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),n}(i,o,e,r),function Yj(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=oa(s),u=cu(s);t[r]=n;let h,l=!1;if(Array.isArray(n)?(h=n[1],(null===h||Uc(n,h)>0)&&(l=!0)):h=n,i)if(0!==u){const m=oa(t[a+1]);t[r+1]=Vm(m,a),0!==m&&(t[m+1]=OE(t[m+1],r)),t[a+1]=function Kj(t,e){return 131071&t|e<<17}(t[a+1],r)}else t[r+1]=Vm(a,0),0!==a&&(t[a+1]=OE(t[a+1],r)),a=r;else t[r+1]=Vm(u,0),0===a?a=r:t[u+1]=OE(t[u+1],r),u=r;l&&(t[r+1]=NE(t[r+1])),IR(t,h,r,!0),IR(t,h,r,!1),function Jj(t,e,n,r,i){const o=i?t.residualClasses:t.residualStyles;null!=o&&"string"==typeof e&&Uc(o,e)>=0&&(n[r+1]=kE(n[r+1]))}(e,h,t,r,o),s=Vm(a,u),o?e.classBindings=s:e.styleBindings=s}(i,o,e,n,s,r)}}(o,t,s,r),e!==ze&&Cr(i,s,e)&&function MR(t,e,n,r,i,o,s,a){if(!(3&e.type))return;const u=t.data,l=u[a+1],h=function Qj(t){return 1==(1&t)}(l)?xR(u,e,n,i,cu(l),s):void 0;Lm(h)||(Lm(o)||function Zj(t){return 2==(2&t)}(l)&&(o=xR(u,null,n,i,a,s)),function jU(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=-1===r.indexOf("-")?void 0:ra.DashCase;null==i?t.removeStyle(n,r,o):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=ra.Important),t.setStyle(n,r,i,o))}}(r,s,vc(lr(),n),i,o))}(o,o.data[lr()],i,i[Ue],t,i[s+1]=function gH(t,e){return null==t||""===t||("string"==typeof e?t+=e:"object"==typeof t&&(t=De(Ii(t)))),t}(e,n),r,s)}(t,e,null,!0),Fm}function VE(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=Hh(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function Hh(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),yi(t,s,!!n||e[++o]))}return void 0===t?null:t}function xR(t,e,n,r,i,o){const s=null===e;let a;for(;i>0;){const u=t[i],l=Array.isArray(u),h=l?u[1]:u,g=null===h;let m=n[i+1];m===ze&&(m=g?mt:void 0);let y=g?mI(m,r):h===r?m:void 0;if(l&&!Lm(y)&&(y=mI(u,r)),Lm(y)&&(a=y,s))return a;const T=t[i+1];i=s?oa(T):cu(T)}if(null!==e){let u=o?e.residualClasses:e.residualStyles;null!=u&&(a=mI(u,r))}return a}function Lm(t){return void 0!==t}function Pn(t,e=""){const n=Y(),r=dt(),i=t+tt,o=r.firstCreatePass?Xc(r,i,1,e,null):r.data[i],s=OR(r,n,o,e,t);n[i]=s,Ac()&&um(r,n,s,o),ji(o,!1)}let OR=(t,e,n,r,i)=>(So(!0),function im(t,e){return t.createText(e)}(e[Ue],r));function Um(t){return zh("",t,""),Um}function zh(t,e,n){const r=Y(),i=function tl(t,e,n,r){return Cr(t,cs(),n)?e+Ee(n)+r:ze}(r,t,e,n);return i!==ze&&function ms(t,e,n){const r=vc(e,t);!function nb(t,e,n){t.setValue(e,n)}(t[Ue],r,n)}(r,lr(),i),zh}const dl="en-US";let nP=dl;function UE(t,e,n,r,i){if(t=P(t),Array.isArray(t))for(let o=0;o<t.length;o++)UE(t[o],e,n,r,i);else{const o=dt(),s=Y(),a=zn();let u=au(t)?t:P(t.provide);const l=kb(t),h=1048575&a.providerIndexes,g=a.directiveStart,m=a.providerIndexes>>20;if(au(t)||!t.multi){const y=new ls(l,i,re),T=$E(u,e,i?h:h+m,g);-1===T?(me(E(a,s),o,u),BE(o,t,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(y),s.push(y)):(n[T]=y,s[T]=y)}else{const y=$E(u,e,h+m,g),T=$E(u,e,h,h+m),M=T>=0&&n[T];if(i&&!M||!i&&!(y>=0&&n[y])){me(E(a,s),o,u);const U=function Vz(t,e,n,r,i){const o=new ls(t,n,re);return o.multi=[],o.index=e,o.componentProviders=0,bP(o,i,r&&!n),o}(i?kz:Oz,n.length,i,r,l);!i&&M&&(n[T].providerFactory=U),BE(o,t,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(U),s.push(U)}else BE(o,t,y>-1?y:T,bP(n[i?T:y],l,!i&&r));!i&&r&&M&&n[T].componentProviders++}}}function BE(t,e,n,r){const i=au(e),o=function wB(t){return!!t.useClass}(e);if(i||o){const u=(o?P(e.useClass):e).prototype.ngOnDestroy;if(u){const l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const h=l.indexOf(n);-1===h?l.push(n,[r,u]):l[h+1].push(r,u)}else l.push(n,u)}}}function bP(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function $E(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function Oz(t,e,n,r){return jE(this.multi,[])}function kz(t,e,n,r){const i=this.multi;let o;if(this.providerFactory){const s=this.providerFactory.componentProviders,a=Ro(n,n[fe],this.providerFactory.index,r);o=a.slice(0,s),jE(i,o);for(let u=s;u<a.length;u++)o.push(a[u])}else o=[],jE(i,o);return o}function jE(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function sn(t,e=[]){return n=>{n.providersResolver=(r,i)=>function Nz(t,e,n){const r=dt();if(r.firstCreatePass){const i=Bi(t);UE(n,r.data,r.blueprint,i,!0),UE(e,r.data,r.blueprint,i,!1)}}(r,i?i(t):t,e)}}class du{}class SP{}class HE extends du{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new VS(this);const i=ur(e);this._bootstrapComponents=gs(i.bootstrap),this._r3Injector=Kb(e,n,[{provide:du,useValue:this},{provide:Cm,useValue:this.componentFactoryResolver},...r],De(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class zE extends SP{constructor(e){super(),this.moduleType=e}create(e){return new HE(this.moduleType,e,[])}}class RP extends du{constructor(e){super(),this.componentFactoryResolver=new VS(this),this.instance=null;const n=new Wc([...e.providers,{provide:du,useValue:this},{provide:Cm,useValue:this.componentFactoryResolver}],e.parent||mm(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function WE(t,e,n=null){return new RP({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}let Uz=(()=>{class t{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){const r=Mb(0,n.type),i=r.length>0?WE([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(const n of this.cachedInjectors.values())null!==n&&n.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=Ae({token:t,providedIn:"environment",factory:()=>new t(se(qi))})}return t})();function PP(t){t.getStandaloneInjector=e=>e.get(Uz).getOrCreateStandaloneInjector(t)}function f4(t,e,n,r=!0){const i=e[fe];if(function OU(t,e,n,r){const i=er+r,o=n.length;r>0&&(n[i-1][_i]=e),r<o-er?(e[_i]=n[i],xA(n,er+r,e)):(n.push(e),e[_i]=null),e[jt]=n;const s=e[rs];null!==s&&n!==s&&function kU(t,e){const n=t[Ws];e[pn]!==e[jt][jt][pn]&&(t[ug]=!0),null===n?t[Ws]=[e]:n.push(e)}(s,e);const a=e[ei];null!==a&&a.insertView(t),e[Le]|=128}(i,e,t,n),r){const o=MI(n,t),s=e[Ue],a=am(s,t[Ui]);null!==a&&function MU(t,e,n,r,i,o){r[$t]=i,r[Xn]=e,bh(t,r,n,1,i,o)}(i,t[Xn],s,e,a,o)}}Symbol;let _s=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=m4}return t})();const p4=_s,g4=class extends p4{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){const i=function h4(t,e,n,r){const i=e.tView,a=Am(t,i,n,4096&t[Le]?4096:16,null,e,null,null,null,r?.injector??null,r?.hydrationInfo??null);a[rs]=t[e.index];const l=t[ei];return null!==l&&(a[ei]=l.createEmbeddedView(i)),EE(i,a,n),a}(this._declarationLView,this._declarationTContainer,e,{injector:n,hydrationInfo:r});return new Vh(i)}};function m4(){return function zm(t,e){return 4&t.type?new g4(e,t,Kc(t,e)):null}(zn(),Y())}let uo=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=w4}return t})();function w4(){return function ZP(t,e){let n;const r=e[t.index];return Hn(r)?n=r:(n=TS(r,e,null,t),e[t.index]=n,bm(e,n)),KP(n,e,t,r),new qP(n,t,e)}(zn(),Y())}const C4=uo,qP=class extends C4{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Kc(this._hostTNode,this._hostLView)}get injector(){return new tr(this._hostTNode,this._hostLView)}get parentInjector(){const e=X(this._hostTNode,this._hostLView);if(_h(e)){const n=ru(e,this._hostLView),r=nu(e);return new tr(n[fe].data[r+8],n)}return new tr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const n=GP(this._lContainer);return null!==n&&n[e]||null}get length(){return this._lContainer.length-er}createEmbeddedView(e,n,r){let i,o;"number"==typeof r?i=r:null!=r&&(i=r.index,o=r.injector);const a=e.createEmbeddedViewImpl(n||{},o,null);return this.insertImpl(a,i,false),a}createComponent(e,n,r,i,o){const s=e&&!function Eh(t){return"function"==typeof t}(e);let a;if(s)a=n;else{const b=n||{};a=b.index,r=b.injector,i=b.projectableNodes,o=b.environmentInjector||b.ngModuleRef}const u=s?e:new Fh(rt(e)),l=r||this.parentInjector;if(!o&&null==u.ngModule){const M=(s?l:this.parentInjector).get(qi,null);M&&(o=M)}rt(u.componentType??{});const y=u.create(l,i,null,o);return this.insertImpl(y.hostView,a,false),y}insert(e,n){return this.insertImpl(e,n,!1)}insertImpl(e,n,r){const i=e._lView;if(function Zv(t){return Hn(t[jt])}(i)){const u=this.indexOf(e);if(-1!==u)this.detach(u);else{const l=i[jt],h=new qP(l,l[Xn],l[jt]);h.detach(h.indexOf(e))}}const s=this._adjustIndex(n),a=this._lContainer;return f4(a,i,s,!r),e.attachToViewContainerRef(),xA(ZE(a),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){const n=GP(this._lContainer);return null!==n?n.indexOf(e):-1}remove(e){const n=this._adjustIndex(e,-1),r=sm(this._lContainer,n);r&&(Kg(ZE(this._lContainer),n),bI(r[fe],r))}detach(e){const n=this._adjustIndex(e,-1),r=sm(this._lContainer,n);return r&&null!=Kg(ZE(this._lContainer),n)?new Vh(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function GP(t){return t[8]}function ZE(t){return t[8]||(t[8]=[])}let KP=function QP(t,e,n,r){if(t[Ui])return;let i;i=8&n.type?kt(r):function T4(t,e){const n=t[Ue],r=n.createComment(""),i=yn(e,t);return ou(n,am(n,i),r,function UU(t,e){return t.nextSibling(e)}(n,i),!1),r}(e,n),t[Ui]=i};const ow=new ce("Application Initializer");let sw=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=Ie(ow,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const n=[];for(const i of this.appInits){const o=i();if(jh(o))n.push(o);else if(sR(o)){const s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});n.push(s)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),0===n.length&&r(),this.initialized=!0}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),EM=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();const ys=new ce("LocaleId",{providedIn:"root",factory:()=>Ie(ys,Ye.Optional|Ye.SkipSelf)||function tW(){return typeof $localize<"u"&&$localize.locale||dl}()});let wM=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new v(!1)}add(){this.hasPendingTasks.next(!0);const n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class iW{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}}let CM=(()=>{class t{compileModuleSync(n){return new zE(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){const r=this.compileModuleSync(n),o=gs(ur(n).declarations).reduce((s,a)=>{const u=rt(a);return u&&s.push(new Fh(u)),s},[]);return new iW(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const bM=new ce(""),Zm=new ce("");let dw,cw=(()=>{class t{constructor(n,r,i){this._ngZone=n,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,dw||(function AW(t){dw=t}(i),i.addToWindow(r)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{It.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),n(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:n,timeoutId:o,updateCb:i})}whenStable(n,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,r,i){return[]}static#e=this.\u0275fac=function(r){return new(r||t)(se(It),se(lw),se(Zm))};static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac})}return t})(),lw=(()=>{class t{constructor(){this._applications=new Map}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return dw?.findTestabilityInTree(this,n,r)??null}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})(),sa=null;const SM=new ce("AllowMultipleToken"),hw=new ce("PlatformDestroyListeners"),fw=new ce("appBootstrapListener");class PM{constructor(e,n){this.name=e,this.token=n}}function xM(t,e,n=[]){const r=`Platform: ${e}`,i=new ce(r);return(o=[])=>{let s=pw();if(!s||s.injector.get(SM,!1)){const a=[...n,...o,{provide:i,useValue:!0}];t?t(a):function RW(t){if(sa&&!sa.get(SM,!1))throw new j(400,!1);(function RM(){!function Uv(t){Lv=t}(()=>{throw new j(600,!1)})})(),sa=t;const e=t.get(OM);(function MM(t){t.get(Vb,null)?.forEach(n=>n())})(t)}(function NM(t=[],e){return wr.create({name:e,providers:[{provide:HI,useValue:"platform"},{provide:hw,useValue:new Set([()=>sa=null])},...t]})}(a,r))}return function MW(t){const e=pw();if(!e)throw new j(401,!1);return e}()}}function pw(){return sa?.get(OM)??null}let OM=(()=>{class t{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const i=function xW(t="zone.js",e){return"noop"===t?new r$:"zone.js"===t?new It(e):t}(r?.ngZone,function kM(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return i.run(()=>{const o=function Lz(t,e,n){return new HE(t,e,n)}(n.moduleType,this.injector,function BM(t){return[{provide:It,useFactory:t},{provide:Ph,multi:!0,useFactory:()=>{const e=Ie(OW,{optional:!0});return()=>e.initialize()}},{provide:UM,useFactory:NW},{provide:eS,useFactory:tS}]}(()=>i)),s=o.injector.get(ps,null);return i.runOutsideAngular(()=>{const a=i.onError.subscribe({next:u=>{s.handleError(u)}});o.onDestroy(()=>{Km(this._modules,o),a.unsubscribe()})}),function VM(t,e,n){try{const r=n();return jh(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(s,i,()=>{const a=o.injector.get(sw);return a.runInitializers(),a.donePromise.then(()=>(function rP(t){Yn(t,"Expected localeId to be defined"),"string"==typeof t&&(nP=t.toLowerCase().replace(/_/g,"-"))}(o.injector.get(ys,dl)||dl),this._moduleDoBootstrap(o),o))})})}bootstrapModule(n,r=[]){const i=FM({},r);return function bW(t,e,n){const r=new zE(n);return Promise.resolve(r)}(0,0,n).then(o=>this.bootstrapModuleFactory(o,i))}_moduleDoBootstrap(n){const r=n.injector.get(pl);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!n.instance.ngDoBootstrap)throw new j(-403,!1);n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new j(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const n=this._injector.get(hw,null);n&&(n.forEach(r=>r()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(r){return new(r||t)(se(wr))};static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();function FM(t,e){return Array.isArray(e)?e.reduce(FM,t):{...t,...e}}let pl=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Ie(UM),this.zoneIsStable=Ie(eS),this.componentTypes=[],this.components=[],this.isStable=Ie(wM).hasPendingTasks.pipe(ve(n=>n?A(!1):this.zoneIsStable),Oe(),W()),this._injector=Ie(qi)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(n,r){const i=n instanceof $b;if(!this._injector.get(sw).done)throw!i&&function $s(t){const e=rt(t)||$n(t)||jn(t);return null!==e&&e.standalone}(n),new j(405,!1);let s;s=i?n:this._injector.get(Cm).resolveComponentFactory(n),this.componentTypes.push(s.componentType);const a=function SW(t){return t.isBoundToModule}(s)?void 0:this._injector.get(du),l=s.create(wr.NULL,[],r||s.selector,a),h=l.location.nativeElement,g=l.injector.get(bM,null);return g?.registerApplication(h),l.onDestroy(()=>{this.detachView(l.hostView),Km(this.components,l),g?.unregisterApplication(h)}),this._loadComponent(l),l}tick(){if(this._runningTick)throw new j(101,!1);try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this.internalErrorHandler(n)}finally{this._runningTick=!1}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;Km(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);const r=this._injector.get(fw,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Km(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new j(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Km(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const UM=new ce("",{providedIn:"root",factory:()=>Ie(ps).handleError.bind(void 0)});function NW(){const t=Ie(It),e=Ie(ps);return n=>t.runOutsideAngular(()=>e.handleError(n))}let OW=(()=>{class t{constructor(){this.zone=Ie(It),this.applicationRef=Ie(pl)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();let Qm=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=VW}return t})();function VW(t){return function FW(t,e,n){if(os(t)&&!n){const r=Hr(t.index,e);return new Vh(r,r)}return 47&t.type?new Vh(e[pn],e):null}(zn(),Y(),16==(16&t))}class WM{constructor(){}supports(e){return Mm(e)}create(e){return new HW(e)}}const jW=(t,e)=>e;class HW{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||jW}forEachItem(e){let n;for(n=this._itHead;null!==n;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){const s=!r||n&&n.currentIndex<GM(r,i,o)?n:r,a=GM(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,null==s.previousIndex)i++;else{o||(o=[]);const l=a-i,h=u-i;if(l!=h){for(let m=0;m<l;m++){const y=m<o.length?o[m]:o[m]=0,T=y+m;h<=T&&T<l&&(o[m]=y+1)}o[s.previousIndex]=h-l}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)e(n)}diff(e){if(null==e&&(e=[]),!Mm(e))throw new j(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,o,s,n=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),null!==n&&Object.is(n.trackById,s)?(r&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)):(n=this._mismatch(n,o,s,a),r=!0),n=n._next}else i=0,function fj(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Symbol.iterator]();let r;for(;!(r=n.next()).done;)e(r.value)}}(e,a=>{s=this._trackByFn(i,a),null!==n&&Object.is(n.trackById,s)?(r&&(n=this._verifyReinsertion(n,a,s,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)):(n=this._mismatch(n,a,s,i),r=!0),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let o;return null===e?o=this._itTail:(o=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,o,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,o,i)):e=this._addAfter(new zW(n,r),o,i),e}_verifyReinsertion(e,n,r,i){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==o?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const n=e._next;this._addToRemovals(this._unlink(e)),e=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,o=e._nextRemoved;return null===i?this._removalsHead=o:i._nextRemoved=o,null===o?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){const i=null===n?this._itHead:n._next;return e._next=i,e._prev=n,null===i?this._itTail=e:i._prev=e,null===n?this._itHead=e:n._next=e,null===this._linkedRecords&&(this._linkedRecords=new qM),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const n=e._prev,r=e._next;return null===n?this._itHead=r:n._next=r,null===r?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new qM),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class zW{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class WW{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===n||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const n=e._prevDup,r=e._nextDup;return null===n?this._head=r:n._nextDup=r,null===r?this._tail=n:r._prevDup=n,null===this._head}}class qM{constructor(){this.map=new Map}put(e){const n=e.trackById;let r=this.map.get(n);r||(r=new WW,this.map.set(n,r)),r.add(e)}get(e,n){const i=this.map.get(e);return i?i.get(e,n):null}remove(e){const n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function GM(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function KM(){return new Xm([new WM])}let Xm=(()=>{class t{static#e=this.\u0275prov=Ae({token:t,providedIn:"root",factory:KM});constructor(n){this.factories=n}static create(n,r){if(null!=r){const i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||KM()),deps:[[t,new Yg,new vi]]}}find(n){const r=this.factories.find(i=>i.supports(n));if(null!=r)return r;throw new j(901,!1)}}return t})();const QW=xM(null,"core",[]);let YW=(()=>{class t{constructor(n){}static#e=this.\u0275fac=function(r){return new(r||t)(se(pl))};static#t=this.\u0275mod=Bn({type:t});static#n=this.\u0275inj=ar({})}return t})();function gl(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}let Iw=null;function aa(){return Iw}class dq{}const si=new ce("DocumentToken");let Ew=(()=>{class t{historyGo(n){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ae({token:t,factory:function(){return Ie(fq)},providedIn:"platform"})}return t})();const hq=new ce("Location Initialized");let fq=(()=>{class t extends Ew{constructor(){super(),this._doc=Ie(si),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return aa().getBaseHref(this._doc)}onPopState(n){const r=aa().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){const r=aa().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ae({token:t,factory:function(){return new t},providedIn:"platform"})}return t})();function ww(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function ox(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function vs(t){return t&&"?"!==t[0]?"?"+t:t}let fu=(()=>{class t{historyGo(n){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ae({token:t,factory:function(){return Ie(ax)},providedIn:"root"})}return t})();const sx=new ce("appBaseHref");let ax=(()=>{class t extends fu{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??Ie(si).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return ww(this._baseHref,n)}path(n=!1){const r=this._platformLocation.pathname+vs(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){const s=this.prepareExternalUrl(i+vs(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){const s=this.prepareExternalUrl(i+vs(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static#e=this.\u0275fac=function(r){return new(r||t)(se(Ew),se(sx,8))};static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),pq=(()=>{class t extends fu{constructor(n,r){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(n){const r=ww(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+vs(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+vs(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static#e=this.\u0275fac=function(r){return new(r||t)(se(Ew),se(sx,8))};static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac})}return t})(),Cw=(()=>{class t{constructor(n){this._subject=new vn,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;const r=this._locationStrategy.getBaseHref();this._basePath=function _q(t){if(new RegExp("^(https?:)?//").test(t)){const[,n]=t.split(/\/\/[^\/]+/);return n}return t}(ox(ux(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+vs(r))}normalize(n){return t.stripTrailingSlash(function mq(t,e){if(!t||!e.startsWith(t))return e;const n=e.substring(t.length);return""===n||["/",";","?","#"].includes(n[0])?n:e}(this._basePath,ux(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+vs(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+vs(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}static#e=this.normalizeQueryParams=vs;static#t=this.joinWithSlash=ww;static#n=this.stripTrailingSlash=ox;static#r=this.\u0275fac=function(r){return new(r||t)(se(fu))};static#i=this.\u0275prov=Ae({token:t,factory:function(){return function gq(){return new Cw(se(fu))}()},providedIn:"root"})}return t})();function ux(t){return t.replace(/\/index.html$/,"")}class iG{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Ow=(()=>{class t{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){const n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){const r=this._viewContainer;n.forEachOperation((i,o,s)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new iG(i.item,this._ngForOf,-1,-1),null===s?void 0:s);else if(null==s)r.remove(null===o?void 0:o);else if(null!==o){const a=r.get(o);r.move(a,s),vx(a,i)}});for(let i=0,o=r.length;i<o;i++){const a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{vx(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(n,r){return!0}static#e=this.\u0275fac=function(r){return new(r||t)(re(uo),re(_s),re(Xm))};static#t=this.\u0275dir=Ne({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return t})();function vx(t,e){t.context.$implicit=e.item}let MG=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Bn({type:t});static#n=this.\u0275inj=ar({})}return t})();function d_(t){return"server"===t}let kG=(()=>{class t{static#e=this.\u0275prov=Ae({token:t,providedIn:"root",factory:()=>new VG(se(si),window)})}return t})();class VG{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const n=function FG(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&"function"==typeof t.body.attachShadow){const r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const o=i.shadowRoot;if(o){const s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class a3 extends dq{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class $w extends a3{static makeCurrent(){!function lq(t){Iw||(Iw=t)}(new $w)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=function u3(){return sf=sf||document.querySelector("base"),sf?sf.getAttribute("href"):null}();return null==n?null:function c3(t){p_=p_||document.createElement("a"),p_.setAttribute("href",t);const e=p_.pathname;return"/"===e.charAt(0)?e:`/${e}`}(n)}resetBaseElement(){sf=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function tG(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const r=n.indexOf("="),[i,o]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}(document.cookie,e)}}let p_,sf=null,d3=(()=>{class t{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac})}return t})();const jw=new ce("EventManagerPlugins");let Sx=(()=>{class t{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new j(5101,!1);return this._eventNameToPlugin.set(n,r),r}static#e=this.\u0275fac=function(r){return new(r||t)(se(jw),se(It))};static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac})}return t})();class Rx{constructor(e){this._doc=e}}const Hw="ng-app-id";let Px=(()=>{class t{constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=d_(o),this.resetHostNodes()}addStyles(n){for(const r of n)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(n){for(const r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(const r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(const r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){const r=this.styleRef;r.get(n)?.elements?.forEach(i=>i.remove()),r.delete(n)}collectServerRenderedStyles(){const n=this.doc.head?.querySelectorAll(`style[${Hw}="${this.appId}"]`);if(n?.length){const r=new Map;return n.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(n,r){const i=this.styleRef;if(i.has(n)){const o=i.get(n);return o.usage+=r,o.usage}return i.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){const i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===n)return i.delete(r),o.removeAttribute(Hw),o;{const s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(Hw,this.appId),s}}addStyleToHost(n,r){const i=this.getStyleElement(n,r);n.appendChild(i);const o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){const n=this.hostNodes;n.clear(),n.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||t)(se(si),se(_m),se(Fb,8),se(hs))};static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac})}return t})();const zw={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ww=/%COMP%/g,g3=new ce("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function xx(t,e){return e.map(n=>n.replace(Ww,t))}let Nx=(()=>{class t{constructor(n,r,i,o,s,a,u,l=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=d_(a),this.defaultRenderer=new qw(n,s,u,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===mi.ShadowDom&&(r={...r,encapsulation:mi.Emulated});const i=this.getOrCreateRenderer(n,r);return i instanceof kx?i.applyToHost(n):i instanceof Gw&&i.applyStyles(),i}getOrCreateRenderer(n,r){const i=this.rendererByCompId;let o=i.get(r.id);if(!o){const s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,g=this.platformIsServer;switch(r.encapsulation){case mi.Emulated:o=new kx(u,l,r,this.appId,h,s,a,g);break;case mi.ShadowDom:return new v3(u,l,n,r,s,a,this.nonce,g);default:o=new Gw(u,l,r,h,s,a,g)}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||t)(se(Sx),se(Px),se(_m),se(g3),se(si),se(hs),se(It),se(Fb))};static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac})}return t})();class qw{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(zw[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(Ox(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(Ox(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new j(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;const o=zw[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){const i=zw[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(ra.DashCase|ra.Important)?e.style.setProperty(n,r,i&ra.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&ra.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e[n]=r}setValue(e,n){e.nodeValue=n}listen(e,n,r){if("string"==typeof e&&!(e=aa().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if("__ngUnwrap__"===n)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))&&n.preventDefault()}}}function Ox(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class v3 extends qw{constructor(e,n,r,i,o,s,a,u){super(e,o,s,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=xx(i.id,i.styles);for(const h of l){const g=document.createElement("style");a&&g.setAttribute("nonce",a),g.textContent=h,this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Gw extends qw{constructor(e,n,r,i,o,s,a,u){super(e,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=u?xx(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class kx extends Gw{constructor(e,n,r,i,o,s,a,u){const l=i+"-"+r.id;super(e,n,r,o,s,a,u,l),this.contentAttr=function m3(t){return"_ngcontent-%COMP%".replace(Ww,t)}(l),this.hostAttr=function _3(t){return"_nghost-%COMP%".replace(Ww,t)}(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){const r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}}let I3=(()=>{class t extends Rx{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}static#e=this.\u0275fac=function(r){return new(r||t)(se(si))};static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac})}return t})();const Vx=["alt","control","meta","shift"],E3={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},w3={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let C3=(()=>{class t extends Rx{constructor(n){super(n)}supports(n){return null!=t.parseEventName(n)}addEventListener(n,r,i){const o=t.parseEventName(r),s=t.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>aa().onAndCancel(n,o.domEventName,s))}static parseEventName(n){const r=n.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=t._normalizeKey(r.pop());let s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),Vx.forEach(l=>{const h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,0!=r.length||0===o.length)return null;const u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(n,r){let i=E3[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Vx.forEach(s=>{s!==i&&(0,w3[s])(n)&&(o+=s+".")}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{t.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return"esc"===n?"escape":n}static#e=this.\u0275fac=function(r){return new(r||t)(se(si))};static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac})}return t})();const Lx=[{provide:hs,useValue:"browser"},{provide:Vb,useValue:function T3(){$w.makeCurrent()},multi:!0},{provide:si,useFactory:function A3(){return function GU(t){OI=t}(document),document},deps:[]}],b3=xM(QW,"browser",Lx),S3=new ce(""),Ux=[{provide:Zm,useClass:class l3{addToWindow(e){At.getAngularTestability=(r,i=!0)=>{const o=e.findTestabilityInTree(r,i);if(null==o)throw new j(5103,!1);return o},At.getAllAngularTestabilities=()=>e.getAllTestabilities(),At.getAllAngularRootElements=()=>e.getAllRootElements(),At.frameworkStabilizers||(At.frameworkStabilizers=[]),At.frameworkStabilizers.push(r=>{const i=At.getAllAngularTestabilities();let o=i.length,s=!1;const a=function(u){s=s||u,o--,0==o&&r(s)};i.forEach(u=>{u.whenStable(a)})})}findTestabilityInTree(e,n,r){return null==n?null:e.getTestability(n)??(r?aa().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},deps:[]},{provide:bM,useClass:cw,deps:[It,lw,Zm]},{provide:cw,useClass:cw,deps:[It,lw,Zm]}],Bx=[{provide:HI,useValue:"root"},{provide:ps,useFactory:function D3(){return new ps},deps:[]},{provide:jw,useClass:I3,multi:!0,deps:[si,It,hs]},{provide:jw,useClass:C3,multi:!0,deps:[si]},Nx,Px,Sx,{provide:Hb,useExisting:Nx},{provide:class LG{},useClass:d3,deps:[]},[]];let R3=(()=>{class t{constructor(n){}static withServerTransition(n){return{ngModule:t,providers:[{provide:_m,useValue:n.appId}]}}static#e=this.\u0275fac=function(r){return new(r||t)(se(S3,12))};static#t=this.\u0275mod=Bn({type:t});static#n=this.\u0275inj=ar({providers:[...Bx,...Ux],imports:[MG,YW]})}return t})(),$x=(()=>{class t{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static#e=this.\u0275fac=function(r){return new(r||t)(se(si))};static#t=this.\u0275prov=Ae({token:t,factory:function(r){let i=null;return i=r?new r:function M3(){return new $x(se(si))}(),i},providedIn:"root"})}return t})();typeof window<"u"&&window;let zx=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ae({token:t,factory:function(r){let i=null;return i=r?new(r||t):se(Wx),i},providedIn:"root"})}return t})(),Wx=(()=>{class t extends zx{constructor(n){super(),this._doc=n}sanitize(n,r){if(null==r)return null;switch(n){case Wi.NONE:return r;case Wi.HTML:return Po(r,"HTML")?Ii(r):Db(this._doc,String(r)).toString();case Wi.STYLE:return Po(r,"Style")?Ii(r):r;case Wi.SCRIPT:if(Po(r,"Script"))return Ii(r);throw new j(5200,!1);case Wi.URL:return Po(r,"URL")?Ii(r):hm(String(r));case Wi.RESOURCE_URL:if(Po(r,"ResourceURL"))return Ii(r);throw new j(5201,!1);default:throw new j(5202,!1)}}bypassSecurityTrustHtml(n){return function eB(t){return new ZU(t)}(n)}bypassSecurityTrustStyle(n){return function tB(t){return new KU(t)}(n)}bypassSecurityTrustScript(n){return function nB(t){return new QU(t)}(n)}bypassSecurityTrustUrl(n){return function rB(t){return new YU(t)}(n)}bypassSecurityTrustResourceUrl(n){return function iB(t){return new JU(t)}(n)}static#e=this.\u0275fac=function(r){return new(r||t)(se(si))};static#t=this.\u0275prov=Ae({token:t,factory:function(r){let i=null;return i=r?new r:function k3(t){return new Wx(t.get(si))}(se(wr)),i},providedIn:"root"})}return t})();const{isArray:V3}=Array,{getPrototypeOf:F3,prototype:L3,keys:U3}=Object;function Gx(t){if(1===t.length){const e=t[0];if(V3(e))return{args:e,keys:null};if(function B3(t){return t&&"object"==typeof t&&F3(t)===L3}(e)){const n=U3(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}const{isArray:$3}=Array;function Zx(t){return ge(e=>function j3(t,e){return $3(e)?t(...e):t(e)}(t,e))}function Kx(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}let Qx=(()=>{class t{constructor(n,r){this._renderer=n,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static#e=this.\u0275fac=function(r){return new(r||t)(re(fs),re(Ei))};static#t=this.\u0275dir=Ne({type:t})}return t})(),pu=(()=>{class t extends Qx{static#e=this.\u0275fac=function(){let n;return function(i){return(n||(n=Rn(t)))(i||t)}}();static#t=this.\u0275dir=Ne({type:t,features:[Rt]})}return t})();const Vo=new ce("NgValueAccessor"),W3={provide:Vo,useExisting:k(()=>g_),multi:!0},G3=new ce("CompositionEventMode");let g_=(()=>{class t extends Qx{constructor(n,r,i){super(n,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function q3(){const t=aa()?aa().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(n){this.setProperty("value",n??"")}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static#e=this.\u0275fac=function(r){return new(r||t)(re(fs),re(Ei),re(G3,8))};static#t=this.\u0275dir=Ne({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&zr("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[sn([W3]),Rt]})}return t})();function ca(t){return null==t||("string"==typeof t||Array.isArray(t))&&0===t.length}function Jx(t){return null!=t&&"number"==typeof t.length}const Tr=new ce("NgValidators"),la=new ce("NgAsyncValidators"),Z3=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Kw{static min(e){return function Xx(t){return e=>{if(ca(e.value)||ca(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}(e)}static max(e){return function eN(t){return e=>{if(ca(e.value)||ca(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}(e)}static required(e){return tN(e)}static requiredTrue(e){return function nN(t){return!0===t.value?null:{required:!0}}(e)}static email(e){return function rN(t){return ca(t.value)||Z3.test(t.value)?null:{email:!0}}(e)}static minLength(e){return function iN(t){return e=>ca(e.value)||!Jx(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function oN(t){return e=>Jx(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}(e)}static pattern(e){return function sN(t){if(!t)return m_;let e,n;return"string"==typeof t?(n="","^"!==t.charAt(0)&&(n+="^"),n+=t,"$"!==t.charAt(t.length-1)&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),r=>{if(ca(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:n,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return hN(e)}static composeAsync(e){return fN(e)}}function tN(t){return ca(t.value)?{required:!0}:null}function m_(t){return null}function aN(t){return null!=t}function uN(t){return jh(t)?I(t):t}function cN(t){let e={};return t.forEach(n=>{e=null!=n?{...e,...n}:e}),0===Object.keys(e).length?null:e}function lN(t,e){return e.map(n=>n(t))}function dN(t){return t.map(e=>function K3(t){return!t.validate}(e)?e:n=>e.validate(n))}function hN(t){if(!t)return null;const e=t.filter(aN);return 0==e.length?null:function(n){return cN(lN(n,e))}}function Qw(t){return null!=t?hN(dN(t)):null}function fN(t){if(!t)return null;const e=t.filter(aN);return 0==e.length?null:function(n){return function H3(...t){const e=ki(t),{args:n,keys:r}=Gx(t),i=new We(o=>{const{length:s}=n;if(!s)return void o.complete();const a=new Array(s);let u=s,l=s;for(let h=0;h<s;h++){let g=!1;ct(n[h]).subscribe(ue(o,m=>{g||(g=!0,l--),a[h]=m},()=>u--,void 0,()=>{(!u||!g)&&(l||o.next(r?Kx(r,a):a),o.complete())}))}});return e?i.pipe(Zx(e)):i}(lN(n,e).map(uN)).pipe(ge(cN))}}function Yw(t){return null!=t?fN(dN(t)):null}function pN(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function gN(t){return t._rawValidators}function mN(t){return t._rawAsyncValidators}function Jw(t){return t?Array.isArray(t)?t:[t]:[]}function __(t,e){return Array.isArray(t)?t.includes(e):t===e}function _N(t,e){const n=Jw(e);return Jw(t).forEach(i=>{__(n,i)||n.push(i)}),n}function yN(t,e){return Jw(e).filter(n=>!__(t,n))}class vN{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Qw(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Yw(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return!!this.control&&this.control.hasError(e,n)}getError(e,n){return this.control?this.control.getError(e,n):null}}class Zr extends vN{get formDirective(){return null}get path(){return null}}class da extends vN{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class IN{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let EN=(()=>{class t extends IN{constructor(n){super(n)}static#e=this.\u0275fac=function(r){return new(r||t)(re(da,2))};static#t=this.\u0275dir=Ne({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&Fm("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[Rt]})}return t})(),wN=(()=>{class t extends IN{constructor(n){super(n)}static#e=this.\u0275fac=function(r){return new(r||t)(re(Zr,10))};static#t=this.\u0275dir=Ne({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){2&r&&Fm("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[Rt]})}return t})();const af="VALID",v_="INVALID",_l="PENDING",uf="DISABLED";function tC(t){return(I_(t)?t.validators:t)||null}function nC(t,e){return(I_(e)?e.asyncValidators:t)||null}function I_(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}function TN(t,e,n){const r=t.controls;if(!(e?Object.keys(r):r).length)throw new j(1e3,"");if(!r[n])throw new j(1001,"")}function DN(t,e,n){t._forEachChild((r,i)=>{if(void 0===n[i])throw new j(1002,"")})}class E_{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===af}get invalid(){return this.status===v_}get pending(){return this.status==_l}get disabled(){return this.status===uf}get enabled(){return this.status!==uf}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(_N(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(_N(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(yN(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(yN(e,this._rawAsyncValidators))}hasValidator(e){return __(this._rawValidators,e)}hasAsyncValidator(e){return __(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=_l,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=uf,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:n}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=af,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:n}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===af||this.status===_l)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?uf:af}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=_l,this._hasOwnPendingAsyncValidator=!0;const n=uN(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(!1!==n.emitEvent)}get(e){let n=e;return null==n||(Array.isArray(n)||(n=n.split(".")),0===n.length)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){const r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new vn,this.statusChanges=new vn}_calculateStatus(){return this._allControlsDisabled()?uf:this.errors?v_:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(_l)?_l:this._anyControlsHaveStatus(v_)?v_:af}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){I_(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function X3(t){return Array.isArray(t)?Qw(t):t||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function e9(t){return Array.isArray(t)?Yw(t):t||null}(this._rawAsyncValidators)}}class cf extends E_{constructor(e,n,r){super(tC(n),nC(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){DN(this,0,e),Object.keys(e).forEach(r=>{TN(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>!!r._syncPendingControls()||n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{const r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,o)=>{r=n(r,i,o)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class AN extends cf{}const gu=new ce("CallSetDisabledState",{providedIn:"root",factory:()=>lf}),lf="always";function df(t,e,n=lf){rC(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||"always"===n)&&e.valueAccessor.setDisabledState?.(t.disabled),function n9(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&bN(t,e)})}(t,e),function i9(t,e){const n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function r9(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&bN(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function t9(t,e){if(e.valueAccessor.setDisabledState){const n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function C_(t,e,n=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),D_(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function T_(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function rC(t,e){const n=gN(t);null!==e.validator?t.setValidators(pN(n,e.validator)):"function"==typeof n&&t.setValidators([n]);const r=mN(t);null!==e.asyncValidator?t.setAsyncValidators(pN(r,e.asyncValidator)):"function"==typeof r&&t.setAsyncValidators([r]);const i=()=>t.updateValueAndValidity();T_(e._rawValidators,i),T_(e._rawAsyncValidators,i)}function D_(t,e){let n=!1;if(null!==t){if(null!==e.validator){const i=gN(t);if(Array.isArray(i)&&i.length>0){const o=i.filter(s=>s!==e.validator);o.length!==i.length&&(n=!0,t.setValidators(o))}}if(null!==e.asyncValidator){const i=mN(t);if(Array.isArray(i)&&i.length>0){const o=i.filter(s=>s!==e.asyncValidator);o.length!==i.length&&(n=!0,t.setAsyncValidators(o))}}}const r=()=>{};return T_(e._rawValidators,r),T_(e._rawAsyncValidators,r),n}function bN(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function PN(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function MN(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}const ff=class extends E_{constructor(e=null,n,r){super(tC(n),nC(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),I_(n)&&(n.nonNullable||n.initialValueIsDefault)&&(this.defaultValue=MN(e)?e.value:e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==n.emitViewToModelChange)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){PN(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){PN(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){MN(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};let VN=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275dir=Ne({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return t})(),LN=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Bn({type:t});static#n=this.\u0275inj=ar({})}return t})();const uC=new ce("NgModelWithFormControlWarning"),y9={provide:Zr,useExisting:k(()=>A_)};let A_=(()=>{class t extends Zr{constructor(n,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new vn,this._setValidators(n),this._setAsyncValidators(r)}ngOnChanges(n){this._checkFormPresent(),n.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(D_(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(n){const r=this.form.get(n.path);return df(r,n,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(n),r}getControl(n){return this.form.get(n.path)}removeControl(n){C_(n.control||null,n,!1),function u9(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}(this.directives,n)}addFormGroup(n){this._setUpFormContainer(n)}removeFormGroup(n){this._cleanUpFormContainer(n)}getFormGroup(n){return this.form.get(n.path)}addFormArray(n){this._setUpFormContainer(n)}removeFormArray(n){this._cleanUpFormContainer(n)}getFormArray(n){return this.form.get(n.path)}updateModel(n,r){this.form.get(n.path).setValue(r)}onSubmit(n){return this.submitted=!0,function RN(t,e){t._syncPendingControls(),e.forEach(n=>{const r=n.control;"submit"===r.updateOn&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(n),"dialog"===n?.target?.method}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submitted=!1}_updateDomValue(){this.directives.forEach(n=>{const r=n.control,i=this.form.get(n.path);r!==i&&(C_(r||null,n),(t=>t instanceof ff)(i)&&(df(i,n,this.callSetDisabledState),n.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(n){const r=this.form.get(n.path);(function SN(t,e){rC(t,e)})(r,n),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(n){if(this.form){const r=this.form.get(n.path);r&&function o9(t,e){return D_(t,e)}(r,n)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){rC(this.form,this),this._oldForm&&D_(this._oldForm,this)}_checkFormPresent(){}static#e=this.\u0275fac=function(r){return new(r||t)(re(Tr,10),re(la,10),re(gu,8))};static#t=this.\u0275dir=Ne({type:t,selectors:[["","formGroup",""]],hostBindings:function(r,i){1&r&&zr("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[sn([y9]),Rt,ti]})}return t})();const E9={provide:da,useExisting:k(()=>dC)};let dC=(()=>{class t extends da{set isDisabled(n){}static#e=this._ngModelWarningSentOnce=!1;constructor(n,r,i,o,s){super(),this._ngModelWarningConfig=s,this._added=!1,this.name=null,this.update=new vn,this._ngModelWarningSent=!1,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function sC(t,e){if(!e)return null;let n,r,i;return Array.isArray(e),e.forEach(o=>{o.constructor===g_?n=o:function a9(t){return Object.getPrototypeOf(t.constructor)===pu}(o)?r=o:i=o}),i||r||n||null}(0,o)}ngOnChanges(n){this._added||this._setUpControl(),function oC(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(n,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}get path(){return function w_(t,e){return[...e.path,t]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static#t=this.\u0275fac=function(r){return new(r||t)(re(Zr,13),re(Tr,10),re(la,10),re(Vo,10),re(uC,8))};static#n=this.\u0275dir=Ne({type:t,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[sn([E9]),Rt,ti]})}return t})(),mu=(()=>{class t{constructor(){this._validator=m_}ngOnChanges(n){if(this.inputName in n){const r=this.normalizeInput(n[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):m_,this._onChange&&this._onChange()}}validate(n){return this._validator(n)}registerOnValidatorChange(n){this._onChange=n}enabled(n){return null!=n}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275dir=Ne({type:t,features:[ti]})}return t})();const P9={provide:Tr,useExisting:k(()=>b_),multi:!0};let b_=(()=>{class t extends mu{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=gl,this.createValidator=n=>tN}enabled(n){return n}static#e=this.\u0275fac=function(){let n;return function(i){return(n||(n=Rn(t)))(i||t)}}();static#t=this.\u0275dir=Ne({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){2&r&&No("required",i._enabled?"":null)},inputs:{required:"required"},features:[sn([P9]),Rt]})}return t})(),eO=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Bn({type:t});static#n=this.\u0275inj=ar({imports:[LN]})}return t})();class tO extends E_{constructor(e,n,r){super(tC(n),nC(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,n={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}insert(e,n,r={}){this.controls.splice(e,0,n),this._registerControl(n),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,n={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:n.emitEvent})}setControl(e,n,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),n&&(this.controls.splice(i,0,n),this._registerControl(n)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,n={}){DN(this,0,e),e.forEach((r,i)=>{TN(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e=[],n={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(n=>n._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((n,r)=>!!r._syncPendingControls()||n,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((n,r)=>{e(n,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(n=>n.enabled&&e(n))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function nO(t){return!!t&&(void 0!==t.asyncValidators||void 0!==t.validators||void 0!==t.updateOn)}let V9=(()=>{class t{constructor(){this.useNonNullable=!1}get nonNullable(){const n=new t;return n.useNonNullable=!0,n}group(n,r=null){const i=this._reduceControls(n);let o={};return nO(r)?o=r:null!==r&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new cf(i,o)}record(n,r=null){const i=this._reduceControls(n);return new AN(i,r)}control(n,r,i){let o={};return this.useNonNullable?(nO(r)?o=r:(o.validators=r,o.asyncValidators=i),new ff(n,{...o,nonNullable:!0})):new ff(n,r,i)}array(n,r,i){const o=n.map(s=>this._createControl(s));return new tO(o,r,i)}_reduceControls(n){const r={};return Object.keys(n).forEach(i=>{r[i]=this._createControl(n[i])}),r}_createControl(n){return n instanceof ff||n instanceof E_?n:Array.isArray(n)?this.control(n[0],n.length>1?n[1]:null,n.length>2?n[2]:null):this.control(n)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),F9=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:gu,useValue:n.callSetDisabledState??lf}]}}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Bn({type:t});static#n=this.\u0275inj=ar({imports:[eO]})}return t})(),L9=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:uC,useValue:n.warnOnNgModelWithFormControl??"always"},{provide:gu,useValue:n.callSetDisabledState??lf}]}}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Bn({type:t});static#n=this.\u0275inj=ar({imports:[eO]})}return t})();function pC(...t){const e=gi(t),n=ki(t),{args:r,keys:i}=Gx(t);if(0===r.length)return I([],e);const o=new We(function B9(t,e,n=ln){return r=>{rO(e,()=>{const{length:i}=t,o=new Array(i);let s=i,a=i;for(let u=0;u<i;u++)rO(e,()=>{const l=I(t[u],e);let h=!1;l.subscribe(ue(r,g=>{o[u]=g,h||(h=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}(r,e,i?s=>Kx(i,s):ln));return n?o.pipe(Zx(n)):o}function rO(t,e,n){t?Or(n,t,e):e()}const S_=q(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function gC(...t){return function $9(){return kr(1)}()(I(t,gi(t)))}function iO(t){return new We(e=>{ct(t()).subscribe(e)})}function pf(t,e){const n=C(t)?t:()=>t,r=i=>i.error(n());return new We(e?i=>e.schedule(r,0,i):r)}function mC(){return K((t,e)=>{let n=null;t._refCount++;const r=ue(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(n=null);const i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}class oO extends We{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Q(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ft;const n=this.getSubject();e.add(this.source.subscribe(ue(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ft.EMPTY)}return e}refCount(){return mC()(this)}}function yl(t){return t<=0?()=>dn:K((e,n)=>{let r=0;e.subscribe(ue(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function R_(...t){const e=gi(t);return K((n,r)=>{(e?gC(t,n,e):gC(t,n)).subscribe(r)})}function ho(t,e){return K((n,r)=>{let i=0;n.subscribe(ue(r,o=>t.call(e,o,i++)&&r.next(o)))})}function P_(t){return K((e,n)=>{let r=!1;e.subscribe(ue(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function sO(t=j9){return K((e,n)=>{let r=!1;e.subscribe(ue(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function j9(){return new S_}function ha(t,e){const n=arguments.length>=2;return r=>r.pipe(t?ho((i,o)=>t(i,o,r)):ln,yl(1),n?P_(e):sO(()=>new S_))}function gf(t,e){return C(e)?wt(t,e,1):wt(t,1)}function hr(t,e,n){const r=C(t)||e||n?{next:t,error:e,complete:n}:t;return r?K((i,o)=>{var s;null===(s=r.subscribe)||void 0===s||s.call(r);let a=!0;i.subscribe(ue(o,u=>{var l;null===(l=r.next)||void 0===l||l.call(r,u),o.next(u)},()=>{var u;a=!1,null===(u=r.complete)||void 0===u||u.call(r),o.complete()},u=>{var l;a=!1,null===(l=r.error)||void 0===l||l.call(r,u),o.error(u)},()=>{var u,l;a&&(null===(u=r.unsubscribe)||void 0===u||u.call(r)),null===(l=r.finalize)||void 0===l||l.call(r)}))}):ln}function _u(t){return K((e,n)=>{let o,r=null,i=!1;r=e.subscribe(ue(n,void 0,void 0,s=>{o=ct(t(s,_u(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function M_(t,e){return K(function H9(t,e,n,r,i){return(o,s)=>{let a=n,u=e,l=0;o.subscribe(ue(s,h=>{const g=l++;u=a?t(u,h,g):(a=!0,h),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}(t,e,arguments.length>=2,!0))}function _C(t){return t<=0?()=>dn:K((e,n)=>{let r=[];e.subscribe(ue(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(const i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function yC(t){return K((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}const Ze="primary",mf=Symbol("RouteTitle");class G9{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function vl(t){return new G9(t)}function Z9(t,e,n){const r=n.path.split("/");if(r.length>t.length||"full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const s=r[o],a=t[o];if(s.startsWith(":"))i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Fo(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!aO(t[i],e[i]))return!1;return!0}function aO(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}return t===e}function uO(t){return t.length>0?t[t.length-1]:null}function fa(t){return function U9(t){return!!t&&(t instanceof We||C(t.lift)&&C(t.subscribe))}(t)?t:jh(t)?I(Promise.resolve(t)):A(t)}const Q9={exact:function dO(t,e,n){if(!yu(t.segments,e.segments)||!x_(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!t.children[r]||!dO(t.children[r],e.children[r],n))return!1;return!0},subset:hO},cO={exact:function Y9(t,e){return Fo(t,e)},subset:function J9(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>aO(t[n],e[n]))},ignored:()=>!0};function lO(t,e,n){return Q9[n.paths](t.root,e.root,n.matrixParams)&&cO[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function hO(t,e,n){return fO(t,e,e.segments,n)}function fO(t,e,n,r){if(t.segments.length>n.length){const i=t.segments.slice(0,n.length);return!(!yu(i,n)||e.hasChildren()||!x_(i,n,r))}if(t.segments.length===n.length){if(!yu(t.segments,n)||!x_(t.segments,n,r))return!1;for(const i in e.children)if(!t.children[i]||!hO(t.children[i],e.children[i],r))return!1;return!0}{const i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!!(yu(t.segments,i)&&x_(t.segments,i,r)&&t.children[Ze])&&fO(t.children[Ze],e,o,r)}}function x_(t,e,n){return e.every((r,i)=>cO[n](t[i].parameters,r.parameters))}class Il{constructor(e=new Mt([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=vl(this.queryParams)),this._queryParamMap}toString(){return t6.serialize(this)}}class Mt{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return N_(this)}}class _f{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=vl(this.parameters)),this._parameterMap}toString(){return mO(this)}}function yu(t,e){return t.length===e.length&&t.every((n,r)=>n.path===e[r].path)}let yf=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ae({token:t,factory:function(){return new vC},providedIn:"root"})}return t})();class vC{parse(e){const n=new h6(e);return new Il(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){const n=`/${vf(e.root,!0)}`,r=function i6(t){const e=Object.keys(t).map(n=>{const r=t[n];return Array.isArray(r)?r.map(i=>`${O_(n)}=${O_(i)}`).join("&"):`${O_(n)}=${O_(r)}`}).filter(n=>!!n);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${n}${r}${"string"==typeof e.fragment?`#${function n6(t){return encodeURI(t)}(e.fragment)}`:""}`}}const t6=new vC;function N_(t){return t.segments.map(e=>mO(e)).join("/")}function vf(t,e){if(!t.hasChildren())return N_(t);if(e){const n=t.children[Ze]?vf(t.children[Ze],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==Ze&&r.push(`${i}:${vf(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=function e6(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===Ze&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==Ze&&(n=n.concat(e(i,r)))}),n}(t,(r,i)=>i===Ze?[vf(t.children[Ze],!1)]:[`${i}:${vf(r,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[Ze]?`${N_(t)}/${n[0]}`:`${N_(t)}/(${n.join("//")})`}}function pO(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function O_(t){return pO(t).replace(/%3B/gi,";")}function IC(t){return pO(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function k_(t){return decodeURIComponent(t)}function gO(t){return k_(t.replace(/\+/g,"%20"))}function mO(t){return`${IC(t.path)}${function r6(t){return Object.keys(t).map(e=>`;${IC(e)}=${IC(t[e])}`).join("")}(t.parameters)}`}const o6=/^[^\/()?;#]+/;function EC(t){const e=t.match(o6);return e?e[0]:""}const s6=/^[^\/()?;=#]+/,u6=/^[^=?&#]+/,l6=/^[^&#]+/;class h6{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Mt([],{}):new Mt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[Ze]=new Mt(e,n)),r}parseSegment(){const e=EC(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new j(4009,!1);return this.capture(e),new _f(k_(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const n=function a6(t){const e=t.match(s6);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const i=EC(this.remaining);i&&(r=i,this.capture(r))}e[k_(n)]=k_(r)}parseQueryParam(e){const n=function c6(t){const e=t.match(u6);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const s=function d6(t){const e=t.match(l6);return e?e[0]:""}(this.remaining);s&&(r=s,this.capture(r))}const i=gO(n),o=gO(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=EC(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new j(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=Ze);const s=this.parseChildren();n[o]=1===Object.keys(s).length?s[Ze]:new Mt([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new j(4011,!1)}}function _O(t){return t.segments.length>0?new Mt([],{[Ze]:t}):t}function yO(t){const e={};for(const r of Object.keys(t.children)){const o=yO(t.children[r]);if(r===Ze&&0===o.segments.length&&o.hasChildren())for(const[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}return function f6(t){if(1===t.numberOfChildren&&t.children[Ze]){const e=t.children[Ze];return new Mt(t.segments.concat(e.segments),e.children)}return t}(new Mt(t.segments,e))}function vu(t){return t instanceof Il}function vO(t){let e;const i=_O(function n(o){const s={};for(const u of o.children){const l=n(u);s[u.outlet]=l}const a=new Mt(o.url,s);return o===t&&(e=a),a}(t.root));return e??i}function IO(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(0===e.length)return wC(i,i,i,n,r);const o=function g6(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new wO(!0,0,t);let e=0,n=!1;const r=t.reduce((i,o,s)=>{if("object"==typeof o&&null!=o){if(o.outlets){const a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]="string"==typeof l?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return"string"!=typeof o?[...i,o]:0===s?(o.split("/").forEach((a,u)=>{0==u&&"."===a||(0==u&&""===a?n=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,o]},[]);return new wO(n,e,r)}(e);if(o.toRoot())return wC(i,i,new Mt([],{}),n,r);const s=function m6(t,e,n){if(t.isAbsolute)return new F_(e,!0,0);if(!n)return new F_(e,!1,NaN);if(null===n.parent)return new F_(n,!0,0);const r=V_(t.commands[0])?0:1;return function _6(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new j(4005,!1);i=r.segments.length}return new F_(r,!1,i-o)}(n,n.segments.length-1+r,t.numberOfDoubleDots)}(o,i,t),a=s.processChildren?Ef(s.segmentGroup,s.index,o.commands):CO(s.segmentGroup,s.index,o.commands);return wC(i,s.segmentGroup,a,n,r)}function V_(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function If(t){return"object"==typeof t&&null!=t&&t.outlets}function wC(t,e,n,r,i){let s,o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`}),s=t===e?n:EO(t,e,n);const a=_O(yO(s));return new Il(a,o,i)}function EO(t,e,n){const r={};return Object.entries(t.children).forEach(([i,o])=>{r[i]=o===e?n:EO(o,e,n)}),new Mt(t.segments,r)}class wO{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&V_(r[0]))throw new j(4003,!1);const i=r.find(If);if(i&&i!==uO(r))throw new j(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class F_{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}}function CO(t,e,n){if(t||(t=new Mt([],{})),0===t.segments.length&&t.hasChildren())return Ef(t,e,n);const r=function v6(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const s=t.segments[i],a=n[r];if(If(a))break;const u=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&void 0===u)break;if(u&&l&&"object"==typeof l&&void 0===l.outlets){if(!DO(u,l,s))return o;r+=2}else{if(!DO(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const o=new Mt(t.segments.slice(0,r.pathIndex),{});return o.children[Ze]=new Mt(t.segments.slice(r.pathIndex),t.children),Ef(o,0,i)}return r.match&&0===i.length?new Mt(t.segments,{}):r.match&&!t.hasChildren()?CC(t,e,n):r.match?Ef(t,0,i):CC(t,e,n)}function Ef(t,e,n){if(0===n.length)return new Mt(t.segments,{});{const r=function y6(t){return If(t[0])?t[0].outlets:{[Ze]:t}}(n),i={};if(Object.keys(r).some(o=>o!==Ze)&&t.children[Ze]&&1===t.numberOfChildren&&0===t.children[Ze].segments.length){const o=Ef(t.children[Ze],e,n);return new Mt(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{"string"==typeof s&&(s=[s]),null!==s&&(i[o]=CO(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{void 0===r[o]&&(i[o]=s)}),new Mt(t.segments,i)}}function CC(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const o=n[i];if(If(o)){const u=I6(o.outlets);return new Mt(r,u)}if(0===i&&V_(n[0])){r.push(new _f(t.segments[e].path,TO(n[0]))),i++;continue}const s=If(o)?o.outlets[Ze]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&V_(a)?(r.push(new _f(s,TO(a))),i+=2):(r.push(new _f(s,{})),i++)}return new Mt(r,{})}function I6(t){const e={};return Object.entries(t).forEach(([n,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[n]=CC(new Mt([],{}),0,r))}),e}function TO(t){const e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function DO(t,e,n){return t==n.path&&Fo(e,n.parameters)}const wf="imperative";class Lo{constructor(e,n){this.id=e,this.url=n}}class L_ extends Lo{constructor(e,n,r="imperative",i=null){super(e,n),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class pa extends Lo{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Cf extends Lo{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class El extends Lo{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=16}}class U_ extends Lo{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class AO extends Lo{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class E6 extends Lo{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class w6 extends Lo{constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class C6 extends Lo{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class T6 extends Lo{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class D6{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class A6{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class b6{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class S6{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class R6{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class P6{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class bO{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class TC{}class DC{constructor(e){this.url=e}}class M6{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Tf,this.attachRef=null}}let Tf=(()=>{class t{constructor(){this.contexts=new Map}onChildOutletCreated(n,r){const i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){const r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new M6,this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class SO{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){const n=AC(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){const n=AC(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){const n=bC(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return bC(e,this._root).map(n=>n.value)}}function AC(t,e){if(t===e.value)return e;for(const n of e.children){const r=AC(t,n);if(r)return r}return null}function bC(t,e){if(t===e.value)return[e];for(const n of e.children){const r=bC(t,n);if(r.length)return r.unshift(e),r}return[]}class ws{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}}function wl(t){const e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}class RO extends SO{constructor(e,n){super(e),this.snapshot=n,SC(this,e)}toString(){return this.snapshot.toString()}}function PO(t,e){const n=function x6(t,e){const s=new B_([],{},{},"",{},Ze,e,null,{});return new xO("",new ws(s,[]))}(0,e),r=new v([new _f("",{})]),i=new v({}),o=new v({}),s=new v({}),a=new v(""),u=new Cl(r,i,s,a,o,Ze,e,n.root);return u.snapshot=n.root,new RO(new ws(u,[]),n)}class Cl{constructor(e,n,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(ge(l=>l[mf]))??A(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(ge(e=>vl(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(ge(e=>vl(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function MO(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const i=n[r],o=n[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(o.component)break;r--}}return function N6(t){return t.reduce((e,n)=>({params:{...e.params,...n.params},data:{...e.data,...n.data},resolve:{...n.data,...e.resolve,...n.routeConfig?.data,...n._resolvedData}}),{params:{},data:{},resolve:{}})}(n.slice(r))}class B_{get title(){return this.data?.[mf]}constructor(e,n,r,i,o,s,a,u,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=vl(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=vl(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class xO extends SO{constructor(e,n){super(n),this.url=e,SC(this,n)}toString(){return NO(this._root)}}function SC(t,e){e.value._routerState=t,e.children.forEach(n=>SC(t,n))}function NO(t){const e=t.children.length>0?` { ${t.children.map(NO).join(", ")} } `:"";return`${t.value}${e}`}function RC(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Fo(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Fo(e.params,n.params)||t.paramsSubject.next(n.params),function K9(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Fo(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.urlSubject.next(n.url),Fo(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function PC(t,e){const n=Fo(t.params,e.params)&&function X9(t,e){return yu(t,e)&&t.every((n,r)=>Fo(n.parameters,e[r].parameters))}(t.url,e.url);return n&&!(!t.parent!=!e.parent)&&(!t.parent||PC(t.parent,e.parent))}let MC=(()=>{class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=Ze,this.activateEvents=new vn,this.deactivateEvents=new vn,this.attachEvents=new vn,this.detachEvents=new vn,this.parentContexts=Ie(Tf),this.location=Ie(uo),this.changeDetector=Ie(Qm),this.environmentInjector=Ie(qi),this.inputBinder=Ie($_,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(n){if(n.name){const{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new j(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new j(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new j(4012,!1);this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new j(4013,!1);this._activatedRoute=n;const i=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new O6(n,a,i.injector);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275dir=Ne({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[ti]})}return t})();class O6{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===Cl?this.route:e===Tf?this.childContexts:this.parent.get(e,n)}}const $_=new ce("");let OO=(()=>{class t{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(n){this.unsubscribeFromRouteData(n),this.subscribeToRouteData(n)}unsubscribeFromRouteData(n){this.outletDataSubscriptions.get(n)?.unsubscribe(),this.outletDataSubscriptions.delete(n)}subscribeToRouteData(n){const{activatedRoute:r}=n,i=pC([r.queryParams,r.params,r.data]).pipe(ve(([o,s,a],u)=>(a={...o,...s,...a},0===u?A(a):Promise.resolve(a)))).subscribe(o=>{if(!n.isActivated||!n.activatedComponentRef||n.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(n);const s=function cq(t){const e=rt(t);if(!e)return null;const n=new Fh(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(r.component);if(s)for(const{templateName:a}of s.inputs)n.activatedComponentRef.setInput(a,o[a]);else this.unsubscribeFromRouteData(n)});this.outletDataSubscriptions.set(n,i)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac})}return t})();function Df(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function V6(t,e,n){return e.children.map(r=>{for(const i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Df(t,r,i);return Df(t,r)})}(t,e,n);return new ws(r,i)}{if(t.shouldAttach(e.value)){const o=t.retrieve(e.value);if(null!==o){const s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Df(t,a)),s}}const r=function F6(t){return new Cl(new v(t.url),new v(t.params),new v(t.queryParams),new v(t.fragment),new v(t.data),t.outlet,t.component,t)}(e.value),i=e.children.map(o=>Df(t,o));return new ws(r,i)}}const xC="ngNavigationCancelingError";function kO(t,e){const{redirectTo:n,navigationBehaviorOptions:r}=vu(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=VO(!1,0,e);return i.url=n,i.navigationBehaviorOptions=r,i}function VO(t,e,n){const r=new Error("NavigationCancelingError: "+(t||""));return r[xC]=!0,r.cancellationCode=e,n&&(r.url=n),r}function FO(t){return t&&t[xC]}let LO=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=Eo({type:t,selectors:[["ng-component"]],standalone:!0,features:[PP],decls:1,vars:0,template:function(r,i){1&r&&Ci(0,"router-outlet")},dependencies:[MC],encapsulation:2})}return t})();function NC(t){const e=t.children&&t.children.map(NC),n=e?{...t,children:e}:{...t};return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Ze&&(n.component=LO),n}function fo(t){return t.outlet||Ze}function Af(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){const n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}class W6{constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){const n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),RC(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){const i=wl(n);e.children.forEach(o=>{const s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){const i=e.value,o=n?n.value:null;if(i===o)if(i.component){const s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=wl(e);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],i);if(r&&r.outlet){const s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=wl(e);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){const i=wl(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new P6(o.value.snapshot))}),e.children.length&&this.forwardEvent(new S6(e.value.snapshot))}activateRoutes(e,n,r){const i=e.value,o=n?n.value:null;if(RC(i),i===o)if(i.component){const s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){const s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),RC(a.route.value),this.activateChildRoutes(e,null,s.children)}else{const a=Af(i.snapshot);s.attachRef=null,s.route=i,s.injector=a,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,r)}}class UO{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class j_{constructor(e,n){this.component=e,this.route=n}}function q6(t,e,n){const r=t._root;return bf(r,e?e._root:null,n,[r.value])}function Tl(t,e){const n=Symbol(),r=e.get(t,n);return r===n?"function"!=typeof t||function Qp(t){return null!==qu(t)}(t)?e.get(t):t:r}function bf(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=wl(e);return t.children.forEach(s=>{(function Z6(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const u=function K6(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!yu(t.url,e.url);case"pathParamsOrQueryParamsChange":return!yu(t.url,e.url)||!Fo(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!PC(t,e)||!Fo(t.queryParams,e.queryParams);default:return!PC(t,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new UO(r)):(o.data=s.data,o._resolvedData=s._resolvedData),bf(t,e,o.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new j_(a.outlet.component,s))}else s&&Sf(e,a,i),i.canActivateChecks.push(new UO(r)),bf(t,null,o.component?a?a.children:null:n,r,i)})(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Sf(a,n.getContext(s),i)),i}function Sf(t,e,n){const r=wl(t),i=t.value;Object.entries(r).forEach(([o,s])=>{Sf(s,i.component?e?e.children.getContext(o):null:e,n)}),n.canDeactivateChecks.push(new j_(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Rf(t){return"function"==typeof t}function BO(t){return t instanceof S_||"EmptyError"===t?.name}const H_=Symbol("INITIAL_VALUE");function Dl(){return ve(t=>pC(t.map(e=>e.pipe(yl(1),R_(H_)))).pipe(ge(e=>{for(const n of e)if(!0!==n){if(n===H_)return H_;if(!1===n||n instanceof Il)return n}return!0}),ho(e=>e!==H_),yl(1)))}function $O(t){return function li(...t){return di(t)}(hr(e=>{if(vu(e))throw kO(0,e)}),ge(e=>!0===e))}class z_{constructor(e){this.segmentGroup=e||null}}class jO{constructor(e){this.urlTree=e}}function Al(t){return pf(new z_(t))}function HO(t){return pf(new jO(t))}class g5{constructor(e,n){this.urlSerializer=e,this.urlTree=n}noMatchError(e){return new j(4002,!1)}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return A(r);if(i.numberOfChildren>1||!i.children[Ze])return pf(new j(4e3,!1));i=i.children[Ze]}}applyRedirectCommands(e,n,r){return this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r)}applyRedirectCreateUrlTree(e,n,r,i){const o=this.createSegmentGroup(e,n.root,r,i);return new Il(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){const r={};return Object.entries(e).forEach(([i,o])=>{if("string"==typeof o&&o.startsWith(":")){const a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){const o=this.createSegments(e,n.segments,r,i);let s={};return Object.entries(n.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new Mt(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){const i=r[n.path.substring(1)];if(!i)throw new j(4001,!1);return i}findOrReturn(e,n){let r=0;for(const i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}}const OC={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function m5(t,e,n,r,i){const o=kC(t,e,n);return o.matched?(r=function U6(t,e){return t.providers&&!t._injector&&(t._injector=WE(t.providers,e,`Route: ${t.path}`)),t._injector??e}(e,r),function h5(t,e,n,r){const i=e.canMatch;return i&&0!==i.length?A(i.map(s=>{const a=Tl(s,t);return fa(function t5(t){return t&&Rf(t.canMatch)}(a)?a.canMatch(e,n):t.runInContext(()=>a(e,n)))})).pipe(Dl(),$O()):A(!0)}(r,e,n).pipe(ge(s=>!0===s?o:{...OC}))):A(o)}function kC(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{...OC}:{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};const i=(e.matcher||Z9)(n,t,e);if(!i)return{...OC};const o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});const s=i.consumed.length>0?{...o,...i.consumed[i.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function zO(t,e,n,r){return n.length>0&&function v5(t,e,n){return n.some(r=>W_(t,e,r)&&fo(r)!==Ze)}(t,n,r)?{segmentGroup:new Mt(e,y5(r,new Mt(n,t.children))),slicedSegments:[]}:0===n.length&&function I5(t,e,n){return n.some(r=>W_(t,e,r))}(t,n,r)?{segmentGroup:new Mt(t.segments,_5(t,0,n,r,t.children)),slicedSegments:n}:{segmentGroup:new Mt(t.segments,t.children),slicedSegments:n}}function _5(t,e,n,r,i){const o={};for(const s of r)if(W_(t,n,s)&&!i[fo(s)]){const a=new Mt([],{});o[fo(s)]=a}return{...i,...o}}function y5(t,e){const n={};n[Ze]=e;for(const r of t)if(""===r.path&&fo(r)!==Ze){const i=new Mt([],{});n[fo(r)]=i}return n}function W_(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}class T5{constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.allowRedirects=!0,this.applyRedirects=new g5(this.urlSerializer,this.urlTree)}noMatchError(e){return new j(4002,!1)}recognize(){const e=zO(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Ze).pipe(_u(n=>{if(n instanceof jO)return this.allowRedirects=!1,this.urlTree=n.urlTree,this.match(n.urlTree);throw n instanceof z_?this.noMatchError(n):n}),ge(n=>{const r=new B_([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Ze,this.rootComponentType,null,{}),i=new ws(r,n),o=new xO("",i),s=function p6(t,e,n=null,r=null){return IO(vO(t),e,n,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root),{state:o,tree:s}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,Ze).pipe(_u(r=>{throw r instanceof z_?this.noMatchError(r):r}))}inheritParamsAndData(e){const n=e.value,r=MO(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,n,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0)}processChildren(e,n,r){const i=[];for(const o of Object.keys(r.children))"primary"===o?i.unshift(o):i.push(o);return I(i).pipe(gf(o=>{const s=r.children[o],a=function H6(t,e){const n=t.filter(r=>fo(r)===e);return n.push(...t.filter(r=>fo(r)!==e)),n}(n,o);return this.processSegmentGroup(e,a,s,o)}),M_((o,s)=>(o.push(...s),o)),P_(null),function z9(t,e){const n=arguments.length>=2;return r=>r.pipe(t?ho((i,o)=>t(i,o,r)):ln,_C(1),n?P_(e):sO(()=>new S_))}(),wt(o=>{if(null===o)return Al(r);const s=WO(o);return function D5(t){t.sort((e,n)=>e.value.outlet===Ze?-1:n.value.outlet===Ze?1:e.value.outlet.localeCompare(n.value.outlet))}(s),A(s)}))}processSegment(e,n,r,i,o,s){return I(n).pipe(gf(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,o,s).pipe(_u(u=>{if(u instanceof z_)return A(null);throw u}))),ha(a=>!!a),_u(a=>{if(BO(a))return function w5(t,e,n){return 0===e.length&&!t.children[n]}(r,i,o)?A([]):Al(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,o,s,a){return function E5(t,e,n,r){return!!(fo(t)===r||r!==Ze&&W_(e,n,t))&&("**"===t.path||kC(e,t,n).matched)}(r,i,o,s)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,o,s,a):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s):Al(i):Al(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,s):this.expandRegularSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,r,i){const o=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?HO(o):this.applyRedirects.lineralizeSegments(r,o).pipe(wt(s=>{const a=new Mt(s,{});return this.processSegment(e,n,a,s,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s){const{matched:a,consumedSegments:u,remainingSegments:l,positionalParamSegments:h}=kC(n,i,o);if(!a)return Al(n);const g=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,h);return i.redirectTo.startsWith("/")?HO(g):this.applyRedirects.lineralizeSegments(i,g).pipe(wt(m=>this.processSegment(e,r,n,m.concat(l),s,!1)))}matchSegmentAgainstRoute(e,n,r,i,o,s){let a;if("**"===r.path){const u=i.length>0?uO(i).parameters:{};a=A({snapshot:new B_(i,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,qO(r),fo(r),r.component??r._loadedComponent??null,r,GO(r)),consumedSegments:[],remainingSegments:[]}),n.children={}}else a=m5(n,r,i,e).pipe(ge(({matched:u,consumedSegments:l,remainingSegments:h,parameters:g})=>u?{snapshot:new B_(l,g,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,qO(r),fo(r),r.component??r._loadedComponent??null,r,GO(r)),consumedSegments:l,remainingSegments:h}:null));return a.pipe(ve(u=>null===u?Al(n):this.getChildConfig(e=r._injector??e,r,i).pipe(ve(({routes:l})=>{const h=r._loadedInjector??e,{snapshot:g,consumedSegments:m,remainingSegments:y}=u,{segmentGroup:T,slicedSegments:b}=zO(n,m,y,l);if(0===b.length&&T.hasChildren())return this.processChildren(h,l,T).pipe(ge(U=>null===U?null:[new ws(g,U)]));if(0===l.length&&0===b.length)return A([new ws(g,[])]);const M=fo(r)===o;return this.processSegment(h,l,T,b,M?Ze:o,!0).pipe(ge(U=>[new ws(g,U)]))}))))}getChildConfig(e,n,r){return n.children?A({routes:n.children,injector:e}):n.loadChildren?void 0!==n._loadedRoutes?A({routes:n._loadedRoutes,injector:n._loadedInjector}):function d5(t,e,n,r){const i=e.canLoad;return void 0===i||0===i.length?A(!0):A(i.map(s=>{const a=Tl(s,t);return fa(function Y6(t){return t&&Rf(t.canLoad)}(a)?a.canLoad(e,n):t.runInContext(()=>a(e,n)))})).pipe(Dl(),$O())}(e,n,r).pipe(wt(i=>i?this.configLoader.loadChildren(e,n).pipe(hr(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):function p5(t){return pf(VO(!1,3))}())):A({routes:[],injector:e})}}function A5(t){const e=t.value.routeConfig;return e&&""===e.path}function WO(t){const e=[],n=new Set;for(const r of t){if(!A5(r)){e.push(r);continue}const i=e.find(o=>r.value.routeConfig===o.value.routeConfig);void 0!==i?(i.children.push(...r.children),n.add(i)):e.push(r)}for(const r of n){const i=WO(r.children);e.push(new ws(r.value,i))}return e.filter(r=>!n.has(r))}function qO(t){return t.data||{}}function GO(t){return t.resolve||{}}function ZO(t){return"string"==typeof t.title||null===t.title}function VC(t){return ve(e=>{const n=t(e);return n?I(n).pipe(ge(()=>e)):A(e)})}const bl=new ce("ROUTES");let FC=(()=>{class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=Ie(CM)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return A(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);const r=fa(n.loadComponent()).pipe(ge(KO),hr(o=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=o}),yC(()=>{this.componentLoaders.delete(n)})),i=new oO(r,()=>new H).pipe(mC());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return A({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const o=function N5(t,e,n,r){return fa(t.loadChildren()).pipe(ge(KO),wt(i=>i instanceof SP||Array.isArray(i)?A(i):I(e.compileModuleAsync(i))),ge(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,!0):(o=i.create(n).injector,s=o.get(bl,[],{optional:!0,self:!0}).flat()),{routes:s.map(NC),injector:o}}))}(r,this.compiler,n,this.onLoadEndListener).pipe(yC(()=>{this.childrenLoaders.delete(r)})),s=new oO(o,()=>new H).pipe(mC());return this.childrenLoaders.set(r,s),s}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function KO(t){return function O5(t){return t&&"object"==typeof t&&"default"in t}(t)?t.default:t}let q_=(()=>{class t{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new H,this.transitionAbortSubject=new H,this.configLoader=Ie(FC),this.environmentInjector=Ie(qi),this.urlSerializer=Ie(yf),this.rootContexts=Ie(Tf),this.inputBindingEnabled=null!==Ie($_,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>A(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new A6(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new D6(i))}complete(){this.transitions?.complete()}handleNavigationRequest(n){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...n,id:r})}setupNavigations(n,r,i){return this.transitions=new v({id:0,currentUrlTree:r,currentRawUrl:r,currentBrowserUrl:r,extractedUrl:n.urlHandlingStrategy.extract(r),urlAfterRedirects:n.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:wf,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ho(o=>0!==o.id),ge(o=>({...o,extractedUrl:n.urlHandlingStrategy.extract(o.rawUrl)})),ve(o=>{this.currentTransition=o;let s=!1,a=!1;return A(o).pipe(hr(u=>{this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),ve(u=>{const l=u.currentBrowserUrl.toString(),h=!n.navigated||u.extractedUrl.toString()!==l||l!==u.currentUrlTree.toString();if(!h&&"reload"!==(u.extras.onSameUrlNavigation??n.onSameUrlNavigation)){const m="";return this.events.next(new El(u.id,this.urlSerializer.serialize(u.rawUrl),m,0)),u.resolve(null),dn}if(n.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return A(u).pipe(ve(m=>{const y=this.transitions?.getValue();return this.events.next(new L_(m.id,this.urlSerializer.serialize(m.extractedUrl),m.source,m.restoredState)),y!==this.transitions?.getValue()?dn:Promise.resolve(m)}),function b5(t,e,n,r,i,o){return wt(s=>function C5(t,e,n,r,i,o,s="emptyOnly"){return new T5(t,e,n,r,i,s,o).recognize()}(t,e,n,r,s.extractedUrl,i,o).pipe(ge(({state:a,tree:u})=>({...s,targetSnapshot:a,urlAfterRedirects:u}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,n.paramsInheritanceStrategy),hr(m=>{o.targetSnapshot=m.targetSnapshot,o.urlAfterRedirects=m.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:m.urlAfterRedirects};const y=new AO(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(y)}));if(h&&n.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){const{id:m,extractedUrl:y,source:T,restoredState:b,extras:M}=u,U=new L_(m,this.urlSerializer.serialize(y),T,b);this.events.next(U);const x=PO(0,this.rootComponentType).snapshot;return this.currentTransition=o={...u,targetSnapshot:x,urlAfterRedirects:y,extras:{...M,skipLocationChange:!1,replaceUrl:!1}},A(o)}{const m="";return this.events.next(new El(u.id,this.urlSerializer.serialize(u.extractedUrl),m,1)),u.resolve(null),dn}}),hr(u=>{const l=new E6(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),ge(u=>(this.currentTransition=o={...u,guards:q6(u.targetSnapshot,u.currentSnapshot,this.rootContexts)},o)),function r5(t,e){return wt(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?A({...n,guardsResult:!0}):function i5(t,e,n,r){return I(t).pipe(wt(i=>function l5(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return o&&0!==o.length?A(o.map(a=>{const u=Af(e)??i,l=Tl(a,u);return fa(function e5(t){return t&&Rf(t.canDeactivate)}(l)?l.canDeactivate(t,e,n,r):u.runInContext(()=>l(t,e,n,r))).pipe(ha())})).pipe(Dl()):A(!0)}(i.component,i.route,n,e,r)),ha(i=>!0!==i,!0))}(s,r,i,t).pipe(wt(a=>a&&function Q6(t){return"boolean"==typeof t}(a)?function o5(t,e,n,r){return I(e).pipe(gf(i=>gC(function a5(t,e){return null!==t&&e&&e(new b6(t)),A(!0)}(i.route.parent,r),function s5(t,e){return null!==t&&e&&e(new R6(t)),A(!0)}(i.route,r),function c5(t,e,n){const r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>function G6(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(s)).filter(s=>null!==s).map(s=>iO(()=>A(s.guards.map(u=>{const l=Af(s.node)??n,h=Tl(u,l);return fa(function X6(t){return t&&Rf(t.canActivateChild)}(h)?h.canActivateChild(r,t):l.runInContext(()=>h(r,t))).pipe(ha())})).pipe(Dl())));return A(o).pipe(Dl())}(t,i.path,n),function u5(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return A(!0);const i=r.map(o=>iO(()=>{const s=Af(e)??n,a=Tl(o,s);return fa(function J6(t){return t&&Rf(t.canActivate)}(a)?a.canActivate(e,t):s.runInContext(()=>a(e,t))).pipe(ha())}));return A(i).pipe(Dl())}(t,i.route,n))),ha(i=>!0!==i,!0))}(r,o,t,e):A(a)),ge(a=>({...n,guardsResult:a})))})}(this.environmentInjector,u=>this.events.next(u)),hr(u=>{if(o.guardsResult=u.guardsResult,vu(u.guardsResult))throw kO(0,u.guardsResult);const l=new w6(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),ho(u=>!!u.guardsResult||(this.cancelNavigationTransition(u,"",3),!1)),VC(u=>{if(u.guards.canActivateChecks.length)return A(u).pipe(hr(l=>{const h=new C6(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),ve(l=>{let h=!1;return A(l).pipe(function S5(t,e){return wt(n=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return A(n);let o=0;return I(i).pipe(gf(s=>function R5(t,e,n,r){const i=t.routeConfig,o=t._resolve;return void 0!==i?.title&&!ZO(i)&&(o[mf]=i.title),function P5(t,e,n,r){const i=function M5(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}(t);if(0===i.length)return A({});const o={};return I(i).pipe(wt(s=>function x5(t,e,n,r){const i=Af(e)??r,o=Tl(t,i);return fa(o.resolve?o.resolve(e,n):i.runInContext(()=>o(e,n)))}(t[s],e,n,r).pipe(ha(),hr(a=>{o[s]=a}))),_C(1),function W9(t){return ge(()=>t)}(o),_u(s=>BO(s)?dn:pf(s)))}(o,t,e,r).pipe(ge(s=>(t._resolvedData=s,t.data=MO(t,n).resolve,i&&ZO(i)&&(t.data[mf]=i.title),null)))}(s.route,r,t,e)),hr(()=>o++),_C(1),wt(s=>o===i.length?A(n):dn))})}(n.paramsInheritanceStrategy,this.environmentInjector),hr({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(l,"",2)}}))}),hr(l=>{const h=new T6(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}))}),VC(u=>{const l=h=>{const g=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&g.push(this.configLoader.loadComponent(h.routeConfig).pipe(hr(m=>{h.component=m}),ge(()=>{})));for(const m of h.children)g.push(...l(m));return g};return pC(l(u.targetSnapshot.root)).pipe(P_(),yl(1))}),VC(()=>this.afterPreactivation()),ge(u=>{const l=function k6(t,e,n){const r=Df(t,e._root,n?n._root:void 0);return new RO(r,e)}(n.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=o={...u,targetRouterState:l},o}),hr(()=>{this.events.next(new TC)}),((t,e,n,r)=>ge(i=>(new W6(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)))(this.rootContexts,n.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),yl(1),hr({next:u=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new pa(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),n.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{s=!0}}),function q9(t){return K((e,n)=>{ct(t).subscribe(ue(n,()=>n.complete(),Ce)),!n.closed&&e.subscribe(n)})}(this.transitionAbortSubject.pipe(hr(u=>{throw u}))),yC(()=>{s||a||this.cancelNavigationTransition(o,"",1),this.currentNavigation?.id===o.id&&(this.currentNavigation=null)}),_u(u=>{if(a=!0,FO(u))this.events.next(new Cf(o.id,this.urlSerializer.serialize(o.extractedUrl),u.message,u.cancellationCode)),function L6(t){return FO(t)&&vu(t.url)}(u)?this.events.next(new DC(u.url)):o.resolve(!1);else{this.events.next(new U_(o.id,this.urlSerializer.serialize(o.extractedUrl),u,o.targetSnapshot??void 0));try{o.resolve(n.errorHandler(u))}catch(l){o.reject(l)}}return dn}))}))}cancelNavigationTransition(n,r,i){const o=new Cf(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function QO(t){return t!==wf}let YO=(()=>{class t{buildTitle(n){let r,i=n.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===Ze);return r}getResolvedTitleForRoute(n){return n.data[mf]}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ae({token:t,factory:function(){return Ie(k5)},providedIn:"root"})}return t})(),k5=(()=>{class t extends YO{constructor(n){super(),this.title=n}updateTitle(n){const r=this.buildTitle(n);void 0!==r&&this.title.setTitle(r)}static#e=this.\u0275fac=function(r){return new(r||t)(se($x))};static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),V5=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ae({token:t,factory:function(){return Ie(L5)},providedIn:"root"})}return t})();class F5{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}}let L5=(()=>{class t extends F5{static#e=this.\u0275fac=function(){let n;return function(i){return(n||(n=Rn(t)))(i||t)}}();static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const G_=new ce("",{providedIn:"root",factory:()=>({})});let U5=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ae({token:t,factory:function(){return Ie(B5)},providedIn:"root"})}return t})(),B5=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Pf=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Pf||{});function JO(t,e){t.events.pipe(ho(n=>n instanceof pa||n instanceof Cf||n instanceof U_||n instanceof El),ge(n=>n instanceof pa||n instanceof El?Pf.COMPLETE:n instanceof Cf&&(0===n.code||1===n.code)?Pf.REDIRECTING:Pf.FAILED),ho(n=>n!==Pf.REDIRECTING),yl(1)).subscribe(()=>{e()})}function $5(t){throw t}function j5(t,e,n){return e.parse("/")}const H5={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},z5={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Qi=(()=>{class t{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=Ie(EM),this.isNgZoneEnabled=!1,this._events=new H,this.options=Ie(G_,{optional:!0})||{},this.pendingTasks=Ie(wM),this.errorHandler=this.options.errorHandler||$5,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||j5,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=Ie(U5),this.routeReuseStrategy=Ie(V5),this.titleStrategy=Ie(YO),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Ie(bl,{optional:!0})?.flat()??[],this.navigationTransitions=Ie(q_),this.urlSerializer=Ie(yf),this.location=Ie(Cw),this.componentInputBindingEnabled=!!Ie($_,{optional:!0}),this.eventsSubscription=new ft,this.isNgZoneEnabled=Ie(It)instanceof It&&It.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Il,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=PO(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(n=>{this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId},n=>{this.console.warn(`Unhandled Navigation Error: ${n}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const n=this.navigationTransitions.events.subscribe(r=>{try{const{currentTransition:i}=this.navigationTransitions;if(null===i)return void(XO(r)&&this._events.next(r));if(r instanceof L_)QO(i.source)&&(this.browserUrlTree=i.extractedUrl);else if(r instanceof El)this.rawUrlTree=i.rawUrl;else if(r instanceof AO){if("eager"===this.urlUpdateStrategy){if(!i.extras.skipLocationChange){const o=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl);this.setBrowserUrl(o,i)}this.browserUrlTree=i.urlAfterRedirects}}else if(r instanceof TC)this.currentUrlTree=i.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl),this.routerState=i.targetRouterState,"deferred"===this.urlUpdateStrategy&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i),this.browserUrlTree=i.urlAfterRedirects);else if(r instanceof Cf)0!==r.code&&1!==r.code&&(this.navigated=!0),(3===r.code||2===r.code)&&this.restoreHistory(i);else if(r instanceof DC){const o=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),s={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||QO(i.source)};this.scheduleNavigation(o,wf,null,s,{resolve:i.resolve,reject:i.reject,promise:i.promise})}r instanceof U_&&this.restoreHistory(i,!0),r instanceof pa&&(this.navigated=!0),XO(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const n=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),wf,n)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(n=>{const r="popstate"===n.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(n.url,r,n.state)},0)}))}navigateToSyncWithBrowser(n,r,i){const o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){const u={...i};delete u.navigationId,delete u.\u0275routerPageId,0!==Object.keys(u).length&&(o.state=u)}const a=this.parseUrl(n);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(NC),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){const{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s;let g,h=null;switch(a){case"merge":h={...this.currentUrlTree.queryParams,...o};break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}null!==h&&(h=this.removeEmptyProps(h));try{g=vO(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof n[0]||!n[0].startsWith("/"))&&(n=[]),g=this.currentUrlTree.root}return IO(g,n,h,l??null)}navigateByUrl(n,r={skipLocationChange:!1}){const i=vu(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,wf,null,r)}navigate(n,r={skipLocationChange:!1}){return function W5(t){for(let e=0;e<t.length;e++)if(null==t[e])throw new j(4008,!1)}(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){let r;try{r=this.urlSerializer.parse(n)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,n)}return r}isActive(n,r){let i;if(i=!0===r?{...H5}:!1===r?{...z5}:r,vu(n))return lO(this.currentUrlTree,n,i);const o=this.parseUrl(n);return lO(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.keys(n).reduce((r,i)=>{const o=n[i];return null!=o&&(r[i]=o),r},{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((g,m)=>{a=g,u=m});const h=this.pendingTasks.add();return JO(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:n,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(g=>Promise.reject(g))}setBrowserUrl(n,r){const i=this.urlSerializer.serialize(n);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",s)}else{const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",o)}}restoreHistory(n,r=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-this.browserPageId;0!==o?this.location.historyGo(o):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===o&&(this.resetState(n),this.browserUrlTree=n.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=n.currentRouterState,this.currentUrlTree=n.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function XO(t){return!(t instanceof TC||t instanceof DC)}let Z_=(()=>{class t{constructor(n,r,i,o,s,a){this.router=n,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.href=null,this.commands=null,this.onChanges=new H,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const u=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===u||"area"===u,this.isAnchorElement?this.subscription=n.events.subscribe(l=>{l instanceof pa&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(n){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(n){null!=n?(this.commands=Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(n,r,i,o,s){return!!(null===this.urlTree||this.isAnchorElement&&(0!==n||r||i||o||s||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const n=null===this.href?null:function bb(t,e,n){return function vB(t,e){return"src"===e&&("embed"===t||"frame"===t||"iframe"===t||"media"===t||"script"===t)||"href"===e&&("base"===t||"link"===t)?Ab:UI}(e,n)(t)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",n)}applyAttributeValue(n,r){const i=this.renderer,o=this.el.nativeElement;null!==r?i.setAttribute(o,n,r):i.removeAttribute(o,n)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(r){return new(r||t)(re(Qi),re(Cl),function Zg(t){return function Pe(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const r=n.length;let i=0;for(;i<r;){const o=n[i];if(nc(o))break;if(0===o)i+=2;else if("number"==typeof o)for(i++;i<r&&"string"==typeof n[i];)i++;else{if(o===e)return n[i+1];i+=2}}}return null}(zn(),t)}("tabindex"),re(fs),re(Ei),re(fu))};static#t=this.\u0275dir=Ne({type:t,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){1&r&&zr("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&r&&No("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",gl],skipLocationChange:["skipLocationChange","skipLocationChange",gl],replaceUrl:["replaceUrl","replaceUrl",gl],routerLink:"routerLink"},standalone:!0,features:[jS,ti]})}return t})();class e1{}let Z5=(()=>{class t{constructor(n,r,i,o,s){this.router=n,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(ho(n=>n instanceof pa),gf(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){const i=[];for(const o of r){o.providers&&!o._injector&&(o._injector=WE(o.providers,n,`Route: ${o.path}`));const s=o._injector??n,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&void 0===o.canLoad||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return I(i).pipe(kr())}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(n,r):A(null);const o=i.pipe(wt(s=>null===s?A(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??n,s.routes))));return r.loadComponent&&!r._loadedComponent?I([o,this.loader.loadComponent(r)]).pipe(kr()):o})}static#e=this.\u0275fac=function(r){return new(r||t)(se(Qi),se(CM),se(qi),se(e1),se(FC))};static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const LC=new ce("");let t1=(()=>{class t{constructor(n,r,i,o,s={}){this.urlSerializer=n,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration=s.scrollPositionRestoration||"disabled",s.anchorScrolling=s.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof L_?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof pa?(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment)):n instanceof El&&0===n.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof bO&&(n.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(n.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new bO(n,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){!function gS(){throw new Error("invalid")}()};static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac})}return t})();function Cs(t,e){return{\u0275kind:t,\u0275providers:e}}function r1(){const t=Ie(wr);return e=>{const n=t.get(pl);if(e!==n.components[0])return;const r=t.get(Qi),i=t.get(i1);1===t.get(UC)&&r.initialNavigation(),t.get(o1,null,Ye.Optional)?.setUpPreloading(),t.get(LC,null,Ye.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const i1=new ce("",{factory:()=>new H}),UC=new ce("",{providedIn:"root",factory:()=>1}),o1=new ce("");function J5(t){return Cs(0,[{provide:o1,useExisting:Z5},{provide:e1,useExisting:t}])}const s1=new ce("ROUTER_FORROOT_GUARD"),e8=[Cw,{provide:yf,useClass:vC},Qi,Tf,{provide:Cl,useFactory:function n1(t){return t.routerState.root},deps:[Qi]},FC,[]];function t8(){return new PM("Router",Qi)}let a1=(()=>{class t{constructor(n){}static forRoot(n,r){return{ngModule:t,providers:[e8,[],{provide:bl,multi:!0,useValue:n},{provide:s1,useFactory:o8,deps:[[Qi,new vi,new Yg]]},{provide:G_,useValue:r||{}},r?.useHash?{provide:fu,useClass:pq}:{provide:fu,useClass:ax},{provide:LC,useFactory:()=>{const t=Ie(kG),e=Ie(It),n=Ie(G_),r=Ie(q_),i=Ie(yf);return n.scrollOffset&&t.setOffset(n.scrollOffset),new t1(i,r,t,e,n)}},r?.preloadingStrategy?J5(r.preloadingStrategy).\u0275providers:[],{provide:PM,multi:!0,useFactory:t8},r?.initialNavigation?s8(r):[],r?.bindToComponentInputs?Cs(8,[OO,{provide:$_,useExisting:OO}]).\u0275providers:[],[{provide:u1,useFactory:r1},{provide:fw,multi:!0,useExisting:u1}]]}}static forChild(n){return{ngModule:t,providers:[{provide:bl,multi:!0,useValue:n}]}}static#e=this.\u0275fac=function(r){return new(r||t)(se(s1,8))};static#t=this.\u0275mod=Bn({type:t});static#n=this.\u0275inj=ar({})}return t})();function o8(t){return"guarded"}function s8(t){return["disabled"===t.initialNavigation?Cs(3,[{provide:ow,multi:!0,useFactory:()=>{const e=Ie(Qi);return()=>{e.setUpLocationChangeListener()}}},{provide:UC,useValue:2}]).\u0275providers:[],"enabledBlocking"===t.initialNavigation?Cs(2,[{provide:UC,useValue:0},{provide:ow,multi:!0,deps:[wr],useFactory:e=>{const n=e.get(hq,Promise.resolve());return()=>n.then(()=>new Promise(r=>{const i=e.get(Qi),o=e.get(i1);JO(i,()=>{r(!0)}),e.get(q_).afterPreactivation=()=>(r(!0),o.closed?A(void 0):o),i.initialNavigation()}))}}]).\u0275providers:[]]}const u1=new ce("");function u8(t,e){if(1&t&&(Pt(0,"li",4)(1,"a",5),Pn(2),gt()()),2&t){const n=e.$implicit;oo(1),ia("routerLink",n.path),oo(1),Um(n.titulo)}}let c8=(()=>{class t{constructor(){this.paginas=[{titulo:"Inicio",path:"paginas/inicio"},{titulo:"Nosotros",path:"paginas/nosotros"},{titulo:"Recetas",path:"paginas/recetas"},{titulo:"Formulario",path:"paginas/formulario"}]}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=Eo({type:t,selectors:[["app-menu"]],decls:5,vars:1,consts:[[1,"header"],[1,"container"],[1,"menu"],["class","menu-item",4,"ngFor","ngForOf"],[1,"menu-item"],["href","#",3,"routerLink"]],template:function(r,i){1&r&&(Pt(0,"header",0)(1,"div",1)(2,"div",2)(3,"ul",2),SE(4,u8,3,2,"li",3),gt()()()()),2&r&&(oo(4),ia("ngForOf",i.paginas))},dependencies:[Ow,Z_],styles:["header[_ngcontent-%COMP%]{position:relative;background-color:#d6d2bd;padding:7px 0;width:100%;float:left}.menu[_ngcontent-%COMP%]{position:relative;float:none;width:100%}.menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{float:right;padding:0;margin:0;list-style:none}.menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{float:left}.menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline-block;margin:5px;font-size:13px;letter-spacing:.03em;text-transform:uppercase;color:#fff;opacity:.6;position:relative;padding:8px 15px;width:initial}.menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{opacity:1}"]})}return t})(),l8=(()=>{class t{constructor(){this.title="Practica",this.name="Pablo Bravo"}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=Eo({type:t,selectors:[["app-root"]],decls:2,vars:0,template:function(r,i){1&r&&Ci(0,"app-menu")(1,"router-outlet")},dependencies:[MC,c8]})}return t})(),d8=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=Eo({type:t,selectors:[["app-inicio"]],decls:14,vars:0,consts:[["charset","utf-8"],["name","viewport","content","width=device-width, initial-scale=1.0"],[1,"body-centering"],[1,"Titulo"],[1,"centered-container-image"],[1,"centered-img-container"],["src","https://images.ctfassets.net/86mn0qn5b7d0/2MitWv3bdtf8TsJ2g17jCk/28bd8e2146d8a0cf4e4912cf753efd72/iStock-1414297653.jpg?fm=jpg&fl=progressive&q=50&w=1200","alt","Comida Ecuatoriana",1,"centered-img"],[1,"footer"],[1,"footer__texto"]],template:function(r,i){1&r&&(Pt(0,"head")(1,"title"),Pn(2,"P\xe1gina Web de Recetas Culinarias"),gt(),Ci(3,"meta",0)(4,"meta",1),gt(),Pt(5,"body",2)(6,"p",3),Pn(7,"Recetas de comida"),gt(),Pt(8,"div",4)(9,"div",5),Ci(10,"img",6),gt()()(),Pt(11,"footer",7)(12,"p",8),Pn(13,"Realizado: Pablo Bravo"),gt()())},styles:["body[_ngcontent-%COMP%]{font-family:Montserrat,Helvetica,Arial,sans-serif;background-color:#ecf0f1;margin:0}a[_ngcontent-%COMP%], a[_ngcontent-%COMP%]:after, a[_ngcontent-%COMP%]:before{transition:all .3s ease-in-out}a[_ngcontent-%COMP%], a[_ngcontent-%COMP%]:hover, a[_ngcontent-%COMP%]:focus, a[_ngcontent-%COMP%]:active{outline:none;text-decoration:none}*[_ngcontent-%COMP%], *[_ngcontent-%COMP%]:after, *[_ngcontent-%COMP%]:before{box-sizing:border-box}header[_ngcontent-%COMP%]{position:relative;background-color:#d6d2bd;padding:8px 0;width:100%;float:left}.menu[_ngcontent-%COMP%]{position:relative;float:none;width:100%}.menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{float:right;padding:0;margin:0;list-style:none}.menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{float:left}.menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline-block;margin:5px;font-size:13px;letter-spacing:.03em;text-transform:uppercase;color:#fff;opacity:.6;position:relative;padding:8px 15px;width:initial}.menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{opacity:1}.container[_ngcontent-%COMP%]{width:1170px;margin:0 auto}.titulo[_ngcontent-%COMP%]{font-size:4rem;font-family:Arial,Helvetica,sans-serif;color:#000}.texto[_ngcontent-%COMP%]{font-size:1.5rem;font-family:Arial,Helvetica,sans-serif;color:#000}.barra[_ngcontent-%COMP%]{top:13px;color:#fff;left:0;position:absolute;text-transform:uppercase}.footer[_ngcontent-%COMP%]{background-color:#d6d2bd;padding:1rem 0;text-align:center;margin:2rem}.footer__texto[_ngcontent-%COMP%]{font-family:var(--fuentePrincipal);text-align:center;font-size:2.2rem}.estilo-input[_ngcontent-%COMP%]{margin-top:10px;padding:15rem;padding:10px;font-size:16px;border:2px solid #d6d2bd;border-radius:5px;width:93%}.estilo-button[_ngcontent-%COMP%]{padding:10px 20px;font-size:18px;background-color:#d6d2bd;color:#fff;border:none;border-radius:5px;cursor:pointer}.estilo-button[_ngcontent-%COMP%]:hover{background-color:#c6ac2a}.body-centering-image[_ngcontent-%COMP%]{margin:0;padding:0;display:flex;justify-content:center;align-items:center;height:100vh;background-color:#f0f0f0}.centered-container-image[_ngcontent-%COMP%]{text-align:center}.centered-img[_ngcontent-%COMP%]{max-width:100%;max-height:100%}.body-reset[_ngcontent-%COMP%]{margin:0;padding:0}.container[_ngcontent-%COMP%]{justify-content:space-between;align-items:center}.menu[_ngcontent-%COMP%]{align-items:center}.menu-link[_ngcontent-%COMP%]{color:#fff;text-decoration:none;margin-right:20px}.menu-list[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.menu-item[_ngcontent-%COMP%]{display:inline;margin-right:20px}#searchForm[_ngcontent-%COMP%]{text-align:center;margin:20px 0}.search-input[_ngcontent-%COMP%]{width:300px;padding:10px;border:1px solid #ccc;border-radius:5px;font-size:16px}.search-button[_ngcontent-%COMP%]{padding:10px 20px;background-color:#333;color:#fff;border:none;border-radius:5px;font-size:16px;cursor:pointer}.recipe-title[_ngcontent-%COMP%]{text-align:center;font-size:24px;margin:20px 0}.recipe-container[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:center}ul[_ngcontent-%COMP%]{text-align:center}#recipe-image[_ngcontent-%COMP%]{display:block;margin:0 auto 20px;max-width:100%}"]})}return t})(),c1=(()=>{class t{constructor(){this.recetas=[],this.selectedImage=null}agregarReceta(n,r){const i=this.obtenerRecetas();if(r){const o=new FileReader;o.onload=s=>{s&&s.target&&(n.imagen=s.target.result,i.push(n),localStorage.setItem("recetas",JSON.stringify(i)))},o.readAsDataURL(r)}else i.push(n),localStorage.setItem("recetas",JSON.stringify(i))}obtenerRecetas(){const n=localStorage.getItem("recetas");return n?JSON.parse(n):[]}borrarRecetas(){localStorage.removeItem("recetas")}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Kr=Me(534);(0,Kr.registerVersion)("firebase","10.6.0","app");class p8 extends ft{constructor(e,n){super()}schedule(e,n=0){return this}}const K_={setInterval(t,e,...n){const{delegate:r}=K_;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){const{delegate:e}=K_;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};class l1 extends p8{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;const i=this.id,o=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return K_.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return n;null!=n&&K_.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,n);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let i,r=!1;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Te(r,this),null!=e&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}}const BC={now:()=>(BC.delegate||Date).now(),delegate:void 0};class Mf{constructor(e,n=Mf.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}}Mf.now=BC.now;class d1 extends Mf{constructor(e,n=Mf.now){super(e,n),this.actions=[],this._active=!1}flush(e){const{actions:n}=this;if(this._active)return void n.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}}const _8=new class m8 extends d1{}(class g8 extends l1{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}}),h1=new d1(l1),$C=new Qc("ANGULARFIRE2_VERSION");const jC=(t,e)=>{const n=e?[e]:(0,Kr.getApps)(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r};class HC{constructor(){return jC(y8)}}const y8="app-check";function Sl(){}class p1{zone;delegate;constructor(e,n=_8){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){const i=this.zone;return this.delegate.schedule(function(s){i.runGuarded(()=>{e.apply(this,[s])})},n,r)}}class v8{zone;task=null;constructor(e){this.zone=e}call(e,n){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Sl,{},Sl,Sl)),n.pipe(hr({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Q_=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new p1(Zone.current)),this.insideAngular=n.run(()=>new p1(Zone.current,h1)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(se(It))};static \u0275prov=Ae({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Rl(){const t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return t}function Iu(t){return Rl().ngZone.run(()=>t())}function Di(t){return function E8(t){return function(n){return(n=n.lift(new v8(t.ngZone))).pipe(Qn(t.outsideAngular),_n(t.insideAngular))}}(Rl())(t)}const w8=(t,e)=>function(){const r=arguments;return e&&setTimeout(()=>{"scheduled"===e.state&&e.invoke()},10),Iu(()=>t.apply(void 0,r))},g1=(t,e)=>function(){let n;const r=arguments;for(let o=0;o<arguments.length;o++)"function"==typeof r[o]&&(e&&(n||=Iu(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Sl,{},Sl,Sl))),r[o]=w8(r[o],n));const i=function I8(t){return Rl().ngZone.runOutsideAngular(()=>t())}(()=>t.apply(this,r));if(!e){if(i instanceof We){const o=Rl();return i.pipe(Qn(o.outsideAngular),_n(o.insideAngular))}return Iu(()=>i)}return i instanceof We?i.pipe(Di):i instanceof Promise?Iu(()=>new Promise((o,s)=>i.then(a=>Iu(()=>o(a)),a=>Iu(()=>s(a))))):"function"==typeof i&&n?function(){return setTimeout(()=>{n&&"scheduled"===n.state&&n.invoke()},10),i.apply(this,arguments)}:Iu(()=>i)};var Y_=Me(106);Y_.Z.registerVersion("firebase","10.6.0","app-compat");const D8=["ngOnDestroy"];class m1{constructor(e){return e}}const J_=new ce("angularfire2.app.options"),zC=new ce("angularfire2.app.name");function WC(t,e,n){const i="object"==typeof n&&n||{};i.name=i.name||"string"==typeof n&&n||"[DEFAULT]";const s=Y_.Z.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>Y_.Z.initializeApp(t,i));try{if(JSON.stringify(t)!==JSON.stringify(s.options)){const a=!!module.hot;S8("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new m1(s)}const S8=(t,...e)=>{};function _1(t,e,n,r,i){const[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===t)||[];if(o)return function R8(t,e){try{return t.toString()===e.toString()}catch{return t===e}}(i,s)||(y1("error",`${e} was already initialized on the ${n} Firebase App with different settings.${P8?" You may need to reload as Firebase is not HMR aware.":""}`),y1("warn",{is:i,was:s})),o;{const a=r();return globalThis.\u0275AngularfireInstanceCache.push([t,a,i]),a}}const P8=typeof module<"u"&&!!module.hot,y1=(t,...e)=>{};globalThis.\u0275AngularfireInstanceCache||=[],Me(365);class M8 extends H{constructor(e=1/0,n=1/0,r=BC){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){const{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;n||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){const{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){const s=n.now();let a=0;for(let u=1;u<r.length&&r[u]<=s;u+=2)a=u;a&&r.splice(0,a+1)}}}function v1(t,e,n){let r,i=!1;return t&&"object"==typeof t?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:n}=t):r=t??1/0,W({connector:()=>new M8(r,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function I1(t,e){return C(e)?ve(()=>t,e):ve(()=>t)}const E1=new ce("angularfire2.auth.use-emulator"),w1=new ce("angularfire2.auth.settings"),C1=new ce("angularfire2.auth.tenant-id"),T1=new ce("angularfire2.auth.langugage-code"),D1=new ce("angularfire2.auth.use-device-language"),A1=new ce("angularfire.auth.persistence"),b1=(t,e,n,r,i,o,s,a)=>_1(`${t.name}.auth`,"AngularFireAuth",t.name,()=>{const u=e.runOutsideAngular(()=>t.auth());if(n&&u.useEmulator(...n),r&&(u.tenantId=r),u.languageCode=i,o&&u.useDeviceLanguage(),s)for(const[l,h]of Object.entries(s))u.settings[l]=h;return a&&u.setPersistence(a),u},[n,r,i,o,s,a]);let S1=(()=>{class t{authState;idToken;user;idTokenResult;credential;constructor(n,r,i,o,s,a,u,l,h,g,m,y){const T=new H,b=A(void 0).pipe(_n(s.outsideAngular),ve(()=>o.runOutsideAngular(()=>Promise.resolve().then(Me.bind(Me,365)))),ge(()=>WC(n,o,r)),ge(M=>b1(M,o,a,l,h,g,u,m)),v1({bufferSize:1,refCount:!1}));if(d_(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=A(null);else{b.pipe(ha()).subscribe();const M=b.pipe(ve(z=>z.getRedirectResult().then(oe=>oe,()=>null)),Di,v1({bufferSize:1,refCount:!1})),U=b.pipe(ve(z=>new We(oe=>({unsubscribe:o.runOutsideAngular(()=>z.onAuthStateChanged(de=>oe.next(de),de=>oe.error(de),()=>oe.complete()))})))),x=b.pipe(ve(z=>new We(oe=>({unsubscribe:o.runOutsideAngular(()=>z.onIdTokenChanged(de=>oe.next(de),de=>oe.error(de),()=>oe.complete()))}))));this.authState=M.pipe(I1(U),Qn(s.outsideAngular),_n(s.insideAngular)),this.user=M.pipe(I1(x),Qn(s.outsideAngular),_n(s.insideAngular)),this.idToken=this.user.pipe(ve(z=>z?I(z.getIdToken()):A(null))),this.idTokenResult=this.user.pipe(ve(z=>z?I(z.getIdTokenResult()):A(null))),this.credential=w(M,T,this.authState.pipe(ho(z=>!z))).pipe(ge(z=>z?.user?z:null),Qn(s.outsideAngular),_n(s.insideAngular))}return((t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{if(t[o])return r?.spy?.get&&r.spy.get(o,t[o]),t[o];if(D8.indexOf(o)>-1)return()=>{};const s=e.toPromise().then(a=>{const u=a?.[o];return"function"==typeof u?u.bind(a):u?.then?u.then(l=>n.run(()=>l)):n.run(()=>u)});return new Proxy(()=>{},{get:(a,u)=>s[u],apply:(a,u,l)=>s.then(h=>{const g=h?.(...l);return r?.spy?.apply&&r.spy.apply(o,l,g),g})})})}))(this,b,o,{spy:{apply:(M,U,x)=>{(M.startsWith("signIn")||M.startsWith("createUser"))&&x.then(z=>T.next(z))}}})}static \u0275fac=function(r){return new(r||t)(se(J_),se(zC,8),se(hs),se(It),se(Q_),se(E1,8),se(w1,8),se(C1,8),se(T1,8),se(D1,8),se(A1,8),se(HC,8))};static \u0275prov=Ae({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})();function qC(){return K((t,e)=>{let n,r=!1;t.subscribe(ue(e,i=>{const o=n;n=i,r&&e.next([o,i]),r=!0}))})}var pe,G=Me(861),R1=Me(537),Uo=Me(879),Vt=Me(58),N8=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},po={},GC=GC||{},He=N8||self;function X_(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function xf(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var ZC="closure_uid_"+(1e9*Math.random()>>>0),k8=0;function V8(t,e,n){return t.call.apply(t.bind,arguments)}function F8(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function Dr(t,e,n){return(Dr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?V8:F8).apply(null,arguments)}function ey(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function nr(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,o){for(var s=Array(arguments.length-2),a=2;a<arguments.length;a++)s[a-2]=arguments[a];return e.prototype[i].apply(r,s)}}function ga(){this.s=this.s,this.o=this.o}ga.prototype.s=!1,ga.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function O8(t){Object.prototype.hasOwnProperty.call(t,ZC)&&t[ZC]||(t[ZC]=++k8)}(this)},ga.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const P1=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function KC(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function M1(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(X_(r)){const i=t.length||0,o=r.length||0;t.length=i+o;for(let s=0;s<o;s++)t[i+s]=r[s]}else t.push(r)}}function Ar(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Ar.prototype.h=function(){this.defaultPrevented=!0};var U8=function(){if(!He.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{He.addEventListener("test",()=>{},e),He.removeEventListener("test",()=>{},e)}catch{}return t}();function Nf(t){return/^[\s\xa0]*$/.test(t)}function ty(){var t=He.navigator;return t&&(t=t.userAgent)?t:""}function Bo(t){return-1!=ty().indexOf(t)}function QC(t){return QC[" "](t),t}QC[" "]=function(){};var JC,t,$8=Bo("Opera"),Pl=Bo("Trident")||Bo("MSIE"),x1=Bo("Edge"),YC=x1||Pl,N1=Bo("Gecko")&&!(-1!=ty().toLowerCase().indexOf("webkit")&&!Bo("Edge"))&&!(Bo("Trident")||Bo("MSIE"))&&!Bo("Edge"),j8=-1!=ty().toLowerCase().indexOf("webkit")&&!Bo("Edge");function O1(){var t=He.document;return t?t.documentMode:void 0}e:{var XC="",eT=(t=ty(),N1?/rv:([^\);]+)(\)|;)/.exec(t):x1?/Edge\/([\d\.]+)/.exec(t):Pl?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):j8?/WebKit\/(\S+)/.exec(t):$8?/(?:Version)[ \/]?(\S+)/.exec(t):void 0);if(eT&&(XC=eT?eT[1]:""),Pl){var tT=O1();if(null!=tT&&tT>parseFloat(XC)){JC=String(tT);break e}}JC=XC}var H8=He.document&&Pl&&(O1()||parseInt(JC,10))||void 0;function Of(t,e){if(Ar.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(N1){e:{try{QC(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:z8[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Of.$.h.call(this)}}nr(Of,Ar);var z8={2:"touch",3:"pen",4:"mouse"};Of.prototype.h=function(){Of.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var kf="closure_listenable_"+(1e6*Math.random()|0),W8=0;function q8(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++W8,this.fa=this.ia=!1}function ny(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function rT(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function V1(t){const e={};for(const n in t)e[n]=t[n];return e}const F1="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L1(t,e){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)t[n]=r[n];for(let o=0;o<F1.length;o++)n=F1[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function ry(t){this.src=t,this.g={},this.h=0}function iT(t,e){var n=e.type;if(n in t.g){var o,r=t.g[n],i=P1(r,e);(o=0<=i)&&Array.prototype.splice.call(r,i,1),o&&(ny(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function oT(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.fa&&o.listener==e&&o.capture==!!n&&o.la==r)return i}return-1}ry.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.g[o])||(t=this.g[o]=[],this.h++);var s=oT(t,e,r,i);return-1<s?(e=t[s],n||(e.ia=!1)):((e=new q8(e,this.src,o,!!r,i)).ia=n,t.push(e)),e};var sT="closure_lm_"+(1e6*Math.random()|0),aT={};function U1(t,e,n,r,i){if(r&&r.once)return $1(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)U1(t,e[o],n,r,i);return null}return n=dT(n),t&&t[kf]?t.O(e,n,xf(r)?!!r.capture:!!r,i):B1(t,e,n,!1,r,i)}function B1(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=xf(i)?!!i.capture:!!i,a=cT(t);if(a||(t[sT]=a=new ry(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function Z8(){const e=K8;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)U8||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(H1(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function $1(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)$1(t,e[o],n,r,i);return null}return n=dT(n),t&&t[kf]?t.P(e,n,xf(r)?!!r.capture:!!r,i):B1(t,e,n,!0,r,i)}function j1(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)j1(t,e[o],n,r,i);else r=xf(r)?!!r.capture:!!r,n=dT(n),t&&t[kf]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=oT(o=t.g[e],n,r,i))&&(ny(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.g[e],t.h--))):t&&(t=cT(t))&&(e=t.g[e.toString()],t=-1,e&&(t=oT(e,n,r,i)),(n=-1<t?e[t]:null)&&uT(n))}function uT(t){if("number"!=typeof t&&t&&!t.fa){var e=t.src;if(e&&e[kf])iT(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(H1(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=cT(e))?(iT(n,t),0==n.h&&(n.src=null,e[sT]=null)):ny(t)}}}function H1(t){return t in aT?aT[t]:aT[t]="on"+t}function K8(t,e){if(t.fa)t=!0;else{e=new Of(e,this);var n=t.listener,r=t.la||t.src;t.ia&&uT(t),t=n.call(r,e)}return t}function cT(t){return(t=t[sT])instanceof ry?t:null}var lT="__closure_events_fn_"+(1e9*Math.random()>>>0);function dT(t){return"function"==typeof t?t:(t[lT]||(t[lT]=function(e){return t.handleEvent(e)}),t[lT])}function rr(){ga.call(this),this.i=new ry(this),this.S=this,this.J=null}function fr(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,"string"==typeof e)e=new Ar(e,t);else if(e instanceof Ar)e.target=e.target||t;else{var i=e;L1(e=new Ar(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.g=n[o];i=iy(s,r,!0,e)&&i}if(i=iy(s=e.g=t,r,!0,e)&&i,i=iy(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=iy(s=e.g=n[o],r,!1,e)&&i}function iy(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.fa&&s.capture==n){var a=s.listener,u=s.la||s.src;s.ia&&iT(t.i,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}nr(rr,ga),rr.prototype[kf]=!0,rr.prototype.removeEventListener=function(t,e,n,r){j1(this,t,e,n,r)},rr.prototype.N=function(){if(rr.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)ny(n[r]);delete t.g[e],t.h--}}this.J=null},rr.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},rr.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var hT=He.JSON.stringify;function Y8(){var t=fT;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var z1=new class Q8{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new X8,t=>t.reset());class X8{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function e7(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function t7(t){He.setTimeout(()=>{throw t},0)}let Vf,Ff=!1,fT=new class J8{constructor(){this.h=this.g=null}add(e,n){const r=z1.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}},W1=()=>{const t=He.Promise.resolve(void 0);Vf=()=>{t.then(n7)}};var n7=()=>{for(var t;t=Y8();){try{t.h.call(t.g)}catch(n){t7(n)}var e=z1;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Ff=!1};function oy(t,e){rr.call(this),this.h=t||1,this.g=e||He,this.j=Dr(this.qb,this),this.l=Date.now()}function pT(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}function gT(t,e,n){if("function"==typeof t)n&&(t=Dr(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Dr(t.handleEvent,t)}return 2147483647<Number(e)?-1:He.setTimeout(t,e||0)}function q1(t){t.g=gT(()=>{t.g=null,t.i&&(t.i=!1,q1(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}nr(oy,rr),(pe=oy.prototype).ga=!1,pe.T=null,pe.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),fr(this,"tick"),this.ga&&(pT(this),this.start()))}},pe.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},pe.N=function(){oy.$.N.call(this),pT(this),delete this.g};class r7 extends ga{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:q1(this)}N(){super.N(),this.g&&(He.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Lf(t){ga.call(this),this.h=t,this.g={}}nr(Lf,ga);var G1=[];function Z1(t,e,n,r){Array.isArray(n)||(n&&(G1[0]=n.toString()),n=G1);for(var i=0;i<n.length;i++){var o=U1(e,n[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function K1(t){rT(t.g,function(e,n){this.g.hasOwnProperty(n)&&uT(e)},t),t.g={}}function sy(){this.g=!0}function Ml(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function a7(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return hT(n)}catch{return e}}(t,n)+(r?" "+r:"")})}Lf.prototype.N=function(){Lf.$.N.call(this),K1(this)},Lf.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},sy.prototype.Ea=function(){this.g=!1},sy.prototype.info=function(){};var Eu={},Q1=null;function ay(){return Q1=Q1||new rr}function Y1(t){Ar.call(this,Eu.Ta,t)}function Uf(t){const e=ay();fr(e,new Y1(e))}function J1(t,e){Ar.call(this,Eu.STAT_EVENT,t),this.stat=e}function Qr(t){const e=ay();fr(e,new J1(e,t))}function X1(t,e){Ar.call(this,Eu.Ua,t),this.size=e}function Bf(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return He.setTimeout(function(){t()},e)}Eu.Ta="serverreachability",nr(Y1,Ar),Eu.STAT_EVENT="statevent",nr(J1,Ar),Eu.Ua="timingevent",nr(X1,Ar);var uy={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},ek={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function mT(){}function nk(){}mT.prototype.h=null;var vT,$f={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function _T(){Ar.call(this,"d")}function yT(){Ar.call(this,"c")}function cy(){}function jf(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new Lf(this),this.P=u7,this.V=new oy(t=YC?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new rk}function rk(){this.i=null,this.g="",this.h=!1}nr(_T,Ar),nr(yT,Ar),nr(cy,mT),cy.prototype.g=function(){return new XMLHttpRequest},cy.prototype.i=function(){return{}},vT=new cy;var u7=45e3,IT={},ly={};function ET(t,e,n){t.L=1,t.v=py(Ts(e)),t.s=n,t.S=!0,ik(t,null)}function ik(t,e){t.G=Date.now(),Hf(t),t.A=Ts(t.v);var n=t.A,r=t.W;Array.isArray(r)||(r=[String(r)]),pk(n.i,"t",r),t.C=0,n=t.l.J,t.h=new rk,t.g=Lk(t.l,n?e:null,!t.s),0<t.O&&(t.M=new r7(Dr(t.Pa,t,t.g),t.O)),Z1(t.U,t.g,"readystatechange",t.nb),e=t.I?V1(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),Uf(),function i7(t,e,n,r,i,o){t.info(function(){if(t.g)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var l=a[u].split("=");if(1<l.length){var h=l[0];l=l[1];var g=h.split("_");s=2<=g.length&&"type"==g[1]?s+(h+"=")+l+"&":s+(h+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s})}(t.j,t.u,t.A,t.m,t.W,t.s)}function ok(t){return!!t.g&&"GET"==t.u&&2!=t.L&&t.l.Ha}function sk(t,e,n){let i,r=!0;for(;!t.J&&t.C<n.length;){if(i=c7(t,n),i==ly){4==e&&(t.o=4,Qr(14),r=!1),Ml(t.j,t.m,null,"[Incomplete Response]");break}if(i==IT){t.o=4,Qr(15),Ml(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}Ml(t.j,t.m,i,null),wT(t,i)}ok(t)&&i!=ly&&i!=IT&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,Qr(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,(e=t.l).g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),RT(e),e.M=!0,Qr(11))):(Ml(t.j,t.m,n,"[Invalid Chunked Response]"),wu(t),zf(t))}function c7(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?ly:(n=Number(e.substring(n,r)),isNaN(n)?IT:(r+=1)+n>e.length?ly:(e=e.slice(r,r+n),t.C=r+n,e))}function Hf(t){t.Y=Date.now()+t.P,ak(t,t.P)}function ak(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=Bf(Dr(t.lb,t),e)}function dy(t){t.B&&(He.clearTimeout(t.B),t.B=null)}function zf(t){0==t.l.H||t.J||Ok(t.l,t)}function wu(t){dy(t);var e=t.M;e&&"function"==typeof e.sa&&e.sa(),t.M=null,pT(t.V),K1(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function wT(t,e){try{var n=t.l;if(0!=n.H&&(n.g==t||CT(n.i,t)))if(!t.K&&CT(n.i,t)&&3==n.H){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<t.G))break e;Iy(n),yy(n)}ST(n),Qr(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=Bf(Dr(n.ib,n),6e3));if(1>=_k(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Tu(n,11)}else if((t.K||n.g==t)&&Iy(n),!Nf(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let l=i[e];if(n.V=l[0],l=l[1],2==n.H)if("c"==l[0]){n.K=l[1],n.pa=l[2];const h=l[3];null!=h&&(n.ra=h,n.l.info("VER="+n.ra));const g=l[4];null!=g&&(n.Ga=g,n.l.info("SVER="+n.Ga));const m=l[5];null!=m&&"number"==typeof m&&0<m&&(n.L=r=1.5*m,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const y=t.g;if(y){const T=y.g?y.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(T){var o=r.i;o.g||-1==T.indexOf("spdy")&&-1==T.indexOf("quic")&&-1==T.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(TT(o,o.h),o.h=null))}if(r.F){const b=y.g?y.g.getResponseHeader("X-HTTP-Session-Id"):null;b&&(r.Da=b,en(r.I,r.F,b))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms"));var s=t;if((r=n).wa=Fk(r,r.J?r.pa:null,r.Y),s.K){yk(r.i,s);var a=s,u=r.L;u&&a.setTimeout(u),a.B&&(dy(a),Hf(a)),r.g=s}else xk(r);0<n.j.length&&vy(n)}else"stop"!=l[0]&&"close"!=l[0]||Tu(n,7);else 3==n.H&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?Tu(n,7):bT(n):"noop"!=l[0]&&n.h&&n.h.Aa(l),n.A=0)}Uf()}catch{}}function uk(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(X_(t)||"string"==typeof t)Array.prototype.forEach.call(t,e,void 0);else for(var n=function d7(t){if(t.ta&&"function"==typeof t.ta)return t.ta();if(!t.Z||"function"!=typeof t.Z){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(X_(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}(t),r=function l7(t){if(t.Z&&"function"==typeof t.Z)return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if("string"==typeof t)return t.split("");if(X_(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(pe=jf.prototype).setTimeout=function(t){this.P=t},pe.nb=function(t){t=t.target;const e=this.M;e&&3==$o(t)?e.l():this.Pa(t)},pe.Pa=function(t){try{if(t==this.g)e:{const h=$o(this.g);var e=this.g.Ia();if(this.g.da(),!(3>h)&&(3!=h||YC||this.g&&(this.h.h||this.g.ja()||Ak(this.g)))){this.J||4!=h||7==e||Uf(),dy(this);var n=this.g.da();this.ca=n;t:if(ok(this)){var r=Ak(this.g);t="";var i=r.length,o=4==$o(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){wu(this),zf(this);var s="";break t}this.h.i=new He.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:o&&e==i-1});r.splice(0,i),this.h.g+=t,this.C=0,s=this.h.g}else s=this.g.ja();if(this.i=200==n,function o7(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s})}(this.j,this.u,this.A,this.m,this.W,h,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,u=this.g;if((a=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Nf(a)){var l=a;break t}}l=null}if(!(n=l)){this.i=!1,this.o=3,Qr(12),wu(this),zf(this);break e}Ml(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,wT(this,n)}this.S?(sk(this,h,s),YC&&this.i&&3==h&&(Z1(this.U,this.V,"tick",this.mb),this.V.start())):(Ml(this.j,this.m,s,null),wT(this,s)),4==h&&wu(this),this.i&&!this.J&&(4==h?Ok(this.l,this):(this.i=!1,Hf(this)))}else(function R7(t){const e={};t=(t.g&&2<=$o(t)&&t.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<t.length;r++){if(Nf(t[r]))continue;var n=e7(t[r]);const i=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const o=e[i]||[];e[i]=o,o.push(n)}!function G8(t,e){for(const n in t)e.call(void 0,t[n],n,t)}(e,function(r){return r.join(", ")})})(this.g),400==n&&0<s.indexOf("Unknown SID")?(this.o=3,Qr(12)):(this.o=0,Qr(13)),wu(this),zf(this)}}}catch{}},pe.mb=function(){if(this.g){var t=$o(this.g),e=this.g.ja();this.C<e.length&&(dy(this),sk(this,t,e),this.i&&4!=t&&Hf(this))}},pe.cancel=function(){this.J=!0,wu(this)},pe.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(function s7(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(Uf(),Qr(17)),wu(this),this.o=2,zf(this)):ak(this,this.Y-t)};var ck=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Cu(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Cu){this.h=t.h,hy(this,t.j),this.s=t.s,this.g=t.g,fy(this,t.m),this.l=t.l;var e=t.i,n=new Gf;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),lk(this,n),this.o=t.o}else t&&(e=String(t).match(ck))?(this.h=!1,hy(this,e[1]||"",!0),this.s=Wf(e[2]||""),this.g=Wf(e[3]||"",!0),fy(this,e[4]),this.l=Wf(e[5]||"",!0),lk(this,e[6]||"",!0),this.o=Wf(e[7]||"")):(this.h=!1,this.i=new Gf(null,this.h))}function Ts(t){return new Cu(t)}function hy(t,e,n){t.j=n?Wf(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function fy(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function lk(t,e,n){e instanceof Gf?(t.i=e,function y7(t,e){e&&!t.j&&(ma(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(hk(this,r),pk(this,i,n))},t)),t.j=e}(t.i,t.h)):(n||(e=qf(e,m7)),t.i=new Gf(e,t.h))}function en(t,e,n){t.i.set(e,n)}function py(t){return en(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Wf(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function qf(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,f7),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function f7(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Cu.prototype.toString=function(){var t=[],e=this.j;e&&t.push(qf(e,dk,!0),":");var n=this.g;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(qf(e,dk,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&t.push("/"),t.push(qf(n,"/"==n.charAt(0)?g7:p7,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",qf(n,_7)),t.join("")};var dk=/[#\/\?@]/g,p7=/[#\?:]/g,g7=/[#\?]/g,m7=/[#\?@]/g,_7=/#/g;function Gf(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function ma(t){t.g||(t.g=new Map,t.h=0,t.i&&function h7(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function hk(t,e){ma(t),e=xl(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function fk(t,e){return ma(t),e=xl(t,e),t.g.has(e)}function pk(t,e,n){hk(t,e),0<n.length&&(t.i=null,t.g.set(xl(t,e),KC(n)),t.h+=n.length)}function xl(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function gk(t){this.l=t||I7,t=He.PerformanceNavigationTiming?0<(t=He.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(He.g&&He.g.Ka&&He.g.Ka()&&He.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(pe=Gf.prototype).add=function(t,e){ma(this),this.i=null,t=xl(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},pe.forEach=function(t,e){ma(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)},pe.ta=function(){ma(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let o=0;o<i.length;o++)n.push(e[r])}return n},pe.Z=function(t){ma(this);let e=[];if("string"==typeof t)fk(this,t)&&(e=e.concat(this.g.get(xl(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e},pe.set=function(t,e){return ma(this),this.i=null,fk(this,t=xl(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},pe.get=function(t,e){return t&&0<(t=this.Z(t)).length?String(t[0]):e},pe.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const o=encodeURIComponent(String(r)),s=this.Z(r);for(r=0;r<s.length;r++){var i=o;""!==s[r]&&(i+="="+encodeURIComponent(String(s[r]))),t.push(i)}}return this.i=t.join("&")};var I7=10;function mk(t){return!!t.h||!!t.g&&t.g.size>=t.j}function _k(t){return t.h?1:t.g?t.g.size:0}function CT(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function TT(t,e){t.g?t.g.add(e):t.h=e}function yk(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function vk(t){if(null!=t.h)return t.i.concat(t.h.F);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return KC(t.i)}gk.prototype.cancel=function(){if(this.i=vk(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}};var E7=class{stringify(t){return He.JSON.stringify(t,void 0)}parse(t){return He.JSON.parse(t,void 0)}};function w7(){this.g=new E7}function C7(t,e,n){const r=n||"";try{uk(t,function(i,o){let s=i;xf(i)&&(s=hT(i)),e.push(r+o+"="+encodeURIComponent(s))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function gy(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Zf(t){this.l=t.ec||null,this.j=t.ob||!1}function my(t,e){rr.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=DT,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}nr(Zf,mT),Zf.prototype.g=function(){return new my(this.l,this.j)},Zf.prototype.i=function(t){return function(){return t}}({}),nr(my,rr);var DT=0;function Ik(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}function Kf(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Qf(t)}function Qf(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(pe=my.prototype).open=function(t,e){if(this.readyState!=DT)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Qf(this)},pe.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||He).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},pe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Kf(this)),this.readyState=DT},pe.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Qf(this)),this.g&&(this.readyState=3,Qf(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof He.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Ik(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))},pe.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Kf(this):Qf(this),3==this.readyState&&Ik(this)}},pe.Za=function(t){this.g&&(this.response=this.responseText=t,Kf(this))},pe.Ya=function(t){this.g&&(this.response=t,Kf(this))},pe.ka=function(){this.g&&Kf(this)},pe.setRequestHeader=function(t,e){this.v.append(t,e)},pe.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},pe.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(my.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var D7=He.JSON.parse;function En(t){rr.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Ek,this.L=this.M=!1}nr(En,rr);var Ek="",A7=/^https?$/i,b7=["POST","PUT"];function wk(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Ck(t),_y(t)}function Ck(t){t.F||(t.F=!0,fr(t,"complete"),fr(t,"error"))}function Tk(t){if(t.h&&typeof GC<"u"&&(!t.C[1]||4!=$o(t)||2!=t.da()))if(t.v&&4==$o(t))gT(t.La,0,t);else if(fr(t,"readystatechange"),4==$o(t)){t.h=!1;try{const s=t.da();e:switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=0===s){var i=String(t.I).match(ck)[1]||null;!i&&He.self&&He.self.location&&(i=He.self.location.protocol.slice(0,-1)),r=!A7.test(i?i.toLowerCase():"")}n=r}if(n)fr(t,"complete"),fr(t,"success");else{t.m=6;try{var o=2<$o(t)?t.g.statusText:""}catch{o=""}t.j=o+" ["+t.da()+"]",Ck(t)}}finally{_y(t)}}}function _y(t,e){if(t.g){Dk(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||fr(t,"ready");try{n.onreadystatechange=r}catch{}}}function Dk(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(He.clearTimeout(t.A),t.A=null)}function $o(t){return t.g?t.g.readyState:0}function Ak(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case Ek:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function bk(t){let e="";return rT(t,function(n,r){e+=r,e+=":",e+=n,e+="\r\n"}),e}function AT(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=bk(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):en(t,e,n))}function Yf(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Sk(t){this.Ga=0,this.j=[],this.l=new sy,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Yf("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Yf("baseRetryDelayMs",5e3,t),this.hb=Yf("retryDelaySeedMs",1e4,t),this.eb=Yf("forwardChannelMaxRetries",2,t),this.xa=Yf("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new gk(t&&t.concurrentRequestLimit),this.Ja=new w7,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function bT(t){if(Rk(t),3==t.H){var e=t.W++,n=Ts(t.I);if(en(n,"SID",t.K),en(n,"RID",e),en(n,"TYPE","terminate"),Jf(t,n),(e=new jf(t,t.l,e)).L=2,e.v=py(Ts(n)),n=!1,He.navigator&&He.navigator.sendBeacon)try{n=He.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&He.Image&&((new Image).src=e.v,n=!0),n||(e.g=Lk(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Hf(e)}Vk(t)}function yy(t){t.g&&(RT(t),t.g.cancel(),t.g=null)}function Rk(t){yy(t),t.u&&(He.clearTimeout(t.u),t.u=null),Iy(t),t.i.cancel(),t.m&&("number"==typeof t.m&&He.clearTimeout(t.m),t.m=null)}function vy(t){if(!mk(t.i)&&!t.m){t.m=!0;var e=t.Na;Vf||W1(),Ff||(Vf(),Ff=!0),fT.add(e,t),t.C=0}}function Pk(t,e){var n;n=e?e.m:t.W++;const r=Ts(t.I);en(r,"SID",t.K),en(r,"RID",n),en(r,"AID",t.V),Jf(t,r),t.o&&t.s&&AT(r,t.o,t.s),n=new jf(t,t.l,n,t.C+1),null===t.o&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=Mk(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),TT(t.i,n),ET(n,r,e)}function Jf(t,e){t.na&&rT(t.na,function(n,r){en(e,r,n)}),t.h&&uk({},function(n,r){en(e,r,n)})}function Mk(t,e,n){n=Math.min(t.j.length,n);var r=t.h?Dr(t.h.Va,t.h,t):null;e:{var i=t.j;let o=-1;for(;;){const s=["count="+n];-1==o?0<n?(o=i[0].g,s.push("ofs="+o)):o=0:s.push("ofs="+o);let a=!0;for(let u=0;u<n;u++){let l=i[u].g;const h=i[u].map;if(l-=o,0>l)o=Math.max(0,i[u].g-100),a=!1;else try{C7(h,s,"req"+l+"_")}catch{r&&r(h)}}if(a){r=s.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function xk(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Vf||W1(),Ff||(Vf(),Ff=!0),fT.add(e,t),t.A=0}}function ST(t){return!(t.g||t.u||3<=t.A||(t.ba++,t.u=Bf(Dr(t.Ma,t),kk(t,t.A)),t.A++,0))}function RT(t){null!=t.B&&(He.clearTimeout(t.B),t.B=null)}function Nk(t){t.g=new jf(t,t.l,"rpc",t.ba),null===t.o&&(t.g.I=t.s),t.g.O=0;var e=Ts(t.wa);en(e,"RID","rpc"),en(e,"SID",t.K),en(e,"AID",t.V),en(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&en(e,"TO",t.qa),en(e,"TYPE","xmlhttp"),Jf(t,e),t.o&&t.s&&AT(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.v=py(Ts(e)),n.s=null,n.S=!0,ik(n,t)}function Iy(t){null!=t.v&&(He.clearTimeout(t.v),t.v=null)}function Ok(t,e){var n=null;if(t.g==e){Iy(t),RT(t),t.g=null;var r=2}else{if(!CT(t.i,e))return;n=e.F,yk(t.i,e),r=1}if(0!=t.H)if(e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.G;var i=t.C;fr(r=ay(),new X1(r,n)),vy(t)}else xk(t);else if(3==(i=e.o)||0==i&&0<e.ca||!(1==r&&function P7(t,e){return!(_k(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.j=e.F.concat(t.j),0):1==t.H||2==t.H||t.C>=(t.cb?0:t.eb)||(t.m=Bf(Dr(t.Na,t,e),kk(t,t.C)),t.C++,0)))}(t,e)||2==r&&ST(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Tu(t,5);break;case 4:Tu(t,10);break;case 3:Tu(t,6);break;default:Tu(t,2)}}function kk(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Tu(t,e){if(t.l.info("Error code "+e),2==e){var n=null;t.h&&(n=null);var r=Dr(t.pb,t);n||(n=new Cu("//www.google.com/images/cleardot.gif"),He.location&&"http"==He.location.protocol||hy(n,"https"),py(n)),function T7(t,e){const n=new sy;if(He.Image){const r=new Image;r.onload=ey(gy,n,r,"TestLoadImage: loaded",!0,e),r.onerror=ey(gy,n,r,"TestLoadImage: error",!1,e),r.onabort=ey(gy,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=ey(gy,n,r,"TestLoadImage: timeout",!1,e),He.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else Qr(2);t.H=0,t.h&&t.h.za(e),Vk(t),Rk(t)}function Vk(t){if(t.H=0,t.ma=[],t.h){const e=vk(t.i);(0!=e.length||0!=t.j.length)&&(M1(t.ma,e),M1(t.ma,t.j),t.i.i.length=0,KC(t.j),t.j.length=0),t.h.ya()}}function Fk(t,e,n){var r=n instanceof Cu?Ts(n):new Cu(n);if(""!=r.g)e&&(r.g=e+"."+r.g),fy(r,r.m);else{var i=He.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var o=new Cu(null);r&&hy(o,r),e&&(o.g=e),i&&fy(o,i),n&&(o.l=n),r=o}return e=t.Da,(n=t.F)&&e&&en(r,n,e),en(r,"VER",t.ra),Jf(t,r),r}function Lk(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new En(n&&t.Ha&&!t.va?new Zf({ob:!0}):t.va)).Oa(t.J),e}function Uk(){}function Ey(){if(Pl&&!(10<=Number(H8)))throw Error("Environmental error: no available transport.")}function Ai(t,e){rr.call(this),this.g=new Sk(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Nf(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Nf(e)&&(this.g.F=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new Nl(this)}function Bk(t){_T.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function $k(){yT.call(this),this.status=1}function Nl(t){this.g=t}function go(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function PT(t,e,n){n||(n=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;var o=t.g[3],s=(e=t.g[0])+(o^(n=t.g[1])&((i=t.g[2])^o))+r[0]+3614090360&4294967295;s=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=n+(s<<7&4294967295|s>>>25))+((s=o+(i^e&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(e^n))+r[2]+606105819&4294967295)<<17&4294967295|s>>>15))+((s=n+(e^i&(o^e))+r[3]+3250441966&4294967295)<<22&4294967295|s>>>10))+((s=e+(o^n&(i^o))+r[4]+4118548399&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^e&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(e^n))+r[6]+2821735955&4294967295)<<17&4294967295|s>>>15))+((s=n+(e^i&(o^e))+r[7]+4249261313&4294967295)<<22&4294967295|s>>>10))+((s=e+(o^n&(i^o))+r[8]+1770035416&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^e&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(e^n))+r[10]+4294925233&4294967295)<<17&4294967295|s>>>15))+((s=n+(e^i&(o^e))+r[11]+2304563134&4294967295)<<22&4294967295|s>>>10))+((s=e+(o^n&(i^o))+r[12]+1804603682&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^e&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(e^n))+r[14]+2792965006&4294967295)<<17&4294967295|s>>>15))+((s=n+(e^i&(o^e))+r[15]+1236535329&4294967295)<<22&4294967295|s>>>10))+((s=e+(i^o&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(e^n))+r[6]+3225465664&4294967295)<<9&4294967295|s>>>23))+((s=i+(e^n&(o^e))+r[11]+643717713&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^e&(i^o))+r[0]+3921069994&4294967295)<<20&4294967295|s>>>12))+((s=e+(i^o&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(e^n))+r[10]+38016083&4294967295)<<9&4294967295|s>>>23))+((s=i+(e^n&(o^e))+r[15]+3634488961&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^e&(i^o))+r[4]+3889429448&4294967295)<<20&4294967295|s>>>12))+((s=e+(i^o&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(e^n))+r[14]+3275163606&4294967295)<<9&4294967295|s>>>23))+((s=i+(e^n&(o^e))+r[3]+4107603335&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^e&(i^o))+r[8]+1163531501&4294967295)<<20&4294967295|s>>>12))+((s=e+(i^o&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(e^n))+r[2]+4243563512&4294967295)<<9&4294967295|s>>>23))+((s=i+(e^n&(o^e))+r[7]+1735328473&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^e&(i^o))+r[12]+2368359562&4294967295)<<20&4294967295|s>>>12))+((s=e+(n^i^o)+r[5]+4294588738&4294967295)<<4&4294967295|s>>>28))+((s=o+(e^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^e^n)+r[11]+1839030562&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^e)+r[14]+4259657740&4294967295)<<23&4294967295|s>>>9))+((s=e+(n^i^o)+r[1]+2763975236&4294967295)<<4&4294967295|s>>>28))+((s=o+(e^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^e^n)+r[7]+4139469664&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^e)+r[10]+3200236656&4294967295)<<23&4294967295|s>>>9))+((s=e+(n^i^o)+r[13]+681279174&4294967295)<<4&4294967295|s>>>28))+((s=o+(e^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^e^n)+r[3]+3572445317&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^e)+r[6]+76029189&4294967295)<<23&4294967295|s>>>9))+((s=e+(n^i^o)+r[9]+3654602809&4294967295)<<4&4294967295|s>>>28))+((s=o+(e^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^e^n)+r[15]+530742520&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^e)+r[2]+3299628645&4294967295)<<23&4294967295|s>>>9))+((s=e+(i^(n|~o))+r[0]+4096336452&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|s>>>22))+((s=i+(e^(o|~n))+r[14]+2878612391&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|s>>>11))+((s=e+(i^(n|~o))+r[12]+1700485571&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|s>>>22))+((s=i+(e^(o|~n))+r[10]+4293915773&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|s>>>11))+((s=e+(i^(n|~o))+r[8]+1873313359&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|s>>>22))+((s=i+(e^(o|~n))+r[6]+2734768916&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|s>>>11))+((o=(e=n+((s=e+(i^(n|~o))+r[4]+4149444226&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|s>>>22))^((i=o+((s=i+(e^(o|~n))+r[2]+718787259&4294967295)<<15&4294967295|s>>>17))|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+o&4294967295}function xt(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var o=0|t[i];r&&o==e||(n[i]=o,r=!1)}this.g=n}(pe=En.prototype).Oa=function(t){this.M=t},pe.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():vT.g(),this.C=function tk(t){return t.h||(t.h=t.i())}(this.u?this.u:vT),this.g.onreadystatechange=Dr(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(o){return void wk(this,o)}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const o of r.keys())n.set(o,r.get(o))}r=Array.from(n.keys()).find(o=>"content-type"==o.toLowerCase()),i=He.FormData&&t instanceof He.FormData,!(0<=P1(b7,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,s]of n)this.g.setRequestHeader(o,s);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Dk(this),0<this.B&&((this.L=function S7(t){return Pl&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Dr(this.ua,this)):this.A=gT(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(o){wk(this,o)}},pe.ua=function(){typeof GC<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,fr(this,"timeout"),this.abort(8))},pe.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,fr(this,"complete"),fr(this,"abort"),_y(this))},pe.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),_y(this,!0)),En.$.N.call(this)},pe.La=function(){this.s||(this.G||this.v||this.l?Tk(this):this.kb())},pe.kb=function(){Tk(this)},pe.isActive=function(){return!!this.g},pe.da=function(){try{return 2<$o(this)?this.g.status:-1}catch{return-1}},pe.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},pe.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),D7(e)}},pe.Ia=function(){return this.m},pe.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(pe=Sk.prototype).ra=8,pe.H=1,pe.Na=function(t){if(this.m)if(this.m=null,1==this.H){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new jf(this,this.l,t);let o=this.s;if(this.U&&(o?(o=V1(o),L1(o,this.U)):o=this.U),null!==this.o||this.O||(i.I=o,o=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=n;break e}if(4096===e||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=Mk(this,i,e),en(n=Ts(this.I),"RID",t),en(n,"CVER",22),this.F&&en(n,"X-HTTP-Session-Id",this.F),Jf(this,n),o&&(this.O?e="headers="+encodeURIComponent(String(bk(o)))+"&"+e:this.o&&AT(n,this.o,o)),TT(this.i,i),this.bb&&en(n,"TYPE","init"),this.P?(en(n,"$req",e),en(n,"SID","null"),i.aa=!0,ET(i,n,null)):ET(i,n,e),this.H=2}}else 3==this.H&&(t?Pk(this,t):0==this.j.length||mk(this.i)||Pk(this))},pe.Ma=function(){if(this.u=null,Nk(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Bf(Dr(this.jb,this),t)}},pe.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Qr(10),yy(this),Nk(this))},pe.ib=function(){null!=this.v&&(this.v=null,yy(this),ST(this),Qr(19))},pe.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Qr(2)):(this.l.info("Failed to ping google.com"),Qr(1))},pe.isActive=function(){return!!this.h&&this.h.isActive(this)},(pe=Uk.prototype).Ba=function(){},pe.Aa=function(){},pe.za=function(){},pe.ya=function(){},pe.isActive=function(){return!0},pe.Va=function(){},Ey.prototype.g=function(t,e){return new Ai(t,e)},nr(Ai,rr),Ai.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Qr(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=Fk(t,null,t.Y),vy(t)},Ai.prototype.close=function(){bT(this.g)},Ai.prototype.u=function(t){var e=this.g;if("string"==typeof t){var n={};n.__data__=t,t=n}else this.v&&((n={}).__data__=hT(t),t=n);e.j.push(new class{constructor(t,e){this.g=t,this.map=e}}(e.fb++,t)),3==e.H&&vy(e)},Ai.prototype.N=function(){this.g.h=null,delete this.j,bT(this.g),delete this.g,Ai.$.N.call(this)},nr(Bk,_T),nr($k,yT),nr(Nl,Uk),Nl.prototype.Ba=function(){fr(this.g,"a")},Nl.prototype.Aa=function(t){fr(this.g,new Bk(t))},Nl.prototype.za=function(t){fr(this.g,new $k)},Nl.prototype.ya=function(){fr(this.g,"b")},nr(go,function M7(){this.blockSize=-1}),go.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},go.prototype.j=function(t,e){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,o=0;o<e;){if(0==i)for(;o<=n;)PT(this,t,o),o+=this.blockSize;if("string"==typeof t){for(;o<e;)if(r[i++]=t.charCodeAt(o++),i==this.blockSize){PT(this,r),i=0;break}}else for(;o<e;)if(r[i++]=t[o++],i==this.blockSize){PT(this,r),i=0;break}}this.h=i,this.i+=e},go.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=255&n,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};var x7={};function MT(t){return-128<=t&&128>t?function B8(t,e){var n=x7;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,function(e){return new xt([0|e],0>e?-1:0)}):new xt([0|t],0>t?-1:0)}function jo(t){if(isNaN(t)||!isFinite(t))return Ol;if(0>t)return pr(jo(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=xT;return new xt(e,0)}var xT=4294967296,Ol=MT(0),NT=MT(1),Hk=MT(16777216);function Ds(t){if(0!=t.h)return!1;for(var e=0;e<t.g.length;e++)if(0!=t.g[e])return!1;return!0}function Yi(t){return-1==t.h}function pr(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new xt(n,~t.h).add(NT)}function wy(t,e){return t.add(pr(e))}function Cy(t,e){for(;(65535&t[e])!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Xf(t,e){this.g=t,this.h=e}function Ty(t,e){if(Ds(e))throw Error("division by zero");if(Ds(t))return new Xf(Ol,Ol);if(Yi(t))return e=Ty(pr(t),e),new Xf(pr(e.g),pr(e.h));if(Yi(e))return e=Ty(t,pr(e)),new Xf(pr(e.g),e.h);if(30<t.g.length){if(Yi(t)||Yi(e))throw Error("slowDivide_ only works with positive integers.");for(var n=NT,r=e;0>=r.X(t);)n=zk(n),r=zk(r);var i=kl(n,1),o=kl(r,1);for(r=kl(r,2),n=kl(n,2);!Ds(r);){var s=o.add(r);0>=s.X(t)&&(i=i.add(n),o=s),r=kl(r,1),n=kl(n,1)}return e=wy(t,i.R(e)),new Xf(i,e)}for(i=Ol;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),s=(o=jo(n)).R(e);Yi(s)||0<s.X(t);)s=(o=jo(n-=r)).R(e);Ds(o)&&(o=NT),i=i.add(o),t=wy(t,s)}return new Xf(i,t)}function zk(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new xt(n,t.h)}function kl(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],o=0;o<r;o++)i[o]=0<e?t.D(o+n)>>>e|t.D(o+n+1)<<32-e:t.D(o+n);return new xt(i,t.h)}(pe=xt.prototype).ea=function(){if(Yi(this))return-pr(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:xT+r)*e,e*=xT}return t},pe.toString=function(t){if(2>(t=t||10)||36<t)throw Error("radix out of range: "+t);if(Ds(this))return"0";if(Yi(this))return"-"+pr(this).toString(t);for(var e=jo(Math.pow(t,6)),n=this,r="";;){var i=Ty(n,e).g,o=((0<(n=wy(n,i.R(e))).g.length?n.g[0]:n.h)>>>0).toString(t);if(Ds(n=i))return o+r;for(;6>o.length;)o="0"+o;r=o+r}},pe.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h},pe.X=function(t){return Yi(t=wy(this,t))?-1:Ds(t)?0:1},pe.abs=function(){return Yi(this)?pr(this):this},pe.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var o=r+(65535&this.D(i))+(65535&t.D(i)),s=(o>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=s>>>16,n[i]=(s&=65535)<<16|(o&=65535)}return new xt(n,-2147483648&n[n.length-1]?-1:0)},pe.R=function(t){if(Ds(this)||Ds(t))return Ol;if(Yi(this))return Yi(t)?pr(this).R(pr(t)):pr(pr(this).R(t));if(Yi(t))return pr(this.R(pr(t)));if(0>this.X(Hk)&&0>t.X(Hk))return jo(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var o=this.D(r)>>>16,s=65535&this.D(r),a=t.D(i)>>>16,u=65535&t.D(i);n[2*r+2*i]+=s*u,Cy(n,2*r+2*i),n[2*r+2*i+1]+=o*u,Cy(n,2*r+2*i+1),n[2*r+2*i+1]+=s*a,Cy(n,2*r+2*i+1),n[2*r+2*i+2]+=o*a,Cy(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new xt(n,0)},pe.gb=function(t){return Ty(this,t).h},pe.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new xt(n,this.h&t.h)},pe.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new xt(n,this.h|t.h)},pe.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new xt(n,this.h^t.h)},Ey.prototype.createWebChannel=Ey.prototype.g,Ai.prototype.send=Ai.prototype.u,Ai.prototype.open=Ai.prototype.m,Ai.prototype.close=Ai.prototype.close,uy.NO_ERROR=0,uy.TIMEOUT=8,uy.HTTP_ERROR=6,ek.COMPLETE="complete",nk.EventType=$f,$f.OPEN="a",$f.CLOSE="b",$f.ERROR="c",$f.MESSAGE="d",rr.prototype.listen=rr.prototype.O,En.prototype.listenOnce=En.prototype.P,En.prototype.getLastError=En.prototype.Sa,En.prototype.getLastErrorCode=En.prototype.Ia,En.prototype.getStatus=En.prototype.da,En.prototype.getResponseJson=En.prototype.Wa,En.prototype.getResponseText=En.prototype.ja,En.prototype.send=En.prototype.ha,En.prototype.setWithCredentials=En.prototype.Oa,go.prototype.digest=go.prototype.l,go.prototype.reset=go.prototype.reset,go.prototype.update=go.prototype.j,xt.prototype.add=xt.prototype.add,xt.prototype.multiply=xt.prototype.R,xt.prototype.modulo=xt.prototype.gb,xt.prototype.compare=xt.prototype.X,xt.prototype.toNumber=xt.prototype.ea,xt.prototype.toString=xt.prototype.toString,xt.prototype.getBits=xt.prototype.D,xt.fromNumber=jo,xt.fromString=function jk(t,e){if(0==t.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==t.charAt(0))return pr(jk(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=jo(Math.pow(e,8)),r=Ol,i=0;i<t.length;i+=8){var o=Math.min(8,t.length-i),s=parseInt(t.substring(i,i+o),e);8>o?(o=jo(Math.pow(e,o)),r=r.R(o).add(jo(s))):r=(r=r.R(n)).add(jo(s))}return r};var N7=po.createWebChannelTransport=function(){return new Ey},O7=po.getStatEventTarget=function(){return ay()},OT=po.ErrorCode=uy,k7=po.EventType=ek,V7=po.Event=Eu,Wk=po.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},F7=po.FetchXmlHttpFactory=Zf,Dy=po.WebChannel=nk,L7=po.XhrIo=En,U7=po.Md5=go,Vl=po.Integer=xt;const qk="@firebase/firestore";class ir{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ir.UNAUTHENTICATED=new ir(null),ir.GOOGLE_CREDENTIALS=new ir("google-credentials-uid"),ir.FIRST_PARTY=new ir("first-party-uid"),ir.MOCK_USER=new ir("mock-user");let Fl="10.5.2";const _a=new Uo.Yd("@firebase/firestore");function Ll(){return _a.logLevel}function ne(t,...e){if(_a.logLevel<=Uo.in.DEBUG){const n=e.map(kT);_a.debug(`Firestore (${Fl}): ${t}`,...n)}}function xn(t,...e){if(_a.logLevel<=Uo.in.ERROR){const n=e.map(kT);_a.error(`Firestore (${Fl}): ${t}`,...n)}}function ai(t,...e){if(_a.logLevel<=Uo.in.WARN){const n=e.map(kT);_a.warn(`Firestore (${Fl}): ${t}`,...n)}}function kT(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch{return t}}function ye(t="Unexpected state"){const e=`FIRESTORE (${Fl}) INTERNAL ASSERTION FAILED: `+t;throw xn(e),new Error(e)}function be(t,e){t||ye()}function ae(t,e){return t}const B={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class J extends Vt.ZR{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Gn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class Gk{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class j7{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ir.UNAUTHENTICATED))}shutdown(){}}class H7{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class z7{constructor(e){this.t=e,this.currentUser=ir.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){var r=this;let i=this.i;const o=l=>this.i!==i?(i=this.i,n(l)):Promise.resolve();let s=new Gn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Gn,e.enqueueRetryable(()=>o(this.currentUser))};const a=()=>{const l=s;e.enqueueRetryable((0,G.Z)(function*(){yield l.promise,yield o(r.currentUser)}))},u=l=>{ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(l=>u(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?u(l):(ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Gn)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(be("string"==typeof r.accessToken),new Gk(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return be(null===e||"string"==typeof e),new ir(e)}}class W7{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=ir.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class q7{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new W7(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(ir.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Zk{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class G7{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=o=>{null!=o.error&&ne("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.R;return this.R=o.token,ne("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?i(o):ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(be("string"==typeof n.token),this.R=n.token,new Zk(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Z7(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class Kk{static newId(){const n=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=Z7(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[o]%62))}return r}}function $e(t,e){return t<e?-1:t>e?1:0}function Ul(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function Qk(t){return t+"\0"}class an{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new J(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new J(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new J(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new J(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return an.fromMillis(Date.now())}static fromDate(e){return an.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new an(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?$e(this.nanoseconds,e.nanoseconds):$e(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Se{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Se(e)}static min(){return new Se(new an(0,0))}static max(){return new Se(new an(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class ep{constructor(e,n,r){void 0===n?n=0:n>e.length&&ye(),void 0===r?r=e.length-n:r>e.length-n&&ye(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return 0===ep.comparator(this,e)}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ep?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const o=e.get(i),s=n.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class _t extends ep{construct(e,n,r){return new _t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new J(B.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new _t(n)}static emptyPath(){return new _t([])}}const K7=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class tn extends ep{construct(e,n,r){return new tn(e,n,r)}static isValidIdentifier(e){return K7.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),tn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new tn(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const o=()=>{if(0===r.length)throw new J(B.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let s=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new J(B.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new J(B.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new J(B.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new tn(n)}static emptyPath(){return new tn([])}}class le{constructor(e){this.path=e}static fromPath(e){return new le(_t.fromString(e))}static fromName(e){return new le(_t.fromString(e).popFirst(5))}static empty(){return new le(_t.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===_t.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,n){return _t.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new le(new _t(e.slice()))}}class Bl{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function VT(t){return t.fields.find(e=>2===e.kind)}function Du(t){return t.fields.filter(e=>2!==e.kind)}Bl.UNKNOWN_ID=-1;class Au{constructor(e,n){this.fieldPath=e,this.kind=n}}class $l{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new $l(0,bi.min())}}function Yk(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Se.fromTimestamp(1e9===r?new an(n+1,0):new an(n,r));return new bi(i,le.empty(),e)}function Jk(t){return new bi(t.readTime,t.key,-1)}class bi{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new bi(Se.min(),le.empty(),-1)}static max(){return new bi(Se.max(),le.empty(),-1)}}function FT(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=le.comparator(t.documentKey,e.documentKey),0!==n?n:$e(t.largestBatchId,e.largestBatchId))}const Xk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class eV{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function ya(t){return LT.apply(this,arguments)}function LT(){return LT=(0,G.Z)(function*(t){if(t.code!==B.FAILED_PRECONDITION||t.message!==Xk)throw t;ne("LocalStore","Unexpectedly lost primary lease")}),LT.apply(this,arguments)}class O{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ye(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new O((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof O?n:O.resolve(n)}catch(n){return O.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):O.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):O.reject(n)}static resolve(e){return new O((n,r)=>{n(e)})}static reject(e){return new O((n,r)=>{r(e)})}static waitFor(e){return new O((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},u=>r(u))}),s=!0,o===i&&n()})}static or(e){let n=O.resolve(!1);for(const r of e)n=n.next(i=>i?O.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new O((r,i)=>{const o=e.length,s=new Array(o);let a=0;for(let u=0;u<o;u++){const l=u;n(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,n){return new O((r,i)=>{const o=()=>{!0===e()?n().next(()=>{o()},i):r()};o()})}}class Ay{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Gn,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new tp(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=UT(r.target.error);this.V.reject(new tp(e,i))}}static open(e,n,r,i){try{return new Ay(n,e.transaction(i,r))}catch(o){throw new tp(n,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(ne("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const n=this.transaction.objectStore(e);return new X7(n)}}class mo{constructor(e,n,r){this.name=e,this.version=n,this.p=r,12.2===mo.S((0,Vt.z$)())&&xn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ne("SimpleDb","Removing database:",e),bu(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,Vt.hl)())return!1;if(mo.C())return!0;const e=(0,Vt.z$)(),n=mo.S(e),r=0<n&&n<10,i=mo.v(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.F)}static M(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){const n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}O(e){var n=this;return(0,G.Z)(function*(){return n.db||(ne("SimpleDb","Opening database:",n.name),n.db=yield new Promise((r,i)=>{const o=indexedDB.open(n.name,n.version);o.onsuccess=s=>{r(s.target.result)},o.onblocked=()=>{i(new tp(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=s=>{const a=s.target.error;i("VersionError"===a.name?new J(B.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new J(B.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new tp(e,a))},o.onupgradeneeded=s=>{ne("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',s.oldVersion),n.p.N(s.target.result,o.transaction,s.oldVersion,n.version).next(()=>{ne("SimpleDb","Database upgrade to version "+n.version+" complete")})}})),n.B&&(n.db.onversionchange=r=>n.B(r)),n.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,r,i){var o=this;return(0,G.Z)(function*(){const s="readonly"===n;let a=0;for(;;){++a;try{o.db=yield o.O(e);const u=Ay.open(o.db,e,s?"readonly":"readwrite",r),l=i(u).next(h=>(u.g(),h)).catch(h=>(u.abort(h),O.reject(h))).toPromise();return l.catch(()=>{}),yield u.m,l}catch(u){const l=u,h="FirebaseError"!==l.name&&a<3;if(ne("SimpleDb","Transaction failed with error:",l.message,"Retrying:",h),o.close(),!h)return Promise.reject(l)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class J7{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return bu(this.k.delete())}}class tp extends J{constructor(e,n){super(B.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function va(t){return"IndexedDbTransactionError"===t.name}class X7{constructor(e){this.store=e}put(e,n){let r;return void 0!==n?(ne("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(ne("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),bu(r)}add(e){return ne("SimpleDb","ADD",this.store.name,e,e),bu(this.store.add(e))}get(e){return bu(this.store.get(e)).next(n=>(void 0===n&&(n=null),ne("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return ne("SimpleDb","DELETE",this.store.name,e),bu(this.store.delete(e))}count(){return ne("SimpleDb","COUNT",this.store.name),bu(this.store.count())}W(e,n){const r=this.options(e,n);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),o=[];return this.G(i,(s,a)=>{o.push(a)}).next(()=>o)}{const i=this.store.getAll(r.range);return new O((o,s)=>{i.onerror=a=>{s(a.target.error)},i.onsuccess=a=>{o(a.target.result)}})}}j(e,n){const r=this.store.getAll(e,null===n?void 0:n);return new O((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}H(e,n){ne("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.J=!1;const i=this.cursor(r);return this.G(i,(o,s,a)=>a.delete())}Y(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.G(i,n)}Z(e){const n=this.cursor({});return new O((r,i)=>{n.onerror=o=>{const s=UT(o.target.error);i(s)},n.onsuccess=o=>{const s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}G(e,n){const r=[];return new O((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{const a=s.target.result;if(!a)return void i();const u=new J7(a),l=n(a.primaryKey,a.value,u);if(l instanceof O){const h=l.catch(g=>(u.done(),O.reject(g)));r.push(h)}u.isDone?i():null===u.$?a.continue():a.continue(u.$)}}).next(()=>O.waitFor(r))}options(e,n){let r;return void 0!==e&&("string"==typeof e?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function bu(t){return new O((e,n)=>{t.onsuccess=r=>{e(r.target.result)},t.onerror=r=>{const i=UT(r.target.error);n(i)}})}let tV=!1;function UT(t){const e=mo.S((0,Vt.z$)());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new J("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return tV||(tV=!0,setTimeout(()=>{throw r},0)),r}}return t}class eZ{constructor(e,n){this.asyncQueue=e,this.X=n,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){var n=this;ne("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,G.Z)(function*(){n.task=null;try{ne("IndexBackiller",`Documents written: ${yield n.X.te()}`)}catch(r){va(r)?ne("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield ya(r)}yield n.ee(6e4)}))}}class tZ{constructor(e,n){this.localStore=e,this.persistence=n}te(e=50){var n=this;return(0,G.Z)(function*(){return n.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>n.ne(r,e))})()}ne(e,n){const r=new Set;let i=n,o=!0;return O.doWhile(()=>!0===o&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(null!==s&&!r.has(s))return ne("IndexBackiller",`Processing collection: ${s}`),this.re(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>n-i)}re(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(o=>{const s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.ie(i,o)).next(a=>(ne("IndexBackiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>s.size)}))}ie(e,n){let r=e;return n.changes.forEach((i,o)=>{const s=Jk(o);FT(s,r)>0&&(r=s)}),new bi(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}let Si=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.se(i),this.oe=i=>r.writeSequenceNumber(i))}se(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){const n=++this.previousValue;return this.oe&&this.oe(n),n}}return t._e=-1,t})();function np(t){return null==t}function rp(t){return 0===t&&1/t==-1/0}function nV(t){return"number"==typeof t&&Number.isInteger(t)&&!rp(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function br(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=rV(e)),e=nZ(t.get(n),e);return rV(e)}function nZ(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function rV(t){return t+"\x01\x01"}function Ho(t){const e=t.length;if(be(e>=2),2===e)return be("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),_t.emptyPath();const n=e-2,r=[];let i="";for(let o=0;o<e;){const s=t.indexOf("\x01",o);switch((s<0||s>n)&&ye(),t.charAt(s+1)){case"\x01":const a=t.substring(o,s);let u;0===i.length?u=a:(i+=a,u=i,i=""),r.push(u);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:ye()}o=s+2}return new _t(r)}const iV=["userId","batchId"];function by(t,e){return[t,br(e)]}function oV(t,e,n){return[t,br(e),n]}const rZ={},iZ=["prefixPath","collectionGroup","readTime","documentId"],oZ=["prefixPath","collectionGroup","documentId"],sZ=["collectionGroup","readTime","prefixPath","documentId"],aZ=["canonicalId","targetId"],uZ=["targetId","path"],cZ=["path","targetId"],lZ=["collectionId","parent"],dZ=["indexId","uid"],hZ=["uid","sequenceNumber"],fZ=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],pZ=["indexId","uid","orderedDocumentKey"],gZ=["userId","collectionPath","documentId"],mZ=["userId","collectionPath","largestBatchId"],_Z=["userId","collectionGroup","largestBatchId"],sV=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],yZ=[...sV,"documentOverlays"],aV=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],uV=aV,vZ=[...uV,"indexConfiguration","indexState","indexEntries"];class BT extends eV{constructor(e,n){super(),this.ae=e,this.currentSequenceNumber=n}}function or(t,e){const n=ae(t);return mo.M(n.ae,e)}function cV(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ia(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function lV(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class Wt{constructor(e,n){this.comparator=e,this.root=n||gr.EMPTY}insert(e,n){return new Wt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,gr.BLACK,null,null))}remove(e){return new Wt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,gr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Sy(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Sy(this.root,e,this.comparator,!1)}getReverseIterator(){return new Sy(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Sy(this.root,e,this.comparator,!0)}}class Sy{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(0===o){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class gr{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??gr.RED,this.left=i??gr.EMPTY,this.right=o??gr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new gr(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):0===o?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return gr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return gr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,gr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,gr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ye();const e=this.left.check();if(e!==this.right.check())throw ye();return e+(this.isRed()?0:1)}}gr.EMPTY=null,gr.RED=!0,gr.BLACK=!1,gr.EMPTY=new class{constructor(){this.size=0}get key(){throw ye()}get value(){throw ye()}get color(){throw ye()}get left(){throw ye()}get right(){throw ye()}copy(e,n,r,i,o){return this}insert(e,n,r){return new gr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ft{constructor(e){this.comparator=e,this.data=new Wt(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new dV(this.data.getIterator())}getIteratorFrom(e){return new dV(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ft)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ft(this.comparator);return n.data=e,n}}class dV{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function jl(t){return t.hasNext()?t.getNext():void 0}class ui{constructor(e){this.fields=e,e.sort(tn.comparator)}static empty(){return new ui([])}unionWith(e){let n=new Ft(tn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new ui(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ul(this.fields,e.fields,(n,r)=>n.isEqual(r))}}class hV extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Zn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new hV("Invalid base64 string: "+o):o}}(e);return new Zn(n)}static fromUint8Array(e){const n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new Zn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return $e(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Zn.EMPTY_BYTE_STRING=new Zn("");const EZ=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ea(t){if(be(!!t),"string"==typeof t){let e=0;const n=EZ.exec(t);if(be(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:wn(t.seconds),nanos:wn(t.nanos)}}function wn(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function As(t){return"string"==typeof t?Zn.fromBase64String(t):Zn.fromUint8Array(t)}function Ry(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=t?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Py(t){const e=t.mapValue.fields.__previous_value__;return Ry(e)?Py(e):e}function ip(t){const e=Ea(t.mapValue.fields.__local_write_time__.timestampValue);return new an(e.seconds,e.nanos)}class wZ{constructor(e,n,r,i,o,s,a,u,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}}class wa{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new wa("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof wa&&e.projectId===this.projectId&&e.database===this.database}}const Ca={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},My={nullValue:"NULL_VALUE"};function Ta(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ry(t)?4:mV(t)?9007199254740991:10:ye()}function zo(t,e){if(t===e)return!0;const n=Ta(t);if(n!==Ta(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ip(t).isEqual(ip(e));case 3:return function(i,o){if("string"==typeof i.timestampValue&&"string"==typeof o.timestampValue&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const s=Ea(i.timestampValue),a=Ea(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return o=e,As(t.bytesValue).isEqual(As(o.bytesValue));case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return wn(i.geoPointValue.latitude)===wn(o.geoPointValue.latitude)&&wn(i.geoPointValue.longitude)===wn(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return wn(i.integerValue)===wn(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const s=wn(i.doubleValue),a=wn(o.doubleValue);return s===a?rp(s)===rp(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return Ul(t.arrayValue.values||[],e.arrayValue.values||[],zo);case 10:return function(i,o){const s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(cV(s)!==cV(a))return!1;for(const u in s)if(s.hasOwnProperty(u)&&(void 0===a[u]||!zo(s[u],a[u])))return!1;return!0}(t,e);default:return ye()}var o}function op(t,e){return void 0!==(t.values||[]).find(n=>zo(n,e))}function Da(t,e){if(t===e)return 0;const n=Ta(t),r=Ta(e);if(n!==r)return $e(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return $e(t.booleanValue,e.booleanValue);case 2:return function(o,s){const a=wn(o.integerValue||o.doubleValue),u=wn(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return fV(t.timestampValue,e.timestampValue);case 4:return fV(ip(t),ip(e));case 5:return $e(t.stringValue,e.stringValue);case 6:return function(o,s){const a=As(o),u=As(s);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){const a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){const h=$e(a[l],u[l]);if(0!==h)return h}return $e(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){const a=$e(wn(o.latitude),wn(s.latitude));return 0!==a?a:$e(wn(o.longitude),wn(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(o,s){const a=o.values||[],u=s.values||[];for(let l=0;l<a.length&&l<u.length;++l){const h=Da(a[l],u[l]);if(h)return h}return $e(a.length,u.length)}(t.arrayValue,e.arrayValue);case 10:return function(o,s){if(o===Ca.mapValue&&s===Ca.mapValue)return 0;if(o===Ca.mapValue)return 1;if(s===Ca.mapValue)return-1;const a=o.fields||{},u=Object.keys(a),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let g=0;g<u.length&&g<h.length;++g){const m=$e(u[g],h[g]);if(0!==m)return m;const y=Da(a[u[g]],l[h[g]]);if(0!==y)return y}return $e(u.length,h.length)}(t.mapValue,e.mapValue);default:throw ye()}}function fV(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return $e(t,e);const n=Ea(t),r=Ea(e),i=$e(n.seconds,r.seconds);return 0!==i?i:$e(n.nanos,r.nanos)}function Hl(t){return $T(t)}function $T(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ea(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?As(t.bytesValue).toBase64():"referenceValue"in t?le.fromName(t.referenceValue).toString():"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const o of n.values||[])i?i=!1:r+=",",r+=$T(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const s of r)o?o=!1:i+=",",i+=`${s}:${$T(n.fields[s])}`;return i+"}"}(t.mapValue):ye()}function Su(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function jT(t){return!!t&&"integerValue"in t}function sp(t){return!!t&&"arrayValue"in t}function pV(t){return!!t&&"nullValue"in t}function gV(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ny(t){return!!t&&"mapValue"in t}function ap(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ia(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ap(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ap(t.arrayValue.values[n]);return e}return Object.assign({},t)}function mV(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}function CZ(t){return"nullValue"in t?My:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Su(wa.empty(),le.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:ye()}function TZ(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Su(wa.empty(),le.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?Ca:ye()}function _V(t,e){const n=Da(t.value,e.value);return 0!==n?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function yV(t,e){const n=Da(t.value,e.value);return 0!==n?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}class mr{constructor(e){this.value=e}static empty(){return new mr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ny(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ap(n)}setAll(e){let n=tn.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=ap(s):i.push(a.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){const n=this.field(e.popLast());Ny(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return zo(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Ny(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Ia(n,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new mr(ap(this.value))}}function vV(t){const e=[];return Ia(t.fields,(n,r)=>{const i=new tn([n]);if(Ny(r)){const o=vV(r.mapValue).fields;if(0===o.length)e.push(i);else for(const s of o)e.push(i.child(s))}else e.push(i)}),new ui(e)}class nn{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new nn(e,0,Se.min(),Se.min(),Se.min(),mr.empty(),0)}static newFoundDocument(e,n,r,i){return new nn(e,1,n,Se.min(),r,i,0)}static newNoDocument(e,n){return new nn(e,2,n,Se.min(),Se.min(),mr.empty(),0)}static newUnknownDocument(e,n){return new nn(e,3,n,Se.min(),Se.min(),mr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Se.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=mr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=mr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof nn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new nn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Aa{constructor(e,n){this.position=e,this.inclusive=n}}function IV(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const o=e[i],s=t.position[i];if(r=o.field.isKeyField()?le.comparator(le.fromName(s.referenceValue),n.key):Da(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function EV(t,e){if(null===t)return null===e;if(null===e||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!zo(t.position[n],e.position[n]))return!1;return!0}class up{constructor(e,n="asc"){this.field=e,this.dir=n}}function DZ(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class wV{}class ht extends wV{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?"in"===n||"not-in"===n?this.createKeyFieldInFilter(e,n,r):new AZ(e,n,r):"array-contains"===n?new RZ(e,r):"in"===n?new SV(e,r):"not-in"===n?new PZ(e,r):"array-contains-any"===n?new MZ(e,r):new ht(e,n,r)}static createKeyFieldInFilter(e,n,r){return"in"===n?new bZ(e,r):new SZ(e,r)}matches(e){const n=e.data.field(this.field);return"!="===this.op?null!==n&&this.matchesComparison(Da(n,this.value)):null!==n&&Ta(this.value)===Ta(n)&&this.matchesComparison(Da(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ye()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Nt extends wV{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new Nt(e,n)}matches(e){return zl(this)?void 0===this.filters.find(n=>!n.matches(e)):void 0!==this.filters.find(n=>n.matches(e))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function zl(t){return"and"===t.op}function HT(t){return"or"===t.op}function zT(t){return CV(t)&&zl(t)}function CV(t){for(const e of t.filters)if(e instanceof Nt)return!1;return!0}function WT(t){if(t instanceof ht)return t.field.canonicalString()+t.op.toString()+Hl(t.value);if(zT(t))return t.filters.map(e=>WT(e)).join(",");{const e=t.filters.map(n=>WT(n)).join(",");return`${t.op}(${e})`}}function TV(t,e){return t instanceof ht?(r=t,(i=e)instanceof ht&&r.op===i.op&&r.field.isEqual(i.field)&&zo(r.value,i.value)):t instanceof Nt?function(r,i){return i instanceof Nt&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((o,s,a)=>o&&TV(s,i.filters[a]),!0)}(t,e):void ye();var r,i}function DV(t,e){const n=t.filters.concat(e);return Nt.create(n,t.op)}function AV(t){return t instanceof ht?`${(n=t).field.canonicalString()} ${n.op} ${Hl(n.value)}`:t instanceof Nt?function(n){return n.op.toString()+" {"+n.getFilters().map(AV).join(" ,")+"}"}(t):"Filter";var n}class AZ extends ht{constructor(e,n,r){super(e,n,r),this.key=le.fromName(r.referenceValue)}matches(e){const n=le.comparator(e.key,this.key);return this.matchesComparison(n)}}class bZ extends ht{constructor(e,n){super(e,"in",n),this.keys=bV(0,n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class SZ extends ht{constructor(e,n){super(e,"not-in",n),this.keys=bV(0,n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function bV(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(r=>le.fromName(r.referenceValue))}class RZ extends ht{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return sp(n)&&op(n.arrayValue,this.value)}}class SV extends ht{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return null!==n&&op(this.value.arrayValue,n)}}class PZ extends ht{constructor(e,n){super(e,"not-in",n)}matches(e){if(op(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return null!==n&&!op(this.value.arrayValue,n)}}class MZ extends ht{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!sp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>op(this.value.arrayValue,r))}}class xZ{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ce=null}}function qT(t,e=null,n=[],r=[],i=null,o=null,s=null){return new xZ(t,e,n,r,i,o,s)}function Ru(t){const e=ae(t);if(null===e.ce){let n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>WT(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),np(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Hl(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Hl(r)).join(",")),e.ce=n}return e.ce}function cp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!DZ(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!TV(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!EV(t.startAt,e.startAt)&&EV(t.endAt,e.endAt)}function Oy(t){return le.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}function ky(t,e){return t.filters.filter(n=>n instanceof ht&&n.field.isEqual(e))}function RV(t,e,n){let r=My,i=!0;for(const o of ky(t,e)){let s=My,a=!0;switch(o.op){case"<":case"<=":s=CZ(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=My}_V({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(null!==n)for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){const s=n.position[o];_V({value:r,inclusive:i},{value:s,inclusive:n.inclusive})<0&&(r=s,i=n.inclusive);break}return{value:r,inclusive:i}}function PV(t,e,n){let r=Ca,i=!0;for(const o of ky(t,e)){let s=Ca,a=!0;switch(o.op){case">=":case">":s=TZ(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=Ca}yV({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(null!==n)for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){const s=n.position[o];yV({value:r,inclusive:i},{value:s,inclusive:n.inclusive})>0&&(r=s,i=n.inclusive);break}return{value:r,inclusive:i}}class bs{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.le=null,this.he=null,this.Pe=null}}function MV(t,e,n,r,i,o,s,a){return new bs(t,e,n,r,i,o,s,a)}function Wl(t){return new bs(t)}function xV(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function GT(t){return null!==t.collectionGroup}function ql(t){const e=ae(t);if(null===e.le){e.le=[];const n=new Set;for(const o of e.explicitOrderBy)e.le.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Ft(tn.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.le.push(new up(o,r))}),n.has(tn.keyField().canonicalString())||e.le.push(new up(tn.keyField(),r))}return e.le}function Yr(t){const e=ae(t);return e.he||(e.he=function NV(t,e){if("F"===t.limitType)return qT(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>new up(i.field,"desc"===i.dir?"asc":"desc"));const n=t.endAt?new Aa(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Aa(t.startAt.position,t.startAt.inclusive):null;return qT(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}(e,ql(t))),e.he}function ZT(t,e){const n=t.filters.concat([e]);return new bs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Vy(t,e,n){return new bs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function lp(t,e){return cp(Yr(t),Yr(e))&&t.limitType===e.limitType}function OV(t){return`${Ru(Yr(t))}|lt:${t.limitType}`}function Gl(t){return`Query(target=${function(n){let r=n.path.canonicalString();return null!==n.collectionGroup&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>AV(i)).join(", ")}]`),np(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>{return`${(s=i).field.canonicalString()} (${s.dir})`;var s}).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Hl(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Hl(i)).join(",")),`Target(${r})`}(Yr(t))}; limitType=${t.limitType})`}function dp(t,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):le.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(const o of ql(r))if(!o.field.isKeyField()&&null===i.data.field(o.field))return!1;return!0}(t,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&(i=e,!((r=t).startAt&&!function(s,a,u){const l=IV(s,a,u);return s.inclusive?l<=0:l<0}(r.startAt,ql(r),i)||r.endAt&&!function(s,a,u){const l=IV(s,a,u);return s.inclusive?l>=0:l>0}(r.endAt,ql(r),i)));var r,i}function kV(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function VV(t){return(e,n)=>{let r=!1;for(const i of ql(t)){const o=NZ(i,e,n);if(0!==o)return o;r=r||i.field.isKeyField()}return 0}}function NZ(t,e,n){const r=t.field.isKeyField()?le.comparator(e.key,n.key):function(o,s,a){const u=s.data.field(o),l=a.data.field(o);return null!==u&&null!==l?Da(u,l):ye()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ye()}}class Ss{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r)for(const[i,o]of r)if(this.equalsFn(i,e))return o}has(e){return void 0!==this.get(e)}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ia(this.inner,(n,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return lV(this.inner)}size(){return this.innerSize}}const OZ=new Wt(le.comparator);function ci(){return OZ}const FV=new Wt(le.comparator);function hp(...t){let e=FV;for(const n of t)e=e.insert(n.key,n);return e}function LV(t){let e=FV;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Wo(){return fp()}function UV(){return fp()}function fp(){return new Ss(t=>t.toString(),(t,e)=>t.isEqual(e))}const kZ=new Wt(le.comparator),VZ=new Ft(le.comparator);function Ke(...t){let e=VZ;for(const n of t)e=e.add(n);return e}const FZ=new Ft($e);function KT(){return FZ}function BV(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rp(e)?"-0":e}}function $V(t){return{integerValue:""+t}}function jV(t,e){return nV(e)?$V(e):BV(t,e)}class Fy{constructor(){this._=void 0}}function LZ(t,e,n){return t instanceof Zl?function(i,o){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Ry(o)&&(o=Py(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(n,e):t instanceof Pu?zV(t,e):t instanceof Mu?WV(t,e):function(i,o){const s=HV(i,o),a=qV(s)+qV(i.Ie);return jT(s)&&jT(i.Ie)?$V(a):BV(i.serializer,a)}(t,e)}function UZ(t,e,n){return t instanceof Pu?zV(t,e):t instanceof Mu?WV(t,e):n}function HV(t,e){return t instanceof Kl?jT(r=e)||(o=r)&&"doubleValue"in o?e:{integerValue:0}:null;var r,o}class Zl extends Fy{}class Pu extends Fy{constructor(e){super(),this.elements=e}}function zV(t,e){const n=GV(e);for(const r of t.elements)n.some(i=>zo(i,r))||n.push(r);return{arrayValue:{values:n}}}class Mu extends Fy{constructor(e){super(),this.elements=e}}function WV(t,e){let n=GV(e);for(const r of t.elements)n=n.filter(i=>!zo(i,r));return{arrayValue:{values:n}}}class Kl extends Fy{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function qV(t){return wn(t.integerValue||t.doubleValue)}function GV(t){return sp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class pp{constructor(e,n){this.field=e,this.transform=n}}class $Z{constructor(e,n){this.version=e,this.transformResults=n}}class un{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new un}static exists(e){return new un(void 0,e)}static updateTime(e){return new un(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ly(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class Uy{}function ZV(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new Yl(t.key,un.none()):new Ql(t.key,t.data,un.none());{const n=t.data,r=mr.empty();let i=new Ft(tn.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);null===s&&o.length>1&&(o=o.popLast(),s=n.field(o)),null===s?r.delete(o):r.set(o,s),i=i.add(o)}return new Rs(t.key,r,new ui(i.toArray()),un.none())}}function jZ(t,e,n){t instanceof Ql?function(i,o,s){const a=i.value.clone(),u=YV(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Rs?function(i,o,s){if(!Ly(i.precondition,o))return void o.convertToUnknownDocument(s.version);const a=YV(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(QV(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(t,e,n):e.convertToNoDocument(n.version).setHasCommittedMutations()}function gp(t,e,n,r){return t instanceof Ql?function(o,s,a,u){if(!Ly(o.precondition,s))return a;const l=o.value.clone(),h=JV(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof Rs?function(o,s,a,u){if(!Ly(o.precondition,s))return a;const l=JV(o.fieldTransforms,u,s),h=s.data;return h.setAll(QV(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),null===a?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(g=>g.field))}(t,e,n,r):(a=n,Ly(t.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a);var s,a}function HZ(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),o=HV(r.transform,i||null);null!=o&&(null===n&&(n=mr.empty()),n.set(r.field,o))}return n||null}function KV(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=t.fieldTransforms)&&void 0===i||r&&i&&Ul(r,i,(o,s)=>function BZ(t,e){return t.field.isEqual(e.field)&&(i=e.transform,(r=t.transform)instanceof Pu&&i instanceof Pu||r instanceof Mu&&i instanceof Mu?Ul(r.elements,i.elements,zo):r instanceof Kl&&i instanceof Kl?zo(r.Ie,i.Ie):r instanceof Zl&&i instanceof Zl);var r,i}(o,s))))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask));var r,i}class Ql extends Uy{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Rs extends Uy{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function QV(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function YV(t,e,n){const r=new Map;be(t.length===n.length);for(let i=0;i<n.length;i++){const o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,UZ(s,a,n[i]))}return r}function JV(t,e,n){const r=new Map;for(const i of t){const o=i.transform,s=n.data.field(i.field);r.set(i.field,LZ(o,s,e))}return r}class Yl extends Uy{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class QT extends Uy{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class YT{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&jZ(o,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=gp(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=gp(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=UV();return this.mutations.forEach(i=>{const o=e.get(i.key),s=o.overlayedDocument;let a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;const u=ZV(s,a);null!==u&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(Se.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ke())}isEqual(e){return this.batchId===e.batchId&&Ul(this.mutations,e.mutations,(n,r)=>KV(n,r))&&Ul(this.baseMutations,e.baseMutations,(n,r)=>KV(n,r))}}class JT{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){be(e.mutations.length===r.length);let i=kZ;const o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new JT(e,n,r,i)}}class XT{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class WZ{constructor(e,n){this.count=e,this.unchangedNames=n}}var Fn,yt;function XV(t){switch(t){default:return ye();case B.CANCELLED:case B.UNKNOWN:case B.DEADLINE_EXCEEDED:case B.RESOURCE_EXHAUSTED:case B.INTERNAL:case B.UNAVAILABLE:case B.UNAUTHENTICATED:return!1;case B.INVALID_ARGUMENT:case B.NOT_FOUND:case B.ALREADY_EXISTS:case B.PERMISSION_DENIED:case B.FAILED_PRECONDITION:case B.ABORTED:case B.OUT_OF_RANGE:case B.UNIMPLEMENTED:case B.DATA_LOSS:return!0}}function eF(t){if(void 0===t)return xn("GRPC error has no .code"),B.UNKNOWN;switch(t){case Fn.OK:return B.OK;case Fn.CANCELLED:return B.CANCELLED;case Fn.UNKNOWN:return B.UNKNOWN;case Fn.DEADLINE_EXCEEDED:return B.DEADLINE_EXCEEDED;case Fn.RESOURCE_EXHAUSTED:return B.RESOURCE_EXHAUSTED;case Fn.INTERNAL:return B.INTERNAL;case Fn.UNAVAILABLE:return B.UNAVAILABLE;case Fn.UNAUTHENTICATED:return B.UNAUTHENTICATED;case Fn.INVALID_ARGUMENT:return B.INVALID_ARGUMENT;case Fn.NOT_FOUND:return B.NOT_FOUND;case Fn.ALREADY_EXISTS:return B.ALREADY_EXISTS;case Fn.PERMISSION_DENIED:return B.PERMISSION_DENIED;case Fn.FAILED_PRECONDITION:return B.FAILED_PRECONDITION;case Fn.ABORTED:return B.ABORTED;case Fn.OUT_OF_RANGE:return B.OUT_OF_RANGE;case Fn.UNIMPLEMENTED:return B.UNIMPLEMENTED;case Fn.DATA_LOSS:return B.DATA_LOSS;default:return ye()}}(yt=Fn||(Fn={}))[yt.OK=0]="OK",yt[yt.CANCELLED=1]="CANCELLED",yt[yt.UNKNOWN=2]="UNKNOWN",yt[yt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",yt[yt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",yt[yt.NOT_FOUND=5]="NOT_FOUND",yt[yt.ALREADY_EXISTS=6]="ALREADY_EXISTS",yt[yt.PERMISSION_DENIED=7]="PERMISSION_DENIED",yt[yt.UNAUTHENTICATED=16]="UNAUTHENTICATED",yt[yt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",yt[yt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",yt[yt.ABORTED=10]="ABORTED",yt[yt.OUT_OF_RANGE=11]="OUT_OF_RANGE",yt[yt.UNIMPLEMENTED=12]="UNIMPLEMENTED",yt[yt.INTERNAL=13]="INTERNAL",yt[yt.UNAVAILABLE=14]="UNAVAILABLE",yt[yt.DATA_LOSS=15]="DATA_LOSS";function tF(){return new TextEncoder}const qZ=new Vl([4294967295,4294967295],0);function nF(t){const e=tF().encode(t),n=new U7;return n.update(e),new Uint8Array(n.digest())}function rF(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Vl([n,r],0),new Vl([i,o],0)]}class eD{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new mp(`Invalid padding: ${n}`);if(r<0)throw new mp(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new mp(`Invalid hash count: ${r}`);if(0===e.length&&0!==n)throw new mp(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=Vl.fromNumber(this.Te)}de(e,n,r){let i=e.add(n.multiply(Vl.fromNumber(r)));return 1===i.compare(qZ)&&(i=new Vl([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const n=nF(e),[r,i]=rF(n);for(let o=0;o<this.hashCount;o++){const s=this.de(r,i,o);if(!this.Ae(s))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new eD(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(0===this.Te)return;const n=nF(e),[r,i]=rF(n);for(let o=0;o<this.hashCount;o++){const s=this.de(r,i,o);this.Re(s)}}Re(e){const n=Math.floor(e/8);this.bitmap[n]|=1<<e%8}}class mp extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class _p{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,yp.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new _p(Se.min(),i,new Wt($e),ci(),Ke())}}class yp{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new yp(r,n,Ke(),Ke(),Ke())}}class $y{constructor(e,n,r,i){this.Ve=e,this.removedTargetIds=n,this.key=r,this.me=i}}class iF{constructor(e,n){this.targetId=e,this.fe=n}}class oF{constructor(e,n,r=Zn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class sF{constructor(){this.ge=0,this.pe=uF(),this.ye=Zn.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=Ke(),n=Ke(),r=Ke();return this.pe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ye()}}),new yp(this.ye,this.we,e,n,r)}Fe(){this.Se=!1,this.pe=uF()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1}Be(){this.Se=!0,this.we=!0}}class GZ{constructor(e){this.Le=e,this.ke=new Map,this.qe=ci(),this.Qe=aF(),this.Ke=new Wt($e)}$e(e){for(const n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(const n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{const r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Be(),r.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(e.resumeToken));break;default:ye()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){const n=e.targetId,r=e.fe.count,i=this.Ye(n);if(i){const o=i.target;if(Oy(o))if(0===r){const s=new le(o.path);this.We(n,s,nn.newNoDocument(s,Se.min()))}else be(1===r);else{const s=this.Ze(n);if(s!==r){const a=this.Xe(e),u=a?this.et(a,e,s):1;0!==u&&(this.He(n),this.Ke=this.Ke.insert(n,2===u?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Xe(e){const n=e.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n;let s,a;try{s=As(r).toUint8Array()}catch(u){if(u instanceof hV)return ai("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new eD(s,i,o)}catch(u){return ai(u instanceof mp?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return 0===a.Te?null:a}et(e,n,r){return n.fe.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(o=>{const s=this.Le.nt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.We(n,o,null),i++)}),i}it(e){const n=new Map;this.ke.forEach((o,s)=>{const a=this.Ye(s);if(a){if(o.current&&Oy(a.target)){const u=new le(a.target.path);null!==this.qe.get(u)||this.st(s,u)||this.We(s,u,nn.newNoDocument(u,e))}o.De&&(n.set(s,o.ve()),o.Fe())}});let r=Ke();this.Qe.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{const l=this.Ye(u);return!l||"TargetPurposeLimboResolution"===l.purpose||(a=!1,!1)}),a&&(r=r.add(o))}),this.qe.forEach((o,s)=>s.setReadTime(e));const i=new _p(e,n,this.Ke,this.qe,r);return this.qe=ci(),this.Qe=aF(),this.Ke=new Wt($e),i}Ue(e,n){if(!this.je(e))return;const r=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,r){if(!this.je(e))return;const i=this.ze(e);this.st(e,n)?i.Me(n,1):i.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(e){this.ke.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new sF,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new Ft($e),this.Qe=this.Qe.insert(e,n)),n}je(e){const n=null!==this.Ye(e);return n||ne("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.ke.get(e);return n&&n.be?null:this.Le._t(e)}He(e){this.ke.set(e,new sF),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function aF(){return new Wt(le.comparator)}function uF(){return new Wt(le.comparator)}const ZZ={asc:"ASCENDING",desc:"DESCENDING"},KZ={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},QZ={and:"AND",or:"OR"};class YZ{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function tD(t,e){return t.useProto3Json||np(e)?e:{value:e}}function Jl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function cF(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function JZ(t,e){return Jl(t,e.toTimestamp())}function Nn(t){return be(!!t),Se.fromTimestamp(function(n){const r=Ea(n);return new an(r.seconds,r.nanos)}(t))}function nD(t,e){return(r=t,new _t(["projects",r.projectId,"databases",r.database])).child("documents").child(e).canonicalString();var r}function lF(t){const e=_t.fromString(t);return be(vF(e)),e}function vp(t,e){return nD(t.databaseId,e.path)}function qo(t,e){const n=lF(e);if(n.get(1)!==t.databaseId.projectId)throw new J(B.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new J(B.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new le(hF(n))}function rD(t,e){return nD(t.databaseId,e)}function dF(t){const e=lF(t);return 4===e.length?_t.emptyPath():hF(e)}function Ip(t){return new _t(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function hF(t){return be(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function fF(t,e,n){return{name:vp(t,e),fields:n.value.mapValue.fields}}function pF(t,e,n){const r=qo(t,e.name),i=Nn(e.updateTime),o=e.createTime?Nn(e.createTime):Se.min(),s=new mr({mapValue:{fields:e.fields}}),a=nn.newFoundDocument(r,i,o,s);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Ep(t,e){let n;if(e instanceof Ql)n={update:fF(t,e.key,e.value)};else if(e instanceof Yl)n={delete:vp(t,e.key)};else if(e instanceof Rs)n={update:fF(t,e.key,e.data),updateMask:sK(e.fieldMask)};else{if(!(e instanceof QT))return ye();n={verify:vp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){const a=s.transform;if(a instanceof Zl)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Pu)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Mu)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Kl)return{fieldPath:s.field.canonicalString(),increment:a.Ie};throw ye()}(0,r))),e.precondition.isNone||(n.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:JZ(t,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:ye()),n;var o}function iD(t,e){const n=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?un.updateTime(Nn(o.updateTime)):void 0!==o.exists?un.exists(o.exists):un.none():un.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let u=null;"setToServerValue"in a?(be("REQUEST_TIME"===a.setToServerValue),u=new Zl):"appendMissingElements"in a?u=new Pu(a.appendMissingElements.values||[]):"removeAllFromArray"in a?u=new Mu(a.removeAllFromArray.values||[]):"increment"in a?u=new Kl(s,a.increment):ye();const l=tn.fromServerFormat(a.fieldPath);return new pp(l,u)}(t,i)):[];var o;if(e.update){const i=qo(t,e.update.name),o=new mr({mapValue:{fields:e.update.fields}});if(e.updateMask){const s=new ui((e.updateMask.fieldPaths||[]).map(h=>tn.fromServerFormat(h)));return new Rs(i,o,s,n,r)}return new Ql(i,o,n,r)}if(e.delete){const i=qo(t,e.delete);return new Yl(i,n)}if(e.verify){const i=qo(t,e.verify);return new QT(i,n)}return ye()}function gF(t,e){return{documents:[rD(t,e.path)]}}function oD(t,e){const n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=rD(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=rD(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(u){if(0!==u.length)return yF(Nt.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(u){if(0!==u.length)return u.map(l=>{return{field:ba((g=l).field),direction:rK(g.dir)};var g})}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const s=tD(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt={before:(u=e.startAt).inclusive,values:u.position}),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),n;var u}function mF(t){let e=dF(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){be(1===r);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];n.where&&(o=function(g){const m=_F(g);return m instanceof Nt&&zT(m)?m.getFilters():[m]}(n.where));let s=[];n.orderBy&&(s=n.orderBy.map(m=>{return new up(Xl((T=m).field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction));var T}));let a=null;n.limit&&(a=function(g){let m;return m="object"==typeof g?g.value:g,np(m)?null:m}(n.limit));let u=null;var g;n.startAt&&(u=new Aa((g=n.startAt).values||[],!!g.before));let l=null;return n.endAt&&(l=function(g){return new Aa(g.values||[],!g.before)}(n.endAt)),MV(e,i,s,o,a,"F",u,l)}function _F(t){return void 0!==t.unaryFilter?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Xl(n.unaryFilter.field);return ht.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Xl(n.unaryFilter.field);return ht.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Xl(n.unaryFilter.field);return ht.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Xl(n.unaryFilter.field);return ht.create(s,"!=",{nullValue:"NULL_VALUE"});default:return ye()}}(t):void 0!==t.fieldFilter?ht.create(Xl((n=t).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ye()}}(n.fieldFilter.op),n.fieldFilter.value):void 0!==t.compositeFilter?function(n){return Nt.create(n.compositeFilter.filters.map(r=>_F(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ye()}}(n.compositeFilter.op))}(t):ye();var n}function rK(t){return ZZ[t]}function iK(t){return KZ[t]}function oK(t){return QZ[t]}function ba(t){return{fieldPath:t.canonicalString()}}function Xl(t){return tn.fromServerFormat(t.fieldPath)}function yF(t){return t instanceof ht?function(n){if("=="===n.op){if(gV(n.value))return{unaryFilter:{field:ba(n.field),op:"IS_NAN"}};if(pV(n.value))return{unaryFilter:{field:ba(n.field),op:"IS_NULL"}}}else if("!="===n.op){if(gV(n.value))return{unaryFilter:{field:ba(n.field),op:"IS_NOT_NAN"}};if(pV(n.value))return{unaryFilter:{field:ba(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ba(n.field),op:iK(n.op),value:n.value}}}(t):t instanceof Nt?function(n){const r=n.getFilters().map(i=>yF(i));return 1===r.length?r[0]:{compositeFilter:{op:oK(n.op),filters:r}}}(t):ye()}function sK(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function vF(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}class Ps{constructor(e,n,r,i,o=Se.min(),s=Se.min(),a=Zn.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new Ps(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ps(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ps(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ps(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class IF{constructor(e){this.ut=e}}function EF(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:jy(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:vp(o=t.ut,(s=e).key),fields:s.data.value.mapValue.fields,updateTime:Jl(o,s.version.toTimestamp()),createTime:Jl(o,s.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:xu(e.version)};else{if(!e.isUnknownDocument())return ye();r.unknownDocument={path:n.path.toArray(),version:xu(e.version)}}var o,s;return r}function jy(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function xu(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Nu(t){const e=new an(t.seconds,t.nanoseconds);return Se.fromTimestamp(e)}function Ou(t,e){const n=(e.baseMutations||[]).map(o=>iD(t.ut,o));for(let o=0;o<e.mutations.length-1;++o)o+1<e.mutations.length&&void 0!==e.mutations[o+1].transform&&(e.mutations[o].updateTransforms=e.mutations[o+1].transform.fieldTransforms,e.mutations.splice(o+1,1),++o);const r=e.mutations.map(o=>iD(t.ut,o)),i=an.fromMillis(e.localWriteTimeMs);return new YT(e.batchId,i,n,r)}function wp(t){const e=Nu(t.readTime),n=void 0!==t.lastLimboFreeSnapshotVersion?Nu(t.lastLimboFreeSnapshotVersion):Se.min();let r;return r=void 0!==t.query.documents?(be(1===(o=t.query).documents.length),Yr(Wl(dF(o.documents[0])))):function(o){return Yr(mF(o))}(t.query),new Ps(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Zn.fromBase64String(t.resumeToken));var o}function wF(t,e){const n=xu(e.snapshotVersion),r=xu(e.lastLimboFreeSnapshotVersion);let i;i=Oy(e.target)?gF(t.ut,e.target):oD(t.ut,e.target);const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ru(e.target),readTime:n,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function sD(t){const e=mF({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Vy(e,e.limit,"L"):e}function aD(t,e){return new XT(e.largestBatchId,iD(t.ut,e.overlayMutation))}function CF(t,e){const n=e.path.lastSegment();return[t,br(e.path.popLast()),n]}function TF(t,e,n,r){return{indexId:t,uid:e.uid||"",sequenceNumber:n,readTime:xu(r.readTime),documentKey:br(r.documentKey.path),largestBatchId:r.largestBatchId}}class uK{getBundleMetadata(e,n){return DF(e).get(n).next(r=>{if(r)return{id:(o=r).bundleId,createTime:Nu(o.createTime),version:o.version};var o})}saveBundleMetadata(e,n){return DF(e).put({bundleId:(i=n).id,createTime:xu(Nn(i.createTime)),version:i.version});var i}getNamedQuery(e,n){return AF(e).get(n).next(r=>{if(r)return{name:(o=r).name,query:sD(o.bundledQuery),readTime:Nu(o.readTime)};var o})}saveNamedQuery(e,n){return AF(e).put({name:(i=n).name,readTime:xu(Nn(i.readTime)),bundledQuery:i.bundledQuery});var i}}function DF(t){return or(t,"bundles")}function AF(t){return or(t,"namedQueries")}class Hy{constructor(e,n){this.serializer=e,this.userId=n}static ct(e,n){return new Hy(e,n.uid||"")}getOverlay(e,n){return Cp(e).get(CF(this.userId,n)).next(r=>r?aD(this.serializer,r):null)}getOverlays(e,n){const r=Wo();return O.forEach(n,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((o,s)=>{const a=new XT(n,s);i.push(this.lt(e,a))}),O.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(s=>i.add(br(s.getCollectionPath())));const o=[];return i.forEach(s=>{const a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(Cp(e).H("collectionPathOverlayIndex",a))}),O.waitFor(o)}getOverlaysForCollection(e,n,r){const i=Wo(),o=br(n),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Cp(e).W("collectionPathOverlayIndex",s).next(a=>{for(const u of a){const l=aD(this.serializer,u);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const o=Wo();let s;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Cp(e).Y({index:"collectionGroupOverlayIndex",range:a},(u,l,h)=>{const g=aD(this.serializer,l);o.size()<i||g.largestBatchId===s?(o.set(g.getKey(),g),s=g.largestBatchId):h.done()}).next(()=>o)}lt(e,n){return Cp(e).put(function(i,o,s){const[a,u,l]=CF(o,s.mutation.key);return{userId:o,collectionPath:u,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Ep(i.ut,s.mutation)}}(this.serializer,this.userId,n))}}function Cp(t){return or(t,"documentOverlays")}class ku{constructor(){}ht(e,n){this.Pt(e,n),n.It()}Pt(e,n){if("nullValue"in e)this.Tt(n,5);else if("booleanValue"in e)this.Tt(n,10),n.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(n,15),n.Et(wn(e.integerValue));else if("doubleValue"in e){const r=wn(e.doubleValue);isNaN(r)?this.Tt(n,13):(this.Tt(n,15),rp(r)?n.Et(0):n.Et(r))}else if("timestampValue"in e){const r=e.timestampValue;this.Tt(n,20),"string"==typeof r?n.dt(r):(n.dt(`${r.seconds||""}`),n.Et(r.nanos||0))}else if("stringValue"in e)this.At(e.stringValue,n),this.Rt(n);else if("bytesValue"in e)this.Tt(n,30),n.Vt(As(e.bytesValue)),this.Rt(n);else if("referenceValue"in e)this.ft(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Tt(n,45),n.Et(r.latitude||0),n.Et(r.longitude||0)}else"mapValue"in e?mV(e)?this.Tt(n,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,n),this.Rt(n)):"arrayValue"in e?(this.yt(e.arrayValue,n),this.Rt(n)):ye()}At(e,n){this.Tt(n,25),this.wt(e,n)}wt(e,n){n.dt(e)}gt(e,n){const r=e.fields||{};this.Tt(n,55);for(const i of Object.keys(r))this.At(i,n),this.Pt(r[i],n)}yt(e,n){const r=e.values||[];this.Tt(n,50);for(const i of r)this.Pt(i,n)}ft(e,n){this.Tt(n,37),le.fromName(e).path.forEach(r=>{this.Tt(n,60),this.wt(r,n)})}Tt(e,n){e.Et(n)}Rt(e){e.Et(2)}}function cK(t){if(0===t)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function bF(t){const e=64-function(r){let i=0;for(let o=0;o<8;++o){const s=cK(255&r[o]);if(i+=s,8!==s)break}return i}(t);return Math.ceil(e/8)}ku.St=new ku;class lK{constructor(){this.buffer=new Uint8Array(1024),this.position=0}bt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Dt(r.value),r=n.next();this.Ct()}vt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ft(r.value),r=n.next();this.Mt()}xt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Dt(r);else if(r<2048)this.Dt(960|r>>>6),this.Dt(128|63&r);else if(n<"\ud800"||"\udbff"<n)this.Dt(480|r>>>12),this.Dt(128|63&r>>>6),this.Dt(128|63&r);else{const i=n.codePointAt(0);this.Dt(240|i>>>18),this.Dt(128|63&i>>>12),this.Dt(128|63&i>>>6),this.Dt(128|63&i)}}this.Ct()}Ot(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(n<"\ud800"||"\udbff"<n)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const i=n.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Nt(e){const n=this.Bt(e),r=bF(n);this.Lt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}kt(e){const n=this.Bt(e),r=bF(n);this.Lt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}qt(){this.Qt(255),this.Qt(255)}Kt(){this.$t(255),this.$t(255)}reset(){this.position=0}seed(e){this.Lt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ut(){return this.buffer.slice(0,this.position)}Bt(e){const n=function(o){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=0!=(128&n[0]);n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Dt(e){const n=255&e;0===n?(this.Qt(0),this.Qt(255)):255===n?(this.Qt(255),this.Qt(0)):this.Qt(n)}Ft(e){const n=255&e;0===n?(this.$t(0),this.$t(255)):255===n?(this.$t(255),this.$t(0)):this.$t(e)}Ct(){this.Qt(0),this.Qt(1)}Mt(){this.$t(0),this.$t(1)}Qt(e){this.Lt(1),this.buffer[this.position++]=e}$t(e){this.Lt(1),this.buffer[this.position++]=~e}Lt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class dK{constructor(e){this.Wt=e}Vt(e){this.Wt.bt(e)}dt(e){this.Wt.xt(e)}Et(e){this.Wt.Nt(e)}It(){this.Wt.qt()}}class hK{constructor(e){this.Wt=e}Vt(e){this.Wt.vt(e)}dt(e){this.Wt.Ot(e)}Et(e){this.Wt.kt(e)}It(){this.Wt.Kt()}}class Tp{constructor(){this.Wt=new lK,this.Gt=new dK(this.Wt),this.zt=new hK(this.Wt)}seed(e){this.Wt.seed(e)}jt(e){return 0===e?this.Gt:this.zt}Ut(){return this.Wt.Ut()}reset(){this.Wt.reset()}}class Vu{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Ht(){const e=this.directionalValue.length,n=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Vu(this.indexId,this.documentKey,this.arrayValue,r)}}function Sa(t,e){let n=t.indexId-e.indexId;return 0!==n?n:(n=SF(t.arrayValue,e.arrayValue),0!==n?n:(n=SF(t.directionalValue,e.directionalValue),0!==n?n:le.comparator(t.documentKey,e.documentKey)))}function SF(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(0!==r)return r}return t.length-e.length}class RF{constructor(e){this.Jt=new Ft((n,r)=>tn.comparator(n.field,r.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Yt=e.orderBy,this.Zt=[];for(const n of e.filters){const r=n;r.isInequality()?this.Jt=this.Jt.add(r):this.Zt.push(r)}}get Xt(){return this.Jt.size>1}en(e){if(be(e.collectionGroup===this.collectionId),this.Xt)return!1;const n=VT(e);if(void 0!==n&&!this.tn(n))return!1;const r=Du(e);let i=new Set,o=0,s=0;for(;o<r.length&&this.tn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Jt.size>0){const a=this.Jt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const u=r[o];if(!this.nn(a,u)||!this.rn(this.Yt[s++],u))return!1}++o}for(;o<r.length;++o)if(s>=this.Yt.length||!this.rn(this.Yt[s++],r[o]))return!1;return!0}sn(){if(this.Xt)return null;let e=new Ft(tn.comparator);const n=[];for(const r of this.Zt)if(!r.field.isKeyField())if("array-contains"===r.op||"array-contains-any"===r.op)n.push(new Au(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Au(r.field,0))}for(const r of this.Yt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Au(r.field,"asc"===r.dir?0:1)));return new Bl(Bl.UNKNOWN_ID,this.collectionId,n,$l.empty())}tn(e){for(const n of this.Zt)if(this.nn(n,e))return!0;return!1}nn(e,n){return!(void 0===e||!e.field.isEqual(n.fieldPath))&&2===n.kind==("array-contains"===e.op||"array-contains-any"===e.op)}rn(e,n){return!!e.field.isEqual(n.fieldPath)&&(0===n.kind&&"asc"===e.dir||1===n.kind&&"desc"===e.dir)}}function PF(t){var e,n;if(be(t instanceof ht||t instanceof Nt),t instanceof ht){if(t instanceof SV){const i=(null===(n=null===(e=t.value.arrayValue)||void 0===e?void 0:e.values)||void 0===n?void 0:n.map(o=>ht.create(t.field,"==",o)))||[];return Nt.create(i,"or")}return t}const r=t.filters.map(i=>PF(i));return Nt.create(r,t.op)}function fK(t){if(0===t.getFilters().length)return[];const e=lD(PF(t));return be(MF(e)),uD(e)||cD(e)?[e]:e.getFilters()}function uD(t){return t instanceof ht}function cD(t){return t instanceof Nt&&zT(t)}function MF(t){return uD(t)||cD(t)||function(n){if(n instanceof Nt&&HT(n)){for(const r of n.getFilters())if(!uD(r)&&!cD(r))return!1;return!0}return!1}(t)}function lD(t){if(be(t instanceof ht||t instanceof Nt),t instanceof ht)return t;if(1===t.filters.length)return lD(t.filters[0]);const e=t.filters.map(r=>lD(r));let n=Nt.create(e,t.op);return n=zy(n),MF(n)?n:(be(n instanceof Nt),be(zl(n)),be(n.filters.length>1),n.filters.reduce((r,i)=>dD(r,i)))}function dD(t,e){let n;return be(t instanceof ht||t instanceof Nt),be(e instanceof ht||e instanceof Nt),n=t instanceof ht?e instanceof ht?Nt.create([t,e],"and"):xF(t,e):e instanceof ht?xF(e,t):function(i,o){if(be(i.filters.length>0&&o.filters.length>0),zl(i)&&zl(o))return DV(i,o.getFilters());const s=HT(i)?i:o,a=HT(i)?o:i,u=s.filters.map(l=>dD(l,a));return Nt.create(u,"or")}(t,e),zy(n)}function xF(t,e){if(zl(e))return DV(e,t.getFilters());{const n=e.filters.map(r=>dD(t,r));return Nt.create(n,"or")}}function zy(t){if(be(t instanceof ht||t instanceof Nt),t instanceof ht)return t;const e=t.getFilters();if(1===e.length)return zy(e[0]);if(CV(t))return t;const n=e.map(i=>zy(i)),r=[];return n.forEach(i=>{i instanceof ht?r.push(i):i instanceof Nt&&(i.op===t.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:Nt.create(r,t.op)}class pK{constructor(){this.on=new hD}addToCollectionParentIndex(e,n){return this.on.add(n),O.resolve()}getCollectionParents(e,n){return O.resolve(this.on.getEntries(n))}addFieldIndex(e,n){return O.resolve()}deleteFieldIndex(e,n){return O.resolve()}deleteAllFieldIndexes(e){return O.resolve()}createTargetIndexes(e,n){return O.resolve()}getDocumentsMatchingTarget(e,n){return O.resolve(null)}getIndexType(e,n){return O.resolve(0)}getFieldIndexes(e,n){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,n){return O.resolve(bi.min())}getMinOffsetFromCollectionGroup(e,n){return O.resolve(bi.min())}updateCollectionGroup(e,n,r){return O.resolve()}updateIndexEntries(e,n){return O.resolve()}}class hD{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ft(_t.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ft(_t.comparator)).toArray()}}const Wy=new Uint8Array(0);class gK{constructor(e,n){this.user=e,this.databaseId=n,this._n=new hD,this.an=new Ss(r=>Ru(r),(r,i)=>cp(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this._n.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this._n.add(n)});const o={collectionId:r,parent:br(i)};return NF(e).put(o)}return O.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[Qk(n),""],!1,!0);return NF(e).W(i).next(o=>{for(const s of o){if(s.collectionId!==n)break;r.push(Ho(s.parent))}return r})}addFieldIndex(e,n){const r=Dp(e),i={indexId:(a=n).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])};var a;delete i.indexId;const o=r.add(i);if(n.indexState){const s=td(e);return o.next(a=>{s.put(TF(a,this.user,n.indexState.sequenceNumber,n.indexState.offset))})}return o.next()}deleteFieldIndex(e,n){const r=Dp(e),i=td(e),o=ed(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=Dp(e),r=ed(e),i=td(e);return n.H().next(()=>r.H()).next(()=>i.H())}createTargetIndexes(e,n){return O.forEach(this.un(n),r=>this.getIndexType(e,r).next(i=>{if(0===i||1===i){const o=new RF(r).sn();if(null!=o)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,n){const r=ed(e);let i=!0;const o=new Map;return O.forEach(this.un(n),s=>this.cn(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=Ke();const a=[];return O.forEach(o,(u,l)=>{var z;ne("IndexedDbIndexManager",`Using index ${z=u,`id=${z.indexId}|cg=${z.collectionGroup}|f=${z.fields.map(oe=>`${oe.fieldPath}:${oe.kind}`).join(",")}`} to execute ${Ru(n)}`);const h=function(z,oe){const de=VT(oe);if(void 0===de)return null;for(const Be of ky(z,de.fieldPath))switch(Be.op){case"array-contains-any":return Be.value.arrayValue.values||[];case"array-contains":return[Be.value]}return null}(l,u),g=function(z,oe){const de=new Map;for(const Be of Du(oe))for(const bt of ky(z,Be.fieldPath))switch(bt.op){case"==":case"in":de.set(Be.fieldPath.canonicalString(),bt.value);break;case"not-in":case"!=":return de.set(Be.fieldPath.canonicalString(),bt.value),Array.from(de.values())}return null}(l,u),m=function(z,oe){const de=[];let Be=!0;for(const bt of Du(oe)){const yr=0===bt.kind?RV(z,bt.fieldPath,z.startAt):PV(z,bt.fieldPath,z.startAt);de.push(yr.value),Be&&(Be=yr.inclusive)}return new Aa(de,Be)}(l,u),y=function(z,oe){const de=[];let Be=!0;for(const bt of Du(oe)){const yr=0===bt.kind?PV(z,bt.fieldPath,z.endAt):RV(z,bt.fieldPath,z.endAt);de.push(yr.value),Be&&(Be=yr.inclusive)}return new Aa(de,Be)}(l,u),T=this.ln(u,l,m),b=this.ln(u,l,y),M=this.hn(u,l,g),U=this.Pn(u.indexId,h,T,m.inclusive,b,y.inclusive,M);return O.forEach(U,x=>r.j(x,n.limit).next(z=>{z.forEach(oe=>{const de=le.fromSegments(oe.documentKey);s.has(de)||(s=s.add(de),a.push(de))})}))}).next(()=>a)}return O.resolve(null)})}un(e){let n=this.an.get(e);return n||(n=0===e.filters.length?[e]:fK(Nt.create(e.filters,"and")).map(r=>qT(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.an.set(e,n),n)}Pn(e,n,r,i,o,s,a){const u=(null!=n?n.length:1)*Math.max(r.length,o.length),l=u/(null!=n?n.length:1),h=[];for(let g=0;g<u;++g){const m=n?this.In(n[g/l]):Wy,y=this.Tn(e,m,r[g%l],i),T=this.En(e,m,o[g%l],s),b=a.map(M=>this.Tn(e,m,M,!0));h.push(...this.createRange(y,T,b))}return h}Tn(e,n,r,i){const o=new Vu(e,le.empty(),n,r);return i?o:o.Ht()}En(e,n,r,i){const o=new Vu(e,le.empty(),n,r);return i?o.Ht():o}cn(e,n){const r=new RF(n),i=null!=n.collectionGroup?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(const a of o)r.en(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,n){let r=2;const i=this.un(n);return O.forEach(i,o=>this.cn(e,o).next(s=>{s?0!==r&&s.fields.length<function(u){let l=new Ft(tn.comparator),h=!1;for(const g of u.filters)for(const m of g.getFlattenedFilters())m.field.isKeyField()||("array-contains"===m.op||"array-contains-any"===m.op?h=!0:l=l.add(m.field));for(const g of u.orderBy)g.field.isKeyField()||(l=l.add(g.field));return l.size+(h?1:0)}(o)&&(r=1):r=0})).next(()=>null!==n.limit&&i.length>1&&2===r?1:r)}dn(e,n){const r=new Tp;for(const i of Du(e)){const o=n.data.field(i.fieldPath);if(null==o)return null;const s=r.jt(i.kind);ku.St.ht(o,s)}return r.Ut()}In(e){const n=new Tp;return ku.St.ht(e,n.jt(0)),n.Ut()}An(e,n){const r=new Tp;return ku.St.ht(Su(this.databaseId,n),r.jt(function(o){const s=Du(o);return 0===s.length?0:s[s.length-1].kind}(e))),r.Ut()}hn(e,n,r){if(null===r)return[];let i=[];i.push(new Tp);let o=0;for(const s of Du(e)){const a=r[o++];for(const u of i)if(this.Rn(n,s.fieldPath)&&sp(a))i=this.Vn(i,s,a);else{const l=u.jt(s.kind);ku.St.ht(a,l)}}return this.mn(i)}ln(e,n,r){return this.hn(e,n,r.position)}mn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Ut();return n}Vn(e,n,r){const i=[...e],o=[];for(const s of r.arrayValue.values||[])for(const a of i){const u=new Tp;u.seed(a.Ut()),ku.St.ht(s,u.jt(n.kind)),o.push(u)}return o}Rn(e,n){return!!e.filters.find(r=>r instanceof ht&&r.field.isEqual(n)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,n){const r=Dp(e),i=td(e);return(n?r.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.W()).next(o=>{const s=[];return O.forEach(o,a=>i.get([a.indexId,this.uid]).next(u=>{s.push(function(h,g){const m=g?new $l(g.sequenceNumber,new bi(Nu(g.readTime),new le(Ho(g.documentKey)),g.largestBatchId)):$l.empty(),y=h.fields.map(([T,b])=>new Au(tn.fromServerFormat(T),b));return new Bl(h.indexId,h.collectionGroup,y,m)}(a,u))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>0===n.length?null:(n.sort((r,i)=>{const o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==o?o:$e(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=Dp(e),o=td(e);return this.fn(e).next(s=>i.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>O.forEach(a,u=>o.put(TF(u.indexId,this.user,s,r)))))}updateIndexEntries(e,n){const r=new Map;return O.forEach(n,(i,o)=>{const s=r.get(i.collectionGroup);return(s?O.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),O.forEach(a,u=>this.gn(e,i,u).next(l=>{const h=this.pn(o,u);return l.isEqual(h)?O.resolve():this.yn(e,o,u,l,h)}))))})}wn(e,n,r,i){return ed(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.An(r,n.key),documentKey:n.key.path.toArray()})}Sn(e,n,r,i){return ed(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.An(r,n.key),n.key.path.toArray()])}gn(e,n,r){const i=ed(e);let o=new Ft(Sa);return i.Y({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.An(r,n)])},(s,a)=>{o=o.add(new Vu(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>o)}pn(e,n){let r=new Ft(Sa);const i=this.dn(n,e);if(null==i)return r;const o=VT(n);if(null!=o){const s=e.data.field(o.fieldPath);if(sp(s))for(const a of s.arrayValue.values||[])r=r.add(new Vu(n.indexId,e.key,this.In(a),i))}else r=r.add(new Vu(n.indexId,e.key,Wy,i));return r}yn(e,n,r,i,o){ne("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const s=[];return function(u,l,h,g,m){const y=u.getIterator(),T=l.getIterator();let b=jl(y),M=jl(T);for(;b||M;){let U=!1,x=!1;if(b&&M){const z=h(b,M);z<0?x=!0:z>0&&(U=!0)}else null!=b?x=!0:U=!0;U?(g(M),M=jl(T)):x?(m(b),b=jl(y)):(b=jl(y),M=jl(T))}}(i,o,Sa,a=>{s.push(this.wn(e,n,r,a))},a=>{s.push(this.Sn(e,n,r,a))}),O.waitFor(s)}fn(e){let n=1;return td(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((s,a)=>Sa(s,a)).filter((s,a,u)=>!a||0!==Sa(s,u[a-1]));const i=[];i.push(e);for(const s of r){const a=Sa(s,e),u=Sa(s,n);if(0===a)i[0]=e.Ht();else if(a>0&&u<0)i.push(s),i.push(s.Ht());else if(u>0)break}i.push(n);const o=[];for(let s=0;s<i.length;s+=2){if(this.bn(i[s],i[s+1]))return[];o.push(IDBKeyRange.bound([i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,Wy,[]],[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,Wy,[]]))}return o}bn(e,n){return Sa(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(OF)}getMinOffset(e,n){return O.mapArray(this.un(n),r=>this.cn(e,r).next(i=>i||ye())).next(OF)}}function NF(t){return or(t,"collectionParents")}function ed(t){return or(t,"indexEntries")}function Dp(t){return or(t,"indexConfiguration")}function td(t){return or(t,"indexState")}function OF(t){be(0!==t.length);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;FT(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new bi(e.readTime,e.documentKey,n)}const kF={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Sr{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Sr(e,Sr.DEFAULT_COLLECTION_PERCENTILE,Sr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function VF(t,e,n){const r=t.store("mutations"),i=t.store("documentMutations"),o=[],s=IDBKeyRange.only(n.batchId);let a=0;const u=r.Y({range:s},(h,g,m)=>(a++,m.delete()));o.push(u.next(()=>{be(1===a)}));const l=[];for(const h of n.mutations){const g=oV(e,h.key.path,n.batchId);o.push(i.delete(g)),l.push(h.key)}return O.waitFor(o).next(()=>l)}function qy(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw ye();e=t.noDocument}return JSON.stringify(e).length}Sr.DEFAULT_COLLECTION_PERCENTILE=10,Sr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Sr.DEFAULT=new Sr(41943040,Sr.DEFAULT_COLLECTION_PERCENTILE,Sr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Sr.DISABLED=new Sr(-1,0,0);class Gy{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Dn={}}static ct(e,n,r,i){be(""!==e.uid);const o=e.isAuthenticated()?e.uid:"";return new Gy(o,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ra(e).Y({index:"userMutationsIndex",range:r},(i,o,s)=>{n=!1,s.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const o=nd(e),s=Ra(e);return s.add({}).next(a=>{be("number"==typeof a);const u=new YT(a,n,r,i),l=function(y,T,b){const M=b.baseMutations.map(x=>Ep(y.ut,x)),U=b.mutations.map(x=>Ep(y.ut,x));return{userId:T,batchId:b.batchId,localWriteTimeMs:b.localWriteTime.toMillis(),baseMutations:M,mutations:U}}(this.serializer,this.userId,u),h=[];let g=new Ft((m,y)=>$e(m.canonicalString(),y.canonicalString()));for(const m of i){const y=oV(this.userId,m.key.path,a);g=g.add(m.key.path.popLast()),h.push(s.put(l)),h.push(o.put(y,rZ))}return g.forEach(m=>{h.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Dn[a]=u.keys()}),O.waitFor(h).next(()=>u)})}lookupMutationBatch(e,n){return Ra(e).get(n).next(r=>r?(be(r.userId===this.userId),Ou(this.serializer,r)):null)}Cn(e,n){return this.Dn[n]?O.resolve(this.Dn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.Dn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let o=null;return Ra(e).Y({index:"userMutationsIndex",range:i},(s,a,u)=>{a.userId===this.userId&&(be(a.batchId>=r),o=Ou(this.serializer,a)),u.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Ra(e).Y({index:"userMutationsIndex",range:n,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ra(e).W("userMutationsIndex",n).next(r=>r.map(i=>Ou(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=by(this.userId,n.path),i=IDBKeyRange.lowerBound(r),o=[];return nd(e).Y({range:i},(s,a,u)=>{const[l,h,g]=s,m=Ho(h);if(l===this.userId&&n.path.isEqual(m))return Ra(e).get(g).next(y=>{if(!y)throw ye();be(y.userId===this.userId),o.push(Ou(this.serializer,y))});u.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ft($e);const i=[];return n.forEach(o=>{const s=by(this.userId,o.path),a=IDBKeyRange.lowerBound(s),u=nd(e).Y({range:a},(l,h,g)=>{const[m,y,T]=l,b=Ho(y);m===this.userId&&o.path.isEqual(b)?r=r.add(T):g.done()});i.push(u)}),O.waitFor(i).next(()=>this.vn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,o=by(this.userId,r),s=IDBKeyRange.lowerBound(o);let a=new Ft($e);return nd(e).Y({range:s},(u,l,h)=>{const[g,m,y]=u,T=Ho(m);g===this.userId&&r.isPrefixOf(T)?T.length===i&&(a=a.add(y)):h.done()}).next(()=>this.vn(e,a))}vn(e,n){const r=[],i=[];return n.forEach(o=>{i.push(Ra(e).get(o).next(s=>{if(null===s)throw ye();be(s.userId===this.userId),r.push(Ou(this.serializer,s))}))}),O.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return VF(e.ae,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.Fn(n.batchId)}),O.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Fn(e){delete this.Dn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return O.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return nd(e).Y({range:r},(o,s,a)=>{if(o[0]===this.userId){const u=Ho(o[1]);i.push(u)}else a.done()}).next(()=>{be(0===i.length)})})}containsKey(e,n){return FF(e,this.userId,n)}Mn(e){return LF(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function FF(t,e,n){const r=by(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r);let s=!1;return nd(t).Y({range:o,J:!0},(a,u,l)=>{const[h,g,m]=a;h===e&&g===i&&(s=!0),l.done()}).next(()=>s)}function Ra(t){return or(t,"mutations")}function nd(t){return or(t,"documentMutations")}function LF(t){return or(t,"mutationQueues")}class Fu{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new Fu(0)}static Nn(){return new Fu(-1)}}class mK{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Bn(e).next(n=>{const r=new Fu(n.highestTargetId);return n.highestTargetId=r.next(),this.Ln(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(n=>Se.fromTimestamp(new an(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.Bn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.Ln(e,i)))}addTargetData(e,n){return this.kn(e,n).next(()=>this.Bn(e).next(r=>(r.targetCount+=1,this.qn(n,r),this.Ln(e,r))))}updateTargetData(e,n){return this.kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>rd(e).delete(n.targetId)).next(()=>this.Bn(e)).next(r=>(be(r.targetCount>0),r.targetCount-=1,this.Ln(e,r)))}removeTargets(e,n,r){let i=0;const o=[];return rd(e).Y((s,a)=>{const u=wp(a);u.sequenceNumber<=n&&null===r.get(u.targetId)&&(i++,o.push(this.removeTargetData(e,u)))}).next(()=>O.waitFor(o)).next(()=>i)}forEachTarget(e,n){return rd(e).Y((r,i)=>{const o=wp(i);n(o)})}Bn(e){return UF(e).get("targetGlobalKey").next(n=>(be(null!==n),n))}Ln(e,n){return UF(e).put("targetGlobalKey",n)}kn(e,n){return rd(e).put(wF(this.serializer,n))}qn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Bn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=Ru(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let o=null;return rd(e).Y({range:i,index:"queryTargetsIndex"},(s,a,u)=>{const l=wp(a);cp(n,l.target)&&(o=l,u.done())}).next(()=>o)}addMatchingKeys(e,n,r){const i=[],o=Pa(e);return n.forEach(s=>{const a=br(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),O.waitFor(i)}removeMatchingKeys(e,n,r){const i=Pa(e);return O.forEach(n,o=>{const s=br(o.path);return O.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,n){const r=Pa(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Pa(e);let o=Ke();return i.Y({range:r,J:!0},(s,a,u)=>{const l=Ho(s[1]),h=new le(l);o=o.add(h)}).next(()=>o)}containsKey(e,n){const r=br(n.path),i=IDBKeyRange.bound([r],[Qk(r)],!1,!0);let o=0;return Pa(e).Y({index:"documentTargetsIndex",J:!0,range:i},([s,a],u,l)=>{0!==s&&(o++,l.done())}).next(()=>o>0)}_t(e,n){return rd(e).get(n).next(r=>r?wp(r):null)}}function rd(t){return or(t,"targets")}function UF(t){return or(t,"targetGlobal")}function Pa(t){return or(t,"targetDocuments")}function BF([t,e],[n,r]){const i=$e(t,n);return 0===i?$e(e,r):i}class _K{constructor(e){this.Qn=e,this.buffer=new Ft(BF),this.Kn=0}$n(){return++this.Kn}Un(e){const n=[e,this.$n()];if(this.buffer.size<this.Qn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();BF(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class $F{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Wn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Gn(6e4)}stop(){this.Wn&&(this.Wn.cancel(),this.Wn=null)}get started(){return null!==this.Wn}Gn(e){var n=this;ne("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Wn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,G.Z)(function*(){n.Wn=null;try{yield n.localStore.collectGarbage(n.garbageCollector)}catch(r){va(r)?ne("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield ya(r)}yield n.Gn(3e5)}))}}class yK{constructor(e,n){this.zn=e,this.params=n}calculateTargetCount(e,n){return this.zn.jn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(0===n)return O.resolve(Si._e);const r=new _K(n);return this.zn.forEachTarget(e,i=>r.Un(i.sequenceNumber)).next(()=>this.zn.Hn(e,i=>r.Un(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.zn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.zn.removeOrphanedDocuments(e,n)}collect(e,n){return-1===this.params.cacheSizeCollectionThreshold?(ne("LruGarbageCollector","Garbage collection skipped; disabled"),O.resolve(kF)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ne("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),kF):this.Jn(e,n))}getCacheSize(e){return this.zn.getCacheSize(e)}Jn(e,n){let r,i,o,s,a,u,l;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(ne("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,s=Date.now(),this.nthSequenceNumber(e,i))).next(g=>(r=g,a=Date.now(),this.removeTargets(e,r,n))).next(g=>(o=g,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(g=>(l=Date.now(),Ll()<=Uo.in.DEBUG&&ne("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-h}ms\n\tDetermined least recently used ${i} in `+(a-s)+`ms\n\tRemoved ${o} targets in `+(u-a)+`ms\n\tRemoved ${g} documents in `+(l-u)+`ms\nTotal Duration: ${l-h}ms`),O.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:g})))}}class vK{constructor(e,n){this.db=e,this.garbageCollector=function jF(t,e){return new yK(t,e)}(this,n)}jn(e){const n=this.Yn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Yn(e){let n=0;return this.Hn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Hn(e,n){return this.Zn(e,(r,i)=>n(i))}addReference(e,n,r){return Zy(e,r)}removeReference(e,n,r){return Zy(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Zy(e,n)}Xn(e,n){return function(i,o){let s=!1;return LF(i).Z(a=>FF(i,a,o).next(u=>(u&&(s=!0),O.resolve(!u)))).next(()=>s)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let o=0;return this.Zn(e,(s,a)=>{if(a<=n){const u=this.Xn(e,s).next(l=>{if(!l)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,Se.min()),Pa(e).delete([0,br(s.path)])))});i.push(u)}}).next(()=>O.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Zy(e,n)}Zn(e,n){const r=Pa(e);let i,o=Si._e;return r.Y({index:"documentTargetsIndex"},([s,a],{path:u,sequenceNumber:l})=>{0===s?(o!==Si._e&&n(new le(Ho(i)),o),o=l,i=u):o=Si._e}).next(()=>{o!==Si._e&&n(new le(Ho(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Zy(t,e){return Pa(t).put((i=t.currentSequenceNumber,{targetId:0,path:br(e.path),sequenceNumber:i}));var i}class HF{constructor(){this.changes=new Ss(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,nn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return void 0!==r?O.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class IK{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Lu(e).put(r)}removeEntry(e,n,r){return Lu(e).delete(function(o,s){const a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],jy(s),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.er(e,r)))}getEntry(e,n){let r=nn.newInvalidDocument(n);return Lu(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Ap(n))},(i,o)=>{r=this.tr(n,o)}).next(()=>r)}nr(e,n){let r={size:0,document:nn.newInvalidDocument(n)};return Lu(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Ap(n))},(i,o)=>{r={document:this.tr(n,o),size:qy(o)}}).next(()=>r)}getEntries(e,n){let r=ci();return this.rr(e,n,(i,o)=>{const s=this.tr(i,o);r=r.insert(i,s)}).next(()=>r)}ir(e,n){let r=ci(),i=new Wt(le.comparator);return this.rr(e,n,(o,s)=>{const a=this.tr(o,s);r=r.insert(o,a),i=i.insert(o,qy(s))}).next(()=>({documents:r,sr:i}))}rr(e,n,r){if(n.isEmpty())return O.resolve();let i=new Ft(GF);n.forEach(u=>i=i.add(u));const o=IDBKeyRange.bound(Ap(i.first()),Ap(i.last())),s=i.getIterator();let a=s.getNext();return Lu(e).Y({index:"documentKeyIndex",range:o},(u,l,h)=>{const g=le.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&GF(a,g)<0;)r(a,null),a=s.getNext();a&&a.isEqual(g)&&(r(a,l),a=s.hasNext()?s.getNext():null),a?h.U(Ap(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,o){const s=n.path,a=[s.popLast().toArray(),s.lastSegment(),jy(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Lu(e).W(IDBKeyRange.bound(a,u,!0)).next(l=>{o?.incrementDocumentReadCount(l.length);let h=ci();for(const g of l){const m=this.tr(le.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);m.isFoundDocument()&&(dp(n,m)||i.has(m.key))&&(h=h.insert(m.key,m))}return h})}getAllFromCollectionGroup(e,n,r,i){let o=ci();const s=qF(n,r),a=qF(n,bi.max());return Lu(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(u,l,h)=>{const g=this.tr(le.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);o=o.insert(g.key,g),o.size===i&&h.done()}).next(()=>o)}newChangeBuffer(e){return new EK(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return WF(e).get("remoteDocumentGlobalKey").next(n=>(be(!!n),n))}er(e,n){return WF(e).put("remoteDocumentGlobalKey",n)}tr(e,n){if(n){const r=function aK(t,e){let n;if(e.document)n=pF(t.ut,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=le.fromSegments(e.noDocument.path),i=Nu(e.noDocument.readTime);n=nn.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return ye();{const r=le.fromSegments(e.unknownDocument.path),i=Nu(e.unknownDocument.version);n=nn.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){const o=new an(i[0],i[1]);return Se.fromTimestamp(o)}(e.readTime)),n}(this.serializer,n);if(!r.isNoDocument()||!r.version.isEqual(Se.min()))return r}return nn.newInvalidDocument(e)}}function zF(t){return new IK(t)}class EK extends HF{constructor(e,n){super(),this._r=e,this.trackRemovals=n,this.ar=new Ss(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new Ft((o,s)=>$e(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{const a=this.ar.get(o);if(n.push(this._r.removeEntry(e,o,a.readTime)),s.isValidDocument()){const u=EF(this._r.serializer,s);i=i.add(o.path.popLast());const l=qy(u);r+=l-a.size,n.push(this._r.addEntry(e,o,u))}else if(r-=a.size,this.trackRemovals){const u=EF(this._r.serializer,s.convertToNoDocument(Se.min()));n.push(this._r.addEntry(e,o,u))}}),i.forEach(o=>{n.push(this._r.indexManager.addToCollectionParentIndex(e,o))}),n.push(this._r.updateMetadata(e,r)),O.waitFor(n)}getFromCache(e,n){return this._r.nr(e,n).next(r=>(this.ar.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this._r.ir(e,n).next(({documents:r,sr:i})=>(i.forEach((o,s)=>{this.ar.set(o,{size:s,readTime:r.get(o).readTime})}),r))}}function WF(t){return or(t,"remoteDocumentGlobal")}function Lu(t){return or(t,"remoteDocumentsV14")}function Ap(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function qF(t,e){const n=e.documentKey.path.toArray();return[t,jy(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function GF(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let o=0;o<n.length-2&&o<r.length-2;++o)if(i=$e(n[o],r[o]),i)return i;return i=$e(n.length,r.length),i||(i=$e(n[n.length-2],r[r.length-2]),i||$e(n[n.length-1],r[r.length-1]))}class wK{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class ZF{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(null!==r&&gp(r.mutation,i,ui.empty(),an.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ke()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ke()){const i=Wo();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=hp();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){const r=Wo();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ke()))}populateOverlays(e,n,r){const i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=ci();const s=fp(),a=fp();return n.forEach((u,l)=>{const h=r.get(l.key);i.has(l.key)&&(void 0===h||h.mutation instanceof Rs)?o=o.insert(l.key,l):void 0!==h?(s.set(l.key,h.mutation.getFieldMask()),gp(h.mutation,l,h.mutation.getFieldMask(),an.now())):s.set(l.key,ui.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),n.forEach((l,h)=>{var g;return a.set(l,new wK(h,null!==(g=s.get(l))&&void 0!==g?g:null))}),a))}recalculateAndSaveOverlays(e,n){const r=fp();let i=new Wt((s,a)=>s-a),o=Ke();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(const a of s)a.keys().forEach(u=>{const l=n.get(u);if(null===l)return;let h=r.get(u)||ui.empty();h=a.applyToLocalView(l,h),r.set(u,h);const g=(i.get(a.batchId)||Ke()).add(u);i=i.insert(a.batchId,g)})}).next(()=>{const s=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),l=u.key,h=u.value,g=UV();h.forEach(m=>{if(!o.has(m)){const y=ZV(n.get(m),r.get(m));null!==y&&g.set(m,y),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,g))}return O.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return le.isDocumentKey((s=n).path)&&null===s.collectionGroup&&0===s.filters.length?this.getDocumentsMatchingDocumentQuery(e,n.path):GT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i);var s}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):O.resolve(Wo());let a=-1,u=o;return s.next(l=>O.forEach(l,(h,g)=>(a<g.largestBatchId&&(a=g.largestBatchId),o.get(h)?O.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,Ke())).next(h=>({batchId:a,changes:LV(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new le(n)).next(r=>{let i=hp();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const o=n.collectionGroup;let s=hp();return this.indexManager.getCollectionParents(e,o).next(a=>O.forEach(a,u=>{const l=(g=n,m=u.child(o),new bs(m,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt));var g,m;return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((g,m)=>{s=s.insert(g,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((u,l)=>{const h=l.getKey();null===s.get(h)&&(s=s.insert(h,nn.newInvalidDocument(h)))});let a=hp();return s.forEach((u,l)=>{const h=o.get(u);void 0!==h&&gp(h.mutation,l,ui.empty(),an.now()),dp(n,l)&&(a=a.insert(u,l))}),a})}}class CK{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,n){return O.resolve(this.ur.get(n))}saveBundleMetadata(e,n){return this.ur.set(n.id,{id:(i=n).id,version:i.version,createTime:Nn(i.createTime)}),O.resolve();var i}getNamedQuery(e,n){return O.resolve(this.cr.get(n))}saveNamedQuery(e,n){return this.cr.set(n.name,{name:(i=n).name,query:sD(i.bundledQuery),readTime:Nn(i.readTime)}),O.resolve();var i}}class TK{constructor(){this.overlays=new Wt(le.comparator),this.lr=new Map}getOverlay(e,n){return O.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Wo();return O.forEach(n,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.lt(e,n,o)}),O.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.lr.get(r);return void 0!==i&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.lr.delete(r)),O.resolve()}getOverlaysForCollection(e,n,r){const i=Wo(),o=n.length+1,s=new le(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return O.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Wt((l,h)=>l-h);const s=this.overlays.getIterator();for(;s.hasNext();){const l=s.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let h=o.get(l.largestBatchId);null===h&&(h=Wo(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}const a=Wo(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return O.resolve(a)}lt(e,n,r){const i=this.overlays.get(r.key);if(null!==i){const s=this.lr.get(i.largestBatchId).delete(r.key);this.lr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new XT(n,r));let o=this.lr.get(n);void 0===o&&(o=Ke(),this.lr.set(n,o)),this.lr.set(n,o.add(r.key))}}class fD{constructor(){this.hr=new Ft(sr.Pr),this.Ir=new Ft(sr.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,n){const r=new sr(e,n);this.hr=this.hr.add(r),this.Ir=this.Ir.add(r)}Er(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.dr(new sr(e,n))}Ar(e,n){e.forEach(r=>this.removeReference(r,n))}Rr(e){const n=new le(new _t([])),r=new sr(n,e),i=new sr(n,e+1),o=[];return this.Ir.forEachInRange([r,i],s=>{this.dr(s),o.push(s.key)}),o}Vr(){this.hr.forEach(e=>this.dr(e))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){const n=new le(new _t([])),r=new sr(n,e),i=new sr(n,e+1);let o=Ke();return this.Ir.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){const n=new sr(e,0),r=this.hr.firstAfterOrEqual(n);return null!==r&&e.isEqual(r.key)}}class sr{constructor(e,n){this.key=e,this.gr=n}static Pr(e,n){return le.comparator(e.key,n.key)||$e(e.gr,n.gr)}static Tr(e,n){return $e(e.gr,n.gr)||le.comparator(e.key,n.key)}}class DK{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.pr=1,this.yr=new Ft(sr.Pr)}checkEmpty(e){return O.resolve(0===this.mutationQueue.length)}addMutationBatch(e,n,r,i){const o=this.pr;this.pr++;const s=new YT(o,n,r,i);this.mutationQueue.push(s);for(const a of i)this.yr=this.yr.add(new sr(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return O.resolve(s)}lookupMutationBatch(e,n){return O.resolve(this.wr(n))}getNextMutationBatchAfterBatchId(e,n){const i=this.Sr(n+1),o=i<0?0:i;return O.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(0===this.mutationQueue.length?-1:this.pr-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new sr(n,0),i=new sr(n,Number.POSITIVE_INFINITY),o=[];return this.yr.forEachInRange([r,i],s=>{const a=this.wr(s.gr);o.push(a)}),O.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ft($e);return n.forEach(i=>{const o=new sr(i,0),s=new sr(i,Number.POSITIVE_INFINITY);this.yr.forEachInRange([o,s],a=>{r=r.add(a.gr)})}),O.resolve(this.br(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let o=r;le.isDocumentKey(o)||(o=o.child(""));const s=new sr(new le(o),0);let a=new Ft($e);return this.yr.forEachWhile(u=>{const l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.gr)),!0)},s),O.resolve(this.br(a))}br(e){const n=[];return e.forEach(r=>{const i=this.wr(r);null!==i&&n.push(i)}),n}removeMutationBatch(e,n){be(0===this.Dr(n.batchId,"removed")),this.mutationQueue.shift();let r=this.yr;return O.forEach(n.mutations,i=>{const o=new sr(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.yr=r})}Fn(e){}containsKey(e,n){const r=new sr(n,0),i=this.yr.firstAfterOrEqual(r);return O.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return O.resolve()}Dr(e,n){return this.Sr(e)}Sr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}wr(e){const n=this.Sr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class AK{constructor(e){this.Cr=e,this.docs=new Wt(le.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.Cr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return O.resolve(r?r.document.mutableCopy():nn.newInvalidDocument(n))}getEntries(e,n){let r=ci();return n.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():nn.newInvalidDocument(i))}),O.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=ci();const s=n.path,a=new le(s.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||FT(Jk(h),r)<=0||(i.has(h.key)||dp(n,h))&&(o=o.insert(h.key,h.mutableCopy()))}return O.resolve(o)}getAllFromCollectionGroup(e,n,r,i){ye()}vr(e,n){return O.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new bK(this)}getSize(e){return O.resolve(this.size)}}class bK extends HF{constructor(e){super(),this._r=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this._r.addEntry(e,i)):this._r.removeEntry(r)}),O.waitFor(n)}getFromCache(e,n){return this._r.getEntry(e,n)}getAllFromCache(e,n){return this._r.getEntries(e,n)}}class SK{constructor(e){this.persistence=e,this.Fr=new Ss(n=>Ru(n),cp),this.lastRemoteSnapshotVersion=Se.min(),this.highestTargetId=0,this.Mr=0,this.Or=new fD,this.targetCount=0,this.Nr=Fu.On()}forEachTarget(e,n){return this.Fr.forEach((r,i)=>n(i)),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Mr&&(this.Mr=n),O.resolve()}kn(e){this.Fr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Nr=new Fu(n),this.highestTargetId=n),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,n){return this.kn(n),this.targetCount+=1,O.resolve()}updateTargetData(e,n){return this.kn(n),O.resolve()}removeTargetData(e,n){return this.Fr.delete(n.target),this.Or.Rr(n.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,n,r){let i=0;const o=[];return this.Fr.forEach((s,a)=>{a.sequenceNumber<=n&&null===r.get(a.targetId)&&(this.Fr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),O.waitFor(o).next(()=>i)}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,n){const r=this.Fr.get(n)||null;return O.resolve(r)}addMatchingKeys(e,n,r){return this.Or.Er(n,r),O.resolve()}removeMatchingKeys(e,n,r){this.Or.Ar(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),O.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Or.Rr(n),O.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Or.mr(n);return O.resolve(r)}containsKey(e,n){return O.resolve(this.Or.containsKey(n))}}class pD{constructor(e,n){this.Br={},this.overlays={},this.Lr=new Si(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new SK(this),this.indexManager=new pK,this.remoteDocumentCache=new AK(r=>this.referenceDelegate.Qr(r)),this.serializer=new IF(n),this.Kr=new CK(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new TK,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new DK(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,n,r){ne("MemoryPersistence","Starting transaction:",e);const i=new RK(this.Lr.next());return this.referenceDelegate.$r(),r(i).next(o=>this.referenceDelegate.Ur(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Wr(e,n){return O.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}}class RK extends eV{constructor(e){super(),this.currentSequenceNumber=e}}class Ky{constructor(e){this.persistence=e,this.Gr=new fD,this.zr=null}static jr(e){return new Ky(e)}get Hr(){if(this.zr)return this.zr;throw ye()}addReference(e,n,r){return this.Gr.addReference(r,n),this.Hr.delete(r.toString()),O.resolve()}removeReference(e,n,r){return this.Gr.removeReference(r,n),this.Hr.add(r.toString()),O.resolve()}markPotentiallyOrphaned(e,n){return this.Hr.add(n.toString()),O.resolve()}removeTarget(e,n){this.Gr.Rr(n.targetId).forEach(i=>this.Hr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.Hr.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}$r(){this.zr=new Set}Ur(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.Hr,r=>{const i=le.fromPath(r);return this.Jr(e,i).next(o=>{o||n.removeEntry(i,Se.min())})}).next(()=>(this.zr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Jr(e,n).next(r=>{r?this.Hr.delete(n.toString()):this.Hr.add(n.toString())})}Qr(e){return 0}Jr(e,n){return O.or([()=>O.resolve(this.Gr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Wr(e,n)])}}class PK{constructor(e){this.serializer=e}N(e,n,r,i){const o=new Ay("createOrUpgrade",n);var u;r<1&&i>=1&&(e.createObjectStore("owner"),(u=e).createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",iV,{unique:!0}),u.createObjectStore("documentMutations"),KF(e),function(u){u.createObjectStore("remoteDocuments")}(e));let s=O.resolve();return r<3&&i>=3&&(0!==r&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),KF(e)),s=s.next(()=>function(u){const l=u.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Se.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",h)}(o))),r<4&&i>=4&&(0!==r&&(s=s.next(()=>function(u,l){return l.store("mutations").W().next(h=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",iV,{unique:!0});const g=l.store("mutations"),m=h.map(y=>g.put(y));return O.waitFor(m)})}(e,o))),s=s.next(()=>{!function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(s=s.next(()=>this.Zr(o))),r<6&&i>=6&&(s=s.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.Xr(o)))),r<7&&i>=7&&(s=s.next(()=>this.ei(o))),r<8&&i>=8&&(s=s.next(()=>this.ti(e,o))),r<9&&i>=9&&(s=s.next(()=>{!function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(s=s.next(()=>this.ni(o))),r<11&&i>=11&&(s=s.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{!function(u){const l=u.createObjectStore("documentOverlays",{keyPath:gZ});l.createIndex("collectionPathOverlayIndex",mZ,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",_Z,{unique:!1})}(e)})),r<13&&i>=13&&(s=s.next(()=>function(u){const l=u.createObjectStore("remoteDocumentsV14",{keyPath:iZ});l.createIndex("documentKeyIndex",oZ),l.createIndex("collectionGroupIndex",sZ)}(e)).next(()=>this.ri(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this.ii(e,o))),r<15&&i>=15&&(s=s.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:dZ}).createIndex("sequenceNumberIndex",hZ,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:fZ}).createIndex("documentKeyIndex",pZ,{unique:!1})}(e))),s}Xr(e){let n=0;return e.store("remoteDocuments").Y((r,i)=>{n+=qy(i)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Zr(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next(i=>O.forEach(i,o=>{const s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",s).next(a=>O.forEach(a,u=>{be(u.userId===o.userId);const l=Ou(this.serializer,u);return VF(e,o.userId,l).next(()=>{})}))}))}ei(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const o=[];return r.Y((s,a)=>{const u=new _t(s),l=[0,br(u)];o.push(n.get(l).next(h=>h?O.resolve():n.put({targetId:0,path:br(u),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>O.waitFor(o))})}ti(e,n){e.createObjectStore("collectionParents",{keyPath:lZ});const r=n.store("collectionParents"),i=new hD,o=s=>{if(i.add(s)){const a=s.lastSegment(),u=s.popLast();return r.put({collectionId:a,parent:br(u)})}};return n.store("remoteDocuments").Y({J:!0},(s,a)=>{const u=new _t(s);return o(u.popLast())}).next(()=>n.store("documentMutations").Y({J:!0},([s,a,u],l)=>{const h=Ho(a);return o(h.popLast())}))}ni(e){const n=e.store("targets");return n.Y((r,i)=>{const o=wp(i),s=wF(this.serializer,o);return n.put(s)})}ri(e,n){const r=n.store("remoteDocuments"),i=[];return r.Y((o,s)=>{const a=n.store("remoteDocumentsV14"),u=(g=s,g.document?new le(_t.fromString(g.document.name).popFirst(5)):g.noDocument?le.fromSegments(g.noDocument.path):g.unknownDocument?le.fromSegments(g.unknownDocument.path):ye()).path.toArray(),l={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};var g;i.push(a.put(l))}).next(()=>O.waitFor(i))}ii(e,n){const r=n.store("mutations"),i=zF(this.serializer),o=new pD(Ky.jr,this.serializer.ut);return r.W().next(s=>{const a=new Map;return s.forEach(u=>{var l;let h=null!==(l=a.get(u.userId))&&void 0!==l?l:Ke();Ou(this.serializer,u).keys().forEach(g=>h=h.add(g)),a.set(u.userId,h)}),O.forEach(a,(u,l)=>{const h=new ir(l),g=Hy.ct(this.serializer,h),m=o.getIndexManager(h),y=Gy.ct(h,this.serializer,m,o.referenceDelegate);return new ZF(i,y,g,m).recalculateAndSaveOverlaysForDocumentKeys(new BT(n,Si._e),u).next()})})}}function KF(t){t.createObjectStore("targetDocuments",{keyPath:uZ}).createIndex("documentTargetsIndex",cZ,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",aZ,{unique:!0}),t.createObjectStore("targetGlobal")}const gD="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class mD{constructor(e,n,r,i,o,s,a,u,l,h,g=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.si=o,this.window=s,this.document=a,this.oi=l,this._i=h,this.ai=g,this.Lr=null,this.kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.li=null,this.hi=Number.NEGATIVE_INFINITY,this.Pi=m=>Promise.resolve(),!mD.D())throw new J(B.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new vK(this,i),this.Ii=n+"main",this.serializer=new IF(u),this.Ti=new mo(this.Ii,this.ai,new PK(this.serializer)),this.qr=new mK(this.referenceDelegate,this.serializer),this.remoteDocumentCache=zF(this.serializer),this.Kr=new uK,this.window&&this.window.localStorage?this.Ei=this.window.localStorage:(this.Ei=null,!1===h&&xn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.di().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new J(B.FAILED_PRECONDITION,gD);return this.Ai(),this.Ri(),this.Vi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.qr.getHighestSequenceNumber(e))}).then(e=>{this.Lr=new Si(e,this.oi)}).then(()=>{this.kr=!0}).catch(e=>(this.Ti&&this.Ti.close(),Promise.reject(e)))}mi(e){var n=this;return this.Pi=function(){var r=(0,G.Z)(function*(i){if(n.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ti.L(function(){var n=(0,G.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return n.apply(this,arguments)}}())}setNetworkEnabled(e){var n=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget((0,G.Z)(function*(){n.started&&(yield n.di())})))}di(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Yy(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(n=>{n||(this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)))})}).next(()=>this.gi(e)).next(n=>this.isPrimary&&!n?this.pi(e).next(()=>!1):!!n&&this.yi(e).next(()=>!0))).catch(e=>{if(va(e))return ne("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ne("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.si.enqueueRetryable(()=>this.Pi(e)),this.isPrimary=e})}fi(e){return bp(e).get("owner").next(n=>O.resolve(this.wi(n)))}Si(e){return Yy(e).delete(this.clientId)}bi(){var e=this;return(0,G.Z)(function*(){if(e.isPrimary&&!e.Di(e.hi,18e5)){e.hi=Date.now();const n=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=or(r,"clientMetadata");return i.W().next(o=>{const s=e.Ci(o,18e5),a=o.filter(u=>-1===s.indexOf(u));return O.forEach(a,u=>i.delete(u.clientId)).next(()=>a)})}).catch(()=>[]);if(e.Ei)for(const r of n)e.Ei.removeItem(e.vi(r.clientId))}})()}Vi(){this.li=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.di().then(()=>this.bi()).then(()=>this.Vi()))}wi(e){return!!e&&e.ownerId===this.clientId}gi(e){return this._i?O.resolve(!0):bp(e).get("owner").next(n=>{if(null!==n&&this.Di(n.leaseTimestampMs,5e3)&&!this.Fi(n.ownerId)){if(this.wi(n)&&this.networkEnabled)return!0;if(!this.wi(n)){if(!n.allowTabSynchronization)throw new J(B.FAILED_PRECONDITION,gD);return!1}}return!(!this.networkEnabled||!this.inForeground)||Yy(e).W().next(r=>void 0===this.Ci(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(n=>(this.isPrimary!==n&&ne("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){var e=this;return(0,G.Z)(function*(){e.kr=!1,e.Mi(),e.li&&(e.li.cancel(),e.li=null),e.xi(),e.Oi(),yield e.Ti.runTransaction("shutdown","readwrite",["owner","clientMetadata"],n=>{const r=new BT(n,Si._e);return e.pi(r).next(()=>e.Si(r))}),e.Ti.close(),e.Ni()})()}Ci(e,n){return e.filter(r=>this.Di(r.updateTimeMs,n)&&!this.Fi(r.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>Yy(e).W().next(n=>this.Ci(n,18e5).map(r=>r.clientId)))}get started(){return this.kr}getMutationQueue(e,n){return Gy.ct(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new gK(e,this.serializer.ut.databaseId)}getDocumentOverlayCache(e){return Hy.ct(this.serializer,e)}getBundleCache(){return this.Kr}runTransaction(e,n,r){ne("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===n?"readonly":"readwrite",o=15===(u=this.ai)?vZ:14===u?uV:13===u?aV:12===u?yZ:11===u?sV:void ye();var u;let s;return this.Ti.runTransaction(e,i,o,a=>(s=new BT(a,this.Lr?this.Lr.next():Si._e),"readwrite-primary"===n?this.fi(s).next(u=>!!u||this.gi(s)).next(u=>{if(!u)throw xn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)),new J(B.FAILED_PRECONDITION,Xk);return r(s)}).next(u=>this.yi(s).next(()=>u)):this.Li(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}Li(e){return bp(e).get("owner").next(n=>{if(null!==n&&this.Di(n.leaseTimestampMs,5e3)&&!this.Fi(n.ownerId)&&!this.wi(n)&&!(this._i||this.allowTabSynchronization&&n.allowTabSynchronization))throw new J(B.FAILED_PRECONDITION,gD)})}yi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return bp(e).put("owner",n)}static D(){return mo.D()}pi(e){const n=bp(e);return n.get("owner").next(r=>this.wi(r)?(ne("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):O.resolve())}Di(e,n){const r=Date.now();return!(e<r-n||e>r&&(xn(`Detected an update time that is in the future: ${e} > ${r}`),1))}Ai(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ci=()=>{this.si.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.di()))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground="visible"===this.document.visibilityState)}xi(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}Ri(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ui=()=>{this.Mi();const n=/(?:Version|Mobile)\/1[456]/;(0,Vt.G6)()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.si.enterRestrictedMode(!0),this.si.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ui))}Oi(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}Fi(e){var n;try{const r=null!==(null===(n=this.Ei)||void 0===n?void 0:n.getItem(this.vi(e)));return ne("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return xn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Mi(){if(this.Ei)try{this.Ei.setItem(this.vi(this.clientId),String(Date.now()))}catch(e){xn("Failed to set zombie client id.",e)}}Ni(){if(this.Ei)try{this.Ei.removeItem(this.vi(this.clientId))}catch{}}vi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function bp(t){return or(t,"owner")}function Yy(t){return or(t,"clientMetadata")}function _D(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}class yD{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.ki=r,this.qi=i}static Qi(e,n){let r=Ke(),i=Ke();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new yD(e,n.fromCache,r,i)}}class MK{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class QF{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(e,n){this.Gi=e,this.indexManager=n,this.Ki=!0}getDocumentsMatchingQuery(e,n,r,i){const o={result:null};return this.zi(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ji(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;const s=new MK;return this.Hi(e,n,s).next(a=>{if(o.result=a,this.$i)return this.Ji(e,n,s,a.size)})}).next(()=>o.result)}Ji(e,n,r,i){return r.documentReadCount<this.Ui?(Ll()<=Uo.in.DEBUG&&ne("QueryEngine","SDK will not create cache indexes for query:",Gl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),O.resolve()):(Ll()<=Uo.in.DEBUG&&ne("QueryEngine","Query:",Gl(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Wi*i?(Ll()<=Uo.in.DEBUG&&ne("QueryEngine","The SDK decides to create cache indexes for query:",Gl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Yr(n))):O.resolve())}zi(e,n){if(xV(n))return O.resolve(null);let r=Yr(n);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==n.limit&&1===i&&(n=Vy(n,null,"F"),r=Yr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const s=Ke(...o);return this.Gi.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const l=this.Yi(n,a);return this.Zi(n,l,s,u.readTime)?this.zi(e,Vy(n,null,"F")):this.Xi(e,l,n,u)}))})))}ji(e,n,r,i){return xV(n)||i.isEqual(Se.min())?O.resolve(null):this.Gi.getDocuments(e,r).next(o=>{const s=this.Yi(n,o);return this.Zi(n,s,r,i)?O.resolve(null):(Ll()<=Uo.in.DEBUG&&ne("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Gl(n)),this.Xi(e,s,n,Yk(i,-1)).next(a=>a))})}Yi(e,n){let r=new Ft(VV(e));return n.forEach((i,o)=>{dp(e,o)&&(r=r.add(o))}),r}Zi(e,n,r,i){if(null===e.limit)return!1;if(r.size!==n.size)return!0;const o="F"===e.limitType?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Hi(e,n,r){return Ll()<=Uo.in.DEBUG&&ne("QueryEngine","Using full collection scan to execute query:",Gl(n)),this.Gi.getDocumentsMatchingQuery(e,n,bi.min(),r)}Xi(e,n,r,i){return this.Gi.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}}class xK{constructor(e,n,r,i){this.persistence=e,this.es=n,this.serializer=i,this.ts=new Wt($e),this.ns=new Ss(o=>Ru(o),cp),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(r)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ZF(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ts))}}function YF(t,e,n,r){return new xK(t,e,n,r)}function JF(t,e){return vD.apply(this,arguments)}function vD(){return vD=(0,G.Z)(function*(t,e){const n=ae(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.os(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const s=[],a=[];let u=Ke();for(const l of i){s.push(l.batchId);for(const h of l.mutations)u=u.add(h.key)}for(const l of o){a.push(l.batchId);for(const h of l.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(l=>({_s:l,removedBatchIds:s,addedBatchIds:a}))})})}),vD.apply(this,arguments)}function XF(t){const e=ae(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.qr.getLastRemoteSnapshotVersion(n))}function eL(t,e,n){let r=Ke(),i=Ke();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=ci();return n.forEach((a,u)=>{const l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(Se.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||0===u.version.compareTo(l.version)&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):ne("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{us:s,cs:i}})}function kK(t,e){const n=ae(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function id(t,e){const n=ae(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.qr.getTargetData(r,e).next(o=>o?(i=o,O.resolve(i)):n.qr.allocateTargetId(r).next(s=>(i=new Ps(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ts.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ts=n.ts.insert(r.targetId,r),n.ns.set(e,r.targetId)),r})}function od(t,e,n){return ID.apply(this,arguments)}function ID(){return ID=(0,G.Z)(function*(t,e,n){const r=ae(t),i=r.ts.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!va(s))throw s;ne("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.ts=r.ts.remove(e),r.ns.delete(i.target)}),ID.apply(this,arguments)}function Jy(t,e,n){const r=ae(t);let i=Se.min(),o=Ke();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,h){const g=ae(u),m=g.ns.get(h);return void 0!==m?O.resolve(g.ts.get(m)):g.qr.getTargetData(l,h)}(r,s,Yr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.qr.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.es.getDocumentsMatchingQuery(s,e,n?i:Se.min(),n?o:Ke())).next(a=>(rL(r,kV(e),a),{documents:a,ls:o})))}function tL(t,e){const n=ae(t),r=ae(n.qr),i=n.ts.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",o=>r._t(o,e).next(s=>s?s.target:null))}function nL(t,e){const n=ae(t),r=n.rs.get(e)||Se.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.ss.getAllFromCollectionGroup(i,e,Yk(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(rL(n,e,i),i))}function rL(t,e,n){let r=t.rs.get(e)||Se.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.rs.set(e,r)}function ED(){return ED=(0,G.Z)(function*(t,e,n,r){const i=ae(t);let o=Ke(),s=ci();for(const l of n){const h=e.hs(l.metadata.name);l.document&&(o=o.add(h));const g=e.Ps(l);g.setReadTime(e.Is(l.metadata.readTime)),s=s.insert(h,g)}const a=i.ss.newChangeBuffer({trackRemovals:!0}),u=yield id(i,(h=r,Yr(Wl(_t.fromString(`__bundle__/docs/${h}`)))));var h;return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>eL(l,a,s).next(h=>(a.apply(l),h)).next(h=>i.qr.removeMatchingKeysForTargetId(l,u.targetId).next(()=>i.qr.addMatchingKeys(l,o,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,h.us,h.cs)).next(()=>h.us)))}),ED.apply(this,arguments)}function FK(t,e){return wD.apply(this,arguments)}function wD(){return wD=(0,G.Z)(function*(t,e,n=Ke()){const r=yield id(t,Yr(sD(e.bundledQuery))),i=ae(t);return i.persistence.runTransaction("Save named query","readwrite",o=>{const s=Nn(e.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.Kr.saveNamedQuery(o,e);const a=r.withResumeToken(Zn.EMPTY_BYTE_STRING,s);return i.ts=i.ts.insert(a.targetId,a),i.qr.updateTargetData(o,a).next(()=>i.qr.removeMatchingKeysForTargetId(o,r.targetId)).next(()=>i.qr.addMatchingKeys(o,n,r.targetId)).next(()=>i.Kr.saveNamedQuery(o,e))})}),wD.apply(this,arguments)}function iL(t,e){return`firestore_clients_${t}_${e}`}function oL(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function CD(t,e){return`firestore_targets_${t}_${e}`}class Xy{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Ts(e,n,r){const i=JSON.parse(r);let o,s="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return s&&i.error&&(s="string"==typeof i.error.message&&"string"==typeof i.error.code,s&&(o=new J(i.error.code,i.error.message))),s?new Xy(e,n,i.state,o):(xn("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Sp{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ts(e,n){const r=JSON.parse(n);let i,o="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return o&&r.error&&(o="string"==typeof r.error.message&&"string"==typeof r.error.code,o&&(i=new J(r.error.code,r.error.message))),o?new Sp(e,r.state,i):(xn("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ev{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ts(e,n){const r=JSON.parse(n);let i="object"==typeof r&&r.activeTargetIds instanceof Array,o=KT();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=nV(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new ev(e,o):(xn("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class TD{constructor(e,n){this.clientId=e,this.onlineState=n}static Ts(e){const n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new TD(n.clientId,n.onlineState):(xn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class DD{constructor(){this.activeTargetIds=KT()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class AD{constructor(e,n,r,i,o){this.window=e,this.si=n,this.persistenceKey=r,this.Rs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Vs=this.fs.bind(this),this.gs=new Wt($e),this.started=!1,this.ps=[];const s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.ys=iL(this.persistenceKey,this.Rs),this.ws=`firestore_sequence_number_${this.persistenceKey}`,this.gs=this.gs.insert(this.Rs,new DD),this.Ss=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.bs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Ds=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.Cs=`firestore_online_state_${this.persistenceKey}`,this.vs=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.Vs)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,G.Z)(function*(){const n=yield e.syncEngine.Bi();for(const i of n){if(i===e.Rs)continue;const o=e.getItem(iL(e.persistenceKey,i));if(o){const s=ev.Ts(i,o);s&&(e.gs=e.gs.insert(s.clientId,s))}}e.Fs();const r=e.storage.getItem(e.Cs);if(r){const i=e.Ms(r);i&&e.xs(i)}for(const i of e.ps)e.fs(i);e.ps=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Os(this.gs)}isActiveQueryTarget(e){let n=!1;return this.gs.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ns(e,"pending")}updateMutationState(e,n,r){this.Ns(e,n,r),this.Bs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(CD(this.persistenceKey,e));if(r){const i=Sp.Ts(e,r);i&&(n=i.state)}}return this.Ls.ds(e),this.Fs(),n}removeLocalQueryTarget(e){this.Ls.As(e),this.Fs()}isLocalQueryTarget(e){return this.Ls.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(CD(this.persistenceKey,e))}updateQueryState(e,n,r){this.ks(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Bs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.qs(e)}notifyBundleLoaded(e){this.Qs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Vs),this.removeItem(this.ys),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return ne("SharedClientState","READ",e,n),n}setItem(e,n){ne("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){ne("SharedClientState","REMOVE",e),this.storage.removeItem(e)}fs(e){var n=this;const r=e;if(r.storageArea===this.storage){if(ne("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ys)return void xn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable((0,G.Z)(function*(){if(n.started){if(null!==r.key)if(n.Ss.test(r.key)){if(null==r.newValue){const i=n.Ks(r.key);return n.$s(i,null)}{const i=n.Us(r.key,r.newValue);if(i)return n.$s(i.clientId,i)}}else if(n.bs.test(r.key)){if(null!==r.newValue){const i=n.Ws(r.key,r.newValue);if(i)return n.Gs(i)}}else if(n.Ds.test(r.key)){if(null!==r.newValue){const i=n.zs(r.key,r.newValue);if(i)return n.js(i)}}else if(r.key===n.Cs){if(null!==r.newValue){const i=n.Ms(r.newValue);if(i)return n.xs(i)}}else if(r.key===n.ws){const i=function(s){let a=Si._e;if(null!=s)try{const u=JSON.parse(s);be("number"==typeof u),a=u}catch(u){xn("SharedClientState","Failed to read sequence number from WebStorage",u)}return a}(r.newValue);i!==Si._e&&n.sequenceNumberHandler(i)}else if(r.key===n.vs){const i=n.Hs(r.newValue);yield Promise.all(i.map(o=>n.syncEngine.Js(o)))}}else n.ps.push(r)}))}}get Ls(){return this.gs.get(this.Rs)}Fs(){this.setItem(this.ys,this.Ls.Es())}Ns(e,n,r){const i=new Xy(this.currentUser,e,n,r),o=oL(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Es())}Bs(e){const n=oL(this.persistenceKey,this.currentUser,e);this.removeItem(n)}qs(e){this.storage.setItem(this.Cs,JSON.stringify({clientId:this.Rs,onlineState:e}))}ks(e,n,r){const i=CD(this.persistenceKey,e),o=new Sp(e,n,r);this.setItem(i,o.Es())}Qs(e){const n=JSON.stringify(Array.from(e));this.setItem(this.vs,n)}Ks(e){const n=this.Ss.exec(e);return n?n[1]:null}Us(e,n){const r=this.Ks(e);return ev.Ts(r,n)}Ws(e,n){const r=this.bs.exec(e),i=Number(r[1]);return Xy.Ts(new ir(void 0!==r[2]?r[2]:null),i,n)}zs(e,n){const r=this.Ds.exec(e),i=Number(r[1]);return Sp.Ts(i,n)}Ms(e){return TD.Ts(e)}Hs(e){return JSON.parse(e)}Gs(e){var n=this;return(0,G.Z)(function*(){if(e.user.uid===n.currentUser.uid)return n.syncEngine.Ys(e.batchId,e.state,e.error);ne("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}js(e){return this.syncEngine.Zs(e.targetId,e.state,e.error)}$s(e,n){const r=n?this.gs.insert(e,n):this.gs.remove(e),i=this.Os(this.gs),o=this.Os(r),s=[],a=[];return o.forEach(u=>{i.has(u)||s.push(u)}),i.forEach(u=>{o.has(u)||a.push(u)}),this.syncEngine.Xs(s,a).then(()=>{this.gs=r})}xs(e){this.gs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Os(e){let n=KT();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class sL{constructor(){this.eo=new DD,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,n,r){this.no[e]=n}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new DD,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class LK{ro(e){}shutdown(){}}class aL{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){ne("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ao)e(0)}_o(){ne("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ao)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let tv=null;function bD(){return null===tv?tv=268435456+Math.round(2147483648*Math.random()):tv++,"0x"+tv.toString(16)}const UK={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class BK{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}onMessage(e){this.Eo=e}close(){this.lo()}send(e){this.co(e)}Ao(){this.Po()}Ro(e){this.To(e)}Vo(e){this.Eo(e)}}const Rr="WebChannelConnection";class $K extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.mo=r+"://"+n.host,this.fo=`projects/${i}/databases/${o}`,this.po="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get yo(){return!1}wo(n,r,i,o,s){const a=bD(),u=this.So(n,r);ne("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const l={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(l,o,s),this.Do(n,u,l,i).then(h=>(ne("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw ai("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",u,"request:",i),h})}Co(n,r,i,o,s,a){return this.wo(n,r,i,o,s)}bo(n,r,i){n["X-Goog-Api-Client"]="gl-js/ fire/"+Fl,n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>n[s]=o),i&&i.headers.forEach((o,s)=>n[s]=o)}So(n,r){return`${this.mo}/v1/${r}:${UK[n]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Do(e,n,r,i){const o=bD();return new Promise((s,a)=>{const u=new L7;u.setWithCredentials(!0),u.listenOnce(k7.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case OT.NO_ERROR:const h=u.getResponseJson();ne(Rr,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),s(h);break;case OT.TIMEOUT:ne(Rr,`RPC '${e}' ${o} timed out`),a(new J(B.DEADLINE_EXCEEDED,"Request time out"));break;case OT.HTTP_ERROR:const g=u.getStatus();if(ne(Rr,`RPC '${e}' ${o} failed with status:`,g,"response text:",u.getResponseText()),g>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);const y=m?.error;if(y&&y.status&&y.message){const T=function(M){const U=M.toLowerCase().replace(/_/g,"-");return Object.values(B).indexOf(U)>=0?U:B.UNKNOWN}(y.status);a(new J(T,y.message))}else a(new J(B.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new J(B.UNAVAILABLE,"Connection failed."));break;default:ye()}}finally{ne(Rr,`RPC '${e}' ${o} completed.`)}});const l=JSON.stringify(i);ne(Rr,`RPC '${e}' ${o} sending request:`,i),u.send(n,"POST",l,r,15)})}vo(e,n,r){const i=bD(),o=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=N7(),a=O7(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.xmlHttpFactory=new F7({})),this.bo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const h=o.join("");ne(Rr,`Creating RPC '${e}' stream ${i}: ${h}`,u);const g=s.createWebChannel(h,u);let m=!1,y=!1;const T=new BK({co:M=>{y?ne(Rr,`Not sending because RPC '${e}' stream ${i} is closed:`,M):(m||(ne(Rr,`Opening RPC '${e}' stream ${i} transport.`),g.open(),m=!0),ne(Rr,`RPC '${e}' stream ${i} sending:`,M),g.send(M))},lo:()=>g.close()}),b=(M,U,x)=>{M.listen(U,z=>{try{x(z)}catch(oe){setTimeout(()=>{throw oe},0)}})};return b(g,Dy.EventType.OPEN,()=>{y||ne(Rr,`RPC '${e}' stream ${i} transport opened.`)}),b(g,Dy.EventType.CLOSE,()=>{y||(y=!0,ne(Rr,`RPC '${e}' stream ${i} transport closed`),T.Ro())}),b(g,Dy.EventType.ERROR,M=>{y||(y=!0,ai(Rr,`RPC '${e}' stream ${i} transport errored:`,M),T.Ro(new J(B.UNAVAILABLE,"The operation could not be completed")))}),b(g,Dy.EventType.MESSAGE,M=>{var U;if(!y){const x=M.data[0];be(!!x);const oe=x.error||(null===(U=x[0])||void 0===U?void 0:U.error);if(oe){ne(Rr,`RPC '${e}' stream ${i} received error:`,oe);const de=oe.status;let Be=function(Wp){const Cv=Fn[Wp];if(void 0!==Cv)return eF(Cv)}(de),bt=oe.message;void 0===Be&&(Be=B.INTERNAL,bt="Unknown error status: "+de+" with message "+oe.message),y=!0,T.Ro(new J(Be,bt)),g.close()}else ne(Rr,`RPC '${e}' stream ${i} received:`,x),T.Vo(x)}}),b(a,V7.STAT_EVENT,M=>{M.stat===Wk.PROXY?ne(Rr,`RPC '${e}' stream ${i} detected buffering proxy`):M.stat===Wk.NOPROXY&&ne(Rr,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{T.Ao()},0),T}}function uL(){return typeof window<"u"?window:null}function nv(){return typeof document<"u"?document:null}function Rp(t){return new YZ(t,!0)}class SD{constructor(e,n,r=1e3,i=1.5,o=6e4){this.si=e,this.timerId=n,this.Fo=r,this.Mo=i,this.xo=o,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(e){this.cancel();const n=Math.floor(this.Oo+this.qo()),r=Math.max(0,Date.now()-this.Bo),i=Math.max(0,n-r);i>0&&ne("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Oo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.No=this.si.enqueueAfterDelay(this.timerId,i,()=>(this.Bo=Date.now(),e())),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){null!==this.No&&(this.No.skipDelay(),this.No=null)}cancel(){null!==this.No&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}}class cL{constructor(e,n,r,i,o,s,a,u){this.si=e,this.Ko=r,this.$o=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new SD(e,n)}jo(){return 1===this.state||5===this.state||this.Ho()}Ho(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Jo()}stop(){var e=this;return(0,G.Z)(function*(){e.jo()&&(yield e.close(0))})()}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&null===this.Wo&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,()=>this.Xo()))}e_(e){this.t_(),this.stream.send(e)}Xo(){var e=this;return(0,G.Z)(function*(){if(e.Ho())return e.close(0)})()}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}close(e,n){var r=this;return(0,G.Z)(function*(){r.t_(),r.n_(),r.zo.cancel(),r.Uo++,4!==e?r.zo.reset():n&&n.code===B.RESOURCE_EXHAUSTED?(xn(n.toString()),xn("Using maximum backoff delay to prevent overloading the backend."),r.zo.Lo()):n&&n.code===B.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.r_(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Io(n)})()}r_(){}auth(){this.state=1;const e=this.i_(this.Uo),n=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Uo===n&&this.s_(r,i)},r=>{e(()=>{const i=new J(B.UNKNOWN,"Fetching auth token failed: "+r.message);return this.o_(i)})})}s_(e,n){const r=this.i_(this.Uo);this.stream=this.__(e,n),this.stream.ho(()=>{r(()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,()=>(this.Ho()&&(this.state=3),Promise.resolve())),this.listener.ho()))}),this.stream.Io(i=>{r(()=>this.o_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Jo(){var e=this;this.state=5,this.zo.ko((0,G.Z)(function*(){e.state=0,e.start()}))}o_(e){return ne("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}i_(e){return n=>{this.si.enqueueAndForget(()=>this.Uo===e?n():(ne("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class jK extends cL{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}__(e,n){return this.connection.vo("Listen",e,n)}onMessage(e){this.zo.reset();const n=function eK(t,e){let n;if("targetChange"in e){const r="NO_CHANGE"===(l=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===l?1:"REMOVE"===l?2:"CURRENT"===l?3:"RESET"===l?4:ye(),i=e.targetChange.targetIds||[],o=function(l,h){return l.useProto3Json?(be(void 0===h||"string"==typeof h),Zn.fromBase64String(h||"")):(be(void 0===h||h instanceof Uint8Array),Zn.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){const h=void 0===l.code?B.UNKNOWN:eF(l.code);return new J(h,l.message||"")}(s);n=new oF(r,i,o,a||null)}else if("documentChange"in e){const r=e.documentChange,i=qo(t,r.document.name),o=Nn(r.document.updateTime),s=r.document.createTime?Nn(r.document.createTime):Se.min(),a=new mr({mapValue:{fields:r.document.fields}}),u=nn.newFoundDocument(i,o,s,a);n=new $y(r.targetIds||[],r.removedTargetIds||[],u.key,u)}else if("documentDelete"in e){const r=e.documentDelete,i=qo(t,r.document),o=r.readTime?Nn(r.readTime):Se.min(),s=nn.newNoDocument(i,o);n=new $y([],r.removedTargetIds||[],s.key,s)}else if("documentRemove"in e){const r=e.documentRemove,i=qo(t,r.document);n=new $y([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return ye();{const r=e.filter,{count:i=0,unchangedNames:o}=r,s=new WZ(i,o);n=new iF(r.targetId,s)}}var l;return n}(this.serializer,e),r=function(o){if(!("targetChange"in o))return Se.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?Se.min():s.readTime?Nn(s.readTime):Se.min()}(e);return this.listener.a_(n,r)}u_(e){const n={};n.database=Ip(this.serializer),n.addTarget=function(o,s){let a;const u=s.target;if(a=Oy(u)?{documents:gF(o,u)}:{query:oD(o,u)},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=cF(o,s.resumeToken);const l=tD(o,s.expectedCount);null!==l&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(Se.min())>0){a.readTime=Jl(o,s.snapshotVersion.toTimestamp());const l=tD(o,s.expectedCount);null!==l&&(a.expectedCount=l)}return a}(this.serializer,e);const r=function nK(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ye()}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);r&&(n.labels=r),this.e_(n)}c_(e){const n={};n.database=Ip(this.serializer),n.removeTarget=e,this.e_(n)}}class HK extends cL{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(e,n){return this.connection.vo("Write",e,n)}onMessage(e){if(be(!!e.streamToken),this.lastStreamToken=e.streamToken,this.l_){this.zo.reset();const n=function tK(t,e){return t&&t.length>0?(be(void 0!==e),t.map(n=>function(i,o){let s=Nn(i.updateTime?i.updateTime:o);return s.isEqual(Se.min())&&(s=Nn(o)),new $Z(s,i.transformResults||[])}(n,e))):[]}(e.writeResults,e.commitTime),r=Nn(e.commitTime);return this.listener.I_(r,n)}return be(!e.writeResults||0===e.writeResults.length),this.l_=!0,this.listener.T_()}E_(){const e={};e.database=Ip(this.serializer),this.e_(e)}P_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Ep(this.serializer,r))};this.e_(n)}}class zK extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.d_=!1}A_(){if(this.d_)throw new J(B.FAILED_PRECONDITION,"The client has already been terminated.")}wo(e,n,r){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.wo(e,n,r,i,o)).catch(i=>{throw"FirebaseError"===i.name?(i.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new J(B.UNKNOWN,i.toString())})}Co(e,n,r,i){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Co(e,n,r,o,s,i)).catch(o=>{throw"FirebaseError"===o.name?(o.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new J(B.UNKNOWN,o.toString())})}terminate(){this.d_=!0}}class qK{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){0===this.V_&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve())))}w_(e){"Online"===this.state?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.p_("Offline")))}set(e){this.S_(),this.V_=0,"Online"===e&&(this.f_=!1),this.p_(e)}p_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}y_(e){const n=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.f_?(xn(n),this.f_=!1):ne("OnlineStateTracker",n)}S_(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}}class GK{constructor(e,n,r,i,o){var s=this;this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=o,this.F_.ro(a=>{r.enqueueAndForget((0,G.Z)(function*(){var u;Ma(s)&&(ne("RemoteStore","Restarting streams for network reachability change."),yield(u=(0,G.Z)(function*(h){const g=ae(h);g.C_.add(4),yield sd(g),g.M_.set("Unknown"),g.C_.delete(4),yield Pp(g)}),function l(h){return u.apply(this,arguments)})(s))}))}),this.M_=new qK(r,i)}}function Pp(t){return PD.apply(this,arguments)}function PD(){return PD=(0,G.Z)(function*(t){if(Ma(t))for(const e of t.v_)yield e(!0)}),PD.apply(this,arguments)}function sd(t){return MD.apply(this,arguments)}function MD(){return MD=(0,G.Z)(function*(t){for(const e of t.v_)yield e(!1)}),MD.apply(this,arguments)}function rv(t,e){const n=ae(t);n.D_.has(e.targetId)||(n.D_.set(e.targetId,e),OD(n)?ND(n):ud(n).Ho()&&xD(n,e))}function Mp(t,e){const n=ae(t),r=ud(n);n.D_.delete(e),r.Ho()&&lL(n,e),0===n.D_.size&&(r.Ho()?r.Zo():Ma(n)&&n.M_.set("Unknown"))}function xD(t,e){if(t.x_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Se.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ud(t).u_(e)}function lL(t,e){t.x_.Oe(e),ud(t).c_(e)}function ND(t){t.x_=new GZ({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.D_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),ud(t).start(),t.M_.g_()}function OD(t){return Ma(t)&&!ud(t).jo()&&t.D_.size>0}function Ma(t){return 0===ae(t).C_.size}function dL(t){t.x_=void 0}function ZK(t){return kD.apply(this,arguments)}function kD(){return kD=(0,G.Z)(function*(t){t.D_.forEach((e,n)=>{xD(t,e)})}),kD.apply(this,arguments)}function KK(t,e){return VD.apply(this,arguments)}function VD(){return VD=(0,G.Z)(function*(t,e){dL(t),OD(t)?(t.M_.w_(e),ND(t)):t.M_.set("Unknown")}),VD.apply(this,arguments)}function QK(t,e,n){return FD.apply(this,arguments)}function FD(){return FD=(0,G.Z)(function*(t,e,n){if(t.M_.set("Online"),e instanceof oF&&2===e.state&&e.cause)try{yield(r=(0,G.Z)(function*(o,s){const a=s.cause;for(const u of s.targetIds)o.D_.has(u)&&(yield o.remoteSyncer.rejectListen(u,a),o.D_.delete(u),o.x_.removeTarget(u))}),function i(o,s){return r.apply(this,arguments)})(t,e)}catch(r){ne("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield iv(t,r)}else if(e instanceof $y?t.x_.$e(e):e instanceof iF?t.x_.Je(e):t.x_.Ge(e),!n.isEqual(Se.min()))try{const r=yield XF(t.localStore);n.compareTo(r)>=0&&(yield function(o,s){const a=o.x_.it(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){const h=o.D_.get(l);h&&o.D_.set(l,h.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{const h=o.D_.get(u);if(!h)return;o.D_.set(u,h.withResumeToken(Zn.EMPTY_BYTE_STRING,h.snapshotVersion)),lL(o,u);const g=new Ps(h.target,u,l,h.sequenceNumber);xD(o,g)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){ne("RemoteStore","Failed to raise snapshot:",r),yield iv(t,r)}var r}),FD.apply(this,arguments)}function iv(t,e,n){return LD.apply(this,arguments)}function LD(){return LD=(0,G.Z)(function*(t,e,n){if(!va(e))throw e;t.C_.add(1),yield sd(t),t.M_.set("Offline"),n||(n=()=>XF(t.localStore)),t.asyncQueue.enqueueRetryable((0,G.Z)(function*(){ne("RemoteStore","Retrying IndexedDB access"),yield n(),t.C_.delete(1),yield Pp(t)}))}),LD.apply(this,arguments)}function hL(t,e){return e().catch(n=>iv(t,n,e))}function ad(t){return UD.apply(this,arguments)}function UD(){return UD=(0,G.Z)(function*(t){const e=ae(t),n=xa(e);let r=e.b_.length>0?e.b_[e.b_.length-1].batchId:-1;for(;YK(e);)try{const i=yield kK(e.localStore,r);if(null===i){0===e.b_.length&&n.Zo();break}r=i.batchId,JK(e,i)}catch(i){yield iv(e,i)}fL(e)&&pL(e)}),UD.apply(this,arguments)}function YK(t){return Ma(t)&&t.b_.length<10}function JK(t,e){t.b_.push(e);const n=xa(t);n.Ho()&&n.h_&&n.P_(e.mutations)}function fL(t){return Ma(t)&&!xa(t).jo()&&t.b_.length>0}function pL(t){xa(t).start()}function XK(t){return BD.apply(this,arguments)}function BD(){return BD=(0,G.Z)(function*(t){xa(t).E_()}),BD.apply(this,arguments)}function eQ(t){return $D.apply(this,arguments)}function $D(){return $D=(0,G.Z)(function*(t){const e=xa(t);for(const n of t.b_)e.P_(n.mutations)}),$D.apply(this,arguments)}function tQ(t,e,n){return jD.apply(this,arguments)}function jD(){return jD=(0,G.Z)(function*(t,e,n){const r=t.b_.shift(),i=JT.from(r,e,n);yield hL(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield ad(t)}),jD.apply(this,arguments)}function nQ(t,e){return HD.apply(this,arguments)}function HD(){return HD=(0,G.Z)(function*(t,e){var n;e&&xa(t).h_&&(yield(n=(0,G.Z)(function*(i,o){if(XV(a=o.code)&&a!==B.ABORTED){const s=i.b_.shift();xa(i).Yo(),yield hL(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,o)),yield ad(i)}var a}),function r(i,o){return n.apply(this,arguments)})(t,e)),fL(t)&&pL(t)}),HD.apply(this,arguments)}function gL(t,e){return zD.apply(this,arguments)}function zD(){return zD=(0,G.Z)(function*(t,e){const n=ae(t);n.asyncQueue.verifyOperationInProgress(),ne("RemoteStore","RemoteStore received new credentials");const r=Ma(n);n.C_.add(3),yield sd(n),r&&n.M_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.C_.delete(3),yield Pp(n)}),zD.apply(this,arguments)}function WD(t,e){return qD.apply(this,arguments)}function qD(){return qD=(0,G.Z)(function*(t,e){const n=ae(t);e?(n.C_.delete(2),yield Pp(n)):e||(n.C_.add(2),yield sd(n),n.M_.set("Unknown"))}),qD.apply(this,arguments)}function ud(t){return t.O_||(t.O_=function(n,r,i){const o=ae(n);return o.A_(),new jK(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{ho:ZK.bind(null,t),Io:KK.bind(null,t),a_:QK.bind(null,t)}),t.v_.push(function(){var e=(0,G.Z)(function*(n){n?(t.O_.Yo(),OD(t)?ND(t):t.M_.set("Unknown")):(yield t.O_.stop(),dL(t))});return function(n){return e.apply(this,arguments)}}())),t.O_}function xa(t){return t.N_||(t.N_=function(n,r,i){const o=ae(n);return o.A_(),new HK(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{ho:XK.bind(null,t),Io:nQ.bind(null,t),T_:eQ.bind(null,t),I_:tQ.bind(null,t)}),t.v_.push(function(){var e=(0,G.Z)(function*(n){n?(t.N_.Yo(),yield ad(t)):(yield t.N_.stop(),t.b_.length>0&&(ne("RemoteStore",`Stopping write stream with ${t.b_.length} pending writes`),t.b_=[]))});return function(n){return e.apply(this,arguments)}}())),t.N_}class GD{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Gn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){const s=Date.now()+r,a=new GD(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new J(B.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function cd(t,e){if(xn("AsyncQueue",`${e}: ${t}`),va(t))return new J(B.UNAVAILABLE,`${e}: ${t}`);throw t}class ld{constructor(e){this.comparator=e?(n,r)=>e(n,r)||le.comparator(n.key,r.key):(n,r)=>le.comparator(n.key,r.key),this.keyedMap=hp(),this.sortedSet=new Wt(this.comparator)}static emptySet(e){return new ld(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ld)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,n){const r=new ld;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class mL{constructor(){this.B_=new Wt(le.comparator)}track(e){const n=e.doc.key,r=this.B_.get(n);r?0!==e.type&&3===r.type?this.B_=this.B_.insert(n,e):3===e.type&&1!==r.type?this.B_=this.B_.insert(n,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.B_=this.B_.insert(n,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.B_=this.B_.remove(n):1===e.type&&2===r.type?this.B_=this.B_.insert(n,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):ye():this.B_=this.B_.insert(n,e)}L_(){const e=[];return this.B_.inorderTraversal((n,r)=>{e.push(r)}),e}}class dd{constructor(e,n,r,i,o,s,a,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,o){const s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new dd(e,n,ld.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&lp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}class rQ{constructor(){this.k_=void 0,this.listeners=[]}}class iQ{constructor(){this.queries=new Ss(e=>OV(e),lp),this.onlineState="Unknown",this.q_=new Set}}function ZD(t,e){return KD.apply(this,arguments)}function KD(){return KD=(0,G.Z)(function*(t,e){const n=ae(t),r=e.query;let i=!1,o=n.queries.get(r);if(o||(i=!0,o=new rQ),i)try{o.k_=yield n.onListen(r)}catch(s){const a=cd(s,`Initialization of query '${Gl(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,o),o.listeners.push(e),e.Q_(n.onlineState),o.k_&&e.K_(o.k_)&&JD(n)}),KD.apply(this,arguments)}function QD(t,e){return YD.apply(this,arguments)}function YD(){return YD=(0,G.Z)(function*(t,e){const n=ae(t),r=e.query;let i=!1;const o=n.queries.get(r);if(o){const s=o.listeners.indexOf(e);s>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}),YD.apply(this,arguments)}function oQ(t,e){const n=ae(t);let r=!1;for(const i of e){const s=n.queries.get(i.query);if(s){for(const a of s.listeners)a.K_(i)&&(r=!0);s.k_=i}}r&&JD(n)}function sQ(t,e,n){const r=ae(t),i=r.queries.get(e);if(i)for(const o of i.listeners)o.onError(n);r.queries.delete(e)}function JD(t){t.q_.forEach(e=>{e.next()})}class XD{constructor(e,n,r){this.query=e,this.U_=n,this.W_=!1,this.G_=null,this.onlineState="Unknown",this.options=r||{}}K_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new dd(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.W_?this.z_(e)&&(this.U_.next(e),n=!0):this.j_(e,this.onlineState)&&(this.H_(e),n=!0),this.G_=e,n}onError(e){this.U_.error(e)}Q_(e){this.onlineState=e;let n=!1;return this.G_&&!this.W_&&this.j_(this.G_,e)&&(this.H_(this.G_),n=!0),n}j_(e,n){return!e.fromCache||(!this.options.J_||!("Offline"!==n))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===n)}z_(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.G_&&this.G_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}H_(e){e=dd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.W_=!0,this.U_.next(e)}}class aQ{constructor(e,n){this.Y_=e,this.byteLength=n}Z_(){return"metadata"in this.Y_}}class _L{constructor(e){this.serializer=e}hs(e){return qo(this.serializer,e)}Ps(e){return e.metadata.exists?pF(this.serializer,e.document,!1):nn.newNoDocument(this.hs(e.metadata.name),this.Is(e.metadata.readTime))}Is(e){return Nn(e)}}class uQ{constructor(e,n,r){this.X_=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=yL(e)}ea(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Y_.namedQuery)this.queries.push(e.Y_.namedQuery);else if(e.Y_.documentMetadata){this.documents.push({metadata:e.Y_.documentMetadata}),e.Y_.documentMetadata.exists||++n;const r=_t.fromString(e.Y_.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Y_.document&&(this.documents[this.documents.length-1].document=e.Y_.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ta(e){const n=new Map,r=new _L(this.serializer);for(const i of e)if(i.metadata.queries){const o=r.hs(i.metadata.name);for(const s of i.metadata.queries){const a=(n.get(s)||Ke()).add(o);n.set(s,a)}}return n}complete(){var e=this;return(0,G.Z)(function*(){const n=yield function VK(t,e,n,r){return ED.apply(this,arguments)}(e.localStore,new _L(e.serializer),e.documents,e.X_.id),r=e.ta(e.documents);for(const i of e.queries)yield FK(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,na:e.collectionGroups,ra:n}})()}}function yL(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}class vL{constructor(e){this.key=e}}class IL{constructor(e){this.key=e}}class EL{constructor(e,n){this.query=e,this.ia=n,this.sa=null,this.hasCachedResults=!1,this.current=!1,this.oa=Ke(),this.mutatedKeys=Ke(),this._a=VV(e),this.aa=new ld(this._a)}get ua(){return this.ia}ca(e,n){const r=n?n.la:new mL,i=n?n.aa:this.aa;let o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1;const u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,l="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,g)=>{const m=i.get(h),y=dp(this.query,g)?g:null,T=!!m&&this.mutatedKeys.has(m.key),b=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let M=!1;m&&y?m.data.isEqual(y.data)?T!==b&&(r.track({type:3,doc:y}),M=!0):this.ha(m,y)||(r.track({type:2,doc:y}),M=!0,(u&&this._a(y,u)>0||l&&this._a(y,l)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),M=!0):m&&!y&&(r.track({type:1,doc:m}),M=!0,(u||l)&&(a=!0)),M&&(y?(s=s.add(y),o=b?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const h="F"===this.query.limitType?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{aa:s,la:r,Zi:a,mutatedKeys:o}}ha(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const i=this.aa;this.aa=e.aa,this.mutatedKeys=e.mutatedKeys;const o=e.la.L_();o.sort((l,h)=>function(m,y){const T=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ye()}};return T(m)-T(y)}(l.type,h.type)||this._a(l.doc,h.doc)),this.Pa(r);const s=n?this.Ia():[],a=0===this.oa.size&&this.current?1:0,u=a!==this.sa;return this.sa=a,0!==o.length||u?{snapshot:new dd(this.query,e.aa,i,o,e.mutatedKeys,0===a,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ta:s}:{Ta:s}}Q_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({aa:this.aa,la:new mL,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{Ta:[]}}Ea(e){return!this.ia.has(e)&&!!this.aa.has(e)&&!this.aa.get(e).hasLocalMutations}Pa(e){e&&(e.addedDocuments.forEach(n=>this.ia=this.ia.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ia=this.ia.delete(n)),this.current=e.current)}Ia(){if(!this.current)return[];const e=this.oa;this.oa=Ke(),this.aa.forEach(r=>{this.Ea(r.key)&&(this.oa=this.oa.add(r.key))});const n=[];return e.forEach(r=>{this.oa.has(r)||n.push(new IL(r))}),this.oa.forEach(r=>{e.has(r)||n.push(new vL(r))}),n}da(e){this.ia=e.ls,this.oa=Ke();const n=this.ca(e.documents);return this.applyChanges(n,!0)}Aa(){return dd.fromInitialDocuments(this.query,this.aa,this.mutatedKeys,0===this.sa,this.hasCachedResults)}}class cQ{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class lQ{constructor(e){this.key=e,this.Ra=!1}}class dQ{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Va={},this.ma=new Ss(a=>OV(a),lp),this.fa=new Map,this.ga=new Set,this.pa=new Wt(le.comparator),this.ya=new Map,this.wa=new fD,this.Sa={},this.ba=new Map,this.Da=Fu.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return!0===this.Ca}}function hQ(t,e){return e0.apply(this,arguments)}function e0(){return e0=(0,G.Z)(function*(t,e){const n=T0(t);let r,i;const o=n.ma.get(e);if(o)r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.Aa();else{const s=yield id(n.localStore,Yr(e)),a=n.sharedClientState.addLocalQueryTarget(s.targetId);r=s.targetId,i=yield t0(n,e,r,"current"===a,s.resumeToken),n.isPrimaryClient&&rv(n.remoteStore,s)}return i}),e0.apply(this,arguments)}function t0(t,e,n,r,i){return n0.apply(this,arguments)}function n0(){return n0=(0,G.Z)(function*(t,e,n,r,i){t.va=(g,m,y)=>{return(T=(0,G.Z)(function*(M,U,x,z){let oe=U.view.ca(x);oe.Zi&&(oe=yield Jy(M.localStore,U.query,!1).then(({documents:bt})=>U.view.ca(bt,oe)));const de=z&&z.targetChanges.get(U.targetId),Be=U.view.applyChanges(oe,M.isPrimaryClient,de);return f0(M,U.targetId,Be.Ta),Be.snapshot}),function b(M,U,x,z){return T.apply(this,arguments)})(t,g,m,y);var T};const o=yield Jy(t.localStore,e,!0),s=new EL(e,o.ls),a=s.ca(o.documents),u=yp.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState,i),l=s.applyChanges(a,t.isPrimaryClient,u);f0(t,n,l.Ta);const h=new cQ(e,n,s);return t.ma.set(e,h),t.fa.has(n)?t.fa.get(n).push(e):t.fa.set(n,[e]),l.snapshot}),n0.apply(this,arguments)}function fQ(t,e){return r0.apply(this,arguments)}function r0(){return r0=(0,G.Z)(function*(t,e){const n=ae(t),r=n.ma.get(e),i=n.fa.get(r.targetId);if(i.length>1)return n.fa.set(r.targetId,i.filter(o=>!lp(o,e))),void n.ma.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||(yield od(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),Mp(n.remoteStore,r.targetId),hd(n,r.targetId)}).catch(ya))):(hd(n,r.targetId),yield od(n.localStore,r.targetId,!0))}),r0.apply(this,arguments)}function o0(){return o0=(0,G.Z)(function*(t,e,n){const r=D0(t);try{const i=yield function(s,a){const u=ae(s),l=an.now(),h=a.reduce((y,T)=>y.add(T.key),Ke());let g,m;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let T=ci(),b=Ke();return u.ss.getEntries(y,h).next(M=>{T=M,T.forEach((U,x)=>{x.isValidDocument()||(b=b.add(U))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,T)).next(M=>{g=M;const U=[];for(const x of a){const z=HZ(x,g.get(x.key).overlayedDocument);null!=z&&U.push(new Rs(x.key,z,vV(z.value.mapValue),un.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,U,a)}).next(M=>{m=M;const U=M.applyToLocalDocumentSet(g,b);return u.documentOverlayCache.saveOverlays(y,M.batchId,U)})}).then(()=>({batchId:m.batchId,changes:LV(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let l=s.Sa[s.currentUser.toKey()];l||(l=new Wt($e)),l=l.insert(a,u),s.Sa[s.currentUser.toKey()]=l}(r,i.batchId,n),yield Ms(r,i.changes),yield ad(r.remoteStore)}catch(i){const o=cd(i,"Failed to persist write");n.reject(o)}}),o0.apply(this,arguments)}function wL(t,e){return s0.apply(this,arguments)}function s0(){return s0=(0,G.Z)(function*(t,e){const n=ae(t);try{const r=yield function OK(t,e){const n=ae(t),r=e.snapshotVersion;let i=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const s=n.ss.newChangeBuffer({trackRemovals:!0});i=n.ts;const a=[];e.targetChanges.forEach((h,g)=>{const m=i.get(g);if(!m)return;a.push(n.qr.removeMatchingKeys(o,h.removedDocuments,g).next(()=>n.qr.addMatchingKeys(o,h.addedDocuments,g)));let y=m.withSequenceNumber(o.currentSequenceNumber);var b,M,U;null!==e.targetMismatches.get(g)?y=y.withResumeToken(Zn.EMPTY_BYTE_STRING,Se.min()).withLastLimboFreeSnapshotVersion(Se.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(g,y),M=y,U=h,(0===(b=m).resumeToken.approximateByteSize()||M.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=3e8||U.addedDocuments.size+U.modifiedDocuments.size+U.removedDocuments.size>0)&&a.push(n.qr.updateTargetData(o,y))});let u=ci(),l=Ke();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(eL(o,s,e.documentUpdates).next(h=>{u=h.us,l=h.cs})),!r.isEqual(Se.min())){const h=n.qr.getLastRemoteSnapshotVersion(o).next(g=>n.qr.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return O.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(n.ts=i,o))}(n.localStore,e);e.targetChanges.forEach((i,o)=>{const s=n.ya.get(o);s&&(be(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.Ra=!0:i.modifiedDocuments.size>0?be(s.Ra):i.removedDocuments.size>0&&(be(s.Ra),s.Ra=!1))}),yield Ms(n,r,e)}catch(r){yield ya(r)}}),s0.apply(this,arguments)}function CL(t,e,n){const r=ae(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const i=[];r.ma.forEach((o,s)=>{const a=s.view.Q_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){const u=ae(s);u.onlineState=a;let l=!1;u.queries.forEach((h,g)=>{for(const m of g.listeners)m.Q_(a)&&(l=!0)}),l&&JD(u)}(r.eventManager,e),i.length&&r.Va.a_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function gQ(t,e,n){return a0.apply(this,arguments)}function a0(){return a0=(0,G.Z)(function*(t,e,n){const r=ae(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.ya.get(e),o=i&&i.key;if(o){let s=new Wt(le.comparator);s=s.insert(o,nn.newNoDocument(o,Se.min()));const a=Ke().add(o),u=new _p(Se.min(),new Map,new Wt($e),s,a);yield wL(r,u),r.pa=r.pa.remove(o),r.ya.delete(e),p0(r)}else yield od(r.localStore,e,!1).then(()=>hd(r,e,n)).catch(ya)}),a0.apply(this,arguments)}function mQ(t,e){return u0.apply(this,arguments)}function u0(){return u0=(0,G.Z)(function*(t,e){const n=ae(t),r=e.batch.batchId;try{const i=yield function NK(t,e){const n=ae(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=n.ss.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){const g=l.batch,m=g.keys();let y=O.resolve();return m.forEach(T=>{y=y.next(()=>h.getEntry(u,T)).next(b=>{const M=l.docVersions.get(T);be(null!==M),b.version.compareTo(M)<0&&(g.applyToRemoteDocument(b,l),b.isValidDocument()&&(b.setReadTime(l.commitVersion),h.addEntry(b)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,g))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=Ke();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}(n.localStore,e);h0(n,r,null),d0(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Ms(n,i)}catch(i){yield ya(i)}}),u0.apply(this,arguments)}function _Q(t,e,n){return c0.apply(this,arguments)}function c0(){return c0=(0,G.Z)(function*(t,e,n){const r=ae(t);try{const i=yield function(s,a){const u=ae(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(g=>(be(null!==g),h=g.keys(),u.mutationQueue.removeMutationBatch(l,g))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);h0(r,e,n),d0(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Ms(r,i)}catch(i){yield ya(i)}}),c0.apply(this,arguments)}function l0(){return l0=(0,G.Z)(function*(t,e){const n=ae(t);Ma(n.remoteStore)||ne("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(s){const a=ae(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u))}(n.localStore);if(-1===r)return void e.resolve();const i=n.ba.get(r)||[];i.push(e),n.ba.set(r,i)}catch(r){const i=cd(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),l0.apply(this,arguments)}function d0(t,e){(t.ba.get(e)||[]).forEach(n=>{n.resolve()}),t.ba.delete(e)}function h0(t,e,n){const r=ae(t);let i=r.Sa[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Sa[r.currentUser.toKey()]=i}}function hd(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.fa.get(e))t.ma.delete(r),n&&t.Va.Fa(r,n);t.fa.delete(e),t.isPrimaryClient&&t.wa.Rr(e).forEach(r=>{t.wa.containsKey(r)||TL(t,r)})}function TL(t,e){t.ga.delete(e.path.canonicalString());const n=t.pa.get(e);null!==n&&(Mp(t.remoteStore,n),t.pa=t.pa.remove(e),t.ya.delete(n),p0(t))}function f0(t,e,n){for(const r of n)r instanceof vL?(t.wa.addReference(r.key,e),vQ(t,r)):r instanceof IL?(ne("SyncEngine","Document no longer in limbo: "+r.key),t.wa.removeReference(r.key,e),t.wa.containsKey(r.key)||TL(t,r.key)):ye()}function vQ(t,e){const n=e.key,r=n.path.canonicalString();t.pa.get(n)||t.ga.has(r)||(ne("SyncEngine","New document in limbo: "+n),t.ga.add(r),p0(t))}function p0(t){for(;t.ga.size>0&&t.pa.size<t.maxConcurrentLimboResolutions;){const e=t.ga.values().next().value;t.ga.delete(e);const n=new le(_t.fromString(e)),r=t.Da.next();t.ya.set(r,new lQ(n)),t.pa=t.pa.insert(n,r),rv(t.remoteStore,new Ps(Yr(Wl(n.path)),r,"TargetPurposeLimboResolution",Si._e))}}function Ms(t,e,n){return g0.apply(this,arguments)}function g0(){return g0=(0,G.Z)(function*(t,e,n){const r=ae(t),i=[],o=[],s=[];var a;r.ma.isEmpty()||(r.ma.forEach((a,u)=>{s.push(r.va(u,e,n).then(l=>{if((l||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(u.targetId,l?.fromCache?"not-current":"current"),l){i.push(l);const h=yD.Qi(u.targetId,l);o.push(h)}}))}),yield Promise.all(s),r.Va.a_(i),yield(a=(0,G.Z)(function*(l,h){const g=ae(l);try{yield g.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>O.forEach(h,y=>O.forEach(y.ki,T=>g.persistence.referenceDelegate.addReference(m,y.targetId,T)).next(()=>O.forEach(y.qi,T=>g.persistence.referenceDelegate.removeReference(m,y.targetId,T)))))}catch(m){if(!va(m))throw m;ne("LocalStore","Failed to update sequence numbers: "+m)}for(const m of h){const y=m.targetId;if(!m.fromCache){const T=g.ts.get(y),M=T.withLastLimboFreeSnapshotVersion(T.snapshotVersion);g.ts=g.ts.insert(y,M)}}}),function u(l,h){return a.apply(this,arguments)})(r.localStore,o))}),g0.apply(this,arguments)}function IQ(t,e){return m0.apply(this,arguments)}function m0(){return m0=(0,G.Z)(function*(t,e){const n=ae(t);if(!n.currentUser.isEqual(e)){ne("SyncEngine","User change. New user:",e.toKey());const r=yield JF(n.localStore,e);n.currentUser=e,(o=n).ba.forEach(a=>{a.forEach(u=>{u.reject(new J(B.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.ba.clear(),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ms(n,r._s)}var o}),m0.apply(this,arguments)}function EQ(t,e){const n=ae(t),r=n.ya.get(e);if(r&&r.Ra)return Ke().add(r.key);{let i=Ke();const o=n.fa.get(e);if(!o)return i;for(const s of o){const a=n.ma.get(s);i=i.unionWith(a.view.ua)}return i}}function wQ(t,e){return _0.apply(this,arguments)}function _0(){return _0=(0,G.Z)(function*(t,e){const n=ae(t),r=yield Jy(n.localStore,e.query,!0),i=e.view.da(r);return n.isPrimaryClient&&f0(n,e.targetId,i.Ta),i}),_0.apply(this,arguments)}function CQ(t,e){return y0.apply(this,arguments)}function y0(){return y0=(0,G.Z)(function*(t,e){const n=ae(t);return nL(n.localStore,e).then(r=>Ms(n,r))}),y0.apply(this,arguments)}function TQ(t,e,n,r){return v0.apply(this,arguments)}function v0(){return v0=(0,G.Z)(function*(t,e,n,r){const i=ae(t),o=yield function(a,u){const l=ae(a),h=ae(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",g=>h.Cn(g,u).next(m=>m?l.localDocuments.getDocuments(g,m):O.resolve(null)))}(i.localStore,e);var u;null!==o?("pending"===n?yield ad(i.remoteStore):"acknowledged"===n||"rejected"===n?(h0(i,e,r||null),d0(i,e),u=e,ae(ae(i.localStore).mutationQueue).Fn(u)):ye(),yield Ms(i,o)):ne("SyncEngine","Cannot apply mutation batch with id: "+e)}),v0.apply(this,arguments)}function I0(){return I0=(0,G.Z)(function*(t,e){const n=ae(t);if(T0(n),D0(n),!0===e&&!0!==n.Ca){const r=n.sharedClientState.getAllActiveQueryTargets(),i=yield DL(n,r.toArray());n.Ca=!0,yield WD(n.remoteStore,!0);for(const o of i)rv(n.remoteStore,o)}else if(!1===e&&!1!==n.Ca){const r=[];let i=Promise.resolve();n.fa.forEach((o,s)=>{n.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(hd(n,s),od(n.localStore,s,!0))),Mp(n.remoteStore,s)}),yield i,yield DL(n,r),function(s){const a=ae(s);a.ya.forEach((u,l)=>{Mp(a.remoteStore,l)}),a.wa.Vr(),a.ya=new Map,a.pa=new Wt(le.comparator)}(n),n.Ca=!1,yield WD(n.remoteStore,!1)}}),I0.apply(this,arguments)}function DL(t,e,n){return E0.apply(this,arguments)}function E0(){return E0=(0,G.Z)(function*(t,e,n){const r=ae(t),i=[],o=[];for(const s of e){let a;const u=r.fa.get(s);if(u&&0!==u.length){a=yield id(r.localStore,Yr(u[0]));for(const l of u){const h=r.ma.get(l),g=yield wQ(r,h);g.snapshot&&o.push(g.snapshot)}}else{const l=yield tL(r.localStore,s);a=yield id(r.localStore,l),yield t0(r,AL(l),s,!1,a.resumeToken)}i.push(a)}return r.Va.a_(o),i}),E0.apply(this,arguments)}function AL(t){return MV(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function AQ(t){return n=ae(t).localStore,ae(ae(n).persistence).Bi();var n}function bQ(t,e,n,r){return w0.apply(this,arguments)}function w0(){return w0=(0,G.Z)(function*(t,e,n,r){const i=ae(t);if(i.Ca)return void ne("SyncEngine","Ignoring unexpected query state notification.");const o=i.fa.get(e);if(o&&o.length>0)switch(n){case"current":case"not-current":{const s=yield nL(i.localStore,kV(o[0])),a=_p.createSynthesizedRemoteEventForCurrentChange(e,"current"===n,Zn.EMPTY_BYTE_STRING);yield Ms(i,s,a);break}case"rejected":yield od(i.localStore,e,!0),hd(i,e,r);break;default:ye()}}),w0.apply(this,arguments)}function SQ(t,e,n){return C0.apply(this,arguments)}function C0(){return C0=(0,G.Z)(function*(t,e,n){const r=T0(t);if(r.Ca){for(const i of e){if(r.fa.has(i)){ne("SyncEngine","Adding an already active target "+i);continue}const o=yield tL(r.localStore,i),s=yield id(r.localStore,o);yield t0(r,AL(o),s.targetId,!1,s.resumeToken),rv(r.remoteStore,s)}for(const i of n)r.fa.has(i)&&(yield od(r.localStore,i,!1).then(()=>{Mp(r.remoteStore,i),hd(r,i)}).catch(ya))}}),C0.apply(this,arguments)}function T0(t){const e=ae(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=wL.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=EQ.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=gQ.bind(null,e),e.Va.a_=oQ.bind(null,e.eventManager),e.Va.Fa=sQ.bind(null,e.eventManager),e}function D0(t){const e=ae(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=mQ.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=_Q.bind(null,e),e}class xp{constructor(){this.synchronizeTabs=!1}initialize(e){var n=this;return(0,G.Z)(function*(){n.serializer=Rp(e.databaseInfo.databaseId),n.sharedClientState=n.createSharedClientState(e),n.persistence=n.createPersistence(e),yield n.persistence.start(),n.localStore=n.createLocalStore(e),n.gcScheduler=n.createGarbageCollectionScheduler(e,n.localStore),n.indexBackfillerScheduler=n.createIndexBackfillerScheduler(e,n.localStore)})()}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return YF(this.persistence,new QF,e.initialUser,this.serializer)}createPersistence(e){return new pD(Ky.jr,this.serializer)}createSharedClientState(e){return new sL}terminate(){var e=this;return(0,G.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class A0 extends xp{constructor(e,n,r){super(),this.xa=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var n=()=>super.initialize,r=this;return(0,G.Z)(function*(){yield n().call(r,e),yield r.xa.initialize(r,e),yield D0(r.xa.syncEngine),yield ad(r.xa.remoteStore),yield r.persistence.mi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return YF(this.persistence,new QF,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){return new $F(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){const r=new tZ(n,this.persistence);return new eZ(e.asyncQueue,r)}createPersistence(e){const n=_D(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Sr.withCacheSize(this.cacheSizeBytes):Sr.DEFAULT;return new mD(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,uL(),nv(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new sL}}class bL extends A0{constructor(e,n){super(e,n,!1),this.xa=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){var n=()=>super.initialize,r=this;return(0,G.Z)(function*(){yield n().call(r,e);const i=r.xa.syncEngine;r.sharedClientState instanceof AD&&(r.sharedClientState.syncEngine={Ys:TQ.bind(null,i),Zs:bQ.bind(null,i),Xs:SQ.bind(null,i),Bi:AQ.bind(null,i),Js:CQ.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.mi(function(){var o=(0,G.Z)(function*(s){yield function DQ(t,e){return I0.apply(this,arguments)}(r.xa.syncEngine,s),r.gcScheduler&&(s&&!r.gcScheduler.started?r.gcScheduler.start():s||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(s&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():s||r.indexBackfillerScheduler.stop())});return function(s){return o.apply(this,arguments)}}())})()}createSharedClientState(e){const n=uL();if(!AD.D(n))throw new J(B.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=_D(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new AD(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class fd{initialize(e,n){var r=this;return(0,G.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(n),r.remoteStore=r.createRemoteStore(n),r.eventManager=r.createEventManager(n),r.syncEngine=r.createSyncEngine(n,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>CL(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=IQ.bind(null,r.syncEngine),yield WD(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new iQ}createDatastore(e){const n=Rp(e.databaseInfo.databaseId),r=new $K(e.databaseInfo);return new zK(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return r=this.localStore,i=this.datastore,o=e.asyncQueue,s=n=>CL(this.syncEngine,n,0),a=aL.D()?new aL:new LK,new GK(r,i,o,s,a);var r,i,o,s,a}createSyncEngine(e,n){return function(i,o,s,a,u,l,h){const g=new dQ(i,o,s,a,u,l);return h&&(g.Ca=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return(e=(0,G.Z)(function*(r){const i=ae(r);ne("RemoteStore","RemoteStore shutting down."),i.C_.add(5),yield sd(i),i.F_.shutdown(),i.M_.set("Unknown")}),function n(r){return e.apply(this,arguments)})(this.remoteStore);var e}}function SL(t,e=10240){let n=0;return{read:()=>(0,G.Z)(function*(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}})(),cancel:()=>(0,G.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class ov{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Oa(this.observer.next,e)}error(e){this.observer.error?this.Oa(this.observer.error,e):xn("Uncaught Error in snapshot listener:",e.toString())}Na(){this.muted=!0}Oa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}class MQ{constructor(e,n){this.Ba=e,this.serializer=n,this.metadata=new Gn,this.buffer=new Uint8Array,this.La=new TextDecoder("utf-8"),this.ka().then(r=>{r&&r.Z_()?this.metadata.resolve(r.Y_.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Y_)}`))},r=>this.metadata.reject(r))}close(){return this.Ba.cancel()}getMetadata(){var e=this;return(0,G.Z)(function*(){return e.metadata.promise})()}Ma(){var e=this;return(0,G.Z)(function*(){return yield e.getMetadata(),e.ka()})()}ka(){var e=this;return(0,G.Z)(function*(){const n=yield e.qa();if(null===n)return null;const r=e.La.decode(n),i=Number(r);isNaN(i)&&e.Qa(`length string (${r}) is not valid number`);const o=yield e.Ka(i);return new aQ(JSON.parse(o),n.length+i)})()}$a(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}qa(){var e=this;return(0,G.Z)(function*(){for(;e.$a()<0&&!(yield e.Ua()););if(0===e.buffer.length)return null;const n=e.$a();n<0&&e.Qa("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,n);return e.buffer=e.buffer.slice(n),r})()}Ka(e){var n=this;return(0,G.Z)(function*(){for(;n.buffer.length<e;)(yield n.Ua())&&n.Qa("Reached the end of bundle when more is expected.");const r=n.La.decode(n.buffer.slice(0,e));return n.buffer=n.buffer.slice(e),r})()}Qa(e){throw this.Ba.cancel(),new Error(`Invalid bundle format: ${e}`)}Ua(){var e=this;return(0,G.Z)(function*(){const n=yield e.Ba.read();if(!n.done){const r=new Uint8Array(e.buffer.length+n.value.length);r.set(e.buffer),r.set(n.value,e.buffer.length),e.buffer=r}return n.done})()}}class xQ{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var n=this;return(0,G.Z)(function*(){if(n.ensureCommitNotCalled(),n.mutations.length>0)throw new J(B.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,G.Z)(function*(s,a){const u=ae(s),l=Ip(u.serializer)+"/documents",h={documents:a.map(T=>vp(u.serializer,T))},g=yield u.Co("BatchGetDocuments",l,h,a.length),m=new Map;g.forEach(T=>{const b=function XZ(t,e){return"found"in e?function(r,i){be(!!i.found);const o=qo(r,i.found.name),s=Nn(i.found.updateTime),a=i.found.createTime?Nn(i.found.createTime):Se.min(),u=new mr({mapValue:{fields:i.found.fields}});return nn.newFoundDocument(o,s,a,u)}(t,e):"missing"in e?function(r,i){be(!!i.missing),be(!!i.readTime);const o=qo(r,i.missing),s=Nn(i.readTime);return nn.newNoDocument(o,s)}(t,e):ye()}(u.serializer,T);m.set(b.key.toString(),b)});const y=[];return a.forEach(T=>{const b=m.get(T.toString());be(!!b),y.push(b)}),y}),function o(s,a){return i.apply(this,arguments)})(n.datastore,e);var i;return r.forEach(i=>n.recordVersion(i)),r})()}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Yl(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,G.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const n=e.readVersions;var r;e.mutations.forEach(r=>{n.delete(r.key.toString())}),n.forEach((r,i)=>{const o=le.fromPath(i);e.mutations.push(new QT(o,e.precondition(o)))}),yield(r=(0,G.Z)(function*(o,s){const a=ae(o),u=Ip(a.serializer)+"/documents",l={writes:s.map(h=>Ep(a.serializer,h))};yield a.wo("Commit",u,l)}),function i(o,s){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw ye();n=Se.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new J(B.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(Se.min())?un.exists(!1):un.updateTime(n):un.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(Se.min()))throw new J(B.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return un.updateTime(n)}return un.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class NQ{constructor(e,n,r,i,o){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=o,this.Wa=r.maxAttempts,this.zo=new SD(this.asyncQueue,"transaction_retry")}run(){this.Wa-=1,this.Ga()}Ga(){var e=this;this.zo.ko((0,G.Z)(function*(){const n=new xQ(e.datastore),r=e.za(n);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>n.commit().then(()=>{e.deferred.resolve(i)}).catch(o=>{e.ja(o)}))}).catch(i=>{e.ja(i)})}))}za(e){try{const n=this.updateFunction(e);return!np(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}ja(e){this.Wa>0&&this.Ha(e)?(this.Wa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ga(),Promise.resolve()))):this.deferred.reject(e)}Ha(e){if("FirebaseError"===e.name){const n=e.code;return"aborted"===n||"failed-precondition"===n||"already-exists"===n||!XV(n)}return!1}}class OQ{constructor(e,n,r,i){var o=this;this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=ir.UNAUTHENTICATED,this.clientId=Kk.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var s=(0,G.Z)(function*(a){ne("FirestoreClient","Received user=",a.uid),yield o.authCredentialListener(a),o.user=a});return function(a){return s.apply(this,arguments)}}()),this.appCheckCredentials.start(r,s=>(ne("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}getConfiguration(){var e=this;return(0,G.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new J(B.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const n=new Gn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,G.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),n.resolve()}catch(r){const i=cd(r,"Failed to shutdown persistence");n.reject(i)}})),n.promise}}function sv(t,e){return b0.apply(this,arguments)}function b0(){return b0=(0,G.Z)(function*(t,e){t.asyncQueue.verifyOperationInProgress(),ne("FirestoreClient","Initializing OfflineComponentProvider");const n=yield t.getConfiguration();yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(function(){var i=(0,G.Z)(function*(o){r.isEqual(o)||(yield JF(e.localStore,o),r=o)});return function(o){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}),b0.apply(this,arguments)}function S0(t,e){return R0.apply(this,arguments)}function R0(){return R0=(0,G.Z)(function*(t,e){t.asyncQueue.verifyOperationInProgress();const n=yield P0(t);ne("FirestoreClient","Initializing OnlineComponentProvider");const r=yield t.getConfiguration();yield e.initialize(n,r),t.setCredentialChangeListener(i=>gL(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,o)=>gL(e.remoteStore,o)),t._onlineComponents=e}),R0.apply(this,arguments)}function RL(t){return"FirebaseError"===t.name?t.code===B.FAILED_PRECONDITION||t.code===B.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}function P0(t){return M0.apply(this,arguments)}function M0(){return M0=(0,G.Z)(function*(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ne("FirestoreClient","Using user provided OfflineComponentProvider");try{yield sv(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!RL(n))throw n;ai("Error using user provided cache. Falling back to memory cache: "+n),yield sv(t,new xp)}}else ne("FirestoreClient","Using default OfflineComponentProvider"),yield sv(t,new xp);return t._offlineComponents}),M0.apply(this,arguments)}function av(t){return x0.apply(this,arguments)}function x0(){return x0=(0,G.Z)(function*(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ne("FirestoreClient","Using user provided OnlineComponentProvider"),yield S0(t,t._uninitializedComponentsProvider._online)):(ne("FirestoreClient","Using default OnlineComponentProvider"),yield S0(t,new fd))),t._onlineComponents}),x0.apply(this,arguments)}function PL(t){return P0(t).then(e=>e.persistence)}function pd(t){return P0(t).then(e=>e.localStore)}function ML(t){return av(t).then(e=>e.remoteStore)}function N0(t){return av(t).then(e=>e.syncEngine)}function gd(t){return O0.apply(this,arguments)}function O0(){return O0=(0,G.Z)(function*(t){const e=yield av(t),n=e.eventManager;return n.onListen=hQ.bind(null,e.syncEngine),n.onUnlisten=fQ.bind(null,e.syncEngine),n}),O0.apply(this,arguments)}function NL(t,e,n={}){const r=new Gn;return t.asyncQueue.enqueueAndForget((0,G.Z)(function*(){return function(o,s,a,u,l){const h=new ov({next:m=>{s.enqueueAndForget(()=>QD(o,g));const y=m.docs.has(a);!y&&m.fromCache?l.reject(new J(B.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&u&&"server"===u.source?l.reject(new J(B.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),g=new XD(Wl(a.path),h,{includeMetadataChanges:!0,J_:!0});return ZD(o,g)}(yield gd(t),t.asyncQueue,e,n,r)})),r.promise}function OL(t,e,n={}){const r=new Gn;return t.asyncQueue.enqueueAndForget((0,G.Z)(function*(){return function(o,s,a,u,l){const h=new ov({next:m=>{s.enqueueAndForget(()=>QD(o,g)),m.fromCache&&"server"===u.source?l.reject(new J(B.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),g=new XD(a,h,{includeMetadataChanges:!0,J_:!0});return ZD(o,g)}(yield gd(t),t.asyncQueue,e,n,r)})),r.promise}function kL(t){const e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e}const VL=new Map;function k0(t,e,n){if(!n)throw new J(B.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function FL(t,e,n,r){if(!0===e&&!0===r)throw new J(B.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function LL(t){if(!le.isDocumentKey(t))throw new J(B.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function UL(t){if(le.isDocumentKey(t))throw new J(B.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function uv(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=(r=t).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof t?"a function":ye()}function st(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new J(B.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=uv(t);throw new J(B.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function BL(t,e){if(e<=0)throw new J(B.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}class $L{constructor(e){var n,r;if(void 0===e.host){if(void 0!==e.ssl)throw new J(B.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new J(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}FL("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=kL(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(o){if(void 0!==o.timeoutSeconds){if(isNaN(o.timeoutSeconds))throw new J(B.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new J(B.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new J(B.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Np{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $L({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new J(B.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new J(B.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $L(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new j7;switch(r.type){case"firstParty":return new q7(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new J(B.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=VL.get(n);r&&(ne("ComponentProvider","Removing Datastore"),VL.delete(n),r.terminate())}(this),Promise.resolve()}}function jL(t,e,n,r={}){var i;const o=(t=st(t,Np))._getSettings(),s=`${e}:${n}`;if("firestore.googleapis.com"!==o.host&&o.host!==s&&ai("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,u;if("string"==typeof r.mockUserToken)a=r.mockUserToken,u=ir.MOCK_USER;else{a=(0,Vt.Sg)(r.mockUserToken,null===(i=t._app)||void 0===i?void 0:i.options.projectId);const l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new J(B.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new ir(l)}t._authCredentials=new H7(new Gk(a,u))}}class _r{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new _r(this.firestore,e,this._query)}}class rn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Go(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new rn(this.firestore,e,this._key)}}class Go extends _r{constructor(e,n,r){super(e,n,Wl(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new rn(this.firestore,null,new le(e))}withConverter(e){return new Go(this.firestore,e,this._path)}}function HL(t,e,...n){if(t=(0,Vt.m9)(t),k0("collection","path",e),t instanceof Np){const r=_t.fromString(e,...n);return UL(r),new Go(t,null,r)}{if(!(t instanceof rn||t instanceof Go))throw new J(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(_t.fromString(e,...n));return UL(r),new Go(t.firestore,null,r)}}function cv(t,e,...n){if(t=(0,Vt.m9)(t),1===arguments.length&&(e=Kk.newId()),k0("doc","path",e),t instanceof Np){const r=_t.fromString(e,...n);return LL(r),new rn(t,null,new le(r))}{if(!(t instanceof rn||t instanceof Go))throw new J(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(_t.fromString(e,...n));return LL(r),new rn(t.firestore,t instanceof Go?t.converter:null,new le(r))}}function zL(t,e){return t=(0,Vt.m9)(t),e=(0,Vt.m9)(e),(t instanceof rn||t instanceof Go)&&(e instanceof rn||e instanceof Go)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function V0(t,e){return t=(0,Vt.m9)(t),e=(0,Vt.m9)(e),t instanceof _r&&e instanceof _r&&t.firestore===e.firestore&&lp(t._query,e._query)&&t.converter===e.converter}class qQ{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new SD(this,"async_queue_retry"),this.iu=()=>{const n=nv();n&&ne("AsyncQueue","Visibility state changed to "+n.visibilityState),this.zo.Qo()};const e=nv();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.su(),this.ou(e)}enterRestrictedMode(e){if(!this.Za){this.Za=!0,this.nu=e||!1;const n=nv();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this.iu)}}enqueue(e){if(this.su(),this.Za)return new Promise(()=>{});const n=new Gn;return this.ou(()=>this.Za&&this.nu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ya.push(e),this._u()))}_u(){var e=this;return(0,G.Z)(function*(){if(0!==e.Ya.length){try{yield e.Ya[0](),e.Ya.shift(),e.zo.reset()}catch(n){if(!va(n))throw n;ne("AsyncQueue","Operation failed with retryable error: "+n)}e.Ya.length>0&&e.zo.ko(()=>e._u())}})()}ou(e){const n=this.Ja.then(()=>(this.tu=!0,e().catch(r=>{throw this.eu=r,this.tu=!1,xn("INTERNAL UNHANDLED ERROR: ",function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),a}(r)),r}).then(r=>(this.tu=!1,r))));return this.Ja=n,n}enqueueAfterDelay(e,n,r){this.su(),this.ru.indexOf(e)>-1&&(n=0);const i=GD.createAndSchedule(this,e,n,r,o=>this.au(o));return this.Xa.push(i),i}su(){this.eu&&ye()}verifyOperationInProgress(){}uu(){var e=this;return(0,G.Z)(function*(){let n;do{n=e.Ja,yield n}while(n!==e.Ja)})()}cu(e){for(const n of this.Xa)if(n.timerId===e)return!0;return!1}lu(e){return this.uu().then(()=>{this.Xa.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Xa)if(n.skipDelay(),"all"!==e&&n.timerId===e)break;return this.uu()})}hu(e){this.ru.push(e)}au(e){const n=this.Xa.indexOf(e);this.Xa.splice(n,1)}}function F0(t){return function(n,r){if("object"!=typeof n||null===n)return!1;const i=n;for(const o of["next","error","complete"])if(o in i&&"function"==typeof i[o])return!0;return!1}(t)}class GQ{constructor(){this._progressObserver={},this._taskCompletionResolver=new Gn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class qt extends Np{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new qQ,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||WL(this),this._firestoreClient.terminate()}}function KQ(t,e){const n="object"==typeof t?t:(0,Kr.getApp)(),r="string"==typeof t?t:e||"(default)",i=(0,Kr._getProvider)(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=(0,Vt.P0)("firestore");o&&jL(i,...o)}return i}function Cn(t){return t._firestoreClient||WL(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function WL(t){var e,n,r;const i=t._freezeSettings(),o=(u=(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",new wZ(t._databaseId,u,t._persistenceKey,(h=i).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,kL(h.experimentalLongPollingOptions),h.useFetchStreams));var u,h;t._firestoreClient=new OQ(t._authCredentials,t._appCheckCredentials,t._queue,o),null!==(n=i.localCache)&&void 0!==n&&n._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function qL(t,e,n){const r=new Gn;return t.asyncQueue.enqueue((0,G.Z)(function*(){try{yield sv(t,n),yield S0(t,e),r.resolve()}catch(i){const o=i;if(!RL(o))throw o;ai("Error enabling indexeddb cache. Falling back to memory cache: "+o),r.reject(o)}})).then(()=>r.promise)}function GL(t){if(t._initialized||t._terminated)throw new J(B.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Zo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Zo(Zn.fromBase64String(e))}catch(n){throw new J(B.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Zo(Zn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class xs{constructor(...e){for(let n=0;n<e.length;++n)if(0===e[n].length)throw new J(B.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new tn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Uu{constructor(e){this._methodName=e}}class lv{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new J(B.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new J(B.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return $e(this._lat,e._lat)||$e(this._long,e._long)}}const oY=/^__.*__$/;class sY{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return null!==this.fieldMask?new Rs(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ql(e,this.data,n,this.fieldTransforms)}}class ZL{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Rs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function KL(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ye()}}class dv{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===o&&this.Pu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(e){return new dv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.Tu({path:r,du:!1});return i.Au(e),i}Ru(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.Tu({path:r,du:!1});return i.Pu(),i}Vu(e){return this.Tu({path:void 0,du:!0})}mu(e){return pv(e,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(e){return void 0!==this.fieldMask.find(n=>e.isPrefixOf(n))||void 0!==this.fieldTransforms.find(n=>e.isPrefixOf(n.field))}Pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Au(this.path.get(e))}Au(e){if(0===e.length)throw this.mu("Document fields must not be empty");if(KL(this.Iu)&&oY.test(e))throw this.mu('Document fields cannot begin and end with "__"')}}class aY{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Rp(e)}pu(e,n,r,i=!1){return new dv({Iu:e,methodName:n,gu:r,path:tn.emptyPath(),du:!1,fu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Bu(t){const e=t._freezeSettings(),n=Rp(t._databaseId);return new aY(t._databaseId,!!e.ignoreUndefinedProperties,n)}function hv(t,e,n,r,i,o={}){const s=t.pu(o.merge||o.mergeFields?2:0,e,n,i);$0("Data must be an object, but it was:",s,r);const a=JL(r,s);let u,l;if(o.merge)u=new ui(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){const h=[];for(const g of o.mergeFields){const m=Vp(e,g,n);if(!s.contains(m))throw new J(B.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);e2(h,m)||h.push(m)}u=new ui(h),l=s.fieldTransforms.filter(g=>u.covers(g.field))}else u=null,l=s.fieldTransforms;return new sY(new mr(a),u,l)}class kp extends Uu{_toFieldTransform(e){if(2!==e.Iu)throw e.mu(1===e.Iu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof kp}}function QL(t,e,n){return new dv({Iu:3,gu:e.settings.gu,methodName:t._methodName,du:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class L0 extends Uu{_toFieldTransform(e){return new pp(e.path,new Zl)}isEqual(e){return e instanceof L0}}class uY extends Uu{constructor(e,n){super(e),this.yu=n}_toFieldTransform(e){const n=QL(this,e,!0),r=this.yu.map(o=>$u(o,n)),i=new Pu(r);return new pp(e.path,i)}isEqual(e){return this===e}}class cY extends Uu{constructor(e,n){super(e),this.yu=n}_toFieldTransform(e){const n=QL(this,e,!0),r=this.yu.map(o=>$u(o,n)),i=new Mu(r);return new pp(e.path,i)}isEqual(e){return this===e}}class lY extends Uu{constructor(e,n){super(e),this.wu=n}_toFieldTransform(e){const n=new Kl(e.serializer,jV(e.serializer,this.wu));return new pp(e.path,n)}isEqual(e){return this===e}}function U0(t,e,n,r){const i=t.pu(1,e,n);$0("Data must be an object, but it was:",i,r);const o=[],s=mr.empty();Ia(r,(u,l)=>{const h=fv(e,u,n);l=(0,Vt.m9)(l);const g=i.Ru(h);if(l instanceof kp)o.push(h);else{const m=$u(l,g);null!=m&&(o.push(h),s.set(h,m))}});const a=new ui(o);return new ZL(s,a,i.fieldTransforms)}function B0(t,e,n,r,i,o){const s=t.pu(1,e,n),a=[Vp(e,r,n)],u=[i];if(o.length%2!=0)throw new J(B.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)a.push(Vp(e,o[m])),u.push(o[m+1]);const l=[],h=mr.empty();for(let m=a.length-1;m>=0;--m)if(!e2(l,a[m])){const y=a[m];let T=u[m];T=(0,Vt.m9)(T);const b=s.Ru(y);if(T instanceof kp)l.push(y);else{const M=$u(T,b);null!=M&&(l.push(y),h.set(y,M))}}const g=new ui(l);return new ZL(h,g,s.fieldTransforms)}function YL(t,e,n,r=!1){return $u(n,t.pu(r?4:3,e))}function $u(t,e){if(XL(t=(0,Vt.m9)(t)))return $0("Unsupported field value:",e,t),JL(t,e);if(t instanceof Uu)return function(r,i){if(!KL(i.Iu))throw i.mu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.mu(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.du&&4!==e.Iu)throw e.mu("Nested arrays are not supported");return function(r,i){const o=[];let s=0;for(const a of r){let u=$u(a,i.Vu(s));null==u&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if(null===(r=(0,Vt.m9)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return jV(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const o=an.fromDate(r);return{timestampValue:Jl(i.serializer,o)}}if(r instanceof an){const o=new an(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Jl(i.serializer,o)}}if(r instanceof lv)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Zo)return{bytesValue:cF(i.serializer,r._byteString)};if(r instanceof rn){const o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.mu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:nD(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.mu(`Unsupported field value: ${uv(r)}`)}(t,e)}function JL(t,e){const n={};return lV(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ia(t,(r,i)=>{const o=$u(i,e.Eu(r));null!=o&&(n[r]=o)}),{mapValue:{fields:n}}}function XL(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof an||t instanceof lv||t instanceof Zo||t instanceof rn||t instanceof Uu)}function $0(t,e,n){if(!XL(n)||"object"!=typeof(i=n)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const r=uv(n);throw e.mu("an object"===r?t+" a custom object":t+" "+r)}var i}function Vp(t,e,n){if((e=(0,Vt.m9)(e))instanceof xs)return e._internalPath;if("string"==typeof e)return fv(t,e);throw pv("Field path arguments must be of type string or ",t,!1,void 0,n)}const dY=new RegExp("[~\\*/\\[\\]]");function fv(t,e,n){if(e.search(dY)>=0)throw pv(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new xs(...e.split("."))._internalPath}catch{throw pv(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function pv(t,e,n,r,i){const o=r&&!r.isEmpty(),s=void 0!==i;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new J(B.INVALID_ARGUMENT,a+t+u)}function e2(t,e){return t.some(n=>n.isEqual(e))}class Fp{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new rn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new hY(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(gv("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n)}}}class hY extends Fp{data(){return super.data()}}function gv(t,e){return"string"==typeof e?fv(t,e):e instanceof xs?e._internalPath:e._delegate._internalPath}function t2(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new J(B.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class j0{}class Lp extends j0{}function Na(t,e,...n){let r=[];e instanceof j0&&r.push(e),r=r.concat(n),function(o){const s=o.filter(u=>u instanceof md).length,a=o.filter(u=>u instanceof Up).length;if(s>1||s>0&&a>0)throw new J(B.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Up extends Lp{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Up(e,n,r)}_apply(e){const n=this._parse(e);return o2(e._query,n),new _r(e.firestore,e.converter,ZT(e._query,n))}_parse(e){const n=Bu(e.firestore);return function(o,s,a,u,l,h,g){let m;if(l.isKeyField()){if("array-contains"===h||"array-contains-any"===h)throw new J(B.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if("in"===h||"not-in"===h){i2(g,h);const y=[];for(const T of g)y.push(r2(u,o,T));m={arrayValue:{values:y}}}else m=r2(u,o,g)}else"in"!==h&&"not-in"!==h&&"array-contains-any"!==h||i2(g,h),m=YL(a,"where",g,"in"===h||"not-in"===h);return ht.create(l,h,m)}(e._query,0,n,e.firestore._databaseId,this._field,this._op,this._value)}}class md extends j0{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new md(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===n.length?n[0]:Nt.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return 0===n.getFilters().length?e:(function(i,o){let s=i;const a=o.getFlattenedFilters();for(const u of a)o2(s,u),s=ZT(s,u)}(e._query,n),new _r(e.firestore,e.converter,ZT(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class H0 extends Lp{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new H0(e,n)}_apply(e){const n=function(i,o,s){if(null!==i.startAt)throw new J(B.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new J(B.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new up(o,s)}(e._query,this._field,this._direction);return new _r(e.firestore,e.converter,function(i,o){const s=i.explicitOrderBy.concat([o]);return new bs(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}class mv extends Lp{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new mv(e,n,r)}_apply(e){return new _r(e.firestore,e.converter,Vy(e._query,this._limit,this._limitType))}}class _v extends Lp{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new _v(e,n,r)}_apply(e){const n=n2(e,this.type,this._docOrFields,this._inclusive);return new _r(e.firestore,e.converter,(o=n,new bs((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)));var i,o}}class yv extends Lp{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new yv(e,n,r)}_apply(e){const n=n2(e,this.type,this._docOrFields,this._inclusive);return new _r(e.firestore,e.converter,(o=n,new bs((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)));var i,o}}function n2(t,e,n,r){if(n[0]=(0,Vt.m9)(n[0]),n[0]instanceof Fp)return function(o,s,a,u,l){if(!u)throw new J(B.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const h=[];for(const g of ql(o))if(g.field.isKeyField())h.push(Su(s,u.key));else{const m=u.data.field(g.field);if(Ry(m))throw new J(B.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+g.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===m){const y=g.field.canonicalString();throw new J(B.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}h.push(m)}return new Aa(h,l)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=Bu(t.firestore);return function(s,a,u,l,h,g){const m=s.explicitOrderBy;if(h.length>m.length)throw new J(B.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const y=[];for(let T=0;T<h.length;T++){const b=h[T];if(m[T].field.isKeyField()){if("string"!=typeof b)throw new J(B.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof b}`);if(!GT(s)&&-1!==b.indexOf("/"))throw new J(B.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${b}' contains a slash.`);const M=s.path.child(_t.fromString(b));if(!le.isDocumentKey(M))throw new J(B.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${M}' is not because it contains an odd number of segments.`);const U=new le(M);y.push(Su(a,U))}else{const M=YL(u,l,b);y.push(M)}}return new Aa(y,g)}(t._query,t.firestore._databaseId,i,e,n,r)}}function r2(t,e,n){if("string"==typeof(n=(0,Vt.m9)(n))){if(""===n)throw new J(B.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!GT(e)&&-1!==n.indexOf("/"))throw new J(B.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(_t.fromString(n));if(!le.isDocumentKey(r))throw new J(B.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Su(t,new le(r))}if(n instanceof rn)return Su(t,n._key);throw new J(B.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${uv(n)}.`)}function i2(t,e){if(!Array.isArray(t)||0===t.length)throw new J(B.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function o2(t,e){const n=function(i,o){for(const s of i)for(const a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw new J(B.INVALID_ARGUMENT,n===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class z0{convertValue(e,n="none"){switch(Ta(e)){case 0:return null;case 1:return e.booleanValue;case 2:return wn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(As(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw ye()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ia(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertGeoPoint(e){return new lv(wn(e.latitude),wn(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Py(e);return null==r?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ip(e));default:return null}}convertTimestamp(e){const n=Ea(e);return new an(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=_t.fromString(e);be(vF(r));const i=new wa(r.get(1),r.get(3)),o=new le(r.popFirst(5));return i.isEqual(n)||xn(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}function vv(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class EY extends z0{constructor(e){super(),this.firestore=e}convertBytes(e){return new Zo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new rn(this.firestore,null,n)}}class ju{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ns extends Fp{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Bp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(gv("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Bp extends Ns{data(e={}){return super.data(e)}}class Oa{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new ju(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Bp(this._firestore,this._userDataWriter,r.key,r,new ju(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new J(B.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new Bp(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ju(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:s++}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||3!==a.type).map(a=>{const u=new Bp(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ju(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,h=-1;return 0!==a.type&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),1!==a.type&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:CY(a.type),doc:u,oldIndex:l,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function CY(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ye()}}function a2(t,e){return t instanceof Ns&&e instanceof Ns?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Oa&&e instanceof Oa&&t._firestore===e._firestore&&V0(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}class ka extends z0{constructor(e){super(),this.firestore=e}convertBytes(e){return new Zo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new rn(this.firestore,null,n)}}function u2(t,e,n){t=st(t,rn);const r=st(t.firestore,qt),i=vv(t.converter,e,n);return _d(r,[hv(Bu(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,un.none())])}function c2(t,e,n,...r){t=st(t,rn);const i=st(t.firestore,qt),o=Bu(i);let s;return s="string"==typeof(e=(0,Vt.m9)(e))||e instanceof xs?B0(o,"updateDoc",t._key,e,n,r):U0(o,"updateDoc",t._key,e),_d(i,[s.toMutation(t._key,un.exists(!0))])}function l2(t,...e){var n,r,i;t=(0,Vt.m9)(t);let o={includeMetadataChanges:!1},s=0;"object"!=typeof e[s]||F0(e[s])||(o=e[s],s++);const a={includeMetadataChanges:o.includeMetadataChanges};if(F0(e[s])){const g=e[s];e[s]=null===(n=g.next)||void 0===n?void 0:n.bind(g),e[s+1]=null===(r=g.error)||void 0===r?void 0:r.bind(g),e[s+2]=null===(i=g.complete)||void 0===i?void 0:i.bind(g)}let u,l,h;if(t instanceof rn)l=st(t.firestore,qt),h=Wl(t._key.path),u={next:g=>{e[s]&&e[s](W0(l,t,g))},error:e[s+1],complete:e[s+2]};else{const g=st(t,_r);l=st(g.firestore,qt),h=g._query;const m=new ka(l);u={next:y=>{e[s]&&e[s](new Oa(l,m,g,y))},error:e[s+1],complete:e[s+2]},t2(t._query)}return function(m,y,T,b){const M=new ov(b),U=new XD(y,M,T);return m.asyncQueue.enqueueAndForget((0,G.Z)(function*(){return ZD(yield gd(m),U)})),()=>{M.Na(),m.asyncQueue.enqueueAndForget((0,G.Z)(function*(){return QD(yield gd(m),U)}))}}(Cn(l),h,a,u)}function _d(t,e){return function(r,i){const o=new Gn;return r.asyncQueue.enqueueAndForget((0,G.Z)(function*(){return function pQ(t,e,n){return o0.apply(this,arguments)}(yield N0(r),i,o)})),o.promise}(Cn(t),e)}function W0(t,e,n){const r=n.docs.get(e._key),i=new ka(t);return new Ns(t,i,e._key,r,new ju(n.hasPendingWrites,n.fromCache),e.converter)}const $Y={maxAttempts:5};class d2{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Bu(e)}set(e,n,r){this._verifyNotCommitted();const i=Va(e,this._firestore),o=vv(i.converter,n,r),s=hv(this._dataReader,"WriteBatch.set",i._key,o,null!==i.converter,r);return this._mutations.push(s.toMutation(i._key,un.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const o=Va(e,this._firestore);let s;return s="string"==typeof(n=(0,Vt.m9)(n))||n instanceof xs?B0(this._dataReader,"WriteBatch.update",o._key,n,r,i):U0(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(s.toMutation(o._key,un.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Va(e,this._firestore);return this._mutations=this._mutations.concat(new Yl(n._key,un.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new J(B.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Va(t,e){if((t=(0,Vt.m9)(t)).firestore!==e)throw new J(B.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}class jY extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=Bu(n)}get(n){const r=Va(n,this._firestore),i=new EY(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||1!==o.length)return ye();const s=o[0];if(s.isFoundDocument())return new Fp(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new Fp(this._firestore,i,r._key,null,r.converter);throw ye()})}set(n,r,i){const o=Va(n,this._firestore),s=vv(o.converter,r,i),a=hv(this._dataReader,"Transaction.set",o._key,s,null!==o.converter,i);return this._transaction.set(o._key,a),this}update(n,r,i,...o){const s=Va(n,this._firestore);let a;return a="string"==typeof(r=(0,Vt.m9)(r))||r instanceof xs?B0(this._dataReader,"Transaction.update",s._key,r,i,o):U0(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(n){const r=Va(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Va(e,this._firestore),r=new ka(this._firestore);return super.get(e).then(i=>new Ns(this._firestore,r,n._key,i._document,new ju(!1,!1),n.converter))}}function G0(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new J("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}function g2(){if(typeof Uint8Array>"u")throw new J("unimplemented","Uint8Arrays are not available in this environment.")}function m2(){if(!function IZ(){return typeof atob<"u"}())throw new J("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,n=!0){Fl=Kr.SDK_VERSION,(0,Kr._registerComponent)(new R1.wA("firestore",(r,{instanceIdentifier:i,options:o})=>{const s=r.getProvider("app").getImmediate(),a=new qt(new z7(r.getProvider("auth-internal")),new G7(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new J(B.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new wa(l.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),(0,Kr.registerVersion)(qk,"4.3.2",e),(0,Kr.registerVersion)(qk,"4.3.2","esm2017")}();class $p{constructor(e){this._delegate=e}static fromBase64String(e){return m2(),new $p(Zo.fromBase64String(e))}static fromUint8Array(e){return g2(),new $p(Zo.fromUint8Array(e))}toBase64(){return m2(),this._delegate.toBase64()}toUint8Array(){return g2(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Z0(t){return function JY(t,e){if("object"!=typeof t||null===t)return!1;const n=t;for(const r of e)if(r in n&&"function"==typeof n[r])return!0;return!1}(t,["next","error","complete"])}class XY{enableIndexedDbPersistence(e,n){return function QQ(t,e){GL(t=st(t,qt));const n=Cn(t);if(n._uninitializedComponentsProvider)throw new J(B.FAILED_PRECONDITION,"SDK cache is already specified.");ai("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings(),i=new fd;return qL(n,i,new A0(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return function YQ(t){GL(t=st(t,qt));const e=Cn(t);if(e._uninitializedComponentsProvider)throw new J(B.FAILED_PRECONDITION,"SDK cache is already specified.");ai("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings(),r=new fd;return qL(e,r,new bL(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function JQ(t){if(t._initialized&&!t._terminated)throw new J(B.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Gn;return t._queue.enqueueAndForgetEvenWhileRestricted((0,G.Z)(function*(){try{yield(n=(0,G.Z)(function*(i){if(!mo.D())return Promise.resolve();const o=i+"main";yield mo.delete(o)}),function r(i){return n.apply(this,arguments)})(_D(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}var n})),e.promise}(e._delegate)}}class _2{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof wa||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&ai("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},n),e)).merge,this._delegate._setSettings(e)}useEmulator(e,n,r={}){jL(this._delegate,e,n,r)}enableNetwork(){return function eY(t){return function kQ(t){return t.asyncQueue.enqueue((0,G.Z)(function*(){const e=yield PL(t),n=yield ML(t);return e.setNetworkEnabled(!0),function(i){const o=ae(i);return o.C_.delete(0),Pp(o)}(n)}))}(Cn(t=st(t,qt)))}(this._delegate)}disableNetwork(){return function tY(t){return function VQ(t){return t.asyncQueue.enqueue((0,G.Z)(function*(){const e=yield PL(t),n=yield ML(t);return e.setNetworkEnabled(!1),(r=(0,G.Z)(function*(o){const s=ae(o);s.C_.add(0),yield sd(s),s.M_.set("Offline")}),function i(o){return r.apply(this,arguments)})(n);var r}))}(Cn(t=st(t,qt)))}(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,FL("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function XQ(t){return function(n){const r=new Gn;return n.asyncQueue.enqueueAndForget((0,G.Z)(function*(){return function yQ(t,e){return l0.apply(this,arguments)}(yield N0(n),r)})),r.promise}(Cn(t=st(t,qt)))}(this._delegate)}onSnapshotsInSync(e){return function xY(t,e){return function UQ(t,e){const n=new ov(e);return t.asyncQueue.enqueueAndForget((0,G.Z)(function*(){return i=yield gd(t),o=n,ae(i).q_.add(o),void o.next();var i,o})),()=>{n.Na(),t.asyncQueue.enqueueAndForget((0,G.Z)(function*(){return i=yield gd(t),o=n,void ae(i).q_.delete(o);var i,o}))}}(Cn(t=st(t,qt)),F0(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new J("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new yd(this,HL(this._delegate,e))}catch(n){throw Jr(n,"collection()","Firestore.collection()")}}doc(e){try{return new Ji(this,cv(this._delegate,e))}catch(n){throw Jr(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Xr(this,function WQ(t,e){if(t=st(t,Np),k0("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new J(B.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new _r(t,null,(r=e,new bs(_t.emptyPath(),r)));var r}(this._delegate,e))}catch(n){throw Jr(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function HY(t,e,n){t=st(t,qt);const r=Object.assign(Object.assign({},$Y),n);return function(o){if(o.maxAttempts<1)throw new J(B.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){const u=new Gn;return o.asyncQueue.enqueueAndForget((0,G.Z)(function*(){const l=yield function xL(t){return av(t).then(e=>e.datastore)}(o);new NQ(o.asyncQueue,l,a,s,u).run()})),u.promise}(Cn(t),i=>e(new jY(t,i)),r)}(this._delegate,n=>e(new y2(this,n)))}batch(){return Cn(this._delegate),new v2(new d2(this._delegate,e=>_d(this._delegate,e)))}loadBundle(e){return function nY(t,e){const n=Cn(t=st(t,qt)),r=new GQ;return function BQ(t,e,n,r){const i=function(s,a){let u;return u="string"==typeof s?tF().encode(s):s,h=function(h,g){if(h instanceof Uint8Array)return SL(h,g);if(h instanceof ArrayBuffer)return SL(new Uint8Array(h),g);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),new MQ(h,a);var h}(n,Rp(e));t.asyncQueue.enqueueAndForget((0,G.Z)(function*(){!function RQ(t,e,n){const r=ae(t);var i;(i=(0,G.Z)(function*(s,a,u){try{const l=yield a.getMetadata();if(yield function(T,b){const M=ae(T),U=Nn(b.createTime);return M.persistence.runTransaction("hasNewerBundle","readonly",x=>M.Kr.getBundleMetadata(x,b.id)).then(x=>!!x&&x.createTime.compareTo(U)>=0)}(s.localStore,l))return yield a.close(),u._completeWith({taskState:"Success",documentsLoaded:(T=l).totalDocuments,bytesLoaded:T.totalBytes,totalDocuments:T.totalDocuments,totalBytes:T.totalBytes}),Promise.resolve(new Set);u._updateProgress(yL(l));const h=new uQ(l,s.localStore,a.serializer);let g=yield a.Ma();for(;g;){const y=yield h.ea(g);y&&u._updateProgress(y),g=yield a.Ma()}const m=yield h.complete();return yield Ms(s,m.ra,void 0),yield function(T,b){const M=ae(T);return M.persistence.runTransaction("Save bundle","readwrite",U=>M.Kr.saveBundleMetadata(U,b))}(s.localStore,l),u._completeWith(m.progress),Promise.resolve(m.na)}catch(l){return ai("SyncEngine",`Loading bundle failed with ${l}`),u._failWith(l),Promise.resolve(new Set)}var T}),function o(s,a,u){return i.apply(this,arguments)})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield N0(t),i,r)}))}(n,t._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function rY(t,e){return function $Q(t,e){return t.asyncQueue.enqueue((0,G.Z)(function*(){return function(r,i){const o=ae(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.Kr.getNamedQuery(s,i))}(yield pd(t),e)}))}(Cn(t=st(t,qt)),e).then(n=>n?new _r(t,null,n.query):null)}(this._delegate,e).then(n=>n?new Xr(this,n):null)}}class Ev extends z0{constructor(e){super(),this.firestore=e}convertBytes(e){return new $p(new Zo(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return Ji.forKey(n,this.firestore,null)}}class y2{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new Ev(e)}get(e){const n=zu(e);return this._delegate.get(n).then(r=>new jp(this._firestore,new Ns(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const i=zu(e);return r?(G0("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const o=zu(e);return 2===arguments.length?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){const n=zu(e);return this._delegate.delete(n),this}}class v2{constructor(e){this._delegate=e}set(e,n,r){const i=zu(e);return r?(G0("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const o=zu(e);return 2===arguments.length?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){const n=zu(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class Hu{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new Bp(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Hp(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=Hu.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(n);return o||(o=new Hu(e,new Ev(e),n),i.set(n,o)),o}}Hu.INSTANCES=new WeakMap;class Ji{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Ev(e)}static forPath(e,n,r){if(e.length%2!=0)throw new J("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ji(n,new rn(n._delegate,r,new le(e)))}static forKey(e,n,r){return new Ji(n,new rn(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new yd(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new yd(this.firestore,HL(this._delegate,e))}catch(n){throw Jr(n,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Vt.m9)(e))instanceof rn&&zL(this._delegate,e)}set(e,n){n=G0("DocumentReference.set",n);try{return n?u2(this._delegate,e,n):u2(this._delegate,e)}catch(r){throw Jr(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return 1===arguments.length?c2(this._delegate,e):c2(this._delegate,e,n,...r)}catch(i){throw Jr(i,"updateDoc()","DocumentReference.update()")}}delete(){return function PY(t){return _d(st(t.firestore,qt),[new Yl(t._key,un.none())])}(this._delegate)}onSnapshot(...e){const n=I2(e),r=E2(e,i=>new jp(this.firestore,new Ns(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return l2(this._delegate,n,r)}get(e){let n;return n="cache"===e?.source?function DY(t){t=st(t,rn);const e=st(t.firestore,qt),n=Cn(e),r=new ka(e);return function FQ(t,e){const n=new Gn;return t.asyncQueue.enqueueAndForget((0,G.Z)(function*(){return(r=(0,G.Z)(function*(o,s,a){try{const u=yield function(h,g){const m=ae(h);return m.persistence.runTransaction("read document","readonly",y=>m.localDocuments.getDocument(y,g))}(o,s);u.isFoundDocument()?a.resolve(u):u.isNoDocument()?a.resolve(null):a.reject(new J(B.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(u){const l=cd(u,`Failed to get document '${s} from cache`);a.reject(l)}}),function i(o,s,a){return r.apply(this,arguments)})(yield pd(t),e,n);var r})),n.promise}(n,t._key).then(i=>new Ns(e,r,t._key,i,new ju(null!==i&&i.hasLocalMutations,!0),t.converter))}(this._delegate):"server"===e?.source?function AY(t){t=st(t,rn);const e=st(t.firestore,qt);return NL(Cn(e),t._key,{source:"server"}).then(n=>W0(e,t,n))}(this._delegate):function TY(t){t=st(t,rn);const e=st(t.firestore,qt);return NL(Cn(e),t._key).then(n=>W0(e,t,n))}(this._delegate),n.then(r=>new jp(this.firestore,new Ns(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Ji(this.firestore,this._delegate.withConverter(e?Hu.getInstance(this.firestore,e):null))}}function Jr(t,e,n){return t.message=t.message.replace(e,n),t}function I2(t){for(const e of t)if("object"==typeof e&&!Z0(e))return e;return{}}function E2(t,e){var n,r;let i;return i=Z0(t[0])?t[0]:Z0(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]},{next:o=>{i.next&&i.next(e(o))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class jp{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new Ji(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return a2(this._delegate,e._delegate)}}class Hp extends jp{data(e){const n=this._delegate.data(e);return this._delegate._converter||function $7(t,e){t||ye()}(void 0!==n),n}}class Xr{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Ev(e)}where(e,n,r){try{return new Xr(this.firestore,Na(this._delegate,function fY(t,e,n){const r=e,i=gv("where",t);return Up._create(i,r,n)}(e,n,r)))}catch(i){throw Jr(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new Xr(this.firestore,Na(this._delegate,function pY(t,e="asc"){const n=e,r=gv("orderBy",t);return H0._create(r,n)}(e,n)))}catch(r){throw Jr(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Xr(this.firestore,Na(this._delegate,function gY(t){return BL("limit",t),mv._create("limit",t,"F")}(e)))}catch(n){throw Jr(n,"limit()","Query.limit()")}}limitToLast(e){try{return new Xr(this.firestore,Na(this._delegate,function mY(t){return BL("limitToLast",t),mv._create("limitToLast",t,"L")}(e)))}catch(n){throw Jr(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Xr(this.firestore,Na(this._delegate,function _Y(...t){return _v._create("startAt",t,!0)}(...e)))}catch(n){throw Jr(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Xr(this.firestore,Na(this._delegate,function yY(...t){return _v._create("startAfter",t,!1)}(...e)))}catch(n){throw Jr(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Xr(this.firestore,Na(this._delegate,function vY(...t){return yv._create("endBefore",t,!1)}(...e)))}catch(n){throw Jr(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Xr(this.firestore,Na(this._delegate,function IY(...t){return yv._create("endAt",t,!0)}(...e)))}catch(n){throw Jr(n,"endAt()","Query.endAt()")}}isEqual(e){return V0(this._delegate,e._delegate)}get(e){let n;return n="cache"===e?.source?function SY(t){t=st(t,_r);const e=st(t.firestore,qt),n=Cn(e),r=new ka(e);return function LQ(t,e){const n=new Gn;return t.asyncQueue.enqueueAndForget((0,G.Z)(function*(){return(r=(0,G.Z)(function*(o,s,a){try{const u=yield Jy(o,s,!0),l=new EL(s,u.ls),h=l.ca(u.documents),g=l.applyChanges(h,!1);a.resolve(g.snapshot)}catch(u){const l=cd(u,`Failed to execute query '${s} against cache`);a.reject(l)}}),function i(o,s,a){return r.apply(this,arguments)})(yield pd(t),e,n);var r})),n.promise}(n,t._query).then(i=>new Oa(e,r,t,i))}(this._delegate):"server"===e?.source?function RY(t){t=st(t,_r);const e=st(t.firestore,qt),n=Cn(e),r=new ka(e);return OL(n,t._query,{source:"server"}).then(i=>new Oa(e,r,t,i))}(this._delegate):function bY(t){t=st(t,_r);const e=st(t.firestore,qt),n=Cn(e),r=new ka(e);return t2(t._query),OL(n,t._query).then(i=>new Oa(e,r,t,i))}(this._delegate),n.then(r=>new K0(this.firestore,new Oa(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=I2(e),r=E2(e,i=>new K0(this.firestore,new Oa(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return l2(this._delegate,n,r)}withConverter(e){return new Xr(this.firestore,this._delegate.withConverter(e?Hu.getInstance(this.firestore,e):null))}}class tJ{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new Hp(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class K0{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Xr(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Hp(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new tJ(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new Hp(this._firestore,r))})}isEqual(e){return a2(this._delegate,e._delegate)}}class yd extends Xr{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ji(this.firestore,e):null}doc(e){try{return new Ji(this.firestore,void 0===e?cv(this._delegate):cv(this._delegate,e))}catch(n){throw Jr(n,"doc()","CollectionReference.doc()")}}add(e){return function MY(t,e){const n=st(t.firestore,qt),r=cv(t),i=vv(t.converter,e);return _d(n,[hv(Bu(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,un.exists(!1))]).then(()=>r)}(this._delegate,e).then(n=>new Ji(this.firestore,n))}isEqual(e){return zL(this._delegate,e._delegate)}withConverter(e){return new yd(this.firestore,this._delegate.withConverter(e?Hu.getInstance(this.firestore,e):null))}}function zu(t){return st(t,rn)}class Q0{constructor(...e){this._delegate=new xs(...e)}static documentId(){return new Q0(tn.keyField().canonicalString())}isEqual(e){return(e=(0,Vt.m9)(e))instanceof xs&&this._delegate._internalPath.isEqual(e._internalPath)}}class Wu{constructor(e){this._delegate=e}static serverTimestamp(){const e=function WY(){return new L0("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Wu(e)}static delete(){const e=function zY(){return new kp("deleteField")}();return e._methodName="FieldValue.delete",new Wu(e)}static arrayUnion(...e){const n=function qY(...t){return new uY("arrayUnion",t)}(...e);return n._methodName="FieldValue.arrayUnion",new Wu(n)}static arrayRemove(...e){const n=function GY(...t){return new cY("arrayRemove",t)}(...e);return n._methodName="FieldValue.arrayRemove",new Wu(n)}static increment(e){const n=function ZY(t){return new lY("increment",t)}(e);return n._methodName="FieldValue.increment",new Wu(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const nJ={Firestore:_2,GeoPoint:lv,Timestamp:an,Blob:$p,Transaction:y2,WriteBatch:v2,DocumentReference:Ji,DocumentSnapshot:jp,Query:Xr,QueryDocumentSnapshot:Hp,QuerySnapshot:K0,CollectionReference:yd,FieldPath:Q0,FieldValue:Wu,setLogLevel:function eJ(t){!function B7(t){_a.setLogLevel(t)}(t)},CACHE_SIZE_UNLIMITED:-1};function w2(t,e){return function oJ(t,e=h1){return new We(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{r?.()}})}(t,e)}function Y0(t,e){return w2(t,e).pipe(ge(n=>({payload:n,type:"query"})))}!function iJ(t){(function rJ(t,e){t.INTERNAL.registerComponent(new R1.wA("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},nJ)))})(t,(e,n)=>new _2(e,n,new XY)),t.registerVersion("@firebase/firestore-compat","0.3.22")}(Y_.Z);class C2{ref;afs;constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){const r=this.ref.collection(e),{ref:i,query:o}=b2(r,n);return new A2(i,o,this.afs)}snapshotChanges(){return function sJ(t,e){return w2(t,e).pipe(R_(void 0),qC(),ge(n=>{const[r,i]=n;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Di)}valueChanges(e={}){return this.snapshotChanges().pipe(ge(({payload:n})=>e.idField?{...n.data(),[e.idField]:n.id}:n.data()))}get(e){return I(this.ref.get(e)).pipe(Di)}}function wv(t,e){return Y0(t,e).pipe(R_(void 0),qC(),ge(n=>{const[r,i]=n,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,u)=>{const l=o.find(g=>g.doc.ref.isEqual(a.ref)),h=r?.payload.docs.find(g=>g.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&h&&JSON.stringify(h.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:u,newIndex:u,type:"modified",doc:a}})}),s}))}function T2(t,e,n){return wv(t,n).pipe(M_((r,i)=>function aJ(t,e,n){return e.forEach(r=>{n.indexOf(r.type)>-1&&(t=function uJ(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return J0(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return J0(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return J0(t,e.oldIndex,1)}return t}(t,r))}),t}(r,i.map(o=>o.payload),e),[]),Oe(),ge(r=>r.map(i=>({type:i.type,payload:i}))))}function J0(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function D2(t){return(!t||0===t.length)&&(t=["added","removed","modified"]),t}class A2{ref;query;afs;constructor(e,n,r){this.ref=e,this.query=n,this.afs=r}stateChanges(e){let n=wv(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe(ge(r=>r.filter(i=>e.indexOf(i.type)>-1)))),n.pipe(R_(void 0),qC(),ho(([r,i])=>i.length>0||!r),ge(([,r])=>r),Di)}auditTrail(e){return this.stateChanges(e).pipe(M_((n,r)=>[...n,...r],[]))}snapshotChanges(e){const n=D2(e);return T2(this.query,n,this.afs.schedulers.outsideAngular).pipe(Di)}valueChanges(e={}){return Y0(this.query,this.afs.schedulers.outsideAngular).pipe(ge(n=>n.payload.docs.map(r=>e.idField?{...r.data(),[e.idField]:r.id}:r.data())),Di)}get(e){return I(this.query.get(e)).pipe(Di)}add(e){return this.ref.add(e)}doc(e){return new C2(this.ref.doc(e),this.afs)}}class cJ{query;afs;constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return e&&0!==e.length?wv(this.query,this.afs.schedulers.outsideAngular).pipe(ge(n=>n.filter(r=>e.indexOf(r.type)>-1)),ho(n=>n.length>0),Di):wv(this.query,this.afs.schedulers.outsideAngular).pipe(Di)}auditTrail(e){return this.stateChanges(e).pipe(M_((n,r)=>[...n,...r],[]))}snapshotChanges(e){const n=D2(e);return T2(this.query,n,this.afs.schedulers.outsideAngular).pipe(Di)}valueChanges(e={}){return Y0(this.query,this.afs.schedulers.outsideAngular).pipe(ge(r=>r.payload.docs.map(i=>e.idField?{[e.idField]:i.id,...i.data()}:i.data())),Di)}get(e){return I(this.query.get(e)).pipe(Di)}}const lJ=new ce("angularfire2.enableFirestorePersistence"),dJ=new ce("angularfire2.firestore.persistenceSettings"),hJ=new ce("angularfire2.firestore.settings"),fJ=new ce("angularfire2.firestore.use-emulator");function b2(t,e=(n=>n)){return{query:e(t),ref:t}}let pJ=(()=>{class t{schedulers;firestore;persistenceEnabled$;constructor(n,r,i,o,s,a,u,l,h,g,m,y,T,b,M,U,x){this.schedulers=u;const z=WC(n,a,r),oe=h;g&&b1(z,a,m,T,b,M,y,U),[this.firestore,this.persistenceEnabled$]=_1(`${z.name}.firestore`,"AngularFirestore",z.name,()=>{const de=a.runOutsideAngular(()=>z.firestore());if(o&&de.settings(o),oe&&de.useEmulator(...oe),i&&!d_(s)){const Be=()=>{try{return I(de.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(bt){return typeof console<"u"&&console.warn(bt),A(!1)}};return[de,a.runOutsideAngular(Be)]}return[de,A(!1)]},[o,oe,i])}collection(n,r){let i;i="string"==typeof n?this.firestore.collection(n):n;const{ref:o,query:s}=b2(i,r),a=this.schedulers.ngZone.run(()=>o);return new A2(a,s,this)}collectionGroup(n,r){const i=r||(s=>s),o=this.firestore.collectionGroup(n);return new cJ(i(o),this)}doc(n){let r;r="string"==typeof n?this.firestore.doc(n):n;const i=this.schedulers.ngZone.run(()=>r);return new C2(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||t)(se(J_),se(zC,8),se(lJ,8),se(hJ,8),se(hs),se(It),se(Q_),se(dJ,8),se(fJ,8),se(S1,8),se(E1,8),se(w1,8),se(C1,8),se(T1,8),se(D1,8),se(A1,8),se(HC,8))};static \u0275prov=Ae({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),S2=(()=>{class t{constructor(n){this.db=n,this.path="recetas",this.recetasRef=n.collection(this.path),this.recetasRef.valueChanges().subscribe(r=>{console.log(r)})}getAll(){return this.recetasRef.valueChanges()}save(n){const r=this.db.createId();return console.log("Receta",n),this.recetasRef.doc(r).set(Object.assign({},n))}static#e=this.\u0275fac=function(r){return new(r||t)(se(pJ))};static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function gJ(t,e){if(1&t&&(Pt(0,"li")(1,"h3"),Pn(2),gt(),Pt(3,"p"),Pn(4),gt(),Pt(5,"p"),Pn(6),gt(),Ci(7,"img",6),gt()),2&t){const n=e.$implicit;oo(2),Um(n.nombre),oo(2),zh("Ingredientes: ",n.ingredientes,""),oo(2),zh("Pasos: ",n.pasos,""),oo(1),ia("src",n.imagen,UI)}}let mJ=(()=>{class t{constructor(n,r,i){this.recetasService=n,this.sanitizer=r,this.recetasFirebaseService=i,this.recetas=[],this.terminoBusqueda=""}ngOnInit(){this.recetas=this.recetasService.obtenerRecetas(),this.imagenRecetaBase64=localStorage.getItem("imagenReceta")||null}borrarTodasLasRecetas(){this.recetasService.borrarRecetas()}static#e=this.\u0275fac=function(r){return new(r||t)(re(c1),re(zx),re(S2))};static#t=this.\u0275cmp=Eo({type:t,selectors:[["app-recetas"]],decls:15,vars:1,consts:[["lang","es"],["charset","utf-8"],["name","viewport","content","width=device-width, initial-scale=1.0"],[3,"click"],[1,"recipe-title"],[4,"ngFor","ngForOf"],["alt","Imagen de la receta",1,"imagen-receta",3,"src"]],template:function(r,i){1&r&&(Pt(0,"html",0)(1,"head")(2,"title"),Pn(3,"P\xe1gina Web de Recetas Culinarias"),gt(),Ci(4,"meta",1)(5,"meta",2),gt(),Pt(6,"body")(7,"button",3),zr("click",function(){return i.borrarTodasLasRecetas()}),Pn(8,"Borrar Recetas"),gt(),Pt(9,"p",4),Pn(10,"Recetas"),gt(),Pt(11,"h2"),Pn(12,"Recetas"),gt(),Pt(13,"ul"),SE(14,gJ,8,4,"li",5),gt()()()),2&r&&(oo(14),ia("ngForOf",i.recetas))},dependencies:[Ow],styles:["body[_ngcontent-%COMP%]{font-family:Montserrat,Helvetica,Arial,sans-serif;background-color:#ecf0f1;margin:0}a[_ngcontent-%COMP%], a[_ngcontent-%COMP%]:after, a[_ngcontent-%COMP%]:before{transition:all .3s ease-in-out}a[_ngcontent-%COMP%], a[_ngcontent-%COMP%]:hover, a[_ngcontent-%COMP%]:focus, a[_ngcontent-%COMP%]:active{outline:none;text-decoration:none}*[_ngcontent-%COMP%], *[_ngcontent-%COMP%]:after, *[_ngcontent-%COMP%]:before{box-sizing:border-box}header[_ngcontent-%COMP%]{position:relative;background-color:#d6d2bd;padding:8px 0;width:100%;float:left}.menu[_ngcontent-%COMP%]{position:relative;float:none;width:100%}.menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{float:right;padding:0;margin:0;list-style:none}.menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{float:left}.menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline-block;margin:5px;font-size:13px;letter-spacing:.03em;text-transform:uppercase;color:#fff;opacity:.6;position:relative;padding:8px 15px;width:initial}.menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{opacity:1}.container[_ngcontent-%COMP%]{width:1170px;margin:0 auto}.titulo[_ngcontent-%COMP%]{font-size:4rem;font-family:Arial,Helvetica,sans-serif;color:#000}.texto[_ngcontent-%COMP%]{font-size:1.5rem;font-family:Arial,Helvetica,sans-serif;color:#000}.barra[_ngcontent-%COMP%]{top:13px;color:#fff;left:0;position:absolute;text-transform:uppercase}.footer[_ngcontent-%COMP%]{background-color:#d6d2bd;padding:1rem 0;text-align:center;margin:2rem}.footer__texto[_ngcontent-%COMP%]{font-family:var(--fuentePrincipal);text-align:center;font-size:2.2rem}.estilo-input[_ngcontent-%COMP%]{margin-top:10px;padding:15rem;padding:10px;font-size:16px;border:2px solid #d6d2bd;border-radius:5px;width:93%}.estilo-button[_ngcontent-%COMP%]{padding:10px 20px;font-size:18px;background-color:#d6d2bd;color:#fff;border:none;border-radius:5px;cursor:pointer}.estilo-button[_ngcontent-%COMP%]:hover{background-color:#c6ac2a}.body-centering-image[_ngcontent-%COMP%]{margin:0;padding:0;display:flex;justify-content:center;align-items:center;height:100vh;background-color:#f0f0f0}.centered-container-image[_ngcontent-%COMP%]{text-align:center}.centered-img[_ngcontent-%COMP%]{max-width:100%;max-height:100%}.body-reset[_ngcontent-%COMP%]{margin:0;padding:0}.container[_ngcontent-%COMP%]{justify-content:space-between;align-items:center}.menu[_ngcontent-%COMP%]{align-items:center}.menu-link[_ngcontent-%COMP%]{color:#fff;text-decoration:none;margin-right:20px}.menu-list[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.menu-item[_ngcontent-%COMP%]{display:inline;margin-right:20px}#searchForm[_ngcontent-%COMP%]{text-align:center;margin:20px 0}.search-input[_ngcontent-%COMP%]{width:300px;padding:10px;border:1px solid #ccc;border-radius:5px;font-size:16px}.search-button[_ngcontent-%COMP%]{padding:10px 20px;background-color:#333;color:#fff;border:none;border-radius:5px;font-size:16px;cursor:pointer}.recipe-title[_ngcontent-%COMP%]{text-align:center;font-size:24px;margin:20px 0}.recipe-container[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:center}ul[_ngcontent-%COMP%]{text-align:center}.imagen-receta[_ngcontent-%COMP%]{max-width:100%;max-height:300px;object-fit:cover}"]})}return t})(),_J=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=Eo({type:t,selectors:[["app-nosotros"]],decls:15,vars:0,consts:[["charset","utf-8"],["name","viewport","content","width=device-width, initial-scale=1.0"],[1,"body-centering"],[1,"Titulo"],[1,"texto",2,"font-size","20px"],[1,"centered-img-container"],["src","https://pypspanish.files.wordpress.com/2013/09/nosotros1.png?w=300&h=300","alt","Comida Ecuatoriana",1,"centered-img"],[1,"footer"],[1,"footer__texto"]],template:function(r,i){1&r&&(Pt(0,"head")(1,"title"),Pn(2,"P\xe1gina Web de Recetas Culinarias"),gt(),Ci(3,"meta",0)(4,"meta",1),gt(),Pt(5,"body",2)(6,"p",3),Pn(7,"Sobre nosotros"),gt(),Pt(8,"p",4),Pn(9,"Hecho por un estudiante de la carrera de computaci\xf3n, cuyo trabajo de clase consiste en la uni\xf3n y estructura b\xe1sica de una p\xe1gina web utilizando JavaScript, CSS y HTML, en Angular y usando varios m\xf3dulos NS. Hemos implementado de manera b\xe1sica los m\xe9todos de estos con el estilo de los scripts CSS, la ubicaci\xf3n de componentes con HTML y la creaci\xf3n de m\xe9todos con los scripts de JavaScript, como los de generar una lista de recetas, registro del formulario y b\xfasqueda. "),gt(),Pt(10,"div",5),Ci(11,"img",6),gt()(),Pt(12,"footer",7)(13,"p",8),Pn(14,"Realizado: Pablo Bravo"),gt()())},styles:["body[_ngcontent-%COMP%]{font-family:Montserrat,Helvetica,Arial,sans-serif;background-color:#ecf0f1;margin:0}a[_ngcontent-%COMP%], a[_ngcontent-%COMP%]:after, a[_ngcontent-%COMP%]:before{transition:all .3s ease-in-out}a[_ngcontent-%COMP%], a[_ngcontent-%COMP%]:hover, a[_ngcontent-%COMP%]:focus, a[_ngcontent-%COMP%]:active{outline:none;text-decoration:none}*[_ngcontent-%COMP%], *[_ngcontent-%COMP%]:after, *[_ngcontent-%COMP%]:before{box-sizing:border-box}header[_ngcontent-%COMP%]{position:relative;background-color:#d6d2bd;padding:8px 0;width:100%;float:left}.menu[_ngcontent-%COMP%]{position:relative;float:none;width:100%}.menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{float:right;padding:0;margin:0;list-style:none}.menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{float:left}.menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline-block;margin:5px;font-size:13px;letter-spacing:.03em;text-transform:uppercase;color:#fff;opacity:.6;position:relative;padding:8px 15px;width:initial}.menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{opacity:1}.container[_ngcontent-%COMP%]{width:1170px;margin:0 auto}.titulo[_ngcontent-%COMP%]{font-size:4rem;font-family:Arial,Helvetica,sans-serif;color:#000}.texto[_ngcontent-%COMP%]{font-size:1.5rem;font-family:Arial,Helvetica,sans-serif;color:#000}.barra[_ngcontent-%COMP%]{top:13px;color:#fff;left:0;position:absolute;text-transform:uppercase}.footer[_ngcontent-%COMP%]{background-color:#d6d2bd;padding:1rem 0;text-align:center;margin:2rem}.footer__texto[_ngcontent-%COMP%]{font-family:var(--fuentePrincipal);text-align:center;font-size:2.2rem}.estilo-input[_ngcontent-%COMP%]{margin-top:10px;padding:15rem;padding:10px;font-size:16px;border:2px solid #d6d2bd;border-radius:5px;width:93%}.estilo-button[_ngcontent-%COMP%]{padding:10px 20px;font-size:18px;background-color:#d6d2bd;color:#fff;border:none;border-radius:5px;cursor:pointer}.estilo-button[_ngcontent-%COMP%]:hover{background-color:#c6ac2a}.body-centering-image[_ngcontent-%COMP%]{margin:0;padding:0;display:flex;justify-content:center;align-items:center;height:100vh;background-color:#f0f0f0}.centered-container-image[_ngcontent-%COMP%]{text-align:center}.centered-img[_ngcontent-%COMP%]{max-width:100%;max-height:100%}.body-reset[_ngcontent-%COMP%]{margin:0;padding:0}.container[_ngcontent-%COMP%]{justify-content:space-between;align-items:center}.menu[_ngcontent-%COMP%]{align-items:center}.menu-link[_ngcontent-%COMP%]{color:#fff;text-decoration:none;margin-right:20px}.menu-list[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.menu-item[_ngcontent-%COMP%]{display:inline;margin-right:20px}#searchForm[_ngcontent-%COMP%]{text-align:center;margin:20px 0}.search-input[_ngcontent-%COMP%]{width:300px;padding:10px;border:1px solid #ccc;border-radius:5px;font-size:16px}.search-button[_ngcontent-%COMP%]{padding:10px 20px;background-color:#333;color:#fff;border:none;border-radius:5px;font-size:16px;cursor:pointer}.recipe-title[_ngcontent-%COMP%]{text-align:center;font-size:24px;margin:20px 0}.recipe-container[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:center}ul[_ngcontent-%COMP%]{text-align:center}#recipe-image[_ngcontent-%COMP%]{display:block;margin:0 auto 20px;max-width:100%}"]})}return t})();class yJ{}const vJ=[{path:"paginas/inicio",component:d8},{path:"paginas/nosotros",component:_J},{path:"paginas/recetas",component:mJ},{path:"paginas/formulario",component:(()=>{class t{constructor(n,r,i,o){this.receta=n,this.fb=r,this.recetasService=i,this.recetasFirebaseService=o,this.formulario=this.fb.group({nombre:["",Kw.required],ingredientes:["",Kw.required],pasos:["",Kw.required],imagen:[""]})}onSubmit(){if(this.formulario.valid){this.receta=this.formulario.value;const n=this.formulario.get("imagen");n&&n.value&&(this.recetasFirebaseService.save(this.receta),this.formulario.reset())}}onFileSelected(n){const r=n.target?.files;r&&r.length>0&&this.formulario.patchValue({imagen:r[0]})}static#e=this.\u0275fac=function(r){return new(r||t)(re(yJ),re(V9),re(c1),re(S2))};static#t=this.\u0275cmp=Eo({type:t,selectors:[["app-formulario"]],decls:20,vars:2,consts:[[1,"form-container"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","nombreReceta"],["type","text","id","nombreReceta","formControlName","nombre","required",""],["for","ingredientes"],["id","ingredientes","formControlName","ingredientes","required",""],["for","pasos"],["id","pasos","formControlName","pasos","required",""],["for","imagen"],["type","file","id","imagen",3,"change"],["type","submit",3,"disabled"]],template:function(r,i){1&r&&(Pt(0,"div",0)(1,"form",1),zr("ngSubmit",function(){return i.onSubmit()}),Pt(2,"div",2)(3,"label",3),Pn(4,"Nombre de la Receta:"),gt(),Ci(5,"input",4),gt(),Pt(6,"div",2)(7,"label",5),Pn(8,"Ingredientes:"),gt(),Ci(9,"textarea",6),gt(),Pt(10,"div",2)(11,"label",7),Pn(12,"Pasos:"),gt(),Ci(13,"textarea",8),gt(),Pt(14,"div",2)(15,"label",9),Pn(16,"Imagen:"),gt(),Pt(17,"input",10),zr("change",function(s){return i.onFileSelected(s)}),gt()(),Pt(18,"button",11),Pn(19,"Agregar Receta"),gt()()()),2&r&&(oo(1),ia("formGroup",i.formulario),oo(17),ia("disabled",i.formulario.invalid))},dependencies:[VN,g_,EN,wN,b_,A_,dC],styles:[".form-container[_ngcontent-%COMP%]{max-width:400px;margin:20px auto;padding:20px;background-color:#f4f4f4;border:1px solid #ccc;border-radius:5px;box-shadow:0 0 10px #0000001a}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}label[_ngcontent-%COMP%]{display:block;font-weight:700}input[type=text][_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ccc;border-radius:5px;font-size:16px}button[type=submit][_ngcontent-%COMP%]{display:block;width:100%;padding:10px;background-color:#007bff;color:#fff;border:none;border-radius:5px;font-size:16px;cursor:pointer}button[type=submit][_ngcontent-%COMP%]:hover{background-color:#0056b3}"]})}return t})()}];let IJ=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Bn({type:t});static#n=this.\u0275inj=ar({imports:[a1.forRoot(vJ),a1]})}return t})();class zp{constructor(e){return e}}class R2{constructor(){return(0,Kr.getApps)()}}const X0=new ce("angularfire2._apps"),wJ={provide:zp,useFactory:function EJ(t){return t&&1===t.length?t[0]:new zp((0,Kr.getApp)())},deps:[[new vi,X0]]},CJ={provide:R2,deps:[[new vi,X0]]};function TJ(t){return(e,n)=>{const r=e.runOutsideAngular(()=>t(n));return new zp(r)}}let DJ=(()=>{class t{constructor(n){(0,Kr.registerVersion)("angularfire",$C.full,"core"),(0,Kr.registerVersion)("angularfire",$C.full,"app"),(0,Kr.registerVersion)("angular",zb.full,n.toString())}static \u0275fac=function(r){return new(r||t)(se(hs))};static \u0275mod=Bn({type:t});static \u0275inj=ar({providers:[wJ,CJ]})}return t})();function AJ(t,...e){return{ngModule:DJ,providers:[{provide:X0,useFactory:TJ(t),multi:!0,deps:[It,wr,Q_,...e]}]}}const bJ=g1(Kr.initializeApp,!0);Me(562);class M2{constructor(){return jC("auth")}}class nA{constructor(e){return e}}const x2="firestore",rA=new ce("angularfire2.firestore-instances");function NJ(t){return(e,n)=>{const r=e.runOutsideAngular(()=>t(n));return new nA(r)}}const OJ={provide:class MJ{constructor(){return jC(x2)}},deps:[[new vi,rA]]},kJ={provide:nA,useFactory:function xJ(t,e){const n=function f1(t,e,n){if(e){if(1===e.length)return e[0];const o=e.filter(s=>s.app===n);if(1===o.length)return o[0]}return n.container.getProvider(t).getImmediate({optional:!0})}(x2,t,e);return n&&new nA(n)},deps:[[new vi,rA],zp]};let VJ=(()=>{class t{constructor(){(0,Kr.registerVersion)("angularfire",$C.full,"fst")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Bn({type:t});static \u0275inj=ar({providers:[kJ,OJ]})}return t})();function FJ(t,...e){return{ngModule:VJ,providers:[{provide:rA,useFactory:NJ(t),multi:!0,deps:[It,wr,Q_,R2,[new vi,M2],[new vi,HC],...e]}]}}const LJ=g1(KQ,!0),N2={firebaseConfig:{apiKey:"AIzaSyDhykvG47RIHyo-0Tqk0FnxYOm-R_fVTrE",authDomain:"practica-86363.firebaseapp.com",projectId:"practica-86363",storageBucket:"practica-86363.appspot.com",messagingSenderId:"179776909827",appId:"1:179776909827:web:90f9107857c31e0da3d436",measurementId:"G-0HPLJJJXP0"}};let UJ=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Bn({type:t,bootstrap:[l8]});static#n=this.\u0275inj=ar({providers:[{provide:J_,useValue:N2.firebaseConfig}],imports:[AJ(()=>bJ(N2.firebaseConfig)),FJ(()=>LJ()),R3,IJ,F9,L9]})}return t})();b3().bootstrapModule(UJ).catch(t=>console.error(t))},106:(Ri,Tn,Me)=>{Me.d(Tn,{Z:()=>Dn});var C=Me(58),q=Me(537),N=Me(534),Te=Me(879);class ft{constructor(Ve,Fe){this._delegate=Ve,this.firebase=Fe,(0,N._addComponent)(Ve,new q.wA("app-compat",()=>this,"PUBLIC")),this.container=Ve.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ve){this._delegate.automaticDataCollectionEnabled=Ve}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ve=>{this._delegate.checkDestroyed(),Ve()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,N.deleteApp)(this._delegate)))}_getService(Ve,Fe=N._DEFAULT_ENTRY_NAME){var On;this._delegate.checkDestroyed();const Zt=this._delegate.container.getProvider(Ve);return!Zt.isInitialized()&&"EXPLICIT"===(null===(On=Zt.getComponent())||void 0===On?void 0:On.instantiationMode)&&Zt.initialize(),Zt.getImmediate({identifier:Fe})}_removeServiceInstance(Ve,Fe=N._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ve).clearInstance(Fe)}_addComponent(Ve){(0,N._addComponent)(this._delegate,Ve)}_addOrOverwriteComponent(Ve){(0,N._addOrOverwriteComponent)(this._delegate,Ve)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const cn=new C.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),Z=function at(){const nt=function Ot(nt){const Ve={},Fe={__esModule:!0,initializeApp:function et(qe,te={}){const ot=N.initializeApp(qe,te);if((0,C.r3)(Ve,ot.name))return Ve[ot.name];const Lt=new nt(ot,Fe);return Ve[ot.name]=Lt,Lt},app:Zt,registerVersion:N.registerVersion,setLogLevel:N.setLogLevel,onLog:N.onLog,apps:null,SDK_VERSION:N.SDK_VERSION,INTERNAL:{registerComponent:function Pr(qe){const te=qe.name,ot=te.replace("-compat","");if(N._registerComponent(qe)&&"PUBLIC"===qe.type){const Lt=(on=Zt())=>{if("function"!=typeof on[ot])throw cn.create("invalid-app-argument",{appName:te});return on[ot]()};void 0!==qe.serviceProps&&(0,C.ZB)(Lt,qe.serviceProps),Fe[ot]=Lt,nt.prototype[ot]=function(...on){return this._getService.bind(this,te).apply(this,qe.multipleInstances?on:[])}}return"PUBLIC"===qe.type?Fe[ot]:null},removeApp:function On(qe){delete Ve[qe]},useAsService:function mn(qe,te){return"serverAuth"===te?null:te},modularAPIs:N}};function Zt(qe){if(!(0,C.r3)(Ve,qe=qe||N._DEFAULT_ENTRY_NAME))throw cn.create("no-app",{appName:qe});return Ve[qe]}return Fe.default=Fe,Object.defineProperty(Fe,"apps",{get:function Et(){return Object.keys(Ve).map(qe=>Ve[qe])}}),Zt.App=nt,Fe}(ft);return nt.INTERNAL=Object.assign(Object.assign({},nt.INTERNAL),{createFirebaseNamespace:at,extendNamespace:function Ve(Fe){(0,C.ZB)(nt,Fe)},createSubscribe:C.ne,ErrorFactory:C.LL,deepExtend:C.ZB}),nt}(),ie=new Te.Yd("@firebase/app-compat");if((0,C.jU)()&&void 0!==self.firebase){ie.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const nt=self.firebase.SDK_VERSION;nt&&nt.indexOf("LITE")>=0&&ie.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Dn=Z;!function pt(nt){(0,N.registerVersion)("@firebase/app-compat","0.2.23",nt)}()},534:(Ri,Tn,Me)=>{Me.r(Tn),Me.d(Tn,{FirebaseError:()=>Te.ZR,SDK_VERSION:()=>Oi,_DEFAULT_ENTRY_NAME:()=>fi,_addComponent:()=>Nr,_addOrOverwriteComponent:()=>Or,_apps:()=>Kn,_clearComponents:()=>dn,_components:()=>xr,_getProvider:()=>wt,_registerComponent:()=>Un,_removeServiceInstance:()=>kr,deleteApp:()=>_n,getApp:()=>gi,getApps:()=>Sn,initializeApp:()=>ki,onLog:()=>Os,registerVersion:()=>Vr,setLogLevel:()=>_o});var C=Me(861),q=Me(537),N=Me(879),Te=Me(58);const ft=(k,P)=>P.some(ee=>k instanceof ee);let Gt,cn;const Z=new WeakMap,ie=new WeakMap,Ce=new WeakMap,je=new WeakMap,pt=new WeakMap;let Ve={get(k,P,ee){if(k instanceof IDBTransaction){if("done"===P)return ie.get(k);if("objectStoreNames"===P)return k.objectStoreNames||Ce.get(k);if("store"===P)return ee.objectStoreNames[1]?void 0:ee.objectStore(ee.objectStoreNames[0])}return et(k[P])},set:(k,P,ee)=>(k[P]=ee,!0),has:(k,P)=>k instanceof IDBTransaction&&("done"===P||"store"===P)||P in k};function Zt(k){return"function"==typeof k?function On(k){return k!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function at(){return cn||(cn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(k)?function(...P){return k.apply(Et(this),P),et(Z.get(this))}:function(...P){return et(k.apply(Et(this),P))}:function(P,...ee){const we=k.call(Et(this),P,...ee);return Ce.set(we,P.sort?P.sort():[P]),et(we)}}(k):(k instanceof IDBTransaction&&function nt(k){if(ie.has(k))return;const P=new Promise((ee,we)=>{const Ge=()=>{k.removeEventListener("complete",Qe),k.removeEventListener("error",j),k.removeEventListener("abort",j)},Qe=()=>{ee(),Ge()},j=()=>{we(k.error||new DOMException("AbortError","AbortError")),Ge()};k.addEventListener("complete",Qe),k.addEventListener("error",j),k.addEventListener("abort",j)});ie.set(k,P)}(k),ft(k,function Ot(){return Gt||(Gt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(k,Ve):k)}function et(k){if(k instanceof IDBRequest)return function Dn(k){const P=new Promise((ee,we)=>{const Ge=()=>{k.removeEventListener("success",Qe),k.removeEventListener("error",j)},Qe=()=>{ee(et(k.result)),Ge()},j=()=>{we(k.error),Ge()};k.addEventListener("success",Qe),k.addEventListener("error",j)});return P.then(ee=>{ee instanceof IDBCursor&&Z.set(ee,k)}).catch(()=>{}),pt.set(P,k),P}(k);if(je.has(k))return je.get(k);const P=Zt(k);return P!==k&&(je.set(k,P),pt.set(P,k)),P}const Et=k=>pt.get(k),qe=["get","getKey","getAll","getAllKeys","count"],te=["put","add","delete","clear"],ot=new Map;function Lt(k,P){if(!(k instanceof IDBDatabase)||P in k||"string"!=typeof P)return;if(ot.get(P))return ot.get(P);const ee=P.replace(/FromIndex$/,""),we=P!==ee,Ge=te.includes(ee);if(!(ee in(we?IDBIndex:IDBObjectStore).prototype)||!Ge&&!qe.includes(ee))return;const Qe=function(){var j=(0,C.Z)(function*(fn,...Ee){const Xe=this.transaction(fn,Ge?"readwrite":"readonly");let La=Xe.store;return we&&(La=La.index(Ee.shift())),(yield Promise.all([La[ee](...Ee),Ge&&Xe.done]))[0]});return function(Ee){return j.apply(this,arguments)}}();return ot.set(P,Qe),Qe}!function Fe(k){Ve=k(Ve)}(k=>({...k,get:(P,ee,we)=>Lt(P,ee)||k.get(P,ee,we),has:(P,ee)=>!!Lt(P,ee)||k.has(P,ee)}));class on{constructor(P){this.container=P}getPlatformInfoString(){return this.container.getProviders().map(ee=>{if(function ln(k){const P=k.getComponent();return"VERSION"===P?.type}(ee)){const we=ee.getImmediate();return`${we.library}/${we.version}`}return null}).filter(ee=>ee).join(" ")}}const li="@firebase/app",We=new N.Yd("@firebase/app"),fi="[DEFAULT]",pi={[li]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Kn=new Map,xr=new Map;function Nr(k,P){try{k.container.addComponent(P)}catch(ee){We.debug(`Component ${P.name} failed to register with FirebaseApp ${k.name}`,ee)}}function Or(k,P){k.container.addOrOverwriteComponent(P)}function Un(k){const P=k.name;if(xr.has(P))return We.debug(`There were multiple attempts to register component ${P}.`),!1;xr.set(P,k);for(const ee of Kn.values())Nr(ee,k);return!0}function wt(k,P){const ee=k.container.getProvider("heartbeat").getImmediate({optional:!0});return ee&&ee.triggerHeartbeat(),k.container.getProvider(P)}function kr(k,P,ee=fi){wt(k,P).clearInstance(ee)}function dn(){xr.clear()}const Qt=new Te.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class hn{constructor(P,ee,we){this._isDeleted=!1,this._options=Object.assign({},P),this._config=Object.assign({},ee),this._name=ee.name,this._automaticDataCollectionEnabled=ee.automaticDataCollectionEnabled,this._container=we,this.container.addComponent(new q.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(P){this.checkDestroyed(),this._automaticDataCollectionEnabled=P}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(P){this._isDeleted=P}checkDestroyed(){if(this.isDeleted)throw Qt.create("app-deleted",{appName:this._name})}}const Oi="10.6.0";function ki(k,P={}){let ee=k;"object"!=typeof P&&(P={name:P});const we=Object.assign({name:fi,automaticDataCollectionEnabled:!1},P),Ge=we.name;if("string"!=typeof Ge||!Ge)throw Qt.create("bad-app-name",{appName:String(Ge)});if(ee||(ee=(0,Te.aH)()),!ee)throw Qt.create("no-options");const Qe=Kn.get(Ge);if(Qe){if((0,Te.vZ)(ee,Qe.options)&&(0,Te.vZ)(we,Qe.config))return Qe;throw Qt.create("duplicate-app",{appName:Ge})}const j=new q.H0(Ge);for(const Ee of xr.values())j.addComponent(Ee);const fn=new hn(ee,we,j);return Kn.set(Ge,fn),fn}function gi(k=fi){const P=Kn.get(k);if(!P&&k===fi&&(0,Te.aH)())return ki();if(!P)throw Qt.create("no-app",{appName:k});return P}function Sn(){return Array.from(Kn.values())}function _n(k){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,C.Z)(function*(k){const P=k.name;Kn.has(P)&&(Kn.delete(P),yield Promise.all(k.container.getProviders().map(ee=>ee.delete())),k.isDeleted=!0)})).apply(this,arguments)}function Vr(k,P,ee){var we;let Ge=null!==(we=pi[k])&&void 0!==we?we:k;ee&&(Ge+=`-${ee}`);const Qe=Ge.match(/\s|\//),j=P.match(/\s|\//);if(Qe||j){const fn=[`Unable to register library "${Ge}" with version "${P}":`];return Qe&&fn.push(`library name "${Ge}" contains illegal characters (whitespace or "/")`),Qe&&j&&fn.push("and"),j&&fn.push(`version name "${P}" contains illegal characters (whitespace or "/")`),void We.warn(fn.join(" "))}Un(new q.wA(`${Ge}-version`,()=>({library:Ge,version:P}),"VERSION"))}function Os(k,P){if(null!==k&&"function"!=typeof k)throw Qt.create("invalid-log-argument");(0,N.Am)(k,P)}function _o(k){(0,N.Ub)(k)}const Ko="firebase-heartbeat-database",Vi=1,S="firebase-heartbeat-store";let D=null;function I(){return D||(D=function Pr(k,P,{blocked:ee,upgrade:we,blocking:Ge,terminated:Qe}={}){const j=indexedDB.open(k,P),fn=et(j);return we&&j.addEventListener("upgradeneeded",Ee=>{we(et(j.result),Ee.oldVersion,Ee.newVersion,et(j.transaction),Ee)}),ee&&j.addEventListener("blocked",Ee=>ee(Ee.oldVersion,Ee.newVersion,Ee)),fn.then(Ee=>{Qe&&Ee.addEventListener("close",()=>Qe()),Ge&&Ee.addEventListener("versionchange",Xe=>Ge(Xe.oldVersion,Xe.newVersion,Xe))}).catch(()=>{}),fn}(Ko,Vi,{upgrade:(k,P)=>{0===P&&k.createObjectStore(S)}}).catch(k=>{throw Qt.create("idb-open",{originalErrorMessage:k.message})})),D}function v(){return(v=(0,C.Z)(function*(k){try{return yield(yield I()).transaction(S).objectStore(S).get(_e(k))}catch(P){if(P instanceof Te.ZR)We.warn(P.message);else{const ee=Qt.create("idb-get",{originalErrorMessage:P?.message});We.warn(ee.message)}}})).apply(this,arguments)}function A(k,P){return W.apply(this,arguments)}function W(){return(W=(0,C.Z)(function*(k,P){try{const we=(yield I()).transaction(S,"readwrite");yield we.objectStore(S).put(P,_e(k)),yield we.done}catch(ee){if(ee instanceof Te.ZR)We.warn(ee.message);else{const we=Qt.create("idb-set",{originalErrorMessage:ee?.message});We.warn(we.message)}}})).apply(this,arguments)}function _e(k){return`${k.name}!${k.options.appId}`}class lt{constructor(P){this.container=P,this._heartbeatsCache=null;const ee=this.container.getProvider("app").getImmediate();this._storage=new De(ee),this._heartbeatsCachePromise=this._storage.read().then(we=>(this._heartbeatsCache=we,we))}triggerHeartbeat(){var P=this;return(0,C.Z)(function*(){var ee;const Ge=P.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Qe=he();if(null==(null===(ee=P._heartbeatsCache)||void 0===ee?void 0:ee.heartbeats)&&(P._heartbeatsCache=yield P._heartbeatsCachePromise),P._heartbeatsCache.lastSentHeartbeatDate!==Qe&&!P._heartbeatsCache.heartbeats.some(j=>j.date===Qe))return P._heartbeatsCache.heartbeats.push({date:Qe,agent:Ge}),P._heartbeatsCache.heartbeats=P._heartbeatsCache.heartbeats.filter(j=>{const fn=new Date(j.date).valueOf();return Date.now()-fn<=2592e6}),P._storage.overwrite(P._heartbeatsCache)})()}getHeartbeatsHeader(){var P=this;return(0,C.Z)(function*(){var ee;if(null===P._heartbeatsCache&&(yield P._heartbeatsCachePromise),null==(null===(ee=P._heartbeatsCache)||void 0===ee?void 0:ee.heartbeats)||0===P._heartbeatsCache.heartbeats.length)return"";const we=he(),{heartbeatsToSend:Ge,unsentEntries:Qe}=function Dt(k,P=1024){const ee=[];let we=k.slice();for(const Ge of k){const Qe=ee.find(j=>j.agent===Ge.agent);if(Qe){if(Qe.dates.push(Ge.date),kn(ee)>P){Qe.dates.pop();break}}else if(ee.push({agent:Ge.agent,dates:[Ge.date]}),kn(ee)>P){ee.pop();break}we=we.slice(1)}return{heartbeatsToSend:ee,unsentEntries:we}}(P._heartbeatsCache.heartbeats),j=(0,Te.L)(JSON.stringify({version:2,heartbeats:Ge}));return P._heartbeatsCache.lastSentHeartbeatDate=we,Qe.length>0?(P._heartbeatsCache.heartbeats=Qe,yield P._storage.overwrite(P._heartbeatsCache)):(P._heartbeatsCache.heartbeats=[],P._storage.overwrite(P._heartbeatsCache)),j})()}}function he(){return(new Date).toISOString().substring(0,10)}class De{constructor(P){this.app=P,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,C.Z)(function*(){return!!(0,Te.hl)()&&(0,Te.eu)().then(()=>!0).catch(()=>!1)})()}read(){var P=this;return(0,C.Z)(function*(){return(yield P._canUseIndexedDBPromise)&&(yield function w(k){return v.apply(this,arguments)}(P.app))||{heartbeats:[]}})()}overwrite(P){var ee=this;return(0,C.Z)(function*(){var we;if(yield ee._canUseIndexedDBPromise){const Qe=yield ee.read();return A(ee.app,{lastSentHeartbeatDate:null!==(we=P.lastSentHeartbeatDate)&&void 0!==we?we:Qe.lastSentHeartbeatDate,heartbeats:P.heartbeats})}})()}add(P){var ee=this;return(0,C.Z)(function*(){var we;if(yield ee._canUseIndexedDBPromise){const Qe=yield ee.read();return A(ee.app,{lastSentHeartbeatDate:null!==(we=P.lastSentHeartbeatDate)&&void 0!==we?we:Qe.lastSentHeartbeatDate,heartbeats:[...Qe.heartbeats,...P.heartbeats]})}})()}}function kn(k){return(0,Te.L)(JSON.stringify({version:2,heartbeats:k})).length}!function Qo(k){Un(new q.wA("platform-logger",P=>new on(P),"PRIVATE")),Un(new q.wA("heartbeat",P=>new lt(P),"PRIVATE")),Vr(li,"0.9.23",k),Vr(li,"0.9.23","esm2017"),Vr("fire-js","")}("")},537:(Ri,Tn,Me)=>{Me.d(Tn,{H0:()=>Ot,wA:()=>N});var C=Me(861),q=Me(58);class N{constructor(Z,ie,Ce){this.name=Z,this.instanceFactory=ie,this.type=Ce,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(Z){return this.instantiationMode=Z,this}setMultipleInstances(Z){return this.multipleInstances=Z,this}setServiceProps(Z){return this.serviceProps=Z,this}setInstanceCreatedCallback(Z){return this.onInstanceCreated=Z,this}}const Te="[DEFAULT]";class ft{constructor(Z,ie){this.name=Z,this.container=ie,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(Z){const ie=this.normalizeInstanceIdentifier(Z);if(!this.instancesDeferred.has(ie)){const Ce=new q.BH;if(this.instancesDeferred.set(ie,Ce),this.isInitialized(ie)||this.shouldAutoInitialize())try{const je=this.getOrInitializeService({instanceIdentifier:ie});je&&Ce.resolve(je)}catch{}}return this.instancesDeferred.get(ie).promise}getImmediate(Z){var ie;const Ce=this.normalizeInstanceIdentifier(Z?.identifier),je=null!==(ie=Z?.optional)&&void 0!==ie&&ie;if(!this.isInitialized(Ce)&&!this.shouldAutoInitialize()){if(je)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Ce})}catch(pt){if(je)return null;throw pt}}getComponent(){return this.component}setComponent(Z){if(Z.name!==this.name)throw Error(`Mismatching Component ${Z.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=Z,this.shouldAutoInitialize()){if(function cn(at){return"EAGER"===at.instantiationMode}(Z))try{this.getOrInitializeService({instanceIdentifier:Te})}catch{}for(const[ie,Ce]of this.instancesDeferred.entries()){const je=this.normalizeInstanceIdentifier(ie);try{const pt=this.getOrInitializeService({instanceIdentifier:je});Ce.resolve(pt)}catch{}}}}clearInstance(Z=Te){this.instancesDeferred.delete(Z),this.instancesOptions.delete(Z),this.instances.delete(Z)}delete(){var Z=this;return(0,C.Z)(function*(){const ie=Array.from(Z.instances.values());yield Promise.all([...ie.filter(Ce=>"INTERNAL"in Ce).map(Ce=>Ce.INTERNAL.delete()),...ie.filter(Ce=>"_delete"in Ce).map(Ce=>Ce._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(Z=Te){return this.instances.has(Z)}getOptions(Z=Te){return this.instancesOptions.get(Z)||{}}initialize(Z={}){const{options:ie={}}=Z,Ce=this.normalizeInstanceIdentifier(Z.instanceIdentifier);if(this.isInitialized(Ce))throw Error(`${this.name}(${Ce}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const je=this.getOrInitializeService({instanceIdentifier:Ce,options:ie});for(const[pt,Dn]of this.instancesDeferred.entries())Ce===this.normalizeInstanceIdentifier(pt)&&Dn.resolve(je);return je}onInit(Z,ie){var Ce;const je=this.normalizeInstanceIdentifier(ie),pt=null!==(Ce=this.onInitCallbacks.get(je))&&void 0!==Ce?Ce:new Set;pt.add(Z),this.onInitCallbacks.set(je,pt);const Dn=this.instances.get(je);return Dn&&Z(Dn,je),()=>{pt.delete(Z)}}invokeOnInitCallbacks(Z,ie){const Ce=this.onInitCallbacks.get(ie);if(Ce)for(const je of Ce)try{je(Z,ie)}catch{}}getOrInitializeService({instanceIdentifier:Z,options:ie={}}){let Ce=this.instances.get(Z);if(!Ce&&this.component&&(Ce=this.component.instanceFactory(this.container,{instanceIdentifier:(at=Z,at===Te?void 0:at),options:ie}),this.instances.set(Z,Ce),this.instancesOptions.set(Z,ie),this.invokeOnInitCallbacks(Ce,Z),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Z,Ce)}catch{}var at;return Ce||null}normalizeInstanceIdentifier(Z=Te){return this.component?this.component.multipleInstances?Z:Te:Z}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ot{constructor(Z){this.name=Z,this.providers=new Map}addComponent(Z){const ie=this.getProvider(Z.name);if(ie.isComponentSet())throw new Error(`Component ${Z.name} has already been registered with ${this.name}`);ie.setComponent(Z)}addOrOverwriteComponent(Z){this.getProvider(Z.name).isComponentSet()&&this.providers.delete(Z.name),this.addComponent(Z)}getProvider(Z){if(this.providers.has(Z))return this.providers.get(Z);const ie=new ft(Z,this);return this.providers.set(Z,ie),ie}getProviders(){return Array.from(this.providers.values())}}},879:(Ri,Tn,Me)=>{Me.d(Tn,{Am:()=>at,Ub:()=>Ot,Yd:()=>cn,in:()=>q});const C=[];var q=function(Z){return Z[Z.DEBUG=0]="DEBUG",Z[Z.VERBOSE=1]="VERBOSE",Z[Z.INFO=2]="INFO",Z[Z.WARN=3]="WARN",Z[Z.ERROR=4]="ERROR",Z[Z.SILENT=5]="SILENT",Z}(q||{});const N={debug:q.DEBUG,verbose:q.VERBOSE,info:q.INFO,warn:q.WARN,error:q.ERROR,silent:q.SILENT},Te=q.INFO,ft={[q.DEBUG]:"log",[q.VERBOSE]:"log",[q.INFO]:"info",[q.WARN]:"warn",[q.ERROR]:"error"},Gt=(Z,ie,...Ce)=>{if(ie<Z.logLevel)return;const je=(new Date).toISOString(),pt=ft[ie];if(!pt)throw new Error(`Attempted to log a message with an invalid logType (value: ${ie})`);console[pt](`[${je}]  ${Z.name}:`,...Ce)};class cn{constructor(ie){this.name=ie,this._logLevel=Te,this._logHandler=Gt,this._userLogHandler=null,C.push(this)}get logLevel(){return this._logLevel}set logLevel(ie){if(!(ie in q))throw new TypeError(`Invalid value "${ie}" assigned to \`logLevel\``);this._logLevel=ie}setLogLevel(ie){this._logLevel="string"==typeof ie?N[ie]:ie}get logHandler(){return this._logHandler}set logHandler(ie){if("function"!=typeof ie)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ie}get userLogHandler(){return this._userLogHandler}set userLogHandler(ie){this._userLogHandler=ie}debug(...ie){this._userLogHandler&&this._userLogHandler(this,q.DEBUG,...ie),this._logHandler(this,q.DEBUG,...ie)}log(...ie){this._userLogHandler&&this._userLogHandler(this,q.VERBOSE,...ie),this._logHandler(this,q.VERBOSE,...ie)}info(...ie){this._userLogHandler&&this._userLogHandler(this,q.INFO,...ie),this._logHandler(this,q.INFO,...ie)}warn(...ie){this._userLogHandler&&this._userLogHandler(this,q.WARN,...ie),this._logHandler(this,q.WARN,...ie)}error(...ie){this._userLogHandler&&this._userLogHandler(this,q.ERROR,...ie),this._logHandler(this,q.ERROR,...ie)}}function Ot(Z){C.forEach(ie=>{ie.setLogLevel(Z)})}function at(Z,ie){for(const Ce of C){let je=null;ie&&ie.level&&(je=N[ie.level]),Ce.userLogHandler=null===Z?null:(pt,Dn,...nt)=>{const Ve=nt.map(Fe=>{if(null==Fe)return null;if("string"==typeof Fe)return Fe;if("number"==typeof Fe||"boolean"==typeof Fe)return Fe.toString();if(Fe instanceof Error)return Fe.message;try{return JSON.stringify(Fe)}catch{return null}}).filter(Fe=>Fe).join(" ");Dn>=(je??pt.logLevel)&&Z({level:q[Dn].toLowerCase(),message:Ve,args:nt,type:pt.name})}}}},365:(Ri,Tn,Me)=>{Me.r(Tn);var C=Me(861),q=Me(106),N=Me(562),Te=Me(58),cn=(Me(534),Me(879),Me(537));function Ot(){return window}function ie(){return ie=(0,C.Z)(function*(I,w,v){var A;const{BuildInfo:W}=Ot();(0,N.au)(w.sessionId,"AuthEvent did not contain a session ID");const _e=yield function Fe(I){return On.apply(this,arguments)}(w.sessionId),ve={};return(0,N.av)()?ve.ibi=W.packageName:(0,N.aw)()?ve.apn=W.packageName:(0,N.ax)(I,"operation-not-supported-in-this-environment"),W.displayName&&(ve.appDisplayName=W.displayName),ve.sessionId=_e,(0,N.ay)(I,v,w.type,void 0,null!==(A=w.eventId)&&void 0!==A?A:void 0,ve)}),ie.apply(this,arguments)}function je(){return(je=(0,C.Z)(function*(I){const{BuildInfo:w}=Ot(),v={};(0,N.av)()?v.iosBundleId=w.packageName:(0,N.aw)()?v.androidPackageName=w.packageName:(0,N.ax)(I,"operation-not-supported-in-this-environment"),yield(0,N.az)(I,v)})).apply(this,arguments)}function nt(){return(nt=(0,C.Z)(function*(I,w,v){const{cordova:A}=Ot();let W=()=>{};try{yield new Promise((_e,ve)=>{let Oe=null;function lt(){var De;_e();const kn=null===(De=A.plugins.browsertab)||void 0===De?void 0:De.close;"function"==typeof kn&&kn(),"function"==typeof v?.close&&v.close()}function he(){Oe||(Oe=window.setTimeout(()=>{ve((0,N.aB)(I,"redirect-cancelled-by-user"))},2e3))}function Dt(){"visible"===document?.visibilityState&&he()}w.addPassiveListener(lt),document.addEventListener("resume",he,!1),(0,N.aw)()&&document.addEventListener("visibilitychange",Dt,!1),W=()=>{w.removePassiveListener(lt),document.removeEventListener("resume",he,!1),document.removeEventListener("visibilitychange",Dt,!1),Oe&&window.clearTimeout(Oe)}})}finally{W()}})).apply(this,arguments)}function On(){return(On=(0,C.Z)(function*(I){const w=function Zt(I){if((0,N.au)(/[0-9a-zA-Z]+/.test(I),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(I);const w=new ArrayBuffer(I.length),v=new Uint8Array(w);for(let A=0;A<I.length;A++)v[A]=I.charCodeAt(A);return v}(I),v=yield crypto.subtle.digest("SHA-256",w);return Array.from(new Uint8Array(v)).map(W=>W.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class Et extends N.aD{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(w=>{this.resolveInialized=w})}addPassiveListener(w){this.passiveListeners.add(w)}removePassiveListener(w){this.passiveListeners.delete(w)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(w){return this.resolveInialized(),this.passiveListeners.forEach(v=>v(w)),super.onEvent(w)}initialized(){var w=this;return(0,C.Z)(function*(){yield w.initPromise})()}}function qe(I){return te.apply(this,arguments)}function te(){return(te=(0,C.Z)(function*(I){const w=yield on()._get(ln(I));return w&&(yield on()._remove(ln(I))),w})).apply(this,arguments)}function Lt(){const I=[];for(let v=0;v<20;v++){const A=Math.floor(62*Math.random());I.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(A))}return I.join("")}function on(){return(0,N.aE)(N.b)}function ln(I){return(0,N.aF)("authEvent",I.config.apiKey,I.name)}function We(I){if(!I?.includes("?"))return{};const[w,...v]=I.split("?");return(0,Te.zd)(v.join("?"))}const L=class Pi{constructor(){this._redirectPersistence=N.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=N.aG,this._overrideRedirectResult=N.aH}_initialize(w){var v=this;return(0,C.Z)(function*(){const A=w._key();let W=v.eventManagers.get(A);return W||(W=new Et(w),v.eventManagers.set(A,W),v.attachCallbackListeners(w,W)),W})()}_openPopup(w){(0,N.ax)(w,"operation-not-supported-in-this-environment")}_openRedirect(w,v,A,W){var _e=this;return(0,C.Z)(function*(){!function Ve(I){var w,v,A,W,_e,ve,Oe,lt,he,Dt;const De=Ot();(0,N.aC)("function"==typeof(null===(w=De?.universalLinks)||void 0===w?void 0:w.subscribe),I,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,N.aC)(typeof(null===(v=De?.BuildInfo)||void 0===v?void 0:v.packageName)<"u",I,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,N.aC)("function"==typeof(null===(_e=null===(W=null===(A=De?.cordova)||void 0===A?void 0:A.plugins)||void 0===W?void 0:W.browsertab)||void 0===_e?void 0:_e.openUrl),I,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,N.aC)("function"==typeof(null===(lt=null===(Oe=null===(ve=De?.cordova)||void 0===ve?void 0:ve.plugins)||void 0===Oe?void 0:Oe.browsertab)||void 0===lt?void 0:lt.isAvailable),I,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,N.aC)("function"==typeof(null===(Dt=null===(he=De?.cordova)||void 0===he?void 0:he.InAppBrowser)||void 0===Dt?void 0:Dt.open),I,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(w);const ve=yield _e._initialize(w);yield ve.initialized(),ve.resetRedirect(),(0,N.aI)(),yield _e._originValidation(w);const Oe=function Pr(I,w,v=null){return{type:w,eventId:v,urlResponse:null,sessionId:Lt(),postBody:null,tenantId:I.tenantId,error:(0,N.aB)(I,"no-auth-event")}}(w,A,W);yield function mn(I,w){return on()._set(ln(I),w)}(w,Oe);const lt=yield function Z(I,w,v){return ie.apply(this,arguments)}(w,Oe,v),he=yield function pt(I){const{cordova:w}=Ot();return new Promise(v=>{w.plugins.browsertab.isAvailable(A=>{let W=null;A?w.plugins.browsertab.openUrl(I):W=w.InAppBrowser.open(I,(0,N.aA)()?"_blank":"_system","location=yes"),v(W)})})}(lt);return function Dn(I,w,v){return nt.apply(this,arguments)}(w,ve,he)})()}_isIframeWebStorageSupported(w,v){throw new Error("Method not implemented.")}_originValidation(w){const v=w._key();return this.originValidationPromises[v]||(this.originValidationPromises[v]=function Ce(I){return je.apply(this,arguments)}(w)),this.originValidationPromises[v]}attachCallbackListeners(w,v){const{universalLinks:A,handleOpenURL:W,BuildInfo:_e}=Ot(),ve=setTimeout((0,C.Z)(function*(){yield qe(w),v.onEvent($())}),500),Oe=function(){var Dt=(0,C.Z)(function*(De){clearTimeout(ve);const kn=yield qe(w);let Qo=null;kn&&De?.url&&(Qo=function ot(I,w){var v,A;const W=function di(I){const w=We(I),v=w.link?decodeURIComponent(w.link):void 0,A=We(v).link,W=w.deep_link_id?decodeURIComponent(w.deep_link_id):void 0;return We(W).link||W||A||v||I}(w);if(W.includes("/__/auth/callback")){const _e=We(W),ve=_e.firebaseError?function li(I){try{return JSON.parse(I)}catch{return null}}(decodeURIComponent(_e.firebaseError)):null,Oe=null===(A=null===(v=ve?.code)||void 0===v?void 0:v.split("auth/"))||void 0===A?void 0:A[1],lt=Oe?(0,N.aB)(Oe):null;return lt?{type:I.type,eventId:I.eventId,tenantId:I.tenantId,error:lt,urlResponse:null,sessionId:null,postBody:null}:{type:I.type,eventId:I.eventId,tenantId:I.tenantId,sessionId:I.sessionId,urlResponse:W,postBody:null}}return null}(kn,De.url)),v.onEvent(Qo||$())});return function(kn){return Dt.apply(this,arguments)}}();typeof A<"u"&&"function"==typeof A.subscribe&&A.subscribe(null,Oe);const lt=W,he=`${_e.packageName.toLowerCase()}://`;Ot().handleOpenURL=function(){var Dt=(0,C.Z)(function*(De){if(De.toLowerCase().startsWith(he)&&Oe({url:De}),"function"==typeof lt)try{lt(De)}catch(kn){console.error(kn)}});return function(De){return Dt.apply(this,arguments)}}()}};function $(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,N.aB)("no-auth-event")}}function ue(){var I;return(null===(I=self?.location)||void 0===I?void 0:I.protocol)||null}function ge(I=(0,Te.z$)()){return!("file:"!==ue()&&"ionic:"!==ue()&&"capacitor:"!==ue()||!I.toLowerCase().match(/iphone|ipad|ipod|android/))}function Kt(){try{const I=self.localStorage,w=N.aN();if(I)return I.setItem(w,"1"),I.removeItem(w),!function St(I=(0,Te.z$)()){return function ut(){return(0,Te.w1)()&&11===document?.documentMode}()||function Bt(I=(0,Te.z$)()){return/Edge\/\d+/.test(I)}(I)}()||(0,Te.hl)()}catch{return An()&&(0,Te.hl)()}return!1}function An(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function bn(){return(function Je(){return"http:"===ue()||"https:"===ue()}()||(0,Te.ru)()||ge())&&!function Re(){return(0,Te.b$)()||(0,Te.UG)()}()&&Kt()&&!An()}function Ln(){return ge()&&typeof document<"u"}function hi(){return(hi=(0,C.Z)(function*(){return!!Ln()&&new Promise(I=>{const w=setTimeout(()=>{I(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(w),I(!0)})})})).apply(this,arguments)}const ct={LOCAL:"local",NONE:"none",SESSION:"session"},xi=N.aC,Ni="persistence";function pi(I){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,C.Z)(function*(I){yield I._initializationPromise;const w=Nr(),v=N.aF(Ni,I.config.apiKey,I.name);w&&w.setItem(v,I._getPersistence())})).apply(this,arguments)}function Nr(){var I;try{return(null===(I=function Mi(){return typeof window<"u"?window:null}())||void 0===I?void 0:I.sessionStorage)||null}catch{return null}}const Or=N.aC;class Un{constructor(){this.browserResolver=N.aE(N.k),this.cordovaResolver=N.aE(L),this.underlyingResolver=null,this._redirectPersistence=N.a,this._completeRedirectFn=N.aG,this._overrideRedirectResult=N.aH}_initialize(w){var v=this;return(0,C.Z)(function*(){return yield v.selectUnderlyingResolver(),v.assertedUnderlyingResolver._initialize(w)})()}_openPopup(w,v,A,W){var _e=this;return(0,C.Z)(function*(){return yield _e.selectUnderlyingResolver(),_e.assertedUnderlyingResolver._openPopup(w,v,A,W)})()}_openRedirect(w,v,A,W){var _e=this;return(0,C.Z)(function*(){return yield _e.selectUnderlyingResolver(),_e.assertedUnderlyingResolver._openRedirect(w,v,A,W)})()}_isIframeWebStorageSupported(w,v){this.assertedUnderlyingResolver._isIframeWebStorageSupported(w,v)}_originValidation(w){return this.assertedUnderlyingResolver._originValidation(w)}get _shouldInitProactively(){return Ln()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Or(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var w=this;return(0,C.Z)(function*(){if(w.underlyingResolver)return;const v=yield function vr(){return hi.apply(this,arguments)}();w.underlyingResolver=v?w.cordovaResolver:w.browserResolver})()}}function wt(I){return I.unwrap()}function dn(I){return Qt(I)}function Qt(I){const{_tokenResponse:w}=I instanceof Te.ZR?I.customData:I;if(!w)return null;if(!(I instanceof Te.ZR)&&"temporaryProof"in w&&"phoneNumber"in w)return N.P.credentialFromResult(I);const v=w.providerId;if(!v||v===N.p.PASSWORD)return null;let A;switch(v){case N.p.GOOGLE:A=N.X;break;case N.p.FACEBOOK:A=N.W;break;case N.p.GITHUB:A=N.Y;break;case N.p.TWITTER:A=N.$;break;default:const{oauthIdToken:W,oauthAccessToken:_e,oauthTokenSecret:ve,pendingToken:Oe,nonce:lt}=w;return _e||ve||W||Oe?Oe?v.startsWith("saml.")?N.aQ._create(v,Oe):N.N._fromParams({providerId:v,signInMethod:v,pendingToken:Oe,idToken:W,accessToken:_e}):new N.Z(v).credential({idToken:W,accessToken:_e,rawNonce:lt}):null}return I instanceof Te.ZR?A.credentialFromError(I):A.credentialFromResult(I)}function hn(I,w){return w.catch(v=>{throw v instanceof Te.ZR&&function Fa(I,w){var v;const A=null===(v=w.customData)||void 0===v?void 0:v._tokenResponse;if("auth/multi-factor-auth-required"===w?.code)w.resolver=new gi(I,N.as(I,w));else if(A){const W=Qt(w),_e=w;W&&(_e.credential=W,_e.tenantId=A.tenantId||void 0,_e.email=A.email||void 0,_e.phoneNumber=A.phoneNumber||void 0)}}(I,v),v}).then(v=>{const W=v.user;return{operationType:v.operationType,credential:dn(v),additionalUserInfo:N.aq(v),user:Sn.getOrCreate(W)}})}function Oi(I,w){return ki.apply(this,arguments)}function ki(){return(ki=(0,C.Z)(function*(I,w){const v=yield w;return{verificationId:v.verificationId,confirm:A=>hn(I,v.confirm(A))}})).apply(this,arguments)}class gi{constructor(w,v){this.resolver=v,this.auth=function kr(I){return I.wrapped()}(w)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(w){return hn(wt(this.auth),this.resolver.resolveSignIn(w))}}class Sn{constructor(w){this._delegate=w,this.multiFactor=N.at(w)}static getOrCreate(w){return Sn.USER_MAP.has(w)||Sn.USER_MAP.set(w,new Sn(w)),Sn.USER_MAP.get(w)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(w){return this._delegate.getIdTokenResult(w)}getIdToken(w){return this._delegate.getIdToken(w)}linkAndRetrieveDataWithCredential(w){return this.linkWithCredential(w)}linkWithCredential(w){var v=this;return(0,C.Z)(function*(){return hn(v.auth,N.a2(v._delegate,w))})()}linkWithPhoneNumber(w,v){var A=this;return(0,C.Z)(function*(){return Oi(A.auth,N.l(A._delegate,w,v))})()}linkWithPopup(w){var v=this;return(0,C.Z)(function*(){return hn(v.auth,N.d(v._delegate,w,Un))})()}linkWithRedirect(w){var v=this;return(0,C.Z)(function*(){return yield pi(N.aJ(v.auth)),N.g(v._delegate,w,Un)})()}reauthenticateAndRetrieveDataWithCredential(w){return this.reauthenticateWithCredential(w)}reauthenticateWithCredential(w){var v=this;return(0,C.Z)(function*(){return hn(v.auth,N.a3(v._delegate,w))})()}reauthenticateWithPhoneNumber(w,v){return Oi(this.auth,N.r(this._delegate,w,v))}reauthenticateWithPopup(w){return hn(this.auth,N.e(this._delegate,w,Un))}reauthenticateWithRedirect(w){var v=this;return(0,C.Z)(function*(){return yield pi(N.aJ(v.auth)),N.h(v._delegate,w,Un)})()}sendEmailVerification(w){return N.ag(this._delegate,w)}unlink(w){var v=this;return(0,C.Z)(function*(){return yield N.ap(v._delegate,w),v})()}updateEmail(w){return N.al(this._delegate,w)}updatePassword(w){return N.am(this._delegate,w)}updatePhoneNumber(w){return N.u(this._delegate,w)}updateProfile(w){return N.ak(this._delegate,w)}verifyBeforeUpdateEmail(w,v){return N.ah(this._delegate,w,v)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Sn.USER_MAP=new WeakMap;const _n=N.aC;let Qn=(()=>{class I{constructor(v,A){if(this.app=v,A.isInitialized())return this._delegate=A.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:W}=v.options;_n(W,"invalid-api-key",{appName:v.name}),_n(W,"invalid-api-key",{appName:v.name});const _e=typeof window<"u"?Un:void 0;this._delegate=A.initialize({options:{persistence:Os(W,v.name),popupRedirectResolver:_e}}),this._delegate._updateErrorMap(N.G),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Sn.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(v){this._delegate.languageCode=v}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(v){this._delegate.tenantId=v}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(v,A){N.K(this._delegate,v,A)}applyActionCode(v){return N.a7(this._delegate,v)}checkActionCode(v){return N.a8(this._delegate,v)}confirmPasswordReset(v,A){return N.a6(this._delegate,v,A)}createUserWithEmailAndPassword(v,A){var W=this;return(0,C.Z)(function*(){return hn(W._delegate,N.aa(W._delegate,v,A))})()}fetchProvidersForEmail(v){return this.fetchSignInMethodsForEmail(v)}fetchSignInMethodsForEmail(v){return N.af(this._delegate,v)}isSignInWithEmailLink(v){return N.ad(this._delegate,v)}getRedirectResult(){var v=this;return(0,C.Z)(function*(){_n(bn(),v._delegate,"operation-not-supported-in-this-environment");const A=yield N.j(v._delegate,Un);return A?hn(v._delegate,Promise.resolve(A)):{credential:null,user:null}})()}addFrameworkForLogging(v){!function H(I,w){(0,N.aJ)(I)._logFramework(w)}(this._delegate,v)}onAuthStateChanged(v,A,W){const{next:_e,error:ve,complete:Oe}=Vr(v,A,W);return this._delegate.onAuthStateChanged(_e,ve,Oe)}onIdTokenChanged(v,A,W){const{next:_e,error:ve,complete:Oe}=Vr(v,A,W);return this._delegate.onIdTokenChanged(_e,ve,Oe)}sendSignInLinkToEmail(v,A){return N.ac(this._delegate,v,A)}sendPasswordResetEmail(v,A){return N.a5(this._delegate,v,A||void 0)}setPersistence(v){var A=this;return(0,C.Z)(function*(){let W;switch(function fi(I,w){xi(Object.values(ct).includes(w),I,"invalid-persistence-type"),(0,Te.b$)()?xi(w!==ct.SESSION,I,"unsupported-persistence-type"):(0,Te.UG)()?xi(w===ct.NONE,I,"unsupported-persistence-type"):An()?xi(w===ct.NONE||w===ct.LOCAL&&(0,Te.hl)(),I,"unsupported-persistence-type"):xi(w===ct.NONE||Kt(),I,"unsupported-persistence-type")}(A._delegate,v),v){case ct.SESSION:W=N.a;break;case ct.LOCAL:W=(yield N.aE(N.i)._isAvailable())?N.i:N.b;break;case ct.NONE:W=N.U;break;default:return N.ax("argument-error",{appName:A._delegate.name})}return A._delegate.setPersistence(W)})()}signInAndRetrieveDataWithCredential(v){return this.signInWithCredential(v)}signInAnonymously(){return hn(this._delegate,N.a0(this._delegate))}signInWithCredential(v){return hn(this._delegate,N.a1(this._delegate,v))}signInWithCustomToken(v){return hn(this._delegate,N.a4(this._delegate,v))}signInWithEmailAndPassword(v,A){return hn(this._delegate,N.ab(this._delegate,v,A))}signInWithEmailLink(v,A){return hn(this._delegate,N.ae(this._delegate,v,A))}signInWithPhoneNumber(v,A){return Oi(this._delegate,N.s(this._delegate,v,A))}signInWithPopup(v){var A=this;return(0,C.Z)(function*(){return _n(bn(),A._delegate,"operation-not-supported-in-this-environment"),hn(A._delegate,N.c(A._delegate,v,Un))})()}signInWithRedirect(v){var A=this;return(0,C.Z)(function*(){return _n(bn(),A._delegate,"operation-not-supported-in-this-environment"),yield pi(A._delegate),N.f(A._delegate,v,Un)})()}updateCurrentUser(v){return this._delegate.updateCurrentUser(v)}verifyPasswordResetCode(v){return N.a9(this._delegate,v)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return I.Persistence=ct,I})();function Vr(I,w,v){let A=I;"function"!=typeof I&&({next:A,error:w,complete:v}=I);const W=A;return{next:ve=>W(ve&&Sn.getOrCreate(ve)),error:w,complete:v}}function Os(I,w){const v=function xr(I,w){const v=Nr();if(!v)return[];const A=N.aF(Ni,I,w);switch(v.getItem(A)){case ct.NONE:return[N.U];case ct.LOCAL:return[N.i,N.a];case ct.SESSION:return[N.a];default:return[]}}(I,w);if(typeof self<"u"&&!v.includes(N.i)&&v.push(N.i),typeof window<"u")for(const A of[N.b,N.a])v.includes(A)||v.push(A);return v.includes(N.U)||v.push(N.U),v}class _o{constructor(){this.providerId="phone",this._delegate=new N.P(wt(q.Z.auth()))}static credential(w,v){return N.P.credential(w,v)}verifyPhoneNumber(w,v){return this._delegate.verifyPhoneNumber(w,v)}unwrap(){return this._delegate}}_o.PHONE_SIGN_IN_METHOD=N.P.PHONE_SIGN_IN_METHOD,_o.PROVIDER_ID=N.P.PROVIDER_ID;const Ko=N.aC;class Vi{constructor(w,v,A=q.Z.app()){var W;Ko(null===(W=A.options)||void 0===W?void 0:W.apiKey,"invalid-api-key",{appName:A.name}),this._delegate=new N.R(A.auth(),w,v),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function D(I){I.INTERNAL.registerComponent(new cn.wA("auth-compat",w=>{const v=w.getProvider("app-compat").getImmediate(),A=w.getProvider("auth");return new Qn(v,A)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:N.A.EMAIL_SIGNIN,PASSWORD_RESET:N.A.PASSWORD_RESET,RECOVER_EMAIL:N.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:N.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:N.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:N.A.VERIFY_EMAIL}},EmailAuthProvider:N.V,FacebookAuthProvider:N.W,GithubAuthProvider:N.Y,GoogleAuthProvider:N.X,OAuthProvider:N.Z,SAMLAuthProvider:N._,PhoneAuthProvider:_o,PhoneMultiFactorGenerator:N.m,RecaptchaVerifier:Vi,TwitterAuthProvider:N.$,Auth:Qn,AuthCredential:N.L,Error:Te.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),I.registerVersion("@firebase/auth-compat","0.4.9")}(q.Z)},861:(Ri,Tn,Me)=>{function C(N,Te,ft,Gt,cn,Ot,at){try{var Z=N[Ot](at),ie=Z.value}catch(Ce){return void ft(Ce)}Z.done?Te(ie):Promise.resolve(ie).then(Gt,cn)}function q(N){return function(){var Te=this,ft=arguments;return new Promise(function(Gt,cn){var Ot=N.apply(Te,ft);function at(ie){C(Ot,Gt,cn,at,Z,"next",ie)}function Z(ie){C(Ot,Gt,cn,at,Z,"throw",ie)}at(void 0)})}}Me.d(Tn,{Z:()=>q})},582:(Ri,Tn,Me)=>{function Te(L,$){var H={};for(var V in L)Object.prototype.hasOwnProperty.call(L,V)&&$.indexOf(V)<0&&(H[V]=L[V]);if(null!=L&&"function"==typeof Object.getOwnPropertySymbols){var Q=0;for(V=Object.getOwnPropertySymbols(L);Q<V.length;Q++)$.indexOf(V[Q])<0&&Object.prototype.propertyIsEnumerable.call(L,V[Q])&&(H[V[Q]]=L[V[Q]])}return H}function Ce(L,$,H,V){return new(H||(H=Promise))(function(K,ue){function Je(ut){try{Re(V.next(ut))}catch(Bt){ue(Bt)}}function ge(ut){try{Re(V.throw(ut))}catch(Bt){ue(Bt)}}function Re(ut){ut.done?K(ut.value):function Q(K){return K instanceof H?K:new H(function(ue){ue(K)})}(ut.value).then(Je,ge)}Re((V=V.apply(L,$||[])).next())})}function et(L){return this instanceof et?(this.v=L,this):new et(L)}function Et(L,$,H){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Q,V=H.apply(L,$||[]),K=[];return Q={},ue("next"),ue("throw"),ue("return"),Q[Symbol.asyncIterator]=function(){return this},Q;function ue(St){V[St]&&(Q[St]=function(Kt){return new Promise(function(An,bn){K.push([St,Kt,An,bn])>1||Je(St,Kt)})})}function Je(St,Kt){try{!function ge(St){St.value instanceof et?Promise.resolve(St.value.v).then(Re,ut):Bt(K[0][2],St)}(V[St](Kt))}catch(An){Bt(K[0][3],An)}}function Re(St){Je("next",St)}function ut(St){Je("throw",St)}function Bt(St,Kt){St(Kt),K.shift(),K.length&&Je(K[0][0],K[0][1])}}function mn(L){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var H,$=L[Symbol.asyncIterator];return $?$.call(L):(L=function nt(L){var $="function"==typeof Symbol&&Symbol.iterator,H=$&&L[$],V=0;if(H)return H.call(L);if(L&&"number"==typeof L.length)return{next:function(){return L&&V>=L.length&&(L=void 0),{value:L&&L[V++],done:!L}}};throw new TypeError($?"Object is not iterable.":"Symbol.iterator is not defined.")}(L),H={},V("next"),V("throw"),V("return"),H[Symbol.asyncIterator]=function(){return this},H);function V(K){H[K]=L[K]&&function(ue){return new Promise(function(Je,ge){!function Q(K,ue,Je,ge){Promise.resolve(ge).then(function(Re){K({value:Re,done:Je})},ue)}(Je,ge,(ue=L[K](ue)).done,ue.value)})}}}Me.d(Tn,{FC:()=>Et,KL:()=>mn,_T:()=>Te,mG:()=>Ce,qq:()=>et}),"function"==typeof SuppressedError&&SuppressedError}},Ri=>{Ri(Ri.s=178)}]);